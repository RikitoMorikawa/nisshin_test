"use strict";(self.webpackChunknisshin=self.webpackChunknisshin||[]).push([[259],{6259:(ze,R,i)=>{i.r(R),i.d(R,{PbMainModule:()=>je});var g=i(6895),u=i(4006),b=i(1690),A=i(727),C=i(9300),J=i(4128),p=i(262),f=i(9646),D=i(8746),h=i(8037),d=i(6585),v=i(529),E=i(1267),I=i(349),t=i(1571),F=i(1609),W=i(4004),tt=i(2340),et=i(1751);let y=(()=>{class o extends et.O{constructor(){super(...arguments),this.endpoint=tt.pU.productBookThirdCategoryApi.endpoint}getAll(e={}){return this.httpOptions.params=e,this.http.get(this.endpoint,this.httpOptions).pipe((0,p.K)(this.setErrorMessage("\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u4e00\u89a7\u306e\u53d6\u5f97")))}find(e){return this.http.get(`${this.endpoint}/${e}`).pipe((0,p.K)(this.setErrorMessage("\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u60c5\u5831\u306e\u53d6\u5f97")))}getCsv(e){const n={responseType:"text",headers:new v.WM({"X-Download":e})};return this.http.get(this.endpoint,n).pipe((0,p.K)(this.setErrorMessage("\u4e00\u62ec\u767b\u9332\u7528\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u53d6\u5f97")))}add(e){const n=this.generateFormData(e);return this.http.post(this.endpoint,n).pipe((0,p.K)(this.setErrorMessage("\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u60c5\u5831\u306e\u767b\u9332")))}bulkAdd(e){const n=this.generateFormData({file:e});return this.http.put(this.endpoint,n)}update(e,n){const s=this.generateFormData(n);return this.http.patch(`${this.endpoint}/${e}`,s).pipe((0,p.K)(this.setErrorMessage("\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u60c5\u5831\u306e\u66f4\u65b0")))}remove(e){return this.http.delete(`${this.endpoint}/${e}`).pipe((0,p.K)(this.setErrorMessage("\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u60c5\u5831\u306e\u524a\u9664")))}getAsSelectOptions(e){return this.getAll(e).pipe((0,W.U)(n=>n.data.map(s=>({value:s.id,text:s.name}))))}}return o.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(o)))(n||o)}}(),o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var w=i(765),Y=i(2e3),Q=i(6082),x=i(2334),B=i(8782),q=i(1269),T=i(8832),Z=i(7030),S=i(1805),V=i(387),M=i(2195),U=i(5146),j=i(1451),z=i(9612),G=i(8461);function ot(o,r){if(1&o&&t.GkF(0,34),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.requiredItem)}}function nt(o,r){if(1&o&&(t.TgZ(0,"div",32),t.YNc(1,ot,1,2,"ng-container",33),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.mpbAddForm.controls.product_book_second_category_id.errors?null:e.mpbAddForm.controls.product_book_second_category_id.errors.required)}}function rt(o,r){if(1&o&&t.GkF(0,34),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.requiredItem)}}function it(o,r){if(1&o&&(t.TgZ(0,"div",32),t.YNc(1,rt,1,2,"ng-container",33),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.mpbAddForm.controls.store_id.errors?null:e.mpbAddForm.controls.store_id.errors.required)}}function st(o,r){if(1&o&&t.GkF(0,34),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.requiredItem)}}function at(o,r){if(1&o&&t.GkF(0,34),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.exceededCharacterMaxLimit)}}function ut(o,r){if(1&o&&t.GkF(0,34),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.numericLimitViolation)}}function dt(o,r){if(1&o&&(t.TgZ(0,"div",32),t.YNc(1,st,1,2,"ng-container",33),t.YNc(2,at,1,2,"ng-container",33),t.YNc(3,ut,1,2,"ng-container",33),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.mpbAddForm.controls.gyo.errors?null:e.mpbAddForm.controls.gyo.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.mpbAddForm.controls.gyo.errors?null:e.mpbAddForm.controls.gyo.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==e.mpbAddForm.controls.gyo.errors?null:e.mpbAddForm.controls.gyo.errors.pattern)}}function ct(o,r){if(1&o&&t.GkF(0,34),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.exceededCharacterMaxLimit)}}function lt(o,r){if(1&o&&(t.TgZ(0,"div",32),t.YNc(1,ct,1,2,"ng-container",33),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.mpbAddForm.controls.size_name.errors?null:e.mpbAddForm.controls.size_name.errors.maxlength)}}function mt(o,r){if(1&o&&t.GkF(0,34),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.exceededCharacterMaxLimit)}}function pt(o,r){if(1&o&&t.GkF(0,34),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.numericLimitViolation)}}function gt(o,r){if(1&o&&(t.TgZ(0,"div",32),t.YNc(1,mt,1,2,"ng-container",33),t.YNc(2,pt,1,2,"ng-container",33),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.mpbAddForm.controls.barcode.errors?null:e.mpbAddForm.controls.barcode.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==e.mpbAddForm.controls.barcode.errors?null:e.mpbAddForm.controls.barcode.errors.pattern)}}function ht(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",9),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleClickSaveButton())}),t.TgZ(2,"div",10)(3,"h2",11),t._uU(4,"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u60c5\u5831\u5165\u529b"),t.qZA(),t._UZ(5,"hr",12),t.TgZ(6,"div",13)(7,"div",14)(8,"div",15)(9,"div",16)(10,"app-select-container",17)(11,"div",18)(12,"span",19),t._uU(13,"\u7b2c2\u5206\u985e\u9078\u629e"),t.qZA(),t.TgZ(14,"span",20),t._uU(15,"\u5fc5\u9808"),t.qZA()(),t.YNc(16,nt,2,1,"div",21),t.qZA(),t.TgZ(17,"app-select-container",22)(18,"div",18)(19,"span",19),t._uU(20,"\u5e97\u8217\u9078\u629e"),t.qZA(),t.TgZ(21,"span",20),t._uU(22,"\u5fc5\u9808"),t.qZA()(),t.YNc(23,it,2,1,"div",21),t.qZA(),t._UZ(24,"div"),t.qZA(),t.TgZ(25,"div",23)(26,"app-input",24),t._uU(27," \u5546\u54c1ID\uff08\u534a\u89d2\u6570\u5b57\uff09 "),t.qZA(),t.TgZ(28,"app-real-time-suggest-container",25),t._uU(29," \u5546\u54c1\u540d "),t.qZA()(),t.TgZ(30,"div",23)(31,"app-text-container",26)(32,"div",18)(33,"span",19),t._uU(34,"\u30d7\u30ea\u30f3\u30c8\u30b3\u30fc\u30c9\uff08\u534a\u89d2\u6570\u5b578\u6587\u5b57\u4ee5\u5185\uff09"),t.qZA(),t.TgZ(35,"span",20),t._uU(36,"\u5fc5\u9808"),t.qZA()(),t.YNc(37,dt,4,3,"div",21),t.qZA(),t.TgZ(38,"app-text-container",27)(39,"div",18)(40,"span",19),t._uU(41,"\u30b5\u30a4\u30ba\u540d\uff0810\u6587\u5b57\u4ee5\u5185\uff09"),t.qZA()(),t.YNc(42,lt,2,1,"div",21),t.qZA(),t.TgZ(43,"app-text-container",28)(44,"div",18)(45,"span",19),t._uU(46,"JAN\u30b3\u30fc\u30c9\uff08\u534a\u89d214\u6587\u5b57\u4ee5\u5185\uff09"),t.qZA()(),t.YNc(47,gt,3,2,"div",21),t.qZA()()()()()(),t.TgZ(48,"div",29)(49,"app-button",30),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onClickReset())}),t._uU(50,"\u30af\u30ea\u30a2"),t.qZA(),t.TgZ(51,"app-button",31),t._uU(52," \u4fdd\u5b58"),t.qZA()()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.mpbAddForm),t.xp6(9),t.Q6J("formCtrl",e.mpbAddForm.controls.product_book_second_category_id)("options",e.scOptions)("invalid",e.formControlStateManager(e.mpbAddForm.controls.product_book_second_category_id)),t.xp6(6),t.Q6J("ngIf",e.formControlStateManager(e.mpbAddForm.controls.product_book_second_category_id)),t.xp6(1),t.Q6J("formCtrl",e.mpbAddForm.controls.store_id)("options",e.storeOptions)("invalid",e.formControlStateManager(e.mpbAddForm.controls.store_id)),t.xp6(6),t.Q6J("ngIf",e.formControlStateManager(e.mpbAddForm.controls.store_id)),t.xp6(3),t.Q6J("formCtrl",e.mpbAddForm.controls.product_id),t.xp6(2),t.Q6J("idCtrl",e.mpbAddForm.controls.product_id)("nameCtrl",e.mpbAddForm.controls.product_name)("apiInput",e.getSuggests()),t.xp6(3),t.Q6J("formCtrl",e.mpbAddForm.controls.gyo)("invalid",e.formControlStateManager(e.mpbAddForm.controls.gyo)),t.xp6(6),t.Q6J("ngIf",e.formControlStateManager(e.mpbAddForm.controls.gyo)),t.xp6(1),t.Q6J("formCtrl",e.mpbAddForm.controls.size_name)("invalid",e.formControlStateManager(e.mpbAddForm.controls.size_name)),t.xp6(4),t.Q6J("ngIf",e.formControlStateManager(e.mpbAddForm.controls.size_name)),t.xp6(1),t.Q6J("formCtrl",e.mpbAddForm.controls.barcode)("invalid",e.formControlStateManager(e.mpbAddForm.controls.barcode)),t.xp6(4),t.Q6J("ngIf",e.formControlStateManager(e.mpbAddForm.controls.barcode)),t.xp6(4),t.Q6J("buttonDisabled",e.mpbAddForm.invalid||e.mpbAddForm.pristine)}}function _t(o,r){if(1&o&&(t.TgZ(0,"p",35),t._uU(1),t.qZA()),2&o){const e=r.message;t.xp6(1),t.hij(" ",e," ")}}const bt=function(){return{path:"/setting",text:"\u8a2d\u5b9a\u4e00\u89a7"}},ft=function(){return{path:"/setting/main-product-book",text:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u4e00\u89a7"}},vt=function(){return{text:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u65b0\u898f\u767b\u9332"}},At=function(o,r,e){return[o,r,e]};let Ct=(()=>{class o{constructor(e,n,s,a,c,m,l,_,L,N,P){this.formBuilder=e,this.modalService=n,this.router=s,this.pbMainService=a,this.pbSecondCategoryService=c,this.storeService=m,this.productService=l,this.errorService=_,this.flashMessageService=L,this.authorService=N,this.common=P,this.exceededCharacterMaxLimit={message:h.c.FORM_ERROR.EXCEEDED_CHARACTER_MAX_LIMIT},this.requiredItem={message:h.c.FORM_ERROR.REQUIRED_ITEM},this.numericLimitViolation={message:h.c.FORM_ERROR.NUMERIC_LIMIT_VIOLATION},this.subscription=new A.w0,this.scOptions=[],this.storeOptions=[],this.cancelModalTitle="\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u65b0\u898f\u767b\u9332\u30ad\u30e3\u30f3\u30bb\u30eb\uff1a"+d.yR.TITLE.CANCEL,this.listPath="/setting/main-product-book",this.mpbAddForm=this.formBuilder.group({product_book_second_category_id:["",[u.kI.required]],product_id:["",[u.kI.required]],product_name:"",store_id:["",[u.kI.required]],gyo:["",[u.kI.required,u.kI.maxLength(8),u.kI.pattern(I.m.NUMERIC_REG_EX)]],size_name:["",[u.kI.maxLength(10)]],barcode:["",[u.kI.maxLength(14),u.kI.pattern(I.m.NUMERIC_REG_EX)]]})}ngOnInit(){this.subscription.add(this.modalService.closeEventObservable$.pipe((0,C.h)(e=>this.modalService.getModalProperties().title===this.cancelModalTitle)).subscribe(e=>{e===d.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl(this.listPath)})),this.authorService.author?this.author=this.authorService.author:this.subscription.add(this.authorService.author$.subscribe(e=>{this.author=e})),this.getOptions()}getOptions(){this.common.loading=!0,this.subscription.add((0,J.D)([this.pbSecondCategoryService.getAll(),this.storeService.getAll(),this.productService.getAll({limit:100})]).pipe((0,p.K)(e=>(0,f.of)(e))).subscribe(e=>{if(this.common.loading=!1,e instanceof v.UA)this.handleError(e.status,e.error.message);else if(Array.isArray(e)&&3===e.length){const n=(0,E.bz)(e[0]),s=(0,E.bz)(e[1]);if(n||s)return void this.handleError(400,h.c.COULD_NOT_GET_DATA);e[0].data.map(m=>{this.scOptions.push({value:m.id,text:m.name})}),this.pbSecondCategory=e[0].data,e[1].data.map(m=>{this.storeOptions.push({value:m.id,text:m.name})})}else this.handleError(400,h.c.COULD_NOT_GET_DATA)})),this.subscribeFormChanges()}subscribeFormChanges(){this.subscription.add(this.productService.observableProductId(this.mpbAddForm.controls.product_id,this.mpbAddForm.controls.product_name,this.common))}formControlStateManager(e){return(e.touched||e.dirty)&&e.invalid}onClickReset(){window.location.reload()}handleClickCancel(){"VALID"===this.mpbAddForm.status?this.modalService.setModal(this.cancelModalTitle,d.yR.BODY.CANCEL,"warning",d.yR.BUTTON_TITLE.EXECUTION,d.yR.BUTTON_TITLE.CANCEL):this.router.navigateByUrl(this.listPath)}handleClickSaveButton(){this.mpbAddForm.markAsPristine(),this.common.loading=!0;const e=this.mpbAddForm.value;return this.scOptions.some(a=>Number(a.value)===Number(e.product_book_second_category_id))?this.storeOptions.some(a=>Number(a.value)===Number(e.store_id))?void this.productService.find(Number(e.product_id)).pipe((0,p.K)(a=>(this.common.loading=!1,this.mpbAddForm.controls.product_id.setValue(null),this.mpbAddForm.controls.product_name.setValue(null),this.mpbAddForm.markAsPristine(),(0,f.of)(a)))).subscribe(a=>{if(a instanceof v.UA)return void this.handleError(a.status,a.error.message);const c=this.pbSecondCategory.findIndex(l=>l.id===Number(e.product_book_second_category_id));-1!==c?this.subscription.add(this.pbMainService.add({product_book_second_category_id:e.product_book_second_category_id,product_id:e.product_id,store_id:e.store_id,name:this.pbSecondCategory[c].name,furi:this.pbSecondCategory[c].furi,gyo:e.gyo,size_name:e.size_name,barcode:e.barcode}).pipe((0,p.K)(l=>(0,f.of)(l)),(0,D.x)(()=>{this.common.loading=!1})).subscribe(l=>{l instanceof v.UA?this.handleError(l.status,l.error.message):(this.flashMessageService.setFlashMessage(l.message,"success",15e3),this.router.navigateByUrl(this.listPath))})):this.mpbAddForm.markAsPristine()}):(this.mpbAddForm.controls.store_id.setValue(null),this.mpbAddForm.markAsPristine(),void(this.common.loading=!1)):(this.mpbAddForm.controls.product_book_second_category_id.setValue(null),this.mpbAddForm.markAsPristine(),void(this.common.loading=!1))}handleError(e,n){this.errorService.setError({status:e,title:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u767b\u9332\u30a8\u30e9\u30fc\uff1a"+d.yR.TITLE.HAS_ERROR,message:n})}ngOnDestroy(){this.subscription.unsubscribe()}getSuggests(){return{observable:this.productService.getAll({name:this.mpbAddForm.controls.product_name.value}),idField:"id",nameField:"name"}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.qu),t.Y36(F.Z),t.Y36(b.F0),t.Y36(y),t.Y36(w.X),t.Y36(Y.d),t.Y36(Q.M),t.Y36(x.T),t.Y36(B.P),t.Y36(q.Y),t.Y36(T.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add"]],decls:14,vars:11,consts:[[3,"breadcrumbList"],[1,"mb-20"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"cursor-pointer",3,"click"],[3,"roleTypeName"],[1,"width-limit-break","border-t","border-gray-400"],[4,"ngIf"],["em",""],[3,"formGroup","ngSubmit"],[1,"mt-8","mb-24","pt-8","pb-20","px-6","bg-white","shadow","border","border-gray-300"],[1,"text-lg"],[1,"border-t-primary-light-hover","border-t-4"],[1,"mt-6","flex","flex-row","gap-10"],[1,"grow"],[1,"p-6","border-t","border-r","border-l","border-t-gray-200","border-r-gray-200","border-l-gray-200","shadow"],[1,"flex","flex-row","gap-4","[&>*]:w-1/3"],["nameAttrValue","product_book_second_category_id","idAttrValue","product-book-second-category-id",3,"formCtrl","options","invalid"],[1,"flex","flex-row","items-center"],[1,"inline-block","mr-2"],[1,"px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],["class","mt-1 pl-1 text-sm","message","",4,"ngIf"],["nameAttrValue","store_id","idAttrValue","store-id",3,"formCtrl","options","invalid"],[1,"flex","flex-row","mt-6","gap-4"],["nameAttrValue","product_id","idAttrValue","product-id",1,"w-3/12",3,"formCtrl"],["nameAttrValue","product_name","idAttrValue","product-name",1,"w-9/12",3,"idCtrl","nameCtrl","apiInput"],["inputType","text","nameAttrValue","gyo","idAttrValue","gyo",1,"w-1/3",3,"formCtrl","invalid"],["inputType","text","nameAttrValue","size_name","idAttrValue","size-name",1,"w-1/3",3,"formCtrl","invalid"],["inputType","text","nameAttrValue","barcode","idAttrValue","barcode",1,"w-1/3",3,"formCtrl","invalid"],[1,"width-limit-break","bg-primary-light","flex","flex-row","justify-center","bottom-[40px]","left-0","right-0","p-2","fixed","gap-8"],[3,"click"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success",3,"buttonDisabled"],["message","",1,"mt-1","pl-1","text-sm"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"text-sm","text-red"]],template:function(e,n){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main",1)(2,"h1",2),t._uU(3,"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u65b0\u898f\u767b\u9332"),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t.NdJ("click",function(){return n.handleClickCancel()}),t._UZ(6,"app-cancel-link-org"),t.qZA(),t.TgZ(7,"div")(8,"app-last-updater-org",5),t._uU(9),t.qZA()()(),t._UZ(10,"hr",6),t.YNc(11,ht,53,23,"ng-container",7),t.qZA(),t.YNc(12,_t,2,1,"ng-template",null,8,t.W1O)),2&e&&(t.Q6J("breadcrumbList",t.kEZ(7,At,t.DdM(4,bt),t.DdM(5,ft),t.DdM(6,vt))),t.xp6(8),t.Q6J("roleTypeName",n.author&&n.author.role_name?n.author.role_name:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."),t.xp6(1),t.hij(" \u767b\u9332\u8005\uff1a",n.author?n.author.last_name+" "+n.author.first_name:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),t.xp6(2),t.Q6J("ngIf",!n.common.loading))},dependencies:[g.O5,g.tP,u._Y,u.JL,u.sg,Z.Z,S.R,V.K,M.O,U.r,j.d,z.Y,G.a]}),o})();var K=i(5698),X=i(9586),Tt=i(4720),Et=i(956);function xt(o,r){if(1&o&&(t.TgZ(0,"div",10)(1,"div",11)(2,"h2",12),t._uU(3),t.qZA()(),t._UZ(4,"hr",13),t.TgZ(5,"div",14)(6,"div",15)(7,"ul",16)(8,"li",17)(9,"div",18),t._uU(10," \u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30afID "),t.qZA(),t.TgZ(11,"div",19),t._uU(12),t.qZA()(),t.TgZ(13,"li",17)(14,"div",18),t._uU(15,"\u7b2c2\u5206\u985eID"),t.qZA(),t.TgZ(16,"div",19),t._uU(17),t.qZA()(),t.TgZ(18,"li",17)(19,"div",18),t._uU(20,"\u7b2c2\u5206\u985e\u540d"),t.qZA(),t.TgZ(21,"div",19),t._uU(22),t.qZA()(),t.TgZ(23,"li",17)(24,"div",18),t._uU(25," \u7b2c2\u5206\u985e\u540d\u30ab\u30ca "),t.qZA(),t.TgZ(26,"div",19),t._uU(27),t.qZA()(),t.TgZ(28,"li",17)(29,"div",18),t._uU(30,"\u5546\u54c1\u540d"),t.qZA(),t.TgZ(31,"div",19),t._uU(32),t.qZA()(),t.TgZ(33,"li",17)(34,"div",18),t._uU(35," \u5546\u54c1JAN\u30b3\u30fc\u30c9 "),t.qZA(),t.TgZ(36,"div",19),t._uU(37),t.qZA()(),t.TgZ(38,"li",17)(39,"div",18),t._uU(40," \u5546\u54c1\u30d6\u30c3\u30af\u30b3\u30fc\u30c9 "),t.qZA(),t.TgZ(41,"div",19),t._uU(42),t.qZA()(),t.TgZ(43,"li",17)(44,"div",18),t._uU(45,"\u5e97\u8217\u540d"),t.qZA(),t.TgZ(46,"div",19),t._uU(47),t.qZA()(),t.TgZ(48,"li",17)(49,"div",18),t._uU(50," \u30d7\u30ea\u30f3\u30c8\u30b3\u30fc\u30c9 "),t.qZA(),t.TgZ(51,"div",19),t._uU(52),t.qZA()(),t.TgZ(53,"li",17)(54,"div",18),t._uU(55,"\u30b5\u30a4\u30ba\u540d"),t.qZA(),t.TgZ(56,"div",19),t._uU(57),t.qZA()(),t.TgZ(58,"li",17)(59,"div",18),t._uU(60,"\u767b\u9332\u65e5\u6642"),t.qZA(),t.TgZ(61,"div",19),t._uU(62),t.qZA()(),t.TgZ(63,"li",17)(64,"div",18),t._uU(65,"\u767b\u9332\u8005"),t.qZA(),t.TgZ(66,"div",19),t._uU(67),t.qZA()(),t.TgZ(68,"li",17)(69,"div",18),t._uU(70,"\u66f4\u65b0\u65e5\u6642"),t.qZA(),t.TgZ(71,"div",19),t._uU(72),t.qZA()(),t.TgZ(73,"li",17)(74,"div",18),t._uU(75,"\u66f4\u65b0\u8005"),t.qZA(),t.TgZ(76,"div",19),t._uU(77),t.qZA()()()()()()),2&o){const e=t.oxw();t.xp6(3),t.hij(" ",e.mainProductBook?e.mainProductBook.name:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),t.xp6(9),t.hij(" ",e.mainProductBook?e.mainProductBook.id:" "," "),t.xp6(5),t.hij(" ",e.mainProductBook?e.mainProductBook.product_book_second_category_id:" "," "),t.xp6(5),t.hij(" ",e.mainProductBook?e.mainProductBook.name:" "," "),t.xp6(5),t.hij(" ",e.mainProductBook?e.mainProductBook.furi:" "," "),t.xp6(5),t.hij(" ",e.mainProductBook?e.mainProductBook.product_name:" "," "),t.xp6(5),t.hij(" ",e.mainProductBook?e.mainProductBook.barcode:" "," "),t.xp6(5),t.hij(" ",e.mainProductBook?e.mainProductBook.book_cd:" "," "),t.xp6(5),t.hij(" ",e.mainProductBook?e.mainProductBook.store_name:" "," "),t.xp6(5),t.hij(" ",e.mainProductBook?e.mainProductBook.gyo:" "," "),t.xp6(5),t.hij(" ",e.mainProductBook?e.mainProductBook.size_name:" "," "),t.xp6(5),t.hij(" ",e.mainProductBook?e.mainProductBook.created_at:" "," "),t.xp6(5),t.hij(" ",e.add_user?e.add_user:" "," "),t.xp6(5),t.hij(" ",e.mainProductBook?e.mainProductBook.updated_at:" "," "),t.xp6(5),t.hij(" ",e.updater?e.updater:" "," ")}}const Ft=function(){return{path:"/setting",text:"\u8a2d\u5b9a\u4e00\u89a7"}},yt=function(){return{path:"/setting/main-product-book",text:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u4e00\u89a7"}},Zt=function(){return{text:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u8a73\u7d30"}},It=function(o,r,e){return[o,r,e]};let Bt=(()=>{class o{constructor(e,n,s,a,c,m,l){this.pbMainService=e,this.modalService=n,this.router=s,this.route=a,this.errorService=c,this.flashMessageService=m,this.common=l,this.subscription=new A.w0,this.errorModalTitle="\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u8a73\u7d30\uff1a"+d.yR.TITLE.HAS_ERROR,this.mainProductBookPath="/setting/main-product-book"}ngOnInit(){this.subscription.add(this.modalService.closeEventObservable$.pipe((0,C.h)(n=>this.modalService.getModalProperties().title===this.errorModalTitle)).subscribe(n=>{n===d.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl(this.mainProductBookPath)}));const e=this.route.snapshot.paramMap.get("id");null!==e?isNaN(Number(e))?this.modalService.setModal(this.errorModalTitle,d.yR.BODY.CANCEL,"danger",d.yR.BUTTON_TITLE.CLOSE):(this.selectedId=Number(e),this.editPath="/setting/main-product-book/edit/"+this.selectedId,this.getDisplayData()):this.modalService.setModal(this.errorModalTitle,d.yR.BODY.CANCEL,"danger",d.yR.BUTTON_TITLE.CLOSE)}getDisplayData(){this.common.loading=!0,this.subscription.add(this.pbMainService.find(this.selectedId).pipe((0,p.K)(e=>(0,f.of)(e))).subscribe(e=>{if(e instanceof v.UA)return void this.handleError(e.status,e.error.message);if((0,E.bz)(e))return void this.handleError(400,h.c.COULD_NOT_GET_DATA);const s=e.data[0];s.created_at=new Date(s.created_at).toLocaleString(),s.updated_at=s.updated_at?new Date(s.updated_at).toLocaleString():"\u672a\u767b\u9332",this.updater=s.employee_updated_last_name&&s.employee_updated_first_name?s.employee_updated_last_name+" "+s.employee_updated_first_name:"\u672a\u767b\u9332",this.mainProductBook=s,this.add_user=s.employee_created_last_name+" "+s.employee_created_first_name,this.common.loading=!1}))}handleClickDelete(){const e="\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\uff1a"+d.yR.TITLE.DELETE;this.modalService.setModal(e,d.yR.BODY.DELETE,"danger",d.yR.BUTTON_TITLE.DELETE,d.yR.BUTTON_TITLE.CANCEL),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,K.q)(1),(0,C.h)(s=>this.modalService.getModalProperties().title===e)).subscribe(s=>{s===d.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&(this.common.loading=!0,this.pbMainService.remove(this.selectedId).pipe((0,p.K)(a=>(0,f.of)(a))).subscribe(a=>{this.common.loading=!1,a instanceof v.UA?this.errorService.setError({status:a.status,title:e,message:a.error.message,redirectPath:this.mainProductBookPath}):(this.flashMessageService.setFlashMessage(a.message,"success",15e3),this.router.navigateByUrl(this.mainProductBookPath))}))}))}handleError(e,n){this.errorService.setError({status:e,title:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\uff1a"+d.yR.TITLE.HAS_ERROR,message:n,redirectPath:this.mainProductBookPath})}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y),t.Y36(F.Z),t.Y36(b.F0),t.Y36(b.gz),t.Y36(x.T),t.Y36(B.P),t.Y36(T.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-detail"]],decls:16,vars:11,consts:[[3,"breadcrumbList"],[1,"mb-20"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"flex","flex-row","items-center","gap-6"],["path","/setting/main-product-book"],[3,"path"],[1,"cursor-pointer",3,"click"],[1,"width-limit-break","border-t","border-gray-400"],["class","mt-8 py-8 px-6 bg-white shadow border border-gray-300",4,"ngIf"],[1,"mt-8","py-8","px-6","bg-white","shadow","border","border-gray-300"],[1,"flex","flex-row"],[1,"text-lg"],[1,"border-t-primary-light-hover","border-t-4"],[1,"mt-6","flex","flex-row","gap-10"],[1,"grow"],[1,"border-t","border-r","border-l","border-t-gray-200","border-r-gray-200","border-l-gray-200","shadow"],[1,"flex","flex-row","items-center","border-b","border-b-gray-200"],[1,"px-2","py-3","bg-slate-100","min-w-[200px]"],[1,"px-2","py-3","border-l","border-l-gray-200","grow"]],template:function(e,n){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main",1)(2,"h1",2),t._uU(3,"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u8a73\u7d30"),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"app-back-to-link-org",5),t._uU(7,"\u4e00\u89a7\u3078\u623b\u308b"),t.qZA(),t._UZ(8,"app-edit-link-org",6),t.TgZ(9,"div",7),t.NdJ("click",function(){return n.handleClickDelete()}),t._UZ(10,"app-delete-link-org"),t.qZA()(),t.TgZ(11,"div")(12,"app-last-updater-org"),t._uU(13),t.qZA()()(),t._UZ(14,"hr",8),t.YNc(15,xt,78,15,"div",9),t.qZA()),2&e&&(t.Q6J("breadcrumbList",t.kEZ(7,It,t.DdM(4,Ft),t.DdM(5,yt),t.DdM(6,Zt))),t.xp6(8),t.Q6J("path",n.editPath),t.xp6(5),t.hij(" \u6700\u7d42\u66f4\u65b0\u8005\uff1a",n.common.loading?"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d...":n.updater," "),t.xp6(2),t.Q6J("ngIf",!n.common.loading))},dependencies:[g.O5,Z.Z,X.i,Tt._,Et.$,S.R]}),o})();function St(o,r){if(1&o&&t.GkF(0,33),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.requiredItem)}}function Ut(o,r){if(1&o&&(t.TgZ(0,"div",31),t.YNc(1,St,1,2,"ng-container",32),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.mpbEditForm.controls.product_book_second_category_id.errors?null:e.mpbEditForm.controls.product_book_second_category_id.errors.required)}}function Dt(o,r){if(1&o&&t.GkF(0,33),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.requiredItem)}}function Mt(o,r){if(1&o&&(t.TgZ(0,"div",31),t.YNc(1,Dt,1,2,"ng-container",32),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.mpbEditForm.controls.store_id.errors?null:e.mpbEditForm.controls.store_id.errors.required)}}function kt(o,r){if(1&o&&t.GkF(0,33),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.requiredItem)}}function Ot(o,r){if(1&o&&t.GkF(0,33),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.exceededCharacterMaxLimit)}}function Lt(o,r){if(1&o&&t.GkF(0,33),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.numericLimitViolation)}}function Nt(o,r){if(1&o&&(t.TgZ(0,"div",31),t.YNc(1,kt,1,2,"ng-container",32),t.YNc(2,Ot,1,2,"ng-container",32),t.YNc(3,Lt,1,2,"ng-container",32),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.mpbEditForm.controls.gyo.errors?null:e.mpbEditForm.controls.gyo.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.mpbEditForm.controls.gyo.errors?null:e.mpbEditForm.controls.gyo.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==e.mpbEditForm.controls.gyo.errors?null:e.mpbEditForm.controls.gyo.errors.pattern)}}function Pt(o,r){if(1&o&&t.GkF(0,33),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.exceededCharacterMaxLimit)}}function Rt(o,r){if(1&o&&(t.TgZ(0,"div",31),t.YNc(1,Pt,1,2,"ng-container",32),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.mpbEditForm.controls.size_name.errors?null:e.mpbEditForm.controls.size_name.errors.maxlength)}}function Jt(o,r){if(1&o&&t.GkF(0,33),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.exceededCharacterMaxLimit)}}function wt(o,r){if(1&o&&t.GkF(0,33),2&o){const e=t.oxw(3),n=t.MAs(13);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.numericLimitViolation)}}function Yt(o,r){if(1&o&&(t.TgZ(0,"div",31),t.YNc(1,Jt,1,2,"ng-container",32),t.YNc(2,wt,1,2,"ng-container",32),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.mpbEditForm.controls.barcode.errors?null:e.mpbEditForm.controls.barcode.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==e.mpbEditForm.controls.barcode.errors?null:e.mpbEditForm.controls.barcode.errors.pattern)}}function Qt(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",8),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleClickSaveButton())}),t.TgZ(2,"div",9)(3,"h2",10),t._uU(4,"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u60c5\u5831\u5165\u529b"),t.qZA(),t._UZ(5,"hr",11),t.TgZ(6,"div",12)(7,"div",13)(8,"div",14)(9,"div",15)(10,"app-select-container",16)(11,"div",17)(12,"span",18),t._uU(13,"\u7b2c2\u5206\u985e\u9078\u629e"),t.qZA(),t.TgZ(14,"span",19),t._uU(15,"\u5fc5\u9808"),t.qZA()(),t.YNc(16,Ut,2,1,"div",20),t.qZA(),t.TgZ(17,"app-select-container",21)(18,"div",17)(19,"span",18),t._uU(20,"\u5e97\u8217\u9078\u629e"),t.qZA(),t.TgZ(21,"span",19),t._uU(22,"\u5fc5\u9808"),t.qZA()(),t.YNc(23,Mt,2,1,"div",20),t.qZA(),t._UZ(24,"div"),t.qZA(),t.TgZ(25,"div",22)(26,"app-input",23),t._uU(27," \u5546\u54c1ID\uff08\u534a\u89d2\u6570\u5b57\uff09 "),t.qZA(),t.TgZ(28,"app-real-time-suggest-container",24),t._uU(29," \u5546\u54c1\u540d "),t.qZA()(),t.TgZ(30,"div",22)(31,"app-text-container",25)(32,"div",17)(33,"span",18),t._uU(34,"\u30d7\u30ea\u30f3\u30c8\u30b3\u30fc\u30c9\uff08\u534a\u89d2\u6570\u5b578\u6587\u5b57\u4ee5\u5185\uff09"),t.qZA(),t.TgZ(35,"span",19),t._uU(36,"\u5fc5\u9808"),t.qZA()(),t.YNc(37,Nt,4,3,"div",20),t.qZA(),t.TgZ(38,"app-text-container",26)(39,"div",17)(40,"span",18),t._uU(41,"\u30b5\u30a4\u30ba\u540d\uff0810\u6587\u5b57\u4ee5\u5185\uff09"),t.qZA()(),t.YNc(42,Rt,2,1,"div",20),t.qZA(),t.TgZ(43,"app-text-container",27)(44,"div",17)(45,"span",18),t._uU(46,"JAN\u30b3\u30fc\u30c9\uff08\u534a\u89d214\u6587\u5b57\u4ee5\u5185\uff09"),t.qZA()(),t.YNc(47,Yt,3,2,"div",20),t.qZA()()()()()(),t.TgZ(48,"div",28)(49,"app-button",29),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleClickClearButton())}),t._uU(50,"\u30af\u30ea\u30a2"),t.qZA(),t.TgZ(51,"app-button",30),t._uU(52," \u4fdd\u5b58"),t.qZA()()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.mpbEditForm),t.xp6(9),t.Q6J("formCtrl",e.mpbEditForm.controls.product_book_second_category_id)("options",e.scOptions)("invalid",e.formControlStateManager(e.mpbEditForm.controls.product_book_second_category_id)),t.xp6(6),t.Q6J("ngIf",e.formControlStateManager(e.mpbEditForm.controls.product_book_second_category_id)),t.xp6(1),t.Q6J("formCtrl",e.mpbEditForm.controls.store_id)("options",e.storeOptions)("invalid",e.formControlStateManager(e.mpbEditForm.controls.store_id)),t.xp6(6),t.Q6J("ngIf",e.formControlStateManager(e.mpbEditForm.controls.store_id)),t.xp6(3),t.Q6J("formCtrl",e.mpbEditForm.controls.product_id),t.xp6(2),t.Q6J("idCtrl",e.mpbEditForm.controls.product_id)("nameCtrl",e.mpbEditForm.controls.product_name)("apiInput",e.getSuggests()),t.xp6(3),t.Q6J("formCtrl",e.mpbEditForm.controls.gyo)("invalid",e.formControlStateManager(e.mpbEditForm.controls.gyo)),t.xp6(6),t.Q6J("ngIf",e.formControlStateManager(e.mpbEditForm.controls.gyo)),t.xp6(1),t.Q6J("formCtrl",e.mpbEditForm.controls.size_name)("invalid",e.formControlStateManager(e.mpbEditForm.controls.size_name)),t.xp6(4),t.Q6J("ngIf",e.formControlStateManager(e.mpbEditForm.controls.size_name)),t.xp6(1),t.Q6J("formCtrl",e.mpbEditForm.controls.barcode)("invalid",e.formControlStateManager(e.mpbEditForm.controls.barcode)),t.xp6(4),t.Q6J("ngIf",e.formControlStateManager(e.mpbEditForm.controls.barcode)),t.xp6(4),t.Q6J("buttonDisabled",e.mpbEditForm.invalid||e.formInvalid||e.mpbEditForm.pristine)}}function qt(o,r){if(1&o&&(t.TgZ(0,"p",34),t._uU(1),t.qZA()),2&o){const e=r.message;t.xp6(1),t.hij(" ",e," ")}}const Vt=function(){return{path:"/setting",text:"\u8a2d\u5b9a\u4e00\u89a7"}},jt=function(){return{path:"/setting/main-product-book",text:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u4e00\u89a7"}},zt=function(o){return{path:o,text:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u8a73\u7d30"}},Gt=function(){return{text:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u7de8\u96c6"}},Kt=function(o,r,e,n){return[o,r,e,n]};let Xt=(()=>{class o{constructor(e,n,s,a,c,m,l,_,L,N,P){this.formBuilder=e,this.modalService=n,this.router=s,this.route=a,this.pbMainService=c,this.pbSecondCategoryService=m,this.storeService=l,this.productService=_,this.errorService=L,this.flashMessageService=N,this.common=P,this.exceededCharacterMaxLimit={message:h.c.FORM_ERROR.EXCEEDED_CHARACTER_MAX_LIMIT},this.requiredItem={message:h.c.FORM_ERROR.REQUIRED_ITEM},this.numericLimitViolation={message:h.c.FORM_ERROR.NUMERIC_LIMIT_VIOLATION},this.subscription=new A.w0,this.scOptions=[],this.storeOptions=[],this.formInvalid=!0,this.cancelModalTitle="\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u7de8\u96c6\u30ad\u30e3\u30f3\u30bb\u30eb\uff1a"+d.yR.TITLE.CANCEL,this.getPathErrorModalTitle="\u30d1\u30e9\u30e1\u30fc\u30bf\u53d6\u5f97\u30a8\u30e9\u30fc\uff1a"+d.yR.TITLE.HAS_ERROR,this.mpb={id:0,product_book_second_category_id:0,product_id:0,product_name:"",store_id:0,name:"",furi:"",gyo:0,size_name:"",barcode:"",created_at:"",created_id:0,employee_updated_last_name:"",employee_updated_first_name:""},this.mpbEditForm=this.formBuilder.group({product_book_second_category_id:[this.mpb.product_book_second_category_id,[u.kI.required]],product_id:[this.mpb.product_id,[u.kI.required]],product_name:[this.mpb.product_name,""],store_id:[this.mpb.store_id,[u.kI.required]],name:[this.mpb.name,[u.kI.required,u.kI.maxLength(20)]],furi:[this.mpb.furi,[u.kI.maxLength(20)]],gyo:[this.mpb.gyo,[u.kI.required,u.kI.maxLength(8),u.kI.pattern(I.m.NUMERIC_REG_EX)]],size_name:[this.mpb.size_name,[u.kI.maxLength(10)]],barcode:[this.mpb.barcode,[u.kI.maxLength(14),u.kI.pattern(I.m.NUMERIC_REG_EX)]]})}ngOnInit(){this.subscription.add(this.modalService.closeEventObservable$.pipe((0,C.h)(n=>this.modalService.getModalProperties().title===this.getPathErrorModalTitle)).subscribe(n=>{n===d.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl("/setting/main-product-book")}));const e=this.route.snapshot.paramMap.get("id");null!==e?isNaN(Number(e))?this.modalService.setModal(this.getPathErrorModalTitle,d.yR.BODY.HAS_ERROR,"danger",d.yR.BUTTON_TITLE.CLOSE):(this.selectedId=Number(e),this.detailPath="/setting/main-product-book/detail/"+this.selectedId,this.subscription.add(this.modalService.closeEventObservable$.pipe((0,C.h)(n=>this.modalService.getModalProperties().title===this.cancelModalTitle)).subscribe(n=>{n===d.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl(this.detailPath)})),this.subscription.add(this.mpbEditForm.valueChanges.subscribe(n=>{this.checkFormDefaultValueChanged(n)})),this.getDisplayData()):this.modalService.setModal(this.getPathErrorModalTitle,d.yR.BODY.HAS_ERROR,"danger",d.yR.BUTTON_TITLE.CLOSE)}getDisplayData(){this.common.loading=!0,this.subscription.add((0,J.D)([this.pbMainService.find(this.selectedId),this.pbSecondCategoryService.getAll(),this.storeService.getAll()]).pipe((0,p.K)(e=>(0,f.of)(e))).subscribe(e=>{if(this.common.loading=!1,e instanceof v.UA)this.handleError(e.status,e.error.message);else if(Array.isArray(e)&&3===e.length){const n=(0,E.bz)(e[0]),s=(0,E.bz)(e[1]),a=(0,E.bz)(e[2]);if(n||s||a)return void this.handleError(400,h.c.COULD_NOT_GET_DATA);e[1].data.map(l=>{this.scOptions.push({value:l.id,text:l.name})}),this.pbSecondCategory=e[1].data,e[2].data.map(l=>{this.storeOptions.push({value:l.id,text:l.name})}),this.mpb=e[0].data[0],this.beforeUpdateData=e[0].data[0],this.mpbEditForm.patchValue(this.mpb)}else this.handleError(400,h.c.COULD_NOT_GET_DATA)})),this.subscribeFormChanges()}subscribeFormChanges(){this.subscription.add(this.productService.observableProductId(this.mpbEditForm.controls.product_id,this.mpbEditForm.controls.product_name,this.common))}checkFormDefaultValueChanged(e){const n={product_book_second_category_id:this.beforeUpdateData.product_book_second_category_id,product_id:this.beforeUpdateData.product_id,store_id:this.beforeUpdateData.store_id,name:this.beforeUpdateData.name,furi:this.beforeUpdateData.furi,gyo:this.beforeUpdateData.gyo.toString(),size_name:this.beforeUpdateData.size_name,barcode:this.beforeUpdateData.barcode},s=JSON.stringify(e),a=JSON.stringify(n);this.formInvalid=s===a}formControlStateManager(e){return(e.touched||e.dirty)&&e.invalid}handleClickClearButton(){this.mpbEditForm.reset(this.beforeUpdateData),this.formInvalid=!0}handleClickCancel(){this.formInvalid&&this.mpbEditForm.pristine?this.router.navigateByUrl(this.detailPath):this.modalService.setModal(this.cancelModalTitle,d.yR.BODY.CANCEL,"warning",d.yR.BUTTON_TITLE.EXECUTION,d.yR.BUTTON_TITLE.CANCEL)}handleClickSaveButton(){this.formInvalid=!0,this.common.loading=!0;const e=this.mpbEditForm.value;return this.scOptions.some(a=>Number(a.value)===Number(e.product_book_second_category_id))?this.storeOptions.some(a=>Number(a.value)===Number(e.store_id))?void this.productService.find(Number(e.product_id)).pipe((0,p.K)(a=>(this.common.loading=!1,this.mpbEditForm.controls.product_id.setValue(null),this.mpbEditForm.controls.product_name.setValue(null),this.formInvalid=!0,(0,f.of)(a)))).subscribe(a=>{if(a instanceof v.UA)return void this.handleError(a.status,a.error.message);const c=this.pbSecondCategory.findIndex(l=>l.id===Number(e.product_book_second_category_id));if(-1===c)return this.formInvalid=!0,void(this.common.loading=!1);this.subscription.add(this.pbMainService.update(this.selectedId,{product_book_second_category_id:e.product_book_second_category_id,product_id:e.product_id,store_id:e.store_id,name:this.pbSecondCategory[c].name,furi:this.pbSecondCategory[c].furi,gyo:e.gyo,size_name:e.size_name,barcode:e.barcode}).pipe((0,p.K)(l=>(0,f.of)(l)),(0,D.x)(()=>{this.common.loading=!1})).subscribe(l=>{l instanceof v.UA?this.handleError(l.status,l.error.message):(this.flashMessageService.setFlashMessage(l.message,"success",15e3),this.router.navigateByUrl(this.detailPath))}))}):(this.mpbEditForm.controls.store_id.setValue(null),this.formInvalid=!0,void(this.common.loading=!1)):(this.mpbEditForm.controls.product_book_second_category_id.setValue(null),this.formInvalid=!0,void(this.common.loading=!1))}getSuggests(){return{observable:this.productService.getAll({name:this.mpbEditForm.controls.product_name.value}),idField:"id",nameField:"name"}}handleError(e,n){this.errorService.setError({status:e,title:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u7de8\u96c6\u30a8\u30e9\u30fc\uff1a"+d.yR.TITLE.HAS_ERROR,message:n})}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.qu),t.Y36(F.Z),t.Y36(b.F0),t.Y36(b.gz),t.Y36(y),t.Y36(w.X),t.Y36(Y.d),t.Y36(Q.M),t.Y36(x.T),t.Y36(B.P),t.Y36(T.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit"]],decls:14,vars:13,consts:[[3,"breadcrumbList"],[1,"mb-20"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"cursor-pointer",3,"click"],[1,"width-limit-break","border-t","border-gray-400"],[4,"ngIf"],["em",""],[3,"formGroup","ngSubmit"],[1,"mt-8","mb-24","pt-8","pb-20","px-6","bg-white","shadow","border","border-gray-300"],[1,"text-lg"],[1,"border-t-primary-light-hover","border-t-4"],[1,"mt-6","flex","flex-row","gap-10"],[1,"grow"],[1,"p-6","border-t","border-r","border-l","border-t-gray-200","border-r-gray-200","border-l-gray-200","shadow"],[1,"flex","flex-row","gap-4","[&>*]:w-1/3"],["nameAttrValue","product_book_second_category_id","idAttrValue","product-book-second-category-id",3,"formCtrl","options","invalid"],[1,"flex","flex-row","items-center"],[1,"inline-block","mr-2"],[1,"px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],["class","mt-1 pl-1 text-sm","message","",4,"ngIf"],["nameAttrValue","store_id","idAttrValue","store-id",3,"formCtrl","options","invalid"],[1,"flex","flex-row","mt-6","gap-4"],["nameAttrValue","product_id","idAttrValue","product-id",1,"w-3/12",3,"formCtrl"],["nameAttrValue","product_name","idAttrValue","product-name",1,"w-9/12",3,"idCtrl","nameCtrl","apiInput"],["inputType","text","nameAttrValue","gyo","idAttrValue","gyo",1,"w-1/2",3,"formCtrl","invalid"],["inputType","text","nameAttrValue","size_name","idAttrValue","size-name",1,"w-1/2",3,"formCtrl","invalid"],["inputType","text","nameAttrValue","barcode","idAttrValue","barcode",1,"w-1/2",3,"formCtrl","invalid"],[1,"width-limit-break","bg-primary-light","flex","flex-row","justify-center","bottom-[40px]","left-0","right-0","p-2","fixed","gap-8"],["btnType","button",3,"click"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success",3,"buttonDisabled"],["message","",1,"mt-1","pl-1","text-sm"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"text-sm","text-red"]],template:function(e,n){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main",1)(2,"h1",2),t._uU(3,"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u7de8\u96c6"),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t.NdJ("click",function(){return n.handleClickCancel()}),t._UZ(6,"app-cancel-link-org"),t.qZA(),t.TgZ(7,"div")(8,"app-last-updater-org"),t._uU(9),t.qZA()()(),t._UZ(10,"hr",5),t.YNc(11,Qt,53,23,"ng-container",6),t.qZA(),t.YNc(12,qt,2,1,"ng-template",null,7,t.W1O)),2&e&&(t.Q6J("breadcrumbList",t.l5B(8,Kt,t.DdM(3,Vt),t.DdM(4,jt),t.VKq(5,zt,n.detailPath),t.DdM(7,Gt))),t.xp6(9),t.hij(" \u6700\u7d42\u66f4\u65b0\u8005\uff1a",n.common.loading?"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d...":n.mpb.employee_updated_last_name+" "+n.mpb.employee_updated_first_name," "),t.xp6(2),t.Q6J("ngIf",!n.common.loading))},dependencies:[g.O5,g.tP,u._Y,u.JL,u.sg,Z.Z,S.R,V.K,M.O,U.r,j.d,z.Y,G.a]}),o})();var k=i(7579);const $t=["*"];let Ht=(()=>{class o{constructor(e){this.formBuilder=e,this.searchEvent=new t.vpe,this.errorEvent=new t.vpe,this.searchForm=this.formBuilder.group({name:""})}handleClickClearButton(){Object.values(this.searchForm.controls).map(e=>e.patchValue(""))}handleClickSubmitButton(){this.searchEvent.emit(this.searchForm.value)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-search"]],outputs:{searchEvent:"searchEvent",errorEvent:"errorEvent"},ngContentSelectors:$t,decls:12,vars:3,consts:[[3,"formGroup","ngSubmit"],[1,"flex"],[1,"w-1/3",3,"formCtrl"],[1,"mt-2"],[1,"mr-4",3,"click"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success",3,"buttonDisabled"],[1,"mt-2","text-sm","text-red"]],template:function(e,n){1&e&&(t.F$t(),t.TgZ(0,"div")(1,"form",0),t.NdJ("ngSubmit",function(){return n.handleClickSubmitButton()}),t.TgZ(2,"div",1)(3,"app-text-container",2),t.Hsn(4),t.qZA()(),t.TgZ(5,"div",3)(6,"app-button",4),t.NdJ("click",function(){return n.handleClickClearButton()}),t._uU(7," \u5165\u529b\u5185\u5bb9\u30af\u30ea\u30a2 "),t.qZA(),t.TgZ(8,"app-button",5),t._uU(9," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),t.qZA()(),t.TgZ(10,"p",6),t._uU(11," \u203b \u5165\u529b\u5185\u5bb9\u3092\u30af\u30ea\u30a2\u3057\u305f\u5f8c\u306b\u7d5e\u308a\u8fbc\u307f\u5b9f\u884c\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u5168\u3066\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002 "),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.searchForm),t.xp6(2),t.Q6J("formCtrl",n.searchForm.controls.name),t.xp6(5),t.Q6J("buttonDisabled",n.searchForm.invalid||n.searchForm.pristine))},dependencies:[u._Y,u.JL,u.sg,M.O,U.r]}),o})();var Wt=i(8505),te=i(3900),ee=i(2640);function oe(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.selectedLcName+"\u306b\u5c5e\u3059\u308b")}}let ne=(()=>{class o{constructor(e,n){this.pbMainService=e,this.common=n,this.subscription=new A.w0,this.errorEvent=new t.vpe,this.filter={},this.defaultSort={column:"ID",order:"desc"},this.pages={page:1,itemsPerPage:10,sort:this.defaultSort},this.tableParams=new k.x,this.tableNameMapping=[{name:"id",name_jp:"ID"},{name:"product_book_second_category_name",name_jp:"\u7b2c2\u5206\u985e\u540d"},{name:"book_cd",name_jp:"\u30d6\u30c3\u30af\u30b3\u30fc\u30c9"},{name:"product_name",name_jp:"\u5546\u54c1\u540d"},{name:"gyo",name_jp:"\u30d7\u30ea\u30f3\u30c8\u30b3\u30fc\u30c9"},{name:"updated_at",name_jp:"\u6700\u7d42\u66f4\u65b0\u65e5\u6642"}]}ngOnInit(){this.getTableData(),this.tableEvent.next(this.pages)}getTableData(){this.subscription.add(this.tableEvent.pipe((0,Wt.b)(e=>this.common.loading=!0),(0,te.w)(e=>this.pbMainService.getAll(this.createApiParams(e))),(0,p.K)(e=>(0,f.of)(e))).subscribe({next:e=>{this.common.loading=!1,e instanceof v.UA?this.handleError(e.status,e.error.message):this.tableParams.next(this.createTableParams(e))},complete:()=>this.getTableData()}))}createApiParams(e){this.isTableWithPaginationEvent(e)?this.pages=e:(this.filter=e,this.pages.page=1),0===Object.keys(this.pages.sort).length&&(this.pages.sort=this.defaultSort);const s=this.tableNameMapping.find(a=>a.name_jp===this.pages.sort.column)?.name;return{...this.filter,limit:this.pages.itemsPerPage,offset:(this.pages.page-1)*this.pages.itemsPerPage,sort:s?`${s}:${this.pages.sort.order}`:"",product_book_second_category_id:this.selectedLcId?this.selectedLcId:""}}isTableWithPaginationEvent(e){const{page:n,itemsPerPage:s,sort:a}=e;return"number"==typeof n&&"number"==typeof s&&"object"==typeof a}createTableParams(e){const n=this.tableNameMapping.map(a=>a.name_jp),s=e.data.map(a=>this.tableNameMapping.map(c=>a[c.name]));return s.forEach(a=>{let c=-1;c=n.indexOf("ID"),a[c]={href:`/setting/main-product-book/detail/${a[c]}`,text:a[c]+""},c=n.indexOf("\u6700\u7d42\u66f4\u65b0\u65e5\u6642"),a[c]=a[c]?new Date(a[c]).toLocaleString():"\u672a\u767b\u9332"}),{total:e.totalItems,header:n,body:s}}handleError(e,n){this.errorEvent.emit({status:e,title:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u4e00\u89a7\uff1a"+d.yR.TITLE.HAS_ERROR,message:n})}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y),t.Y36(T.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-table"]],inputs:{tableEvent:"tableEvent",selectedLcId:"selectedLcId",selectedLcName:"selectedLcName"},outputs:{errorEvent:"errorEvent"},decls:3,vars:3,consts:[[3,"params","loading","pageChange"],[4,"ngIf"]],template:function(e,n){1&e&&(t.TgZ(0,"app-table-with-pagination",0),t.NdJ("pageChange",function(a){return n.tableEvent.next(a)}),t.YNc(1,oe,2,1,"span",1),t._uU(2," \u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u4e00\u89a7\n"),t.qZA()),2&e&&(t.Q6J("params",n.tableParams)("loading",n.common.loading),t.xp6(1),t.Q6J("ngIf",n.selectedLcName))},dependencies:[g.O5,ee.i]}),o})();var re=i(3360),ie=i(2167);function se(o,r){if(1&o&&(t.TgZ(0,"div",10)(1,"app-back-to-link-org",11),t._uU(2),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.MGl("path","/setting/product-book-second-category/detail/",e.selectedLcId,""),t.xp6(1),t.hij("",e.selectedLcName," \u306e\u8a73\u7d30\u3078\u623b\u308b")}}const ae=function(){return{path:"/setting",text:"\u8a2d\u5b9a\u4e00\u89a7"}},ue=function(){return{text:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u4e00\u89a7"}},de=function(o,r){return[o,r]},ce=function(o,r){return{"justify-between":o,"justify-end":r}};let le=(()=>{class o{constructor(e,n){this.errorService=e,this.route=n,this.subscription=new A.w0,this.parentSearchEvent=new k.x,this.parentTableEvent=new k.x}ngOnInit(){this.subscription.add(this.parentSearchEvent.subscribe(n=>{this.parentTableEvent.next(n)}));const e=this.route.snapshot.queryParams;e.id&&e.name&&(this.selectedLcId=e.id,this.selectedLcName=e.name)}ngOnDestroy(){this.subscription.unsubscribe()}handleError(e){this.errorService.setError({status:e.status,title:e.title,message:e.message})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.T),t.Y36(b.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list"]],decls:14,vars:14,consts:[[3,"breadcrumbList"],[1,"mt-8","mb-20"],[3,"searchEvent","errorEvent"],[1,"flex","items-center","mt-8","mb-2","justify-between",3,"ngClass"],["class","ml-4",4,"ngIf"],[1,"flex","flex-row"],[1,"mr-4"],["path","/setting/main-product-book/add"],["path","/setting/main-product-book/bulk-add"],[3,"tableEvent","selectedLcId","selectedLcName","errorEvent"],[1,"ml-4"],[3,"path"]],template:function(e,n){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main",1)(2,"div")(3,"app-search",2),t.NdJ("searchEvent",function(a){return n.parentSearchEvent.next(a)})("errorEvent",function(a){return n.handleError(a)}),t._uU(4," \u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u540d\u3067\u7d5e\u308a\u8fbc\u307f"),t.qZA()(),t.TgZ(5,"div",3),t.YNc(6,se,3,2,"div",4),t.TgZ(7,"div",5)(8,"div",6),t._UZ(9,"app-new-registration-link-org",7),t.qZA(),t.TgZ(10,"div"),t._UZ(11,"app-bulk-registration-link-org",8),t.qZA()()(),t.TgZ(12,"div")(13,"app-table",9),t.NdJ("errorEvent",function(a){return n.handleError(a)}),t.qZA()()()),2&e&&(t.Q6J("breadcrumbList",t.WLB(8,de,t.DdM(6,ae),t.DdM(7,ue))),t.xp6(5),t.Q6J("ngClass",t.WLB(11,ce,n.selectedLcId,!n.selectedLcId)),t.xp6(1),t.Q6J("ngIf",n.selectedLcId),t.xp6(7),t.Q6J("tableEvent",n.parentTableEvent)("selectedLcId",n.selectedLcId)("selectedLcName",n.selectedLcName))},dependencies:[g.mk,g.O5,Z.Z,Ht,ne,re.S,X.i,ie.p]}),o})();var me=i(2125);let pe=(()=>{class o{constructor(e,n,s,a){this.errorService=e,this.modalService=n,this.router=s,this.common=a,this.subscription=new A.w0,this.isLoading=!1}ngOnInit(){this.subscription.add(this.errorService.getError().subscribe(e=>{this.handleError(e)})),this.subscription.add(this.common.loading$.subscribe(e=>{setTimeout(()=>this.isLoading=e)}))}ngOnDestroy(){this.subscription.unsubscribe()}handleError(e){e.redirectPath&&(this.redirectPath=e.redirectPath),this.modalService.setModal(e.title,0===e.status?e.message+h.c.GUIDANCE_OF_SUPPORT:`\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9: ${e.status} \n\u30e1\u30c3\u30bb\u30fc\u30b8: `+e.message+h.c.GUIDANCE_OF_SUPPORT,"danger",d.yR.BUTTON_TITLE.CLOSE,""),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,K.q)(1),(0,C.h)(s=>this.modalService.getModalProperties().title===e.title)).subscribe(s=>{this.redirectPath&&this.router.navigateByUrl(this.redirectPath)}))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.T),t.Y36(F.Z),t.Y36(b.F0),t.Y36(T.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-pb-main"]],decls:2,vars:1,consts:[[3,"isLoading"]],template:function(e,n){1&e&&t._UZ(0,"router-outlet")(1,"app-loading-container",0),2&e&&(t.xp6(1),t.Q6J("isLoading",n.isLoading))},dependencies:[b.lC,me.o]}),o})();var O=i(67),ge=i(3761),he=i(1914),_e=i(2482),be=i(5108);function fe(o,r){1&o&&(t.TgZ(0,"span",24),t._uU(1," \u5fc5\u9808 "),t.qZA())}function ve(o,r){if(1&o&&(t.TgZ(0,"li",20)(1,"div",21),t._uU(2),t.YNc(3,fe,2,0,"span",22),t.qZA(),t.TgZ(4,"div",23),t._uU(5),t.qZA()()),2&o){const e=r.$implicit;t.xp6(2),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf",e.required),t.xp6(2),t.Oqu(e.description)}}function Ae(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",25)(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"app-icon",26),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleClickDeleteIcon())}),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(3),t.Oqu(e.fileName)}}const Ce=function(){return{path:"/setting",text:"\u8a2d\u5b9a\u4e00\u89a7"}},Te=function(){return{path:"/setting/main-product-book",text:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u4e00\u89a7"}},Ee=function(){return{text:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u4e00\u62ec\u767b\u9332"}},xe=function(o,r,e){return[o,r,e]},Fe=[{path:"",component:pe,children:[{path:"",component:le},{path:"detail/:id",component:Bt},{path:"edit/:id",component:Xt},{path:"add",component:Ct},{path:"bulk-add",component:(()=>{class o{constructor(e,n,s,a,c,m,l,_){this.formBuilder=e,this.authorService=n,this.modalService=s,this.router=a,this.pbMainService=c,this.flashMessageService=m,this.errorService=l,this.common=_,this.subscription=new A.w0,this.fileNamePrefix="\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af",this.cancelModalTitle="\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u4e00\u62ec\u767b\u9332\u30ad\u30e3\u30f3\u30bb\u30eb\uff1a"+d.yR.TITLE.CANCEL,this.exceededFileSizeLimit=O.s.IMAGE_MAX_FILE_SIZE,this.maxFileSizeForDisplay=O.s.IMAGE_MAX_FILE_SIZE_FOR_DISPLAY,this.isUploadable=!1,this.bulkAddForm=this.formBuilder.group({file:[null,[this.limitFileSizeValidator()]]}),this.descriptions=[{title:"id",description:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30afID\uff08\u534a\u89d2\u6570\u5b57\uff09\u203b\u7a7a\u6b04\u306b\u3059\u308b\u3068\u65b0\u898f\u767b\u9332\u306b\u306a\u308a\u307e\u3059\u3002"},{title:"product_book_second_category_id",description:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985eID\uff08\u534a\u89d2\u6570\u5b57\uff09",required:!0},{title:"name",description:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u540d\uff0820\u6587\u5b57\u4ee5\u5185\uff09",required:!0},{title:"furi",description:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u540d\u30ab\u30ca\uff0820\u6587\u5b57\u4ee5\u5185\uff09"},{title:"store_id",description:"\u5e97\u8217ID\uff08\u534a\u89d2\u6570\u5b57\uff09",required:!0},{title:"product_id",description:"\u5546\u54c1ID\uff08\u534a\u89d2\u6570\u5b57\uff09",required:!0},{title:"barcode",description:"\u5546\u54c1JAN\u30b3\u30fc\u30c9\uff08\u534a\u89d214\u6587\u5b57\u4ee5\u5185\uff09"},{title:"gyo",description:"\u30d7\u30ea\u30f3\u30c8\u30b3\u30fc\u30c9\uff08\u534a\u89d2\u6570\u5b578\u6587\u5b57\u4ee5\u5185\uff09",required:!0},{title:"size_name",description:"\u30b5\u30a4\u30ba\u540d\uff0810\u6587\u5b57\u4ee5\u5185\uff09"}]}ngOnInit(){this.template$=this.pbMainService.getCsv("template").pipe((0,p.K)(this.handleCatchError("")),(0,D.x)(()=>this.common.loading=!1)),this.subscription.add(this.bulkAddForm.controls.file.valueChanges.subscribe(e=>{this.updatePreviewElements(e)})),this.authorService.author?this.author=this.authorService.author:this.subscription.add(this.authorService.author$.subscribe(e=>{this.author=e})),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,C.h)(e=>this.modalService.getModalProperties().title===this.cancelModalTitle)).subscribe(e=>{e===d.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl("/main-setting/product-book")}))}limitFileSizeValidator(){return e=>{const n=e.value;return n?.size&&n?.size>O.s.IMAGE_MAX_FILE_SIZE?(this.bulkAddForm.controls.file.setValue(null),{limitFileSize:{errorMessage:this.exceededFileSizeLimit}}):null}}handleCatchError(e){return n=>(console.error(n),(0,f.of)(e))}handleError(e,n){this.errorService.setError({status:e,title:"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u4e00\u62ec\u767b\u9332\u30a8\u30e9\u30fc\uff1a"+d.yR.TITLE.HAS_ERROR,message:n})}handleClickCancel(){this.isUploadable?this.modalService.setModal(this.cancelModalTitle,d.yR.BODY.CANCEL,"warning",d.yR.BUTTON_TITLE.EXECUTION,d.yR.BUTTON_TITLE.CANCEL):this.router.navigateByUrl("/setting/main-product-book")}handleClickUploadButton(){this.isUploadable=!1,this.common.loading=!0,this.subscription.add(this.pbMainService.bulkAdd(this.bulkAddForm.controls.file.value).pipe((0,p.K)(e=>(0,f.of)(e))).subscribe(e=>{this.common.loading=!1,e instanceof v.UA?this.handleError(e.status,e.error.message):(this.flashMessageService.setFlashMessage(e.message,"success",15e3),this.router.navigateByUrl("/setting/main-product-book"))}))}handleClickDeleteIcon(){this.bulkAddForm.controls.file.setValue(null)}updatePreviewElements(e){e?(this.fileName=e.name,this.isUploadable=!0):(this.fileName=void 0,this.isUploadable=!1)}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.qu),t.Y36(q.Y),t.Y36(F.Z),t.Y36(b.F0),t.Y36(y),t.Y36(B.P),t.Y36(x.T),t.Y36(T.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-bulk-add"]],decls:27,vars:17,consts:[[3,"breadcrumbList"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"cursor-pointer",3,"click"],["icon","close-line","appendClassForIcon","fill-danger group-hover:fill-danger-hover"],[1,"text-gray-900","group-hover:text-danger-hover"],[3,"roleTypeName"],[1,"width-limit-break","border-t","border-gray-400"],[1,"flex","justify-end"],[1,"flex","justify-end","mt-8",3,"api$","fileNamePrefix","statusChange"],[1,"mt-2","mb-28","py-8","px-6","bg-white","shadow","border","border-gray-300"],[1,"text-lg","mb-4"],[1,"mb-8"],["class","flex border border-b-0 last:border-b border-slate-400",4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],[1,"flex","justify-between","mb-2"],[1,"flex","items-center"],["text","\u30d5\u30a1\u30a4\u30eb\u9078\u629e","accept","text/csv",3,"formCtrl"],[4,"ngIf"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success",3,"buttonDisabled"],[1,"flex","border","border-b-0","last:border-b","border-slate-400"],[1,"flex","items-center","w-[400px]","bg-slate-100","p-4"],["class","px-3 py-0.5 ml-2 text-xs text-white bg-warning-dark rounded-full",4,"ngIf"],[1,"grow","p-4"],[1,"px-3","py-0.5","ml-2","text-xs","text-white","bg-warning-dark","rounded-full"],[1,"flex","flex-row","items-center"],["icon","delete-bin-line",1,"w-6","cursor-pointer","ml-2","fill-red-500",3,"click"]],template:function(e,n){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main")(2,"h1",1),t._uU(3,"\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u4e00\u62ec\u767b\u9332"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3),t.NdJ("click",function(){return n.handleClickCancel()}),t.TgZ(6,"app-icon-container",4)(7,"p",5),t._uU(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),t.qZA()()(),t.TgZ(9,"div")(10,"app-last-updater-org",6),t._uU(11),t.qZA()()(),t._UZ(12,"hr",7),t.TgZ(13,"div",8)(14,"app-template-download-link-org",9),t.NdJ("statusChange",function(a){return n.common.loading=!!a}),t.qZA()(),t.TgZ(15,"div",10)(16,"p",11),t._uU(17,"CSV\u30d5\u30a1\u30a4\u30eb\u306e\u30d8\u30c3\u30c0\u30fc\u3068\u5024"),t.qZA(),t.TgZ(18,"ul",12),t.YNc(19,ve,6,3,"li",13),t.qZA(),t.TgZ(20,"form",14),t.NdJ("ngSubmit",function(){return n.handleClickUploadButton()}),t.TgZ(21,"div",15)(22,"div",16),t._UZ(23,"app-file",17),t.YNc(24,Ae,5,1,"ng-container",18),t.qZA(),t.TgZ(25,"app-button",19),t._uU(26," \u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u5b9f\u884c "),t.qZA()()()()()),2&e&&(t.Q6J("breadcrumbList",t.kEZ(13,xe,t.DdM(10,Ce),t.DdM(11,Te),t.DdM(12,Ee))),t.xp6(10),t.Q6J("roleTypeName",n.author&&n.author.role_name?n.author.role_name:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."),t.xp6(1),t.hij(" \u767b\u9332\u8005\uff1a",n.author?n.author.last_name+" "+n.author.first_name:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),t.xp6(3),t.Q6J("api$",n.template$)("fileNamePrefix",n.fileNamePrefix),t.xp6(5),t.Q6J("ngForOf",n.descriptions),t.xp6(1),t.Q6J("formGroup",n.bulkAddForm),t.xp6(3),t.Q6J("formCtrl",n.bulkAddForm.controls.file),t.xp6(1),t.Q6J("ngIf",n.fileName),t.xp6(1),t.Q6J("buttonDisabled",n.bulkAddForm.invalid||!n.isUploadable))},dependencies:[g.sg,g.O5,u._Y,u.JL,u.sg,Z.Z,S.R,ge.o,U.r,he.J,_e.V,be.P]}),o})()}]}];let ye=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[b.Bz.forChild(Fe),b.Bz]}),o})();var Ze=i(9307),$=i(5274),H=i(3894);let Ie=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.ez,u.UX,$.s,H.h]}),o})();var Be=i(4560);let Se=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.ez,Be.Z]}),o})();var Ue=i(4933),De=i(9104),Me=i(3042),ke=i(3962),Oe=i(2923),Le=i(4470),Ne=i(8511),Pe=i(3560),Re=i(6968),Je=i(9434),we=i(1326),Ye=i(6321),Qe=i(4663),qe=i(4854),Ve=i(7766);let je=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[T.v],imports:[g.ez,ye,u.UX,Ze.u,Ie,Se,Ue.M,De.u,Me.C,ke.J,Oe.D,Le.x,Ne.Q,Pe.r,$.s,H.h,Re.V,Je.H,we.z,Ye.T,Qe.Q,qe.C,Ve.X]}),o})()}}]);