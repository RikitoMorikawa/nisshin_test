"use strict";(self.webpackChunknisshin=self.webpackChunknisshin||[]).push([[285],{5108:(U,F,s)=>{s.d(F,{P:()=>h});var c=s(1571);const m=["input"];let h=(()=>{class A{constructor(){this.accept="*",this._text="\u30d5\u30a1\u30a4\u30eb\u9078\u629e"}set text(p){p&&(this._text=p)}ngAfterViewInit(){this.formCtrl.valueChanges.subscribe(p=>{p||(this.input.nativeElement.value="")})}onChange(p){const f=p.target.files?.[0];f&&(this.formCtrl.markAsTouched(),this.formCtrl.markAsDirty(),this.formCtrl.setValue(f))}}return A.\u0275fac=function(p){return new(p||A)},A.\u0275cmp=c.Xpm({type:A,selectors:[["app-file"]],viewQuery:function(p,f){if(1&p&&c.Gf(m,5),2&p){let t;c.iGM(t=c.CRH())&&(f.input=t.first)}},inputs:{formCtrl:"formCtrl",accept:"accept",text:"text"},decls:4,vars:2,consts:[["type","button",3,"click"],["type","file",3,"accept","change"],["input",""]],template:function(p,f){if(1&p){const t=c.EpF();c.TgZ(0,"button",0),c.NdJ("click",function(){c.CHM(t);const x=c.MAs(3);return c.KtG(x.click())}),c._uU(1),c.qZA(),c.TgZ(2,"input",1,2),c.NdJ("change",function(x){return f.onChange(x)}),c.qZA()}2&p&&(c.xp6(1),c.Oqu(f._text),c.xp6(1),c.Q6J("accept",f.accept))},styles:["button[_ngcontent-%COMP%]{border-radius:.25rem;--tw-bg-opacity: 1;background-color:rgb(203 213 225 / var(--tw-bg-opacity));padding:.5rem 2rem;text-align:center;--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}button[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity))}input[_ngcontent-%COMP%]{display:none}"]}),A})()},4663:(U,F,s)=>{s.d(F,{Q:()=>A});var c=s(6895),m=s(4006),h=s(1571);let A=(()=>{class v{}return v.\u0275fac=function(f){return new(f||v)},v.\u0275mod=h.oAB({type:v}),v.\u0275inj=h.cJS({imports:[c.ez,m.UX]}),v})()},1451:(U,F,s)=>{s.d(F,{d:()=>p});var c=s(1571),m=s(6303),h=s(1043);const A=["*",[["","message",""]]],v=["*","[message]"];let p=(()=>{class f{constructor(){this.invalid=!1}}return f.\u0275fac=function(D){return new(D||f)},f.\u0275cmp=c.Xpm({type:f,selectors:[["app-select-container"]],inputs:{nameAttrValue:"nameAttrValue",idAttrValue:"idAttrValue",formCtrl:"formCtrl",invalid:"invalid",labelSize:"labelSize",options:"options"},ngContentSelectors:v,decls:6,vars:7,consts:[[1,"flex","flex-col"],[1,"ml-1","mb-1",3,"labelSize","forAttrValue"],[3,"nameAttrValue","idAttrValue","formCtrl","options","invalid"]],template:function(D,x){1&D&&(c.F$t(A),c.TgZ(0,"div",0)(1,"app-label",1),c.Hsn(2),c.qZA(),c.TgZ(3,"div"),c._UZ(4,"app-select",2),c.Hsn(5,1),c.qZA()()),2&D&&(c.xp6(1),c.Q6J("labelSize",x.labelSize)("forAttrValue",x.idAttrValue),c.xp6(3),c.Q6J("nameAttrValue",x.nameAttrValue)("idAttrValue",x.idAttrValue)("formCtrl",x.formCtrl)("options",x.options)("invalid",x.invalid))},dependencies:[m._,h.H]}),f})()},9434:(U,F,s)=>{s.d(F,{H:()=>v});var c=s(6895),m=s(6320),h=s(8460),A=s(1571);let v=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=A.oAB({type:p}),p.\u0275inj=A.cJS({imports:[c.ez,m.r,h.A]}),p})()},2167:(U,F,s)=>{s.d(F,{p:()=>A});var c=s(1571),m=s(1690),h=s(1914);let A=(()=>{class v{constructor(){this.text="\u4e00\u62ec\u767b\u9332"}}return v.\u0275fac=function(f){return new(f||v)},v.\u0275cmp=c.Xpm({type:v,selectors:[["app-bulk-registration-link-org"]],inputs:{path:"path",text:"text"},decls:4,vars:2,consts:[[1,"cursor-pointer",3,"routerLink"],["icon","upload-cloud-2-line","appendClassForIcon","fill-primary-light"]],template:function(f,t){1&f&&(c.TgZ(0,"a",0)(1,"app-icon-container",1)(2,"span"),c._uU(3),c.qZA()()()),2&f&&(c.Q6J("routerLink",t.path),c.xp6(3),c.Oqu(t.text))},dependencies:[m.yS,h.J],styles:['a[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;cursor:pointer}a[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:after{position:absolute;left:0;bottom:-4px;height:1px;width:100%;--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity));--tw-content: "";transform-origin:top left;--tw-scale-x: 0;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));content:var(--tw-content);transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}a[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover:after{content:var(--tw-content);--tw-scale-x: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}']}),v})()},6968:(U,F,s)=>{s.d(F,{V:()=>v});var c=s(6895),m=s(1690),h=s(1326),A=s(1571);let v=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=A.oAB({type:p}),p.\u0275inj=A.cJS({imports:[c.ez,m.Bz,h.z]}),p})()},589:(U,F,s)=>{s.d(F,{P:()=>A});var c=s(6895),m=s(1326),h=s(1571);let A=(()=>{class v{}return v.\u0275fac=function(f){return new(f||v)},v.\u0275mod=h.oAB({type:v}),v.\u0275inj=h.cJS({imports:[c.ez,m.z]}),v})()},8285:(U,F,s)=>{s.r(F),s.d(F,{InventoryControlModule:()=>eo});var c=s(6895),m=s(1690),h=s(727),A=s(5698),v=s(9300),p=s(8037),f=s(6585),t=s(1571),D=s(1609),x=s(2334),S=s(8832),B=s(2125);let L=(()=>{class n{constructor(e,o,r,a){this.modalService=e,this.router=o,this.errorService=r,this.common=a,this.subscription=new h.w0,this.isLoading=!1}ngOnInit(){this.subscription.add(this.errorService.getError().subscribe(e=>{this.handleError(e)})),this.subscription.add(this.common.loading$.subscribe(e=>{setTimeout(()=>this.isLoading=e)}))}ngOnDestroy(){this.subscription.unsubscribe()}handleError(e){e.redirectPath&&(this.redirectPath=e.redirectPath),this.modalService.setModal(e.title,0===e.status?e.message+p.c.GUIDANCE_OF_SUPPORT:`\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9: ${e.status} \n\u30e1\u30c3\u30bb\u30fc\u30b8: `+e.message+p.c.GUIDANCE_OF_SUPPORT,"danger",f.yR.BUTTON_TITLE.CLOSE,""),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,A.q)(1),(0,v.h)(r=>this.modalService.getModalProperties().title===e.title)).subscribe(r=>{this.redirectPath&&this.router.navigateByUrl(this.redirectPath)}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.Z),t.Y36(m.F0),t.Y36(x.T),t.Y36(S.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inventory-control"]],decls:2,vars:1,consts:[[3,"isLoading"]],template:function(e,o){1&e&&t._UZ(0,"router-outlet")(1,"app-loading-container",0),2&e&&(t.xp6(1),t.Q6J("isLoading",o.isLoading))},dependencies:[m.lC,B.o]}),n})();var g=s(7579),E=s(7030),y=s(529),T=s(262),Z=s(9646),Q=s(5450),M=s(1267),P=s(4006),l=s(6082),u=s(2e3),_=s(5146),b=s(3761),I=s(9612),w=s(1451),k=s(3148);function q(n,i){1&n&&t.GkF(0)}function $(n,i){1&n&&t.GkF(0)}function ht(n,i){1&n&&t.GkF(0)}function gt(n,i){1&n&&t.GkF(0,25)}function ft(n,i){1&n&&(t.TgZ(0,"app-button",26),t._uU(1," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),t.qZA())}function vt(n,i){1&n&&(t.TgZ(0,"app-button",27),t._uU(1," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),t.qZA())}function bt(n,i){1&n&&(t.TgZ(0,"span",30),t._uU(1,"\u5fc5\u9808"),t.qZA())}function Ct(n,i){if(1&n&&(t.TgZ(0,"div",28)(1,"span"),t._uU(2),t.qZA(),t.YNc(3,bt,2,0,"span",29),t.qZA()),2&n){const e=i.label,o=i.required;t.xp6(2),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",o)}}function Tt(n,i){if(1&n&&(t.TgZ(0,"p",31),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorConst.FORM_ERROR.DATE_TERM_TO_BEFORE_FROM," ")}}const yt=function(){return{label:"\u5546\u54c1\u540d",required:!1}},At=function(){return{label:"\u5e97\u8217\u540d",required:!1}},xt=function(){return{label:"\u671f\u9593\u6307\u5b9a",required:!1}};let Et=(()=>{class n{constructor(e,o,r){this.fb=e,this.productService=o,this.storeService=r,this.searchEvent=new t.vpe,this.errorEvent=new t.vpe,this.subscription=new h.w0,this.hasSearchPanelOpened=!1,this.rotateAnimation="",this.filteredOptions=[],this.errorConst=p.c,this.searchForm=this.fb.group({id:"",product_id:"",product_name:"",store_id:"",store_name:"",created_at:this.fb.group({from:"",to:""},{validators:[Q.d.beforeFromDate()]})})}get sfc(){return this.searchForm.controls}ngOnInit(){this.getStoreOptions()}formControlStateManager(e){return(e.touched||e.dirty)&&e.invalid}getProductSuggests(){return{observable:this.productService.getAll({name:this.sfc.product_name.value}),idField:"id",nameField:"name"}}getStoreOptions(){this.subscription.add(this.storeService.getAll().pipe((0,T.K)(e=>(0,Z.of)(e))).subscribe(e=>{if(e instanceof y.UA)return void this.handleError(e);const r=e.data.map(a=>({value:a.id,text:a.name}));this.storeOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...r]}))}handleClickSearchPaneToggleButton(){this.hasSearchPanelOpened?(this.hasSearchPanelOpened=!1,this.rotateAnimation="rotate-animation-0",this.searchForm.reset({id:"",product_id:"",product_name:"",store_id:"",store_name:"",created_at:{from:"",to:""}})):(this.hasSearchPanelOpened=!0,this.rotateAnimation="rotate-animation-180")}handleClickSearchClearButton(){Object.values(this.sfc).forEach(e=>e.patchValue("")),this.searchForm.reset({created_at:{from:"",to:""}})}handleClickSearchSubmitButton(){const e=this.searchForm.value,r=(0,M.vP)({id:e.id,product_id:e.product_id,store_id:e.store_id,created_at:e.created_at});this.searchEvent.emit((0,M.g3)(r))}handleError(e){this.errorEvent.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P.qu),t.Y36(l.M),t.Y36(u.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stock-search"]],outputs:{searchEvent:"searchEvent",errorEvent:"errorEvent"},decls:37,vars:31,consts:[[1,"mt-8"],["btnType","button",3,"click"],[1,"w-6"],["icon","filter-2-line"],[1,"inline-block","ml-1","mr-2"],[1,"inline-block","w-6"],["icon","arrow-down-s-fill"],[1,"mt-6"],[1,"stock-search","width-limit-break","bg-white"],["autocomplete","off",1,"w-[1280px]","mx-auto","px-4",3,"formGroup","ngSubmit"],[1,"flex","gap-4"],[1,"w-1/4"],["nameAttrValue","product_name","idAttrValue","product-name",3,"idCtrl","nameCtrl","apiInput","invalid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["nameAttrValue","store_id","idAttrValue","store-id",3,"formCtrl","options","invalid"],[1,"flex","gap-4","mt-6"],[1,"w-1/2"],["nameAttrValue","billing_date_from","idAttrValue","billing-date-from",3,"dateFromFormCtrl","dateToFormCtrl","invalid"],["message","",4,"ngIf","ngIfThen"],[1,"flex","gap-8","mt-10"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",4,"ngIf","ngIfElse"],[1,"mt-2","text-sm","text-red"],["disable",""],["labels",""],["beforeFromDate",""],["message",""],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover"],["btnFillColor","text-white bg-slate-300 hover:bg-slate-300"],[1,"flex","items-center","gap-2"],["class","px-3 py-0.5 text-xs text-white bg-warning-dark rounded-full",4,"ngIf"],[1,"px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],[1,"mt-1","pl-1","text-sm","text-red"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"app-button",1),t.NdJ("click",function(){return o.handleClickSearchPaneToggleButton()}),t.TgZ(2,"span",2),t._UZ(3,"app-icon",3),t.qZA(),t.TgZ(4,"span",4),t._uU(5),t.qZA(),t.TgZ(6,"span",5),t._UZ(7,"app-icon",6),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8)(10,"form",9),t.NdJ("ngSubmit",function(){return o.handleClickSearchSubmitButton()}),t.TgZ(11,"div",10)(12,"div",11)(13,"app-real-time-suggest-container",12),t.YNc(14,q,1,0,"ng-container",13),t.qZA()(),t.TgZ(15,"div",11)(16,"app-select-container",14),t.YNc(17,$,1,0,"ng-container",13),t.qZA()(),t._UZ(18,"div",11)(19,"div",11),t.qZA(),t.TgZ(20,"div",15)(21,"div",16)(22,"app-date-term-clear-container",17),t.YNc(23,ht,1,0,"ng-container",13),t.YNc(24,gt,1,0,"ng-container",18),t.qZA()()(),t.TgZ(25,"div",19)(26,"app-button",1),t.NdJ("click",function(){return o.handleClickSearchClearButton()}),t._uU(27," \u5165\u529b\u5185\u5bb9\u30af\u30ea\u30a2 "),t.qZA(),t.YNc(28,ft,2,0,"app-button",20),t.qZA(),t.TgZ(29,"p",21),t._uU(30," \u203b \u5165\u529b\u5185\u5bb9\u3092\u30af\u30ea\u30a2\u3057\u305f\u5f8c\u306b\u7d5e\u308a\u8fbc\u307f\u5b9f\u884c\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u5168\u3066\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002 "),t.qZA()()()()(),t.YNc(31,vt,2,0,"ng-template",null,22,t.W1O),t.YNc(33,Ct,4,2,"ng-template",null,23,t.W1O),t.YNc(35,Tt,2,1,"ng-template",null,24,t.W1O)),2&e){const r=t.MAs(32),a=t.MAs(34),C=t.MAs(36);t.xp6(5),t.hij(" ",o.hasSearchPanelOpened?"\u7d5e\u308a\u8fbc\u307f\u30d5\u30a9\u30fc\u30e0\u975e\u8868\u793a":"\u7d5e\u308a\u8fbc\u307f\u30d5\u30a9\u30fc\u30e0\u8868\u793a"," "),t.xp6(1),t.Tol(o.rotateAnimation),t.xp6(3),t.ekj("is-open",o.hasSearchPanelOpened)("shadow",o.hasSearchPanelOpened),t.xp6(1),t.Q6J("formGroup",o.searchForm),t.xp6(3),t.Q6J("idCtrl",o.sfc.product_id)("nameCtrl",o.sfc.product_name)("apiInput",o.getProductSuggests())("invalid",o.formControlStateManager(o.sfc.product_name)),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(28,yt)),t.xp6(2),t.Q6J("formCtrl",o.sfc.store_id)("options",o.storeOptions)("invalid",o.formControlStateManager(o.sfc.store_id)),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(29,At)),t.xp6(5),t.Q6J("dateFromFormCtrl",o.sfc.created_at.controls.from)("dateToFormCtrl",o.sfc.created_at.controls.to)("invalid",!!o.sfc.created_at.errors),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(30,xt)),t.xp6(1),t.Q6J("ngIf",null==o.sfc.created_at.errors?null:o.sfc.created_at.errors.beforeFromDate)("ngIfThen",C),t.xp6(4),t.Q6J("ngIf",o.searchForm.valid)("ngIfElse",r)}},dependencies:[c.O5,c.tP,P._Y,P.JL,P.sg,_.r,b.o,I.Y,w.d,k.w],styles:[".stock-search[_ngcontent-%COMP%]{max-height:0;padding:0 2.5rem;margin:0;transition:max-height .8s,padding .8s,margin .8s ease-in;overflow:hidden}.stock-search.is-open[_ngcontent-%COMP%]{max-height:100vh;padding:2.5rem;margin:2rem 0;overflow:visible}"]}),n})();var X=s(8505),V=s(3900),N=s(8746),R=s(2340),rt=s(1751);let it=(()=>{class n extends rt.O{constructor(){super(...arguments),this.endpoint=R.pU.stockApi.endpoint}getAll(e={}){return this.httpOptions.params=e,this.http.get(this.endpoint,this.httpOptions).pipe((0,T.K)(this.setErrorMessage("\u4ed5\u5165\u5148\u4e00\u89a7\u306e\u53d6\u5f97")))}find(e){return this.http.get(`${this.endpoint}/${e}`).pipe((0,T.K)(this.setErrorMessage("\u4ed5\u5165\u5148\u60c5\u5831\u306e\u53d6\u5f97")))}getCsv(e){const o={responseType:"text",headers:new y.WM({"X-Download":e})};return this.http.get(this.endpoint,o).pipe((0,T.K)(this.setErrorMessage("\u4e00\u62ec\u767b\u9332\u7528\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u53d6\u5f97")))}}return n.\u0275fac=function(){let i;return function(o){return(i||(i=t.n5z(n)))(o||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var It=s(2640);let Ft=(()=>{class n{constructor(e,o){this.stockService=e,this.common=o,this.subscription=new h.w0,this.errorEvent=new t.vpe,this.filter={},this.pages={page:1,itemsPerPage:10,sort:{column:"\u5728\u5eabID",order:"desc"}},this.tableParams=new g.x,this.tableNameMapping=[{name:"id",name_jp:"\u5728\u5eabID"},{name:"product_id",name_jp:"\u5546\u54c1ID"},{name:"product_name",name_jp:"\u5546\u54c1\u540d"},{name:"store_name",name_jp:"\u5e97\u8217\u540d"},{name:"quantity",name_jp:"\u6708\u6b21\u7406\u8ad6\u5728\u5eab"},{name:"created_at",name_jp:"\u767b\u9332\u65e5\u6642"}]}ngOnInit(){this.getTableData(),this.tableEvent.next(this.pages)}getTableData(){this.subscription.add(this.tableEvent.pipe((0,X.b)(e=>this.common.loading=!0),(0,V.w)(e=>this.stockService.getAll(this.createApiParams(e))),(0,T.K)(e=>(0,Z.of)(e)),(0,N.x)(()=>this.common.loading=!1)).subscribe({next:e=>{this.common.loading=!1,e instanceof y.UA?this.handleError(e):this.tableParams.next(this.createTableParams(e))},complete:()=>this.getTableData()}))}createApiParams(e){this.isTableWithPaginationEvent(e)?this.pages=e:(this.filter=e,this.pages.page=1);const r=this.tableNameMapping.find(a=>a.name_jp===this.pages.sort.column)?.name;return{...this.filter,limit:this.pages.itemsPerPage,offset:(this.pages.page-1)*this.pages.itemsPerPage,sort:r?`${r}:${this.pages.sort.order}`:""}}isTableWithPaginationEvent(e){const{page:o,itemsPerPage:r,sort:a}=e;return"number"==typeof o&&"number"==typeof r&&"object"==typeof a}createTableParams(e){const o=this.tableNameMapping.map(a=>a.name_jp),r=e.data.map(a=>this.tableNameMapping.map(C=>a[C.name]));return r.forEach((a,C)=>{let d=-1;d=o.indexOf("\u5728\u5eabID"),a[d]={href:`./detail/${a[d]}`,text:a[d]+""},d=o.indexOf("\u5546\u54c1ID"),a[d]={href:`/master/product/detail/${a[d]}`,text:a[d]+""},d=o.indexOf("\u767b\u9332\u65e5\u6642"),a[d]=new Date(a[d]).toLocaleString()}),{total:e.totalItems,header:o,body:r}}handleError(e){this.errorEvent.emit(e)}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(it),t.Y36(S.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stock-table"]],inputs:{tableEvent:"tableEvent"},outputs:{errorEvent:"errorEvent"},decls:2,vars:2,consts:[[3,"params","loading","pageChange"]],template:function(e,o){1&e&&(t.TgZ(0,"app-table-with-pagination",0),t.NdJ("pageChange",function(a){return o.tableEvent.next(a)}),t._uU(1," \u5728\u5eab\u4e00\u89a7\n"),t.qZA()),2&e&&t.Q6J("params",o.tableParams)("loading",o.common.loading)},dependencies:[It.i]}),n})();const Pt=function(){return{exact:!0}};let G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-toggle-button"]],decls:5,vars:2,consts:[[1,"mt-8"],["routerLink","/inventory-control","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/inventory-control/inventory","routerLinkActive","active"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t._uU(2," \u5728\u5eab "),t.qZA(),t.TgZ(3,"button",2),t._uU(4," \u68da\u5378 "),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("routerLinkActiveOptions",t.DdM(1,Pt)))},dependencies:[m.rH,m.Od],styles:["button[_ngcontent-%COMP%]{border-width:1px;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding:.25rem 1rem}button[_ngcontent-%COMP%]:first-child{border-top-left-radius:.25rem;border-bottom-left-radius:.25rem}button[_ngcontent-%COMP%]:last-child{border-top-right-radius:.25rem;border-bottom-right-radius:.25rem}.active[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}"]}),n})();const Dt=function(){return{text:"\u5728\u5eab"}},Ot=function(n){return[n]};let Zt=(()=>{class n{constructor(e){this.errorService=e,this.subscription=new h.w0,this.parentSearchEvent=new g.x,this.parentTableEvent=new g.x}ngOnInit(){this.subscription.add(this.parentSearchEvent.subscribe(e=>{this.parentTableEvent.next(e)}))}ngOnDestroy(){this.subscription.unsubscribe()}handleError(e){this.errorService.setError({status:e.status,title:e.error?e.error.title:"\u30a8\u30e9\u30fc",message:e.error.message?e.error.message:e.message})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stock"]],decls:4,vars:5,consts:[[3,"breadcrumbList"],[1,"block","mb-4",3,"searchEvent","errorEvent"],[3,"tableEvent","errorEvent"]],template:function(e,o){1&e&&(t._UZ(0,"app-breadcrumb-org",0)(1,"app-toggle-button"),t.TgZ(2,"app-stock-search",1),t.NdJ("searchEvent",function(a){return o.parentSearchEvent.next(a)})("errorEvent",function(a){return o.handleError(a)}),t.qZA(),t.TgZ(3,"app-stock-table",2),t.NdJ("errorEvent",function(a){return o.handleError(a)}),t.qZA()),2&e&&(t.Q6J("breadcrumbList",t.VKq(3,Ot,t.DdM(2,Dt))),t.xp6(3),t.Q6J("tableEvent",o.parentTableEvent))},dependencies:[E.Z,Et,Ft,G],styles:['div[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;cursor:pointer}div[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:after{position:absolute;left:0;bottom:-4px;height:1px;width:100%;--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity));--tw-content: "";transform-origin:top left;--tw-scale-x: 0;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));content:var(--tw-content);transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}div[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover:after{content:var(--tw-content);--tw-scale-x: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}']}),n})();var wt=s(4004),kt=s(4128),H=s(9586);function St(n,i){if(1&n&&(t.TgZ(0,"li",13)(1,"div",14),t._uU(2),t.qZA(),t.TgZ(3,"div",15),t._uU(4),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.value," ")}}const Mt=function(){return{path:"/inventory-control",text:"\u5728\u5eab\u4e00\u89a7"}},Ut=function(){return{text:"\u5728\u5eab\u8a73\u7d30"}},Bt=function(n,i){return[n,i]};let Nt=(()=>{class n{constructor(e,o,r,a){this.route=e,this.modal=o,this.stockService=r,this.common=a,this.stock={},this.stockId=this.route.snapshot.params.id,this.listItems=[{name:"\u5546\u54c1\u540d",prop_name:"product_name"},{name:"\u6708\u6b21\u7406\u8ad6\u5728\u5eab",prop_name:"quantity"},{name:"\u5e97\u8217\u540d",prop_name:"store_name"},{name:"\u96c6\u8a08\u65e5\u6642",prop_name:"created_at"}]}ngOnInit(){window.scrollTo(0,0),this.common.loading=!0;const e=this.stockService.find(this.stockId).pipe((0,wt.U)(o=>o.data[0]),(0,T.K)(this.handleError()));(0,kt.D)({stock$:e}).pipe((0,N.x)(()=>this.common.loading=!1)).subscribe(o=>{this.stock=o.stock$,this.setListItemsValue(o.stock$)})}handleError(){return e=>(console.error(e),this.modal.setModal(`\u901a\u4fe1\u30a8\u30e9\u30fc(${e.status})`,e.message,"danger","\u9589\u3058\u308b",""),(0,Z.of)({}))}setListItemsValue(e){this.listItems.filter(o=>o.prop_name).forEach(o=>{o.value=(e[o.prop_name]??"")+""}),this.getListItem("\u96c6\u8a08\u65e5\u6642").value=new Date(e.created_at).toLocaleString()}getListItem(e){return this.listItems.find(o=>o.name===e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz),t.Y36(D.Z),t.Y36(it),t.Y36(S.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stock-detail"]],decls:18,vars:10,consts:[[3,"breadcrumbList"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"flex","flex-row","items-center","gap-6"],["path","/inventory-control"],[1,"width-limit-break","border-t","border-gray-400"],[1,"mt-8","py-8","px-6","bg-white","shadow","border","border-gray-300"],[1,"border-t-primary-light-hover","border-t-4","mb-2"],[1,"text-2xl"],[1,"mt-6","flex","flex-row","gap-10"],[1,"grow"],[1,"border-t","border-y","border-gray-200","shadow"],["class","flex flex-row items-center border-b border-b-gray-200",4,"ngFor","ngForOf"],[1,"flex","flex-row","items-center","border-b","border-b-gray-200"],[1,"px-4","py-3","bg-slate-100","min-w-[200px]"],[1,"px-4","py-3","border-l","border-l-gray-200","grow"]],template:function(e,o){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main")(2,"h1",1),t._uU(3,"\u5728\u5eab\u8a73\u7d30"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"app-back-to-link-org",4),t._uU(7,"\u4e00\u89a7\u3078\u623b\u308b"),t.qZA()()(),t._UZ(8,"hr",5),t.TgZ(9,"div",6),t._UZ(10,"hr",7),t.TgZ(11,"p",8),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"div",9)(15,"div",10)(16,"ul",11),t.YNc(17,St,5,2,"li",12),t.qZA()()()()()),2&e&&(t.Q6J("breadcrumbList",t.WLB(7,Bt,t.DdM(5,Mt),t.DdM(6,Ut))),t.xp6(12),t.hij(" \u6708\u6b21\u7406\u8ad6\u5728\u5eab\uff1a",o.stock.quantity?t.lcZ(13,3,o.stock.quantity):"-"," "),t.xp6(5),t.Q6J("ngForOf",o.listItems))},dependencies:[c.sg,E.Z,H.i,c.JJ]}),n})();function Jt(n,i){1&n&&t.GkF(0)}function Lt(n,i){1&n&&t.GkF(0)}function Qt(n,i){1&n&&t.GkF(0,26)}function Yt(n,i){1&n&&t.GkF(0)}function Wt(n,i){1&n&&t.GkF(0,26)}function qt(n,i){1&n&&(t.TgZ(0,"app-button",27),t._uU(1," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),t.qZA())}function Rt(n,i){1&n&&(t.TgZ(0,"app-button",28),t._uU(1," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),t.qZA())}function jt(n,i){1&n&&(t.TgZ(0,"span",31),t._uU(1,"\u5fc5\u9808"),t.qZA())}function Kt(n,i){if(1&n&&(t.TgZ(0,"div",29)(1,"span"),t._uU(2),t.qZA(),t.YNc(3,jt,2,0,"span",30),t.qZA()),2&n){const e=i.label,o=i.required;t.xp6(2),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",o)}}function $t(n,i){if(1&n&&(t.TgZ(0,"p",32),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorConst.FORM_ERROR.DATE_TERM_TO_BEFORE_FROM," ")}}const Xt=function(){return{label:"\u5e97\u8217",required:!1}},Vt=function(){return{label:"\u68da\u5378\u5b9f\u884c\u65e5",required:!1}},Gt=function(){return{label:"\u68da\u5378\u5b8c\u4e86\u65e5",required:!1}};let Ht=(()=>{class n{constructor(e,o){this.fb=e,this.storeService=o,this.subscription=new h.w0,this.searchEvent=new t.vpe,this.errorEvent=new t.vpe,this.errorConst=p.c,this.hasSearchPanelOpened=!1,this.rotateAnimation="",this.searchForm=this.fb.group({store_id:"",inventory_execution_date:this.fb.group({from:"",to:""},{validators:[Q.d.beforeFromDate()]}),inventory_complete_date:this.fb.group({from:"",to:""},{validators:[Q.d.beforeFromDate()]})})}get sfc(){return this.searchForm.controls}ngOnInit(){this.getStoreOptions()}formControlStateManager(e){return(e.touched||e.dirty)&&e.invalid}getStoreOptions(){this.subscription.add(this.storeService.getAll().pipe((0,T.K)(e=>(0,Z.of)(e))).subscribe(e=>{if(e instanceof y.UA)return void this.handleError(e.status,e.error?e.error.title:"\u30a8\u30e9\u30fc",e.error?e.error.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002");const r=e.data.map(a=>({value:a.id,text:a.name}));this.storeOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...r]}))}handleClickSearchPaneToggleButton(){this.hasSearchPanelOpened?(this.hasSearchPanelOpened=!1,this.rotateAnimation="rotate-animation-0",this.searchForm.reset({store_id:"",inventory_execution_date:{from:"",to:""},inventory_complete_date:{from:"",to:""}})):(this.hasSearchPanelOpened=!0,this.rotateAnimation="rotate-animation-180")}handleClickSearchClearButton(){this.searchForm.reset({store_id:"",inventory_execution_date:{from:"",to:""},inventory_complete_date:{from:"",to:""}})}handleClickSearchSubmitButton(){const e=this.searchForm.value,r=(0,M.vP)({store_id:e.store_id,inventory_execution_date:e.inventory_execution_date,inventory_complete_date:e.inventory_complete_date});this.searchEvent.emit((0,M.g3)(r))}handleError(e,o,r,a){this.errorEvent.emit({status:e,title:o,message:r,redirectPath:a||void 0})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P.qu),t.Y36(u.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inventory-group-search"]],outputs:{searchEvent:"searchEvent",errorEvent:"errorEvent"},decls:37,vars:32,consts:[[1,"mt-8"],["btnType","button",3,"click"],[1,"w-6"],["icon","filter-2-line"],[1,"inline-block","ml-1","mr-2"],[1,"inline-block","w-6"],["icon","arrow-down-s-fill"],[1,"mt-6"],[1,"inventory-group-search","width-limit-break","bg-white"],["autocomplete","off",1,"w-[1280px]","mx-auto","px-4",3,"formGroup","ngSubmit"],[1,"flex","gap-4"],[1,"w-1/3"],["nameAttrValue","store_id","idAttrValue","store-id",3,"formCtrl","options","invalid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-2/3"],[1,"flex","gap-4","mt-6"],[1,"w-1/2"],["nameAttrValue","inventory_execution_date_from","idAttrValue","inventory-execution-date-from","toNameAttrValue","inventory_execution_date_to","toIdAttrValue","inventory-execution-date-to","placeholder","\u671f\u9593\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044",3,"dateFromFormCtrl","dateToFormCtrl","invalid"],["message","",4,"ngIf","ngIfThen"],["nameAttrValue","inventory_complete_date_from","idAttrValue","inventory-complete-date-from","toNameAttrValue","inventory_complete_date_to","toIdAttrValue","inventory-complete-date-to","placeholder","\u671f\u9593\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044",3,"dateFromFormCtrl","dateToFormCtrl","invalid"],[1,"flex","gap-8","mt-10"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",4,"ngIf","ngIfElse"],[1,"mt-2","text-sm","text-red"],["disable",""],["labels",""],["beforeFromDate",""],["message",""],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover"],["btnFillColor","text-white bg-slate-300 hover:bg-slate-300"],[1,"flex","items-center","gap-2"],["class","px-3 py-0.5 text-xs text-white bg-warning-dark rounded-full",4,"ngIf"],[1,"px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],[1,"mt-1","pl-1","text-sm","text-red"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"app-button",1),t.NdJ("click",function(){return o.handleClickSearchPaneToggleButton()}),t.TgZ(2,"span",2),t._UZ(3,"app-icon",3),t.qZA(),t.TgZ(4,"span",4),t._uU(5),t.qZA(),t.TgZ(6,"span",5),t._UZ(7,"app-icon",6),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8)(10,"form",9),t.NdJ("ngSubmit",function(){return o.handleClickSearchSubmitButton()}),t.TgZ(11,"div",10)(12,"div",11)(13,"app-select-container",12),t.YNc(14,Jt,1,0,"ng-container",13),t.qZA()(),t._UZ(15,"div",14),t.qZA(),t.TgZ(16,"div",15)(17,"div",16)(18,"app-date-term-clear-container",17),t.YNc(19,Lt,1,0,"ng-container",13),t.YNc(20,Qt,1,0,"ng-container",18),t.qZA()(),t.TgZ(21,"div",16)(22,"app-date-term-clear-container",19),t.YNc(23,Yt,1,0,"ng-container",13),t.YNc(24,Wt,1,0,"ng-container",18),t.qZA()()(),t.TgZ(25,"div",20)(26,"app-button",1),t.NdJ("click",function(){return o.handleClickSearchClearButton()}),t._uU(27," \u5165\u529b\u5185\u5bb9\u30af\u30ea\u30a2 "),t.qZA(),t.YNc(28,qt,2,0,"app-button",21),t.qZA(),t.TgZ(29,"p",22),t._uU(30," \u203b \u5165\u529b\u5185\u5bb9\u3092\u30af\u30ea\u30a2\u3057\u305f\u5f8c\u306b\u7d5e\u308a\u8fbc\u307f\u5b9f\u884c\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u5168\u3066\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002 "),t.qZA()()()()(),t.YNc(31,Rt,2,0,"ng-template",null,23,t.W1O),t.YNc(33,Kt,4,2,"ng-template",null,24,t.W1O),t.YNc(35,$t,2,1,"ng-template",null,25,t.W1O)),2&e){const r=t.MAs(32),a=t.MAs(34),C=t.MAs(36);t.xp6(5),t.hij(" ",o.hasSearchPanelOpened?"\u7d5e\u308a\u8fbc\u307f\u30d5\u30a9\u30fc\u30e0\u975e\u8868\u793a":"\u7d5e\u308a\u8fbc\u307f\u30d5\u30a9\u30fc\u30e0\u8868\u793a"," "),t.xp6(1),t.Tol(o.rotateAnimation),t.xp6(3),t.ekj("is-open",o.hasSearchPanelOpened)("shadow",o.hasSearchPanelOpened),t.xp6(1),t.Q6J("formGroup",o.searchForm),t.xp6(3),t.Q6J("formCtrl",o.sfc.store_id)("options",o.storeOptions)("invalid",o.formControlStateManager(o.sfc.store_id)),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(29,Xt)),t.xp6(4),t.Q6J("dateFromFormCtrl",o.sfc.inventory_execution_date.controls.from)("dateToFormCtrl",o.sfc.inventory_execution_date.controls.to)("invalid",!!o.sfc.inventory_execution_date.errors),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(30,Vt)),t.xp6(1),t.Q6J("ngIf",null==o.sfc.inventory_execution_date.errors?null:o.sfc.inventory_execution_date.errors.beforeFromDate)("ngIfThen",C),t.xp6(2),t.Q6J("dateFromFormCtrl",o.sfc.inventory_complete_date.controls.from)("dateToFormCtrl",o.sfc.inventory_complete_date.controls.to)("invalid",!!o.sfc.inventory_complete_date.errors),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(31,Gt)),t.xp6(1),t.Q6J("ngIf",null==o.sfc.inventory_complete_date.errors?null:o.sfc.inventory_complete_date.errors.beforeFromDate)("ngIfThen",C),t.xp6(4),t.Q6J("ngIf",o.searchForm.valid)("ngIfElse",r)}},dependencies:[c.O5,c.tP,P._Y,P.JL,P.sg,_.r,b.o,w.d,k.w],styles:[".inventory-group-search[_ngcontent-%COMP%]{max-height:0;padding:0 2.5rem;margin:0;transition:max-height .8s,padding .8s,margin .8s ease-in;overflow:hidden}.inventory-group-search.is-open[_ngcontent-%COMP%]{max-height:100vh;padding:2.5rem;margin:2rem 0;overflow:visible}"]}),n})(),Y=(()=>{class n extends rt.O{constructor(){super(...arguments),this.endpoint=R.pU.inventoryApi.endpoint,this.groupEndpoint=R.pU.inventoryGroupApi.endpoint,this.completeEndpoint=R.pU.inventoryCompleteApi.endpoint,this.notInputEndpoint=R.pU.inventoryNotInputApi.endpoint,this.getAllEndpoint=this.endpoint,this._inventoryUpdateEventSource=new g.x,this.inventoryUpdateEvent$=this._inventoryUpdateEventSource.asObservable()}changeGetAllEndpoint(e){this.getAllEndpoint=e?this.notInputEndpoint:this.endpoint}getAll(e={}){return this.httpOptions.params=e,this.http.get(this.getAllEndpoint,this.httpOptions).pipe((0,T.K)(this.setErrorMessage("\u68da\u5378\u4e00\u89a7\u306e\u53d6\u5f97")))}getGroupAll(e={}){return this.httpOptions.params=e,this.http.get(this.groupEndpoint,this.httpOptions).pipe((0,T.K)(this.setErrorMessage("\u68da\u5378\u4e00\u89a7\u306e\u53d6\u5f97")))}find(e){return this.http.get(`${this.endpoint}/${e}`).pipe((0,T.K)(this.setErrorMessage("\u68da\u5378\u60c5\u5831\u306e\u53d6\u5f97")))}add(e){const o=this.generateFormData(e);return this.http.post(this.endpoint,o).pipe((0,T.K)(this.setErrorMessage("\u68da\u5378\u60c5\u5831\u306e\u767b\u9332")))}bulkAdd(e){const o=this.generateFormData({file:e});return this.http.put(this.endpoint,o).pipe((0,T.K)(this.setErrorMessage("\u68da\u5378\u60c5\u5831\u306e\u4e00\u62ec\u767b\u9332")))}getPdf(e={},o){const r={params:e,responseType:"blob",headers:new y.WM({"X-Download":o})};return this.http.get(this.notInputEndpoint,r).pipe((0,T.K)(this.setErrorMessage("\u68da\u5378\u8868PDF\u30d5\u30a1\u30a4\u30eb\u306e\u53d6\u5f97")))}update(e){const o=this.generateFormData(e);return this.http.patch(`${this.endpoint}`,o).pipe((0,T.K)(this.setErrorMessage("\u68da\u5378\u60c5\u5831\u306e\u66f4\u65b0")))}remove(e){return this.http.delete(`${this.endpoint}/${e}`).pipe((0,T.K)(this.setErrorMessage("\u68da\u5378\u60c5\u5831\u306e\u524a\u9664")))}complete(e){const o=this.generateFormData({management_cd:e});return this.http.patch(this.completeEndpoint,o).pipe((0,T.K)(this.setErrorMessage("\u68da\u5378\u5b8c\u4e86\u60c5\u5831\u306e\u767b\u9332")))}sendInventoryUpdateEvent(e){this._inventoryUpdateEventSource.next(e)}}return n.\u0275fac=function(){let i;return function(o){return(i||(i=t.n5z(n)))(o||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zt(n,i){if(1&n&&t._UZ(0,"app-icon",6),2&n){const e=t.oxw().$implicit,o=t.oxw();t.Q6J("icon",o.sort.column===e&&"desc"===o.sort.order?"sort-desc":"sort-asc")("ngClass",o.sort.column===e?"fill-primary":"fill-slate-300")}}function te(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"th",3),t.NdJ("click",function(){const a=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.changeSort(a))}),t.TgZ(1,"div",4)(2,"span"),t._uU(3),t.qZA(),t.YNc(4,zt,1,2,"app-icon",5),t.qZA()()}if(2&n){const e=i.$implicit;t.Q6J("ngClass",e?"hover:bg-iron-blue-200 cursor-pointer":"cursor-auto"),t.xp6(3),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",e)}}function ee(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"a",12),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",e.href),t.xp6(1),t.hij(" ",e.text," ")}}function ne(n,i){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e," ")}}const oe=function(n){return[n]};function re(n,i){if(1&n&&(t.TgZ(0,"td",9),t.YNc(1,ee,3,2,"ng-container",10),t.YNc(2,ne,1,1,"ng-template",null,11,t.W1O),t.qZA()),2&n){const e=i.$implicit,o=t.MAs(3),r=t.oxw().first,a=t.oxw();t.Q6J("ngClass",t.VKq(3,oe,r?"":"border-t border-t-iron-blue-300")),t.xp6(1),t.Q6J("ngIf",a.isLinkData(e))("ngIfElse",o)}}function ie(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"tr",7),t.YNc(2,re,4,5,"td",8),t.qZA(),t.BQk()),2&n){const e=i.$implicit;t.xp6(2),t.Q6J("ngForOf",e)}}let ae=(()=>{class n{constructor(){this.event=new t.vpe}ngOnInit(){this.sort={column:this.header?this.header.filter(e=>e)[0]:"",order:"asc"}}changeSort(e){!e||(this.sort.order=this.sort.column===e&&"asc"===this.sort.order?"desc":"asc",this.sort.column=e,this.event.emit(this.sort))}isLinkData(e){return!this.itemIsEmpty(e)&&void 0!==e.href}itemIsEmpty(e){return null==e||""===e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-child-table"]],inputs:{header:"header",data:"data"},outputs:{event:"event"},decls:6,vars:2,consts:[[1,"whitespace-nowrap","border-separate","border-spacing-0","w-full"],["class","font-normal border border-x-0 border-slate-300 px-3 py-4 hover:transition-all duration-300",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"font-normal","border","border-x-0","border-slate-300","px-3","py-4","hover:transition-all","duration-300",3,"ngClass","click"],[1,"flex","gap-1"],["class","w-6",3,"icon","ngClass",4,"ngIf"],[1,"w-6",3,"icon","ngClass"],[1,"bg-white","even:bg-iron-blue-100","hover:bg-iron-blue-200","hover:transition-all","duration-300"],["class","px-3 py-4",3,"ngClass",4,"ngFor","ngForOf"],[1,"px-3","py-4",3,"ngClass"],[4,"ngIf","ngIfElse"],["normalData",""],[1,"text-primary-light","border-b","border-primary-light","hover:text-primary-light-hover","hover:border-primary-light-hover",3,"routerLink"]],template:function(e,o){1&e&&(t.TgZ(0,"table",0)(1,"thead")(2,"tr"),t.YNc(3,te,5,3,"th",1),t.qZA()(),t.TgZ(4,"tbody"),t.YNc(5,ie,3,1,"ng-container",2),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("ngForOf",o.header),t.xp6(2),t.Q6J("ngForOf",o.data))},dependencies:[c.mk,c.sg,c.O5,m.yS,b.o]}),n})();var W=s(4333),at=s(8501),st=s(1043),ct=s(5142);function se(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-icon",20),t.NdJ("click",function(){t.CHM(e),t.oxw();const r=t.MAs(11);return t.KtG(r.setCurrent(1))}),t.qZA()}}function ce(n,i){1&n&&t._UZ(0,"app-icon",21)}function le(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-icon",22),t.NdJ("click",function(){t.CHM(e),t.oxw();const r=t.MAs(11);return t.KtG(r.previous())}),t.qZA()}}function pe(n,i){1&n&&t._UZ(0,"app-icon",23)}function ue(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",27),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;t.oxw();const a=t.MAs(11);return t.KtG(a.setCurrent(r.value))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.label)}}function de(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.label)}}function me(n,i){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,ue,2,1,"span",25),t.YNc(2,de,2,1,"span",26),t.qZA()),2&n){const e=i.$implicit;t.oxw();const o=t.MAs(11);t.Q6J("ngClass",o.getCurrent()===e.value?"cursor-auto bg-primary text-white":"hover:text-slate-400"),t.xp6(1),t.Q6J("ngIf",o.getCurrent()!==e.value),t.xp6(1),t.Q6J("ngIf",o.getCurrent()===e.value)}}function _e(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-icon",28),t.NdJ("click",function(){t.CHM(e),t.oxw();const r=t.MAs(11);return t.KtG(r.next())}),t.qZA()}}function he(n,i){1&n&&t._UZ(0,"app-icon",29)}function ge(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-icon",30),t.NdJ("click",function(){t.CHM(e),t.oxw();const r=t.MAs(11);return t.KtG(r.setCurrent(r.getLastPage()))}),t.qZA()}}function fe(n,i){1&n&&t._UZ(0,"app-icon",31)}const ve=function(n,i,e){return{currentPage:n,itemsPerPage:i,totalItems:e}},be=["*"];let Ce=(()=>{class n{constructor(){this.subscription=new h.w0,this.loading=!1,this._params={total:0,header:[],body:[]},this.pageChange=new t.vpe,this.options=[{value:10,text:"1\u30da\u30fc\u30b8\u306b10\u30ec\u30b3\u30fc\u30c9\u8868\u793a"},{value:25,text:"1\u30da\u30fc\u30b8\u306b25\u30ec\u30b3\u30fc\u30c9\u8868\u793a"}],this.select=new P.NI(this.options[0].value),this.sort={},this.page=1,this.itemsPerPage=Number(this.options[0].value),this.counts={start:0,end:0}}ngOnInit(){this.subscription.add(this.params.subscribe(e=>{e.total!==this._params.total&&(this.page=1),this._params=e,this.updateCounts()})),this.subscription.add(this.select.valueChanges.subscribe(e=>{this.changeSelect(Number(e))}))}updatePage(e){this.page=e,this.pageChange.emit({page:this.page,itemsPerPage:this.itemsPerPage,sort:this.sort})}changeSelect(e){this.page=Math.ceil(this.counts.start/e),this.page=this.page>0?this.page:1,this.itemsPerPage=e,this.updatePage(this.page)}updateCounts(){const e=(this.page-1)*this.itemsPerPage+1;this.counts.start=e<this._params.total?e:this._params.total;const o=e+this.itemsPerPage-1;this.counts.end=o<this._params.total?o:this._params.total}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-table-with-pagination"]],inputs:{loading:"loading",params:"params"},outputs:{pageChange:"pageChange"},ngContentSelectors:be,decls:28,vars:33,consts:[[1,"bg-white","border-t-4","border-t-primary-light","border","border-slate-50","rounded-b-lg","shadow"],[1,"flex","justify-between","items-center","px-4","py-2"],[1,"mr-6",3,"formCtrl","options"],[1,"overflow-auto"],[3,"header","data","event"],[1,"border-y","border-t-slate-400","py-4"],["width","w-6","height","h-6","borderWidth","border-[6px]"],[1,"flex","items-center","justify-between","gap-2","px-4","py-10","border-t","border-t-slate-300",3,"pageChange"],["p","paginationApi"],[1,"w-1/3"],[1,"flex","items-center","gap-2"],["class","w-6 cursor-pointer hover:opacity-60","icon","skip-back-line",3,"click",4,"ngIf"],["class","w-6 fill-iron-blue-400","icon","skip-back-line",4,"ngIf"],["class","w-6 rotate-180 cursor-pointer hover:opacity-60","icon","back-line",3,"click",4,"ngIf"],["class","w-6 rotate-180 fill-iron-blue-400","icon","back-line",4,"ngIf"],["class","min-w-[1.75rem] rounded text-center cursor-pointer p-1",3,"ngClass",4,"ngFor","ngForOf"],["class","w-6 cursor-pointer hover:opacity-60","icon","back-line",3,"click",4,"ngIf"],["class","w-6 fill-iron-blue-400","icon","back-line",4,"ngIf"],["class","w-6 cursor-pointer hover:opacity-60","icon","skip-forward-line",3,"click",4,"ngIf"],["class","w-6 fill-iron-blue-400","icon","skip-forward-line",4,"ngIf"],["icon","skip-back-line",1,"w-6","cursor-pointer","hover:opacity-60",3,"click"],["icon","skip-back-line",1,"w-6","fill-iron-blue-400"],["icon","back-line",1,"w-6","rotate-180","cursor-pointer","hover:opacity-60",3,"click"],["icon","back-line",1,"w-6","rotate-180","fill-iron-blue-400"],[1,"min-w-[1.75rem]","rounded","text-center","cursor-pointer","p-1",3,"ngClass"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],["icon","back-line",1,"w-6","cursor-pointer","hover:opacity-60",3,"click"],["icon","back-line",1,"w-6","fill-iron-blue-400"],["icon","skip-forward-line",1,"w-6","cursor-pointer","hover:opacity-60",3,"click"],["icon","skip-forward-line",1,"w-6","fill-iron-blue-400"]],template:function(e,o){if(1&e&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1)(2,"app-title"),t.Hsn(3),t.qZA(),t._UZ(4,"app-select",2),t.qZA(),t.TgZ(5,"div",3)(6,"app-child-table",4),t.NdJ("event",function(a){return o.sort=a,o.updatePage(o.page)}),t.ALo(7,"paginate"),t.qZA(),t.TgZ(8,"div",5),t._UZ(9,"app-spinner",6),t.qZA()(),t.TgZ(10,"pagination-template",7,8),t.NdJ("pageChange",function(a){return o.updatePage(a)}),t.TgZ(12,"p",9),t._uU(13),t.ALo(14,"number"),t.ALo(15,"number"),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"div",10),t.YNc(18,se,1,0,"app-icon",11),t.YNc(19,ce,1,0,"app-icon",12),t.YNc(20,le,1,0,"app-icon",13),t.YNc(21,pe,1,0,"app-icon",14),t.YNc(22,me,3,3,"div",15),t.YNc(23,_e,1,0,"app-icon",16),t.YNc(24,he,1,0,"app-icon",17),t.YNc(25,ge,1,0,"app-icon",18),t.YNc(26,fe,1,0,"app-icon",19),t.qZA(),t._UZ(27,"div",9),t.qZA()()),2&e){const r=t.MAs(11);t.xp6(4),t.Q6J("formCtrl",o.select)("options",o.options),t.xp6(2),t.ekj("hidden",o.loading),t.Q6J("header",o._params.header)("data",t.xi3(7,20,o._params.body,t.kEZ(29,ve,o.page,o.itemsPerPage,o._params.total))),t.xp6(2),t.ekj("hidden",!o.loading),t.xp6(5),t.lnq(" ",t.lcZ(14,23,o._params.total)," \u4ef6\u4e2d ",t.lcZ(15,25,o.counts.start)," \uff5e ",t.lcZ(16,27,o.counts.end)," \u4ef6 \u8868\u793a\u4e2d "),t.xp6(5),t.Q6J("ngIf",!r.isFirstPage()),t.xp6(1),t.Q6J("ngIf",r.isFirstPage()),t.xp6(1),t.Q6J("ngIf",!r.isFirstPage()),t.xp6(1),t.Q6J("ngIf",r.isFirstPage()),t.xp6(1),t.Q6J("ngForOf",r.pages),t.xp6(1),t.Q6J("ngIf",!r.isLastPage()),t.xp6(1),t.Q6J("ngIf",r.isLastPage()),t.xp6(1),t.Q6J("ngIf",!r.isLastPage()),t.xp6(1),t.Q6J("ngIf",r.isLastPage())}},dependencies:[c.mk,c.sg,c.O5,ae,W.tk,at.r,st.H,ct.O,b.o,c.JJ,W._s]}),n})(),Te=(()=>{class n{constructor(e,o){this.inventoryService=e,this.common=o,this.subscription=new h.w0,this.errorEvent=new t.vpe,this.filter={},this.pages={page:1,itemsPerPage:10,sort:{column:"\u68da\u5378\u5b9f\u884c\u65e5",order:"desc"}},this.tableParams=new g.x,this.tableNameMapping=[{name:"management_cd",name_jp:"\u68da\u5378\u7ba1\u7406\u30b3\u30fc\u30c9"},{name:"store_name",name_jp:"\u5e97\u8217\u540d"},{name:"inventory_execution_date",name_jp:"\u68da\u5378\u5b9f\u884c\u65e5"},{name:"inventory_complete_date",name_jp:"\u68da\u5378\u5b8c\u4e86\u65e5"}]}ngOnInit(){this.getTableData(),this.tableEvent.next(this.pages)}getTableData(){this.subscription.add(this.tableEvent.pipe((0,X.b)(e=>this.common.loading=!0),(0,V.w)(e=>this.inventoryService.getGroupAll(this.createApiParams(e))),(0,T.K)(e=>(0,Z.of)(e)),(0,N.x)(()=>this.common.loading=!1)).subscribe({next:e=>{this.common.loading=!1,e instanceof y.UA?this.handleError(e):this.tableParams.next(this.createTableParams(e))},complete:()=>this.getTableData()}))}createApiParams(e){this.isTableWithPaginationEvent(e)?this.pages=e:(this.filter=e,this.pages.page=1);const r=this.tableNameMapping.find(a=>a.name_jp===this.pages.sort.column)?.name;return{...this.filter,limit:this.pages.itemsPerPage,offset:(this.pages.page-1)*this.pages.itemsPerPage,sort:r?`${r}:${this.pages.sort.order}`:""}}isTableWithPaginationEvent(e){const{page:o,itemsPerPage:r,sort:a}=e;return"number"==typeof o&&"number"==typeof r&&"object"==typeof a}createTableParams(e){const o=this.tableNameMapping.map(a=>a.name_jp),r=e.data.map(a=>this.tableNameMapping.map(C=>a[C.name]));return r.forEach((a,C)=>{let d=-1;d=o.indexOf("\u68da\u5378\u7ba1\u7406\u30b3\u30fc\u30c9"),a[d]={href:`./${a[d]}`,text:a[d]+""},d=o.indexOf("\u68da\u5378\u5b9f\u884c\u65e5"),a[d]=a[d]?new Date(String(a[d])).toLocaleDateString():"",d=o.indexOf("\u68da\u5378\u5b8c\u4e86\u65e5"),a[d]=a[d]?new Date(String(a[d])).toLocaleDateString():"\u672a\u5b8c\u4e86"}),{total:e.totalItems,header:o,body:r}}handleError(e){this.errorEvent.emit({status:e.status,title:e.error?e.error.title:"\u30a8\u30e9\u30fc",message:e.error?e.error.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002"})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y),t.Y36(S.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inventory-group-table"]],inputs:{tableEvent:"tableEvent"},outputs:{errorEvent:"errorEvent"},decls:2,vars:2,consts:[[3,"params","loading","pageChange"]],template:function(e,o){1&e&&(t.TgZ(0,"app-table-with-pagination",0),t.NdJ("pageChange",function(a){return o.tableEvent.next(a)}),t._uU(1," \u68da\u5378\u4e00\u89a7\n"),t.qZA()),2&e&&t.Q6J("params",o.tableParams)("loading",o.common.loading)},dependencies:[Ce]}),n})();const ye=function(){return{text:"\u68da\u5378\u4e00\u89a7"}},Ae=function(n){return[n]};let xe=(()=>{class n{constructor(e){this.errorService=e,this.subscription=new h.w0,this.parentSearchEvent=new g.x,this.parentTableEvent=new g.x}ngOnInit(){this.subscription.add(this.parentSearchEvent.subscribe(e=>{this.parentTableEvent.next(e)}))}handleError(e){this.errorService.setError({status:e.status,title:e.title,message:e.message,redirectPath:e.redirectPath?e.redirectPath:void 0})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inventory-group"]],decls:4,vars:5,consts:[[3,"breadcrumbList"],[1,"block","mb-4",3,"searchEvent","errorEvent"],[3,"tableEvent","errorEvent"]],template:function(e,o){1&e&&(t._UZ(0,"app-breadcrumb-org",0)(1,"app-toggle-button"),t.TgZ(2,"app-inventory-group-search",1),t.NdJ("searchEvent",function(a){return o.parentSearchEvent.next(a)})("errorEvent",function(a){return o.handleError(a)}),t.qZA(),t.TgZ(3,"app-inventory-group-table",2),t.NdJ("errorEvent",function(a){return o.handleError(a)}),t.qZA()),2&e&&(t.Q6J("breadcrumbList",t.VKq(3,Ae,t.DdM(2,ye))),t.xp6(3),t.Q6J("tableEvent",o.parentTableEvent))},dependencies:[E.Z,Ht,Te,G]}),n})();var pt=s(8782),Ee=s(349),Ie=s(5155);function Fe(n,i){if(1&n&&t._UZ(0,"app-icon",6),2&n){const e=t.oxw().$implicit,o=t.oxw();t.Q6J("icon",o.sort.column===e&&"desc"===o.sort.order?"sort-desc":"sort-asc")("ngClass",o.sort.column===e?"fill-primary":"fill-slate-300")}}const Pe=function(){return["\u68da\u5378\u7ba1\u7406\u30b3\u30fc\u30c9","\u5546\u54c1\u540d","\u5e97\u8217\u540d"]};function De(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"th",3),t.NdJ("click",function(){const a=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.changeSort(a))}),t.TgZ(1,"div",4)(2,"span"),t._uU(3),t.qZA(),t.YNc(4,Fe,1,2,"app-icon",5),t.qZA()()}if(2&n){const e=i.$implicit;t.Q6J("ngClass",e?"hover:bg-iron-blue-200 cursor-pointer":"cursor-auto"),t.xp6(1),t.Q6J("ngClass",t.DdM(4,Pe).includes(e)?"justify-left":"justify-center"),t.xp6(2),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",e)}}function Oe(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"a",11),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",e.href),t.xp6(1),t.hij(" ",e.text," ")}}function Ze(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.value?e.value:"\u672a\u5b9f\u65bd"," ")}}function we(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"span",12),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.openEditField(r))}),t._uU(2),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.value?e.value:"\u672a\u5b9f\u65bd"," ")}}function ke(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-icon",20),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(4);return t.KtG(r.closeEditField())}),t.qZA(),t.BQk()}}function Se(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-icon",21),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(4);return t.KtG(r.submitInventoryStockQuantity())}),t.qZA()}}function Me(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",13)(2,"div",14)(3,"app-icon",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.clearValue())}),t.qZA()(),t.TgZ(4,"div",16)(5,"div"),t._UZ(6,"app-text",17),t.qZA(),t.TgZ(7,"div"),t.YNc(8,ke,2,0,"ng-container",18),t.YNc(9,Se,1,0,"ng-template",null,19,t.W1O),t.qZA()()(),t.BQk()}if(2&n){const e=t.MAs(10),o=t.oxw(3);t.xp6(6),t.Q6J("formCtrl",o.fc.inventory_stock_quantity)("textRight",!0)("invalid",o.formControlStateManager(o.fc.inventory_stock_quantity)),t.xp6(2),t.Q6J("ngIf",o.fc.inventory_stock_quantity.value===o.editTargetInitialValue||o.formControlStateManager(o.fc.inventory_stock_quantity))("ngIfElse",e)}}function Ue(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"span",12),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.openEditField(r))}),t._uU(2),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.value?e.value:"\u672a\u5b9f\u65bd"," ")}}function Be(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function Ne(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e," ")}}const Je=function(n,i){return[n,i]};function Le(n,i){if(1&n&&(t.TgZ(0,"td",9),t.YNc(1,Oe,3,2,"ng-container",10),t.YNc(2,Ze,2,1,"ng-container",10),t.YNc(3,we,3,1,"ng-container",10),t.YNc(4,Me,11,5,"ng-container",10),t.YNc(5,Ue,3,1,"ng-container",10),t.YNc(6,Be,2,1,"ng-container",10),t.YNc(7,Ne,2,1,"ng-container",10),t.qZA()),2&n){const e=i.$implicit,o=t.oxw().first,r=t.oxw();t.Q6J("ngClass",t.WLB(8,Je,o?"":"border-t border-t-iron-blue-300",r.isTextToLeftData(e)?"text-left":"text-center")),t.xp6(1),t.Q6J("ngIf",r.isLinkData(e)),t.xp6(1),t.Q6J("ngIf",r.isInventoryStockQuantity(e)&&r.isInventoryCompleted),t.xp6(1),t.Q6J("ngIf",r.isInventoryStockQuantity(e)&&!r.isEditable&&!r.isInventoryCompleted),t.xp6(1),t.Q6J("ngIf",r.isInventoryStockQuantity(e)&&r.isEditable&&r.editTargetId===e.id),t.xp6(1),t.Q6J("ngIf",r.isInventoryStockQuantity(e)&&r.isEditable&&r.editTargetId!==e.id),t.xp6(1),t.Q6J("ngIf",r.isTextToLeftData(e)),t.xp6(1),t.Q6J("ngIf",r.isNormalData(e))}}function Qe(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"tr",7),t.YNc(2,Le,8,11,"td",8),t.qZA(),t.BQk()),2&n){const e=i.$implicit;t.xp6(2),t.Q6J("ngForOf",e)}}let Ye=(()=>{class n{constructor(e,o,r){this.fb=e,this.inventoryService=o,this.route=r,this.subscription=new h.w0,this.event=new t.vpe,this.isEditable=!1,this.errorConst=p.c,this.form=this.fb.group({inventory_stock_quantity:["",[P.kI.pattern(Ee.m.NUMERIC_REG_EX),P.kI.min(0)]]})}get fc(){return this.form.controls}ngOnInit(){this.sort={column:this.header?this.header.filter(o=>o)[0]:"",order:"asc"},this.managementCd=this.route.snapshot.params.management_cd,this.inventoryService.getGroupAll({management_cd:this.managementCd}).subscribe(o=>{this.isInventoryCompleted=""!==o.data[0].inventory_complete_date})}changeSort(e){!e||(this.sort.order=this.sort.column===e&&"asc"===this.sort.order?"desc":"asc",this.sort.column=e,this.event.emit(this.sort))}isLinkData(e){return!this.itemIsEmpty(e)&&void 0!==e.href}isInventoryStockQuantity(e){return!this.itemIsEmpty(e)&&void 0!==e.id}isTextToLeftData(e){return!this.itemIsEmpty(e)&&void 0!==e.header}isNormalData(e){return!this.itemIsEmpty(e)&&!this.isLinkData(e)&&!this.isInventoryStockQuantity(e)&&"object"!=typeof e}itemIsEmpty(e){return null==e||""===e}formControlStateManager(e){return(e.touched||e.dirty)&&e.invalid}openEditField(e){this.itemIsEmpty(e)||(this.editTargetId=e.id,this.editTargetInitialValue=e.value,this.fc.inventory_stock_quantity.patchValue(this.editTargetInitialValue),this.isEditable=!0)}closeEditField(){this.isEditable=!1,this.editTargetId="",this.editTargetInitialValue="",this.form.reset({inventory_stock_quantity:""})}clearValue(){this.fc.inventory_stock_quantity.patchValue(this.editTargetInitialValue)}submitInventoryStockQuantity(){const o={inventory:[{id:this.editTargetId,inventory_stock_quantity:this.form.value.inventory_stock_quantity}]};o.inventory=o.inventory?.filter(r=>r.id),this.inventoryService.sendInventoryUpdateEvent(o),this.closeEditField()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P.qu),t.Y36(Y),t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-child-table"]],inputs:{header:"header",data:"data"},outputs:{event:"event"},decls:6,vars:2,consts:[[1,"whitespace-nowrap","border-separate","border-spacing-0","w-full"],["class","font-normal border border-x-0 border-slate-300 px-3 py-4 hover:transition-all duration-300",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"font-normal","border","border-x-0","border-slate-300","px-3","py-4","hover:transition-all","duration-300",3,"ngClass","click"],[1,"flex","gap-1",3,"ngClass"],["class","w-6",3,"icon","ngClass",4,"ngIf"],[1,"w-6",3,"icon","ngClass"],[1,"bg-white","even:bg-iron-blue-100","hover:bg-iron-blue-200","hover:transition-all","duration-300"],["class","px-3 py-4",3,"ngClass",4,"ngFor","ngForOf"],[1,"px-3","py-4",3,"ngClass"],[4,"ngIf"],[1,"text-primary-light","border-b","border-primary-light","hover:text-primary-light-hover","hover:border-primary-light-hover",3,"routerLink"],[1,"cursor-pointer","text-primary","border-b","border-b-primary","hover:text-primary-hover","hover:border-b-primary-hover",3,"click"],[1,"relative"],[1,"absolute","top-[9px]","left-2"],["icon","close-circle-fill",1,"w-6","cursor-pointer","fill-slate-400","hover:fill-slate-600",3,"click"],[1,"flex","gap-1","items-center"],["inputType","number","nameAttrValue","inventory_stock_quantity","idAttrValue","inventory-stock-quantity",3,"formCtrl","textRight","invalid"],[4,"ngIf","ngIfElse"],["dataSubmit",""],["icon","close-line",1,"w-6","cursor-pointer","fill-danger","hover:fill-danger-hover",3,"click"],["icon","check-line",1,"w-6","cursor-pointer","fill-success","hover:fill-success-hover",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"table",0)(1,"thead")(2,"tr"),t.YNc(3,De,5,5,"th",1),t.qZA()(),t.TgZ(4,"tbody"),t.YNc(5,Qe,3,1,"ng-container",2),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("ngForOf",o.header),t.xp6(2),t.Q6J("ngForOf",o.data))},dependencies:[c.mk,c.sg,c.O5,b.o,m.yS,Ie.T]}),n})();function We(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-icon",20),t.NdJ("click",function(){t.CHM(e),t.oxw();const r=t.MAs(10);return t.KtG(r.setCurrent(1))}),t.qZA()}}function qe(n,i){1&n&&t._UZ(0,"app-icon",21)}function Re(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-icon",22),t.NdJ("click",function(){t.CHM(e),t.oxw();const r=t.MAs(10);return t.KtG(r.previous())}),t.qZA()}}function je(n,i){1&n&&t._UZ(0,"app-icon",23)}function Ke(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",27),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;t.oxw();const a=t.MAs(10);return t.KtG(a.setCurrent(r.value))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.label)}}function $e(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.label)}}function Xe(n,i){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,Ke,2,1,"span",25),t.YNc(2,$e,2,1,"span",26),t.qZA()),2&n){const e=i.$implicit;t.oxw();const o=t.MAs(10);t.Q6J("ngClass",o.getCurrent()===e.value?"cursor-auto bg-primary text-white":"hover:text-slate-400"),t.xp6(1),t.Q6J("ngIf",o.getCurrent()!==e.value),t.xp6(1),t.Q6J("ngIf",o.getCurrent()===e.value)}}function Ve(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-icon",28),t.NdJ("click",function(){t.CHM(e),t.oxw();const r=t.MAs(10);return t.KtG(r.next())}),t.qZA()}}function Ge(n,i){1&n&&t._UZ(0,"app-icon",29)}function He(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-icon",30),t.NdJ("click",function(){t.CHM(e),t.oxw();const r=t.MAs(10);return t.KtG(r.setCurrent(r.getLastPage()))}),t.qZA()}}function ze(n,i){1&n&&t._UZ(0,"app-icon",31)}const tn=function(n,i,e){return{currentPage:n,itemsPerPage:i,totalItems:e}},en=["*"];let nn=(()=>{class n{constructor(){this.subscription=new h.w0,this.loading=!1,this._params={total:0,header:[],body:[]},this.pageChange=new t.vpe,this.options=[{value:10,text:"1\u30da\u30fc\u30b8\u306b10\u30ec\u30b3\u30fc\u30c9\u8868\u793a"},{value:25,text:"1\u30da\u30fc\u30b8\u306b25\u30ec\u30b3\u30fc\u30c9\u8868\u793a"}],this.select=new P.NI(this.options[0].value),this.sort={},this.page=1,this.itemsPerPage=Number(this.options[0].value),this.counts={start:0,end:0}}ngOnInit(){this.subscription.add(this.params.subscribe(e=>{e.total!==this._params.total&&(this.page=1),this._params=e,this.updateCounts()})),this.subscription.add(this.select.valueChanges.subscribe(e=>{this.changeSelect(Number(e))}))}updatePage(e){this.page=e,this.pageChange.emit({page:this.page,itemsPerPage:this.itemsPerPage,sort:this.sort})}changeSelect(e){this.page=Math.ceil(this.counts.start/e),this.page=this.page>0?this.page:1,this.itemsPerPage=e,this.updatePage(this.page)}updateCounts(){const e=(this.page-1)*this.itemsPerPage+1;this.counts.start=e<this._params.total?e:this._params.total;const o=e+this.itemsPerPage-1;this.counts.end=o<this._params.total?o:this._params.total}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-table-with-pagination"]],inputs:{loading:"loading",params:"params"},outputs:{pageChange:"pageChange"},ngContentSelectors:en,decls:27,vars:33,consts:[[1,"bg-white","border-t-4","border-t-primary-light","border","border-slate-50","rounded-b-lg","shadow"],[1,"flex","justify-between","items-center","px-4","py-2"],[1,"mr-6",3,"formCtrl","options"],[1,"overflow-auto"],[3,"header","data","event"],[1,"border-y","border-t-slate-400","py-4"],["width","w-6","height","h-6","borderWidth","border-[6px]"],[1,"flex","items-center","justify-between","gap-2","px-4","py-10","border-t","border-t-slate-300",3,"pageChange"],["p","paginationApi"],[1,"w-1/3"],[1,"flex","items-center","gap-2"],["class","w-6 cursor-pointer hover:opacity-60","icon","skip-back-line",3,"click",4,"ngIf"],["class","w-6 fill-iron-blue-400","icon","skip-back-line",4,"ngIf"],["class","w-6 rotate-180 cursor-pointer hover:opacity-60","icon","back-line",3,"click",4,"ngIf"],["class","w-6 rotate-180 fill-iron-blue-400","icon","back-line",4,"ngIf"],["class","min-w-[1.75rem] rounded text-center cursor-pointer p-1",3,"ngClass",4,"ngFor","ngForOf"],["class","w-6 cursor-pointer hover:opacity-60","icon","back-line",3,"click",4,"ngIf"],["class","w-6 fill-iron-blue-400","icon","back-line",4,"ngIf"],["class","w-6 cursor-pointer hover:opacity-60","icon","skip-forward-line",3,"click",4,"ngIf"],["class","w-6 fill-iron-blue-400","icon","skip-forward-line",4,"ngIf"],["icon","skip-back-line",1,"w-6","cursor-pointer","hover:opacity-60",3,"click"],["icon","skip-back-line",1,"w-6","fill-iron-blue-400"],["icon","back-line",1,"w-6","rotate-180","cursor-pointer","hover:opacity-60",3,"click"],["icon","back-line",1,"w-6","rotate-180","fill-iron-blue-400"],[1,"min-w-[1.75rem]","rounded","text-center","cursor-pointer","p-1",3,"ngClass"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],["icon","back-line",1,"w-6","cursor-pointer","hover:opacity-60",3,"click"],["icon","back-line",1,"w-6","fill-iron-blue-400"],["icon","skip-forward-line",1,"w-6","cursor-pointer","hover:opacity-60",3,"click"],["icon","skip-forward-line",1,"w-6","fill-iron-blue-400"]],template:function(e,o){if(1&e&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1),t.Hsn(2),t._UZ(3,"app-select",2),t.qZA(),t.TgZ(4,"div",3)(5,"app-child-table",4),t.NdJ("event",function(a){return o.sort=a,o.updatePage(o.page)}),t.ALo(6,"paginate"),t.qZA(),t.TgZ(7,"div",5),t._UZ(8,"app-spinner",6),t.qZA()(),t.TgZ(9,"pagination-template",7,8),t.NdJ("pageChange",function(a){return o.updatePage(a)}),t.TgZ(11,"p",9),t._uU(12),t.ALo(13,"number"),t.ALo(14,"number"),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"div",10),t.YNc(17,We,1,0,"app-icon",11),t.YNc(18,qe,1,0,"app-icon",12),t.YNc(19,Re,1,0,"app-icon",13),t.YNc(20,je,1,0,"app-icon",14),t.YNc(21,Xe,3,3,"div",15),t.YNc(22,Ve,1,0,"app-icon",16),t.YNc(23,Ge,1,0,"app-icon",17),t.YNc(24,He,1,0,"app-icon",18),t.YNc(25,ze,1,0,"app-icon",19),t.qZA(),t._UZ(26,"div",9),t.qZA()()),2&e){const r=t.MAs(10);t.xp6(3),t.Q6J("formCtrl",o.select)("options",o.options),t.xp6(2),t.ekj("hidden",o.loading),t.Q6J("header",o._params.header)("data",t.xi3(6,20,o._params.body,t.kEZ(29,tn,o.page,o.itemsPerPage,o._params.total))),t.xp6(2),t.ekj("hidden",!o.loading),t.xp6(5),t.lnq(" ",t.lcZ(13,23,o._params.total)," \u4ef6\u4e2d ",t.lcZ(14,25,o.counts.start)," \uff5e ",t.lcZ(15,27,o.counts.end)," \u4ef6 \u8868\u793a\u4e2d "),t.xp6(5),t.Q6J("ngIf",!r.isFirstPage()),t.xp6(1),t.Q6J("ngIf",r.isFirstPage()),t.xp6(1),t.Q6J("ngIf",!r.isFirstPage()),t.xp6(1),t.Q6J("ngIf",r.isFirstPage()),t.xp6(1),t.Q6J("ngForOf",r.pages),t.xp6(1),t.Q6J("ngIf",!r.isLastPage()),t.xp6(1),t.Q6J("ngIf",r.isLastPage()),t.xp6(1),t.Q6J("ngIf",!r.isLastPage()),t.xp6(1),t.Q6J("ngIf",r.isLastPage())}},dependencies:[c.mk,c.sg,c.O5,W.tk,st.H,Ye,b.o,ct.O,c.JJ,W._s]}),n})(),on=(()=>{class n{constructor(e,o,r,a){this.inventoryService=e,this.storeService=o,this.route=r,this.common=a,this.subscription=new h.w0,this.errorEvent=new t.vpe,this.filter={},this.pages={page:1,itemsPerPage:10,sort:{column:"\u5728\u5eabID",order:"desc"}},this.tableParams=new g.x,this.tableNameMapping=[{name:"id",name_jp:"\u68da\u5378ID"},{name:"product_id",name_jp:"\u5546\u54c1ID"},{name:"product_name",name_jp:"\u5546\u54c1\u540d"},{name:"supplier_name",name_jp:"\u4ed5\u5165\u5148\u540d"},{name:"store_id",name_jp:"\u5e97\u8217\u540d"},{name:"stock_quantity",name_jp:"\u6708\u6b21\u7406\u8ad6\u5728\u5eab\u6570"},{name:"inventory_stock_quantity",name_jp:"\u5b9f\u5728\u5eab\u6570"},{name:"difference_quantity",name_jp:"\u5dee\u7570"}],this.listPagePath="/inventory-control/inventory"}ngOnInit(){const e=this.route.snapshot.params.management_cd;(0,M.oG)(e)?this.handleError({status:400,title:"\u30a8\u30e9\u30fc",message:"\u30d1\u30e9\u30e1\u30fc\u30bf\u53d6\u5f97\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",redirectPath:this.listPagePath}):(this.selectedId=Number(e),this.filter={management_cd:this.selectedId},this.getTableData(),this.tableEvent.next(this.pages))}notInputOnlyChanged(e){const o=e.target;o&&(this.inventoryService.changeGetAllEndpoint(o.checked),this.tableEvent.next(this.pages))}getTableData(){this.subscription.add(this.tableEvent.pipe((0,X.b)(e=>this.common.loading=!0),(0,V.w)(e=>this.inventoryService.getAll(this.createApiParams(e))),(0,T.K)(e=>(0,Z.of)(e)),(0,N.x)(()=>this.common.loading=!1)).subscribe({next:e=>{e instanceof y.UA?this.handleError({status:e.status,title:e.error?e.error.title:"\u30a8\u30e9\u30fc",message:e.error?e.error.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002"}):this.storeService.getAll().pipe((0,T.K)(o=>(0,Z.of)(o)),(0,N.x)(()=>this.common.loading=!1)).subscribe(o=>{o instanceof y.UA?this.handleError({status:o.status,title:o.error?o.error.title:"\u30a8\u30e9\u30fc",message:o.error?o.error.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002"}):this.tableParams.next(this.createTableParams(e,o))})},complete:()=>this.getTableData()}))}createApiParams(e){this.isTableWithPaginationEvent(e)?this.pages=e:(this.filter=e,this.pages.page=1);const r=this.tableNameMapping.find(a=>a.name_jp===this.pages.sort.column)?.name;return{...this.filter,limit:this.pages.itemsPerPage,offset:(this.pages.page-1)*this.pages.itemsPerPage,sort:r?`${r}:${this.pages.sort.order}`:""}}isTableWithPaginationEvent(e){const{page:o,itemsPerPage:r,sort:a}=e;return"number"==typeof o&&"number"==typeof r&&"object"==typeof a}createTableParams(e,o){const r=o.data,a=this.tableNameMapping.map(d=>d.name_jp),C=e.data.map(d=>this.tableNameMapping.map(ot=>d[ot.name]));return C.forEach((d,ot)=>{let O=-1;O=a.indexOf("\u68da\u5378ID"),d[O]={href:`./detail/${d[O]}`,text:d[O]+""},O=a.indexOf("\u5546\u54c1ID"),d[O]={href:`/master/product/detail/${d[O]}`,text:d[O]+""},O=a.indexOf("\u5546\u54c1\u540d"),d[O]={header:"\u5546\u54c1\u540d",name:d[O]+""},O=a.indexOf("\u5e97\u8217\u540d");const no=r.findIndex(oo=>oo.id===d[O]);d[O]={header:"\u5e97\u8217\u540d",name:r[no].name+""},O=a.indexOf("\u5b9f\u5728\u5eab\u6570"),d[O]={id:e.data[ot].id+"",value:d[O]+""},O=a.indexOf("\u4ed5\u5165\u5148\u540d"),d[O]=d[O]}),{total:e.totalItems,header:a,body:C}}handleError(e){this.errorEvent.emit({status:e.status,title:e.title,message:e.message})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y),t.Y36(u.d),t.Y36(m.gz),t.Y36(S.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inventory-table"]],inputs:{tableEvent:"tableEvent"},outputs:{errorEvent:"errorEvent"},decls:9,vars:3,consts:[[3,"params","loading","pageChange"],[1,"flex","gap-6"],["type","checkbox","id","not-input-only","name","not_input_only",3,"change"],[1,"pl-2"]],template:function(e,o){1&e&&(t.TgZ(0,"app-table-with-pagination",0),t.NdJ("pageChange",function(a){return o.tableEvent.next(a)}),t.TgZ(1,"div",1)(2,"div")(3,"app-title"),t._uU(4),t.qZA()(),t.TgZ(5,"div")(6,"input",2),t.NdJ("change",function(a){return o.notInputOnlyChanged(a)}),t.qZA(),t.TgZ(7,"span",3),t._uU(8,"\u68da\u5378\u672a\u5b9f\u65bd\u306e\u30c7\u30fc\u30bf\u306e\u307f\u8868\u793a"),t.qZA()()()()),2&e&&(t.Q6J("params",o.tableParams)("loading",o.common.loading),t.xp6(4),t.hij(" ",o.selectedId?"\u68da\u5378\u7ba1\u7406\u30b3\u30fc\u30c9\uff1a"+o.selectedId:""," "))},dependencies:[nn,at.r]}),n})();function rn(n,i){1&n&&t.GkF(0)}function an(n,i){1&n&&t.GkF(0)}function sn(n,i){1&n&&t.GkF(0,23)}function cn(n,i){1&n&&(t.TgZ(0,"app-button",24),t._uU(1," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),t.qZA())}function ln(n,i){1&n&&(t.TgZ(0,"app-button",25),t._uU(1," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),t.qZA())}function pn(n,i){1&n&&(t.TgZ(0,"span",28),t._uU(1,"\u5fc5\u9808"),t.qZA())}function un(n,i){if(1&n&&(t.TgZ(0,"div",26)(1,"span"),t._uU(2),t.qZA(),t.YNc(3,pn,2,0,"span",27),t.qZA()),2&n){const e=i.label,o=i.required;t.xp6(2),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",o)}}function dn(n,i){if(1&n&&(t.TgZ(0,"p",29),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorConst.FORM_ERROR.DATE_TERM_TO_BEFORE_FROM," ")}}const mn=function(){return{label:"\u5546\u54c1",required:!1}},_n=function(){return{label:"\u68da\u5378\u30c7\u30fc\u30bf\u66f4\u65b0\u65e5",required:!1}};let hn=(()=>{class n{constructor(e,o){this.fb=e,this.productService=o,this.subscription=new h.w0,this.searchEvent=new t.vpe,this.errorEvent=new t.vpe,this.errorConst=p.c,this.hasSearchPanelOpened=!1,this.rotateAnimation="",this.searchForm=this.fb.group({product_id:"",product_name:"",updated_at:this.fb.group({from:"",to:""},{validators:[Q.d.beforeFromDate()]})})}get sfc(){return this.searchForm.controls}formControlStateManager(e){return(e.touched||e.dirty)&&e.invalid}getProductSuggests(){return{observable:this.productService.getAll({name:this.sfc.product_name.value}),idField:"id",nameField:"name"}}handleClickSearchPaneToggleButton(){this.hasSearchPanelOpened?(this.hasSearchPanelOpened=!1,this.rotateAnimation="rotate-animation-0",this.searchForm.reset({product_id:"",updated_at:{from:"",to:""}})):(this.hasSearchPanelOpened=!0,this.rotateAnimation="rotate-animation-180")}handleClickSearchClearButton(){this.searchForm.reset({product_id:"",updated_at:{from:"",to:""}})}handleClickSearchSubmitButton(){const e=this.searchForm.value,r=(0,M.vP)({product_id:e.product_id,updated_at:e.updated_at});this.searchEvent.emit((0,M.g3)(r))}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P.qu),t.Y36(l.M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inventory-search"]],outputs:{searchEvent:"searchEvent",errorEvent:"errorEvent"},decls:31,vars:25,consts:[[1,"mt-8"],["btnType","button",3,"click"],[1,"w-6"],["icon","filter-2-line"],[1,"inline-block","ml-1","mr-2"],[1,"inline-block","w-6"],["icon","arrow-down-s-fill"],[1,"mt-6"],[1,"inventory-search","width-limit-break","bg-white"],["autocomplete","off",1,"w-[1280px]","mx-auto","px-4",3,"formGroup","ngSubmit"],[1,"flex","gap-4"],[1,"w-1/3"],["nameAttrValue","product_name","idAttrValue","product-name",3,"idCtrl","nameCtrl","apiInput","invalid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-2/3"],["nameAttrValue","updated_at_from","idAttrValue","updated-at-from","toNameAttrValue","updated_at_to","toIdAttrValue","updated-at-to","placeholder","\u671f\u9593\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044",3,"dateFromFormCtrl","dateToFormCtrl","invalid"],["message","",4,"ngIf","ngIfThen"],[1,"flex","gap-8","mt-10"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",4,"ngIf","ngIfElse"],[1,"mt-2","text-sm","text-red"],["disable",""],["labels",""],["beforeFromDate",""],["message",""],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover"],["btnFillColor","text-white bg-slate-300 hover:bg-slate-300"],[1,"flex","items-center","gap-2"],["class","px-3 py-0.5 text-xs text-white bg-warning-dark rounded-full",4,"ngIf"],[1,"px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],[1,"mt-1","pl-1","text-sm","text-red"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"app-button",1),t.NdJ("click",function(){return o.handleClickSearchPaneToggleButton()}),t.TgZ(2,"span",2),t._UZ(3,"app-icon",3),t.qZA(),t.TgZ(4,"span",4),t._uU(5),t.qZA(),t.TgZ(6,"span",5),t._UZ(7,"app-icon",6),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8)(10,"form",9),t.NdJ("ngSubmit",function(){return o.handleClickSearchSubmitButton()}),t.TgZ(11,"div",10)(12,"div",11)(13,"app-real-time-suggest-container",12),t.YNc(14,rn,1,0,"ng-container",13),t.qZA()(),t.TgZ(15,"div",14)(16,"app-date-term-clear-container",15),t.YNc(17,an,1,0,"ng-container",13),t.YNc(18,sn,1,0,"ng-container",16),t.qZA()()(),t.TgZ(19,"div",17)(20,"app-button",1),t.NdJ("click",function(){return o.handleClickSearchClearButton()}),t._uU(21," \u5165\u529b\u5185\u5bb9\u30af\u30ea\u30a2 "),t.qZA(),t.YNc(22,cn,2,0,"app-button",18),t.qZA(),t.TgZ(23,"p",19),t._uU(24," \u203b \u5165\u529b\u5185\u5bb9\u3092\u30af\u30ea\u30a2\u3057\u305f\u5f8c\u306b\u7d5e\u308a\u8fbc\u307f\u5b9f\u884c\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u5168\u3066\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002 "),t.qZA()()()()(),t.YNc(25,ln,2,0,"ng-template",null,20,t.W1O),t.YNc(27,un,4,2,"ng-template",null,21,t.W1O),t.YNc(29,dn,2,1,"ng-template",null,22,t.W1O)),2&e){const r=t.MAs(26),a=t.MAs(28),C=t.MAs(30);t.xp6(5),t.hij(" ",o.hasSearchPanelOpened?"\u7d5e\u308a\u8fbc\u307f\u30d5\u30a9\u30fc\u30e0\u975e\u8868\u793a":"\u7d5e\u308a\u8fbc\u307f\u30d5\u30a9\u30fc\u30e0\u8868\u793a"," "),t.xp6(1),t.Tol(o.rotateAnimation),t.xp6(3),t.ekj("is-open",o.hasSearchPanelOpened)("shadow",o.hasSearchPanelOpened),t.xp6(1),t.Q6J("formGroup",o.searchForm),t.xp6(3),t.Q6J("idCtrl",o.sfc.product_id)("nameCtrl",o.sfc.product_name)("apiInput",o.getProductSuggests())("invalid",o.formControlStateManager(o.sfc.product_id)),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(23,mn)),t.xp6(2),t.Q6J("dateFromFormCtrl",o.sfc.updated_at.controls.from)("dateToFormCtrl",o.sfc.updated_at.controls.to)("invalid",!!o.sfc.updated_at.errors),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(24,_n)),t.xp6(1),t.Q6J("ngIf",null==o.sfc.updated_at.errors?null:o.sfc.updated_at.errors.beforeFromDate)("ngIfThen",C),t.xp6(4),t.Q6J("ngIf",o.searchForm.valid)("ngIfElse",r)}},dependencies:[c.O5,c.tP,P._Y,P.JL,P.sg,_.r,b.o,k.w,I.Y],styles:[".inventory-search[_ngcontent-%COMP%]{max-height:0;padding:0 2.5rem;margin:0;transition:max-height .8s,padding .8s,margin .8s ease-in;overflow:hidden}.inventory-search.is-open[_ngcontent-%COMP%]{max-height:100vh;padding:2.5rem;margin:2rem 0;overflow:visible}"]}),n})();var gn=s(2167);function fn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"div"),t._UZ(2,"app-bulk-registration-link-org",9),t.qZA(),t.TgZ(3,"div")(4,"app-button",10),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.handleClickCompleteButton())}),t._uU(5," \u68da\u5378\u5b8c\u4e86 "),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("routerLink",e.bulkRegistrationPagePath)}}function vn(n,i){1&n&&t._uU(0," \u68da\u5378\u306f\u5b8c\u4e86\u3057\u3066\u3044\u307e\u3059 ")}const bn=function(n){return{path:n,text:"\u68da\u5378\u4e00\u89a7"}},Cn=function(){return{text:"\u68da\u5378"}},Tn=function(n,i){return[n,i]};let yn=(()=>{class n{constructor(e,o,r,a,C){this.route=e,this.inventoryService=o,this.errorService=r,this.flashMessageService=a,this.common=C,this.subscription=new h.w0,this.subject=new g.x,this.listPagePath="/inventory-control/inventory"}ngOnInit(){const e=this.route.snapshot.params.management_cd;(0,M.oG)(e)?this.handleError({status:400,title:"\u30a8\u30e9\u30fc",message:"\u30d1\u30e9\u30e1\u30fc\u30bf\u53d6\u5f97\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",redirectPath:this.listPagePath}):(this.managementCd=e,this.bulkRegistrationPagePath=`/inventory-control/inventory/bulk-add/${this.managementCd}`,this.changeTerms({}),this.subscription.add(this.inventoryService.inventoryUpdateEvent$.subscribe(r=>{this.updateInventoryStockQuantity(r)})),this.inventoryService.getGroupAll({management_cd:this.managementCd}).subscribe(r=>{this.isInventoryCompleted=""!==r.data[0].inventory_complete_date}))}updateInventoryStockQuantity(e){this.common.loading=!0,this.subscription.add(this.inventoryService.update(e).pipe((0,T.K)(o=>(0,Z.of)(o)),(0,N.x)(()=>this.common.loading=!1)).subscribe(o=>{o instanceof y.UA?this.handleError({status:o.status,title:o.error?o.error.title:"\u30a8\u30e9\u30fc",message:o.error?o.error.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",redirectPath:this.listPagePath}):(location.reload(),this.flashMessageService.setFlashMessage(o.message,"success",15e3),this.subject.next({}))}))}handleClickCompleteButton(){this.common.loading=!0,this.isInventoryCompleted=!0,this.subscription.add(this.inventoryService.complete(this.managementCd).pipe((0,T.K)(e=>(0,Z.of)(e)),(0,N.x)(()=>this.common.loading=!1)).subscribe(e=>{e instanceof y.UA?this.handleError({status:e.status,title:e.error?e.error.title:"\u30a8\u30e9\u30fc",message:e.error?e.error.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",redirectPath:this.listPagePath}):(this.flashMessageService.setFlashMessage(e.message,"success",15e3),this.subject.next({}))}))}ngOnDestroy(){this.subject.complete(),this.subscription.unsubscribe()}changeTerms(e){console.log(e);const o={management_cd:this.managementCd,...e};this.terms=o,this.subject.next(o),this.inventory$=this.inventoryService.getPdf(o,"pdf").pipe((0,T.K)(r=>(this.handleError({status:r.status,title:r.error?r.error.title:"\u30a8\u30e9\u30fc",message:r.error?r.error.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",redirectPath:this.listPagePath}),(0,Z.of)({}))))}handleError(e){this.errorService.setError({status:e.status,title:e.title,message:e.message,redirectPath:e.redirectPath?e.redirectPath:void 0})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz),t.Y36(Y),t.Y36(x.T),t.Y36(pt.P),t.Y36(S.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inventory"]],decls:12,vars:11,consts:[[3,"breadcrumbList"],[1,"block","mb-4",3,"searchEvent"],[1,"flex","justify-between"],[1,"flex","gap-6","items-center"],[3,"path"],["class","flex justify-end gap-8 mb-4 items-center",4,"ngIf","ngIfElse"],["isCompleted",""],[3,"tableEvent","errorEvent"],[1,"flex","justify-end","gap-8","mb-4","items-center"],["text","CSV\u4e00\u62ec\u767b\u9332",3,"routerLink"],["btnType","button","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",3,"click"]],template:function(e,o){if(1&e&&(t._UZ(0,"app-breadcrumb-org",0)(1,"app-toggle-button"),t.TgZ(2,"app-inventory-search",1),t.NdJ("searchEvent",function(a){return o.changeTerms(a)}),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div")(6,"app-back-to-link-org",4),t._uU(7," \u68da\u5378\u4e00\u89a7\u3078\u623b\u308b "),t.qZA()()(),t.YNc(8,fn,6,1,"div",5),t.YNc(9,vn,1,0,"ng-template",null,6,t.W1O),t.qZA(),t.TgZ(11,"app-inventory-table",7),t.NdJ("errorEvent",function(a){return o.handleError(a)}),t.qZA()),2&e){const r=t.MAs(10);t.Q6J("breadcrumbList",t.WLB(8,Tn,t.VKq(5,bn,o.listPagePath),t.DdM(7,Cn))),t.xp6(6),t.s9C("path",o.listPagePath),t.xp6(2),t.Q6J("ngIf",!o.isInventoryCompleted&&!o.common.loading)("ngIfElse",r),t.xp6(3),t.Q6J("tableEvent",o.subject)}},dependencies:[c.O5,m.rH,E.Z,on,hn,H.i,gn.p,_.r,G]}),n})();var An=s(1805);function xn(n,i){if(1&n&&(t.TgZ(0,"div",7)(1,"h2",8),t._uU(2,"\u68da\u5378\u8a73\u7d30"),t.qZA(),t._UZ(3,"hr",9),t.TgZ(4,"div",10)(5,"div",11)(6,"ul",12)(7,"li",13)(8,"div",14),t._uU(9," \u68da\u5378\u7ba1\u7406\u30b3\u30fc\u30c9 "),t.qZA(),t.TgZ(10,"div",15),t._uU(11),t.qZA()(),t.TgZ(12,"li",13)(13,"div",14),t._uU(14,"\u68da\u5378ID"),t.qZA(),t.TgZ(15,"div",15),t._uU(16),t.qZA()(),t.TgZ(17,"li",13)(18,"div",14),t._uU(19,"\u5546\u54c1"),t.qZA(),t.TgZ(20,"div",15),t._uU(21),t.qZA()(),t.TgZ(22,"li",13)(23,"div",14),t._uU(24," \u6708\u6b21\u7406\u8ad6\u5728\u5eab\u6570 "),t.qZA(),t.TgZ(25,"div",15),t._uU(26),t.qZA()(),t.TgZ(27,"li",13)(28,"div",14),t._uU(29,"\u68da\u5378\u5728\u5eab\u6570"),t.qZA(),t.TgZ(30,"div",15),t._uU(31),t.qZA()(),t.TgZ(32,"li",13)(33,"div",14),t._uU(34,"\u5dee\u7570\u6570\u91cf"),t.qZA(),t.TgZ(35,"div",15),t._uU(36),t.qZA()(),t.TgZ(37,"li",13)(38,"div",14),t._uU(39,"\u68da\u5378\u5b9f\u884c\u65e5"),t.qZA(),t.TgZ(40,"div",15),t._uU(41),t.ALo(42,"date"),t.qZA()(),t.TgZ(43,"li",13)(44,"div",14),t._uU(45,"\u68da\u5378\u5b8c\u4e86\u65e5"),t.qZA(),t.TgZ(46,"div",15),t._uU(47),t.ALo(48,"date"),t.qZA()(),t.TgZ(49,"li",13)(50,"div",14),t._uU(51,"\u767b\u9332\u65e5\u6642"),t.qZA(),t.TgZ(52,"div",15),t._uU(53),t.ALo(54,"date"),t.qZA()(),t.TgZ(55,"li",13)(56,"div",14),t._uU(57,"\u66f4\u65b0\u65e5\u6642"),t.qZA(),t.TgZ(58,"div",15),t._uU(59),t.ALo(60,"date"),t.qZA()()()()()()),2&n){const e=t.oxw();t.xp6(11),t.hij(" ",e.inventory.management_cd," "),t.xp6(5),t.hij(" ",e.inventory.id," "),t.xp6(5),t.AsE(" ID\uff1a",e.inventory.product_id,"\u3000\u540d\u79f0\uff1a",e.inventory.product_name," "),t.xp6(5),t.hij(" ",e.inventory.stock_quantity," "),t.xp6(5),t.hij(" ",e.inventory.inventory_stock_quantity," "),t.xp6(5),t.hij(" ",e.inventory.difference_quantity," "),t.xp6(5),t.hij(" ",t.xi3(42,11,e.inventory.inventory_execution_date,"yyyy/MM/dd")," "),t.xp6(6),t.hij(" ",t.xi3(48,14,e.inventory.inventory_complete_date,"yyyy/MM/dd")," "),t.xp6(6),t.hij(" ",t.xi3(54,17,e.inventory.created_at,"yyyy/MM/dd HH:mm:ss")," "),t.xp6(6),t.hij(" ",t.xi3(60,20,e.inventory.updated_at,"yyyy/MM/dd HH:mm:ss")," ")}}const En=function(){return{path:"/inventory-control/inventory",text:"\u68da\u5378\u4e00\u89a7"}},In=function(n,i){return{path:n,text:i}},Fn=function(){return{text:"\u68da\u5378\u8a73\u7d30"}},Pn=function(n,i,e){return[n,i,e]};let Dn=(()=>{class n{constructor(e,o,r,a){this.route=e,this.errorService=o,this.inventoryService=r,this.common=a,this.subscription=new h.w0}ngOnInit(){const e=this.route.snapshot.params.management_cd,o=(0,M.oG)(e),r=this.route.snapshot.params.id;(0,M.oG)(r)||o?this.handleError(400,"\u30a8\u30e9\u30fc","\u30d1\u30e9\u30e1\u30fc\u30bf\u53d6\u5f97\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002","/inventory-control"):(this.managementCd=e,this.selectedId=Number(r),this.listPagePath="/inventory-control/inventory/"+this.managementCd,this.listPageName="\u68da\u5378\u7ba1\u7406\u30b3\u30fc\u30c9\uff1a"+this.managementCd+" \u30c7\u30fc\u30bf\u4e00\u89a7",this.getInventory(this.selectedId))}getInventory(e){this.common.loading=!0,this.subscription.add(this.inventoryService.find(e).pipe((0,T.K)(o=>(0,Z.of)(o)),(0,N.x)(()=>this.common.loading=!1)).subscribe(o=>{o instanceof y.UA?this.handleError(o.status,o.error?o.error.title:"\u30a8\u30e9\u30fc",o.error?o.error.message:"\u30c7\u30fc\u30bf\u53d6\u5f97\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath):(this.inventory=o.data[0],this.lastUpdaterName=o.data[0].employee_updated_last_name+" "+o.data[0].employee_updated_first_name)}))}handleError(e,o,r,a){this.errorService.setError({status:e,title:o,message:r,redirectPath:a})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz),t.Y36(x.T),t.Y36(Y),t.Y36(S.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inventory-detail"]],decls:13,vars:13,consts:[[3,"breadcrumbList"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"flex","flex-row","items-center","gap-6"],[3,"path"],[1,"width-limit-break","border-t","border-gray-400"],["class","mt-8 py-8 px-6 bg-white shadow border border-gray-300",4,"ngIf"],[1,"mt-8","py-8","px-6","bg-white","shadow","border","border-gray-300"],[1,"text-lg"],[1,"border-t-primary-light-hover","border-t-4"],[1,"mt-6","flex","flex-row","gap-10"],[1,"grow"],[1,"border-t","border-r","border-l","border-t-gray-200","border-r-gray-200","border-l-gray-200","shadow"],[1,"flex","flex-row","items-center","border-b","border-b-gray-200","bg-slate-100"],[1,"py-3","px-3","bg-slate-100","min-w-[300px]"],[1,"py-3","px-3","border-l","border-l-gray-200","min-h-[48px]","bg-white","grow"]],template:function(e,o){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main")(2,"h1",1),t._uU(3,"\u68da\u5378\u8a73\u7d30"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"app-back-to-link-org",4),t._uU(7,"\u4e00\u89a7\u3078\u623b\u308b"),t.qZA()(),t.TgZ(8,"div")(9,"app-last-updater-org"),t._uU(10),t.qZA()()(),t._UZ(11,"hr",5),t.YNc(12,xn,61,23,"div",6),t.qZA()),2&e&&(t.Q6J("breadcrumbList",t.kEZ(9,Pn,t.DdM(4,En),t.WLB(5,In,o.listPagePath,o.listPageName),t.DdM(8,Fn))),t.xp6(6),t.s9C("path",o.listPagePath),t.xp6(4),t.hij(" \u6700\u7d42\u66f4\u65b0\u8005\uff1a",o.lastUpdaterName?o.lastUpdaterName:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),t.xp6(2),t.Q6J("ngIf",!o.common.loading&&o.inventory))},dependencies:[c.O5,E.Z,H.i,An.R,c.uU]}),n})();var On=s(1914),Zn=s(5108);function wn(n,i){1&n&&(t.TgZ(0,"span",19),t._uU(1," \u5fc5\u9808 "),t.qZA())}function kn(n,i){if(1&n&&(t.TgZ(0,"tr",15)(1,"td",16)(2,"div",11)(3,"p"),t._uU(4),t.qZA(),t.YNc(5,wn,2,0,"span",17),t.qZA()(),t.TgZ(6,"td",18),t._uU(7),t.qZA()()),2&n){const e=i.$implicit;t.xp6(4),t.Oqu(e.title),t.xp6(1),t.Q6J("ngIf",e.required),t.xp6(2),t.Oqu(e.description)}}function Sn(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",20),t._uU(2),t.qZA(),t.TgZ(3,"app-icon",21),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.ctrl.reset())}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.filename)}}const Mn=[{path:"",component:L,children:[{path:"",component:Zt},{path:"detail/:id",component:Nt},{path:"inventory",component:xe},{path:"inventory/:management_cd",component:yn},{path:"inventory/:management_cd/detail/:id",component:Dn},{path:"inventory/bulk-add/:management_cd",component:(()=>{class n{constructor(e,o,r,a,C,d){this.inventoryService=e,this.flashMessageService=o,this.errorService=r,this.router=a,this.route=C,this.common=d,this.subscription=new h.w0,this.ctrl=new P.NI(null,P.kI.required),this.descriptions=[{title:"id",description:"\u68da\u5378ID\uff08\u534a\u89d2\u6570\u5b57\uff09",required:!0},{title:"management_cd",description:"\u68da\u5378\u7ba1\u7406\u30b3\u30fc\u30c9\uff0810\u6587\u5b57\u4ee5\u5185\u306e\u6587\u5b57\u5217\uff09",required:!0},{title:"inventory_stock_quantity",description:"\u68da\u5378\u5728\u5eab\u6570\uff08\u534a\u89d2\u6570\u5b57\uff09",required:!0}]}ngOnInit(){const e=this.route.snapshot.params.management_cd;(0,M.oG)(e)?this.handleError({status:400,title:"\u30a8\u30e9\u30fc",message:"\u30d1\u30e9\u30e1\u30fc\u30bf\u53d6\u5f97\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",redirectPath:this.listPagePath}):(this.managementCd=e,this.listPagePath=`/inventory-control/inventory/${this.managementCd}`,this.subscription?.add(this.ctrl.valueChanges.subscribe(r=>{this.filename=r?.name})))}handleClickCancel(){this.router.navigateByUrl(this.listPagePath)}onClickUpload(){!this.ctrl.value||(this.common.loading=!0,this.subscription.add(this.inventoryService.bulkAdd(this.ctrl.value).pipe((0,T.K)(e=>(0,Z.of)(e)),(0,N.x)(()=>this.common.loading=!1)).subscribe(e=>{e instanceof y.UA?this.handleError({status:e.status,title:e.error.title?e.error.title:"\u30a8\u30e9\u30fc",message:e.error.message?e.error.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f"}):(this.flashMessageService.setFlashMessage(e.message,"success",15e3),this.router.navigateByUrl(this.listPagePath))})))}handleError(e){this.errorService.setError({status:e.status,title:e.title,message:e.message,redirectPath:e.redirectPath?e.redirectPath:void 0})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y),t.Y36(pt.P),t.Y36(x.T),t.Y36(m.F0),t.Y36(m.gz),t.Y36(S.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inventory-bulk-add"]],decls:19,vars:4,consts:[[1,"mt-8","text-xl"],[1,"flex","items-center","justify-between","mt-6","mb-2"],[1,"cursor-pointer",3,"click"],["icon","close-line","appendClassForIcon","fill-danger group-hover:fill-danger-hover"],[1,"text-gray-900","group-hover:text-danger-hover"],[1,"width-limit-break","border-t","border-gray-400"],[1,"mt-8","mb-28","py-8","px-6","bg-white","shadow","border","border-gray-300"],[1,"text-lg"],[1,"mt-4","w-full","shadow"],["class","border border-slate-200",4,"ngFor","ngForOf"],[1,"flex","justify-between","mt-8"],[1,"flex","items-center"],["accept","text/csv",3,"formCtrl"],[4,"ngIf"],["btnFillColor","bg-success hover:bg-success-hover border-success text-white",3,"buttonDisabled","click"],[1,"border","border-slate-200"],[1,"p-4","w-1/4","bg-slate-100"],["class","px-3 py-0.5 ml-2 shrink-0 text-xs text-white bg-warning-dark rounded-full",4,"ngIf"],[1,"p-4"],[1,"px-3","py-0.5","ml-2","shrink-0","text-xs","text-white","bg-warning-dark","rounded-full"],[1,"ml-4"],["icon","delete-bin-line",1,"w-6","cursor-pointer","ml-2","fill-red-500",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"\u68da\u5378CSV\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2),t.NdJ("click",function(){return o.handleClickCancel()}),t.TgZ(4,"app-icon-container",3)(5,"p",4),t._uU(6,"\u30ad\u30e3\u30f3\u30bb\u30eb"),t.qZA()()()(),t._UZ(7,"hr",5),t.TgZ(8,"div",6)(9,"p",7),t._uU(10,"CSV\u30d5\u30a1\u30a4\u30eb\u306e\u30d8\u30c3\u30c0\u30fc\u3068\u5024"),t.qZA(),t.TgZ(11,"table",8),t.YNc(12,kn,8,3,"tr",9),t.qZA(),t.TgZ(13,"div",10)(14,"div",11),t._UZ(15,"app-file",12),t.YNc(16,Sn,4,1,"ng-container",13),t.qZA(),t.TgZ(17,"app-button",14),t.NdJ("click",function(){return o.onClickUpload()}),t._uU(18," \u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u5b9f\u884c "),t.qZA()()()),2&e&&(t.xp6(12),t.Q6J("ngForOf",o.descriptions),t.xp6(3),t.Q6J("formCtrl",o.ctrl),t.xp6(1),t.Q6J("ngIf",o.ctrl.value),t.xp6(1),t.Q6J("buttonDisabled",o.ctrl.invalid))},dependencies:[c.sg,c.O5,On.J,Zn.P,b.o,_.r]}),n})()}]}];let Un=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(Mn),m.Bz]}),n})();var Bn=s(9307),j=s(9104),K=s(3894),J=s(8511),z=s(4854),dt=s(9434),tt=s(855);let Nn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,P.UX,j.u,K.h,J.Q,z.C,dt.H,tt.W]}),n})();var Jn=s(4560);let Ln=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,Jn.Z]}),n})();var et=s(5773),mt=s(8460);let Qn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,m.Bz,J.Q]}),n})();var nt=s(3183);let Yn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,Qn,W.JX,et.i,mt.A,nt.F,J.Q]}),n})(),Wn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,Yn]}),n})(),qn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,P.UX,j.u,K.h,J.Q,z.C,dt.H,tt.W]}),n})();var Rn=s(973);let jn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,J.Q,m.Bz,Rn.Y,nt.F]}),n})(),Kn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,W.JX,et.i,mt.A,jn,J.Q,nt.F]}),n})(),$n=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,Kn,et.i]}),n})(),Xn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,P.UX,j.u,K.h,J.Q,tt.W,z.C]}),n})();var _t=s(3042),Vn=s(1326),Gn=s(589),Hn=s(6968),zn=s(4470),to=s(4663);let eo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[S.v],imports:[c.ez,Un,Bn.u,Nn,Ln,$n,Xn,qn,j.u,_t.C,Vn.z,Gn.P,Wn,Hn.V,_t.C,zn.x,to.Q,J.Q,K.h]}),n})()},349:(U,F,s)=>{s.d(F,{m:()=>c});const c={FULL_WIDTH_KATAKANA_REG_EX:/^[\u30a1-\u30f4\u30fc \u3000]+$/,HALF_WIDTH_KATAKANA_REG_EX:/^[\uff66-\uff9f]+$/,PASSWORD_REG_EX:/^(?=.*?[a-z])(?=.*?[A-Z])(?=.*?\d)[a-zA-Z\d]+$/,NUMERIC_REG_EX:/^\d+$/,NUMERIC_2DIGIT_REG_EX:/^\d{1,2}$/}},247:(U,F,s)=>{s.d(F,{f:()=>c});const c={TAX_STATUS_CODE:{TAX_EXCLUDED_10:1,TAX_INCLUDED_10:2,NO_TAX:3,TAX_EXCLUDED_8:4,TAX_INCLUDED_8:5},TAX_STATUS:{TAX_EXCLUDED_10:"\u5916\u7a0e10%",TAX_INCLUDED_10:"\u5185\u7a0e10%",NO_TAX:"\u975e\u8ab2\u7a0e",TAX_EXCLUDED_8:"\u5916\u7a0e8%",TAX_INCLUDED_8:"\u5185\u7a0e8%"},FRACTION_DIVISION_CODE:{ROUND_DOWN:1,ROUND_UP:2,ROUND:3},FRACTION_DIVISION_VALUE:{ROUND_DOWN:"\u5207\u308a\u6368\u3066",ROUND_UP:"\u5207\u308a\u4e0a\u3052",ROUND:"\u56db\u6368\u4e94\u5165"},FRACTION_DIVISION_METHOD:{ROUND_DOWN:"floor",ROUND_UP:"ceil",ROUND:"round"},TAX:{TAX_EXCLUDED_10:10,TAX_INCLUDED_10:10,NO_TAX:0,TAX_EXCLUDED_8:8,TAX_INCLUDED_8:8}}},1267:(U,F,s)=>{s.d(F,{LR:()=>p,Nf:()=>x,Sz:()=>Z,Yc:()=>P,_k:()=>T,bz:()=>m,dR:()=>M,e_:()=>y,fy:()=>g,g3:()=>S,hv:()=>v,lJ:()=>A,lk:()=>h,nY:()=>Q,ni:()=>t,oG:()=>L,vP:()=>B,vf:()=>D,vz:()=>f,zn:()=>E});var c=s(247);function m(l){return null==l||null==l.data||!Array.isArray(l.data)||!l.data.length}function h(l,u){return null==l||null==l[u]||!Array.isArray(l[u])||!l[u].length}function A(l){const u=new Uint8Array([239,187,191]);return URL.createObjectURL(new Blob([u,l],{type:"text/csv"}))}function v(l){return URL.createObjectURL(new Blob([l],{type:"application/pdf"}))}function p(l,u){const _=document.createElement("a");_.download=u??"",_.href=l,_.click()}function f(l){if(null==l||""===l)return"";const u=new Date(l);return u.getFullYear()+" \u5e74 "+(u.getMonth()+1)+" \u6708 "+u.getDate()+" \u65e5"}function t(l){if(null==l||""===l||!/^\d{9,14}$/.test(l))return"";let _=null,b=null;return l.startsWith("03")?(_=l.slice(0,2),b=l.slice(2,l.length-4)):(_=l.slice(0,3),b=l.slice(3,l.length-4)),_+"-"+b+"-"+l.slice(-4)}function D(l){return null!=l&&""!==l&&/^\d{7}$/.test(l)?l.slice(0,3)+"-"+l.slice(-4):""}function x(l){const u=[],_=Object.keys(l[0]);u.push(_.join(","));for(const w of l){const k=_.map(q=>`"${(""+w[q]).replace(/"/g,'""')}"`);u.push(k.join(","))}const b=u.join("\n");return new Blob([b],{type:"text/csv"})}function S(l){const u={};for(const[_,b]of Object.entries(l))null!=b&&""!==b&&(u[_]=b);return u}function B(l){const u={};for(const[_,b]of Object.entries(l))if(null===b||b instanceof Date||"object"!=typeof b)u[_]=b;else for(const[I,w]of Object.entries(B(b)))u[`${I}_${_}`]=w instanceof Date?w.toLocaleDateString():w;return u}function L(l){return null===l||!!isNaN(Number(l))}function g(l){let u;switch(l){case c.f.FRACTION_DIVISION_CODE.ROUND_DOWN:u=c.f.FRACTION_DIVISION_METHOD.ROUND_DOWN;break;case c.f.FRACTION_DIVISION_CODE.ROUND_UP:u=c.f.FRACTION_DIVISION_METHOD.ROUND_UP;break;case c.f.FRACTION_DIVISION_CODE.ROUND:u=c.f.FRACTION_DIVISION_METHOD.ROUND;break;default:u=c.f.FRACTION_DIVISION_METHOD.ROUND_DOWN}return u}function E(l){let u,_;switch(l){case c.f.TAX_STATUS_CODE.TAX_EXCLUDED_10:u=c.f.TAX.TAX_EXCLUDED_10,_=!1;break;case c.f.TAX_STATUS_CODE.TAX_INCLUDED_10:u=c.f.TAX.TAX_INCLUDED_10,_=!0;break;case c.f.TAX_STATUS_CODE.TAX_EXCLUDED_8:u=c.f.TAX.TAX_EXCLUDED_8,_=!1;break;case c.f.TAX_STATUS_CODE.TAX_INCLUDED_8:u=c.f.TAX.TAX_INCLUDED_8,_=!0;break;case c.f.TAX_STATUS_CODE.NO_TAX:u=c.f.TAX.NO_TAX,_=!0;break;default:u=c.f.TAX.TAX_INCLUDED_10,_=!0}return{taxRate:u,isTaxIncluded:_}}function y(l,u,_,b){try{let I=0,w=0,k=0;switch(_?(k=l/(1+u/100),I=l-k):(I=l*(u/100),w=l+I),b){case"floor":I=Math.floor(I);break;case"ceil":I=Math.ceil(I);break;case"round":I=Math.round(I)}return _?(k=Math[b](k),w=l):(w=Math[b](w),k=l),{priceWithTax:w,priceWithoutTax:k,taxAmount:I}}catch(I){return I instanceof Error?I:new Error("An unknown error occurred.")}}function T(l){let u=l;return l<1e3?u=Math.round(l):l>=1e3&&l<1e4?u=10*Math.round(l/10):l>=1e4&&(u=100*Math.round(l/100)),u}function Z(l,u){const b=Math.abs(u.getTime()-l.getTime());return Math.round(b/864e5)}function Q(l){return null==l||""===l}function M(l){return null==l||0===Object.keys(l).length}function P(l,u="csv"){const _=new Date;return`${l}_${_.getFullYear()}${String(_.getMonth()+1).padStart(2,"0")}${String(_.getDate()).padStart(2,"0")}_${String(_.getHours()).padStart(2,"0")}${String(_.getMinutes()).padStart(2,"0")}.${u}`}},6082:(U,F,s)=>{s.d(F,{M:()=>S});var c=s(2340),m=s(262),h=s(4004),A=s(8372),v=s(1884),p=s(3900),f=s(9646),t=s(1751),D=s(529),x=s(1571);let S=(()=>{class B extends t.O{constructor(){super(...arguments),this.endpoint=c.pU.productApi.endpoint}getAll(g={}){return this.httpOptions.params=g,this.http.get(this.endpoint,this.httpOptions).pipe((0,m.K)(this.setErrorMessage("\u5546\u54c1\u4e00\u89a7\u306e\u53d6\u5f97")))}get(g,E={}){return this.getAll({...E,supplier_id:g})}getCsv(g,E){const y={params:E,responseType:"text",headers:new D.WM({"X-Download":g})};return this.http.get(this.endpoint,y).pipe((0,m.K)(this.setErrorMessage("\u4e00\u62ec\u767b\u9332\u7528\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u53d6\u5f97")))}find(g){return this.http.get(`${this.endpoint}/${g}`).pipe((0,m.K)(this.setErrorMessage("\u5546\u54c1\u60c5\u5831\u306e\u53d6\u5f97")))}add(g){const E=this.generateFormData(g);return this.http.post(this.endpoint,E).pipe((0,m.K)(this.setErrorMessage("\u5546\u54c1\u60c5\u5831\u306e\u767b\u9332")))}bulkAdd(g){const E=this.generateFormData({file:g});return this.http.put(this.endpoint,E).pipe((0,m.K)(this.setErrorMessage("\u5546\u54c1\u60c5\u5831\u306e\u4e00\u62ec\u767b\u9332")))}update(g,E){const y=this.generateFormData(E);return this.http.patch(`${this.endpoint}/${g}`,y).pipe((0,m.K)(this.setErrorMessage("\u5546\u54c1\u60c5\u5831\u306e\u66f4\u65b0")))}remove(g){return this.http.delete(`${this.endpoint}/${g}`).pipe((0,m.K)(this.setErrorMessage("\u5546\u54c1\u60c5\u5831\u306e\u524a\u9664")))}getAsSelectOptions(g){return this.getAll(g).pipe((0,h.U)(E=>E.data.map(y=>({text:y.name+"",value:y.id}))))}getAsSelectOptionsForNameSearch(g){return this.getAll(g).pipe((0,h.U)(E=>E.data.map(y=>({text:y.name+"",value:y.name}))))}observableProductId(g,E,y){y.loading=!1,g.valueChanges.pipe((0,A.b)(500),(0,v.x)(),(0,p.w)(T=>this.observableSetProductName(String(T),E,y))).subscribe()}observableSetProductName(g,E,y){return null==g||""===g?(E.setValue("",{emitEvent:!1}),(0,f.of)()):(y.loading=!0,this.find(Number(g)).pipe((0,h.U)(T=>{const Z=T.data[0];y.loading=!1,E.setValue(Z?.name,{emitEvent:!1})}),(0,m.K)(T=>(y.loading=!1,this.handleErrorModal()(T)))))}}return B.\u0275fac=function(){let L;return function(E){return(L||(L=x.n5z(B)))(E||B)}}(),B.\u0275prov=x.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})()},2e3:(U,F,s)=>{s.d(F,{d:()=>v});var c=s(2340),m=s(4004),h=s(1751),A=s(1571);let v=(()=>{class p extends h.O{constructor(){super(...arguments),this.storeEndpoint=c.pU.storeApi.endpoint}getAll(t={}){return this.httpOptions.params=t,this.http.get(this.storeEndpoint,this.httpOptions)}find(t){return this.http.get(`${this.storeEndpoint}/${t}`)}add(t){const D=this.generateFormData(t);return this.http.post(this.storeEndpoint,D)}update(t,D){const x=this.generateFormData(D);return this.http.patch(`${this.storeEndpoint}/${t}`,x)}remove(t){return this.http.delete(`${this.storeEndpoint}/${t}`)}getAsSelectOptions(){return this.getAll().pipe((0,m.U)(t=>t.data.map(x=>({value:x.id,text:x.name}))))}}return p.\u0275fac=function(){let f;return function(D){return(f||(f=A.n5z(p)))(D||p)}}(),p.\u0275prov=A.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);