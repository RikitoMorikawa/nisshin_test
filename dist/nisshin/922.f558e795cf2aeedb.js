"use strict";(self.webpackChunknisshin=self.webpackChunknisshin||[]).push([[922],{4663:(E,h,n)=>{n.d(h,{Q:()=>p});var r=n(6895),_=n(4006),v=n(1571);let p=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=v.oAB({type:l}),l.\u0275inj=v.cJS({imports:[r.ez,_.UX]}),l})()},4787:(E,h,n)=>{n.d(h,{N:()=>i});var r=n(6895),_=n(6320),v=n(1924),p=n(8511),l=n(1571);let i=(()=>{class s{}return s.\u0275fac=function(f){return new(f||s)},s.\u0275mod=l.oAB({type:s}),s.\u0275inj=l.cJS({imports:[r.ez,p.Q,_.r,v.Z]}),s})()},8367:(E,h,n)=>{n.d(h,{a:()=>i});var r=n(6895),_=n(6320),v=n(8460),p=n(8511),l=n(1571);let i=(()=>{class s{}return s.\u0275fac=function(f){return new(f||s)},s.\u0275mod=l.oAB({type:s}),s.\u0275inj=l.cJS({imports:[r.ez,_.r,v.A,p.Q]}),s})()},9434:(E,h,n)=>{n.d(h,{H:()=>l});var r=n(6895),_=n(6320),v=n(8460),p=n(1571);let l=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[r.ez,_.r,v.A]}),i})()},6502:(E,h,n)=>{n.d(h,{P:()=>s});var r=n(1571),_=n(3761),v=n(6303),p=n(5155);const l=["*",[["","message",""]]],i=["*","[message]"];let s=(()=>{class e{constructor(){this.inputType="text",this.invalid=!1,this.labelSize="base"}onClear(){this.formCtrl.setValue("")}}return e.\u0275fac=function(A){return new(A||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-text-clear-container"]],inputs:{inputType:"inputType",nameAttrValue:"nameAttrValue",idAttrValue:"idAttrValue",formCtrl:"formCtrl",placeholder:"placeholder",invalid:"invalid",labelSize:"labelSize"},ngContentSelectors:i,decls:7,vars:8,consts:[[1,"flex","flex-col"],[1,"ml-1","mb-1",3,"labelSize","forAttrValue"],[1,"flex","flex-row","items-center"],[1,"grow",3,"inputType","nameAttrValue","idAttrValue","formCtrl","placeholder","invalid"],["icon","close-circle-fill",1,"w-6","ml-1","fill-slate-500","cursor-pointer",3,"click"]],template:function(A,C){1&A&&(r.F$t(l),r.TgZ(0,"div",0)(1,"app-label",1),r.Hsn(2),r.qZA(),r.TgZ(3,"div",2),r._UZ(4,"app-text",3),r.TgZ(5,"app-icon",4),r.NdJ("click",function(){return C.onClear()}),r.qZA()(),r.Hsn(6,1),r.qZA()),2&A&&(r.xp6(1),r.Q6J("labelSize",C.labelSize)("forAttrValue",C.idAttrValue),r.xp6(3),r.Q6J("inputType",C.inputType)("nameAttrValue",C.nameAttrValue)("idAttrValue",C.idAttrValue)("formCtrl",C.formCtrl)("placeholder",C.placeholder)("invalid",C.invalid))},dependencies:[_.o,v._,p.T]}),e})()},5274:(E,h,n)=>{n.d(h,{s:()=>l});var r=n(6895),_=n(6320),v=n(973),p=n(1571);let l=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[r.ez,_.r,v.Y]}),i})()},1819:(E,h,n)=>{n.d(h,{l:()=>i});var r=n(6895),_=n(6320),v=n(4006),p=n(1571);let l=(()=>{class s{}return s.\u0275fac=function(f){return new(f||s)},s.\u0275mod=p.oAB({type:s}),s.\u0275inj=p.cJS({imports:[r.ez,v.UX]}),s})(),i=(()=>{class s{}return s.\u0275fac=function(f){return new(f||s)},s.\u0275mod=p.oAB({type:s}),s.\u0275inj=p.cJS({imports:[r.ez,_.r,l]}),s})()},6968:(E,h,n)=>{n.d(h,{V:()=>l});var r=n(6895),_=n(1690),v=n(1326),p=n(1571);let l=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[r.ez,_.Bz,v.z]}),i})()},3560:(E,h,n)=>{n.d(h,{r:()=>p});var r=n(6895),_=n(1326),v=n(1571);let p=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=v.oAB({type:l}),l.\u0275inj=v.cJS({imports:[r.ez,_.z]}),l})()},6181:(E,h,n)=>{n.d(h,{A:()=>l});var r=n(6895),_=n(1326),v=n(9104),p=n(1571);let l=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[r.ez,_.z,v.u]}),i})()},4933:(E,h,n)=>{n.d(h,{M:()=>l});var r=n(6895),_=n(1690),v=n(1326),p=n(1571);let l=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[r.ez,_.Bz,v.z]}),i})()},6321:(E,h,n)=>{n.d(h,{T:()=>p});var r=n(6895),_=n(1326),v=n(1571);let p=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=v.oAB({type:l}),l.\u0275inj=v.cJS({imports:[r.ez,_.z]}),l})()},2922:(E,h,n)=>{n.r(h),n.d(h,{OrderModule:()=>at});var r=n(6895),_=n(1690),v=n(727),p=n(5698),l=n(9300),i=n(8037),s=n(6585),e=n(1571),f=n(1609),A=n(2334),C=n(8832),F=n(2125);let z=(()=>{class a{constructor(t,o,c,d){this.modalService=t,this.errorService=o,this.router=c,this.common=d,this.subscription=new v.w0,this.isLoading=!1}ngOnInit(){this.subscription.add(this.errorService.getError().subscribe(t=>{this.handleError(t)})),this.subscription.add(this.common.loading$.subscribe(t=>{setTimeout(()=>this.isLoading=t)}))}ngOnDestroy(){this.subscription.unsubscribe()}handleError(t){t.redirectPath&&(this.redirectPath=t.redirectPath),this.modalService.setModal(t.title,0===t.status?t.message+i.c.GUIDANCE_OF_SUPPORT:`\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9: ${t.status} \n\u30e1\u30c3\u30bb\u30fc\u30b8: `+t.message+i.c.GUIDANCE_OF_SUPPORT,"danger",s.yR.BUTTON_TITLE.CLOSE,""),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,p.q)(1),(0,l.h)(c=>this.modalService.getModalProperties().title===t.title)).subscribe(c=>{this.redirectPath&&this.router.navigateByUrl(this.redirectPath)}))}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(f.Z),e.Y36(A.T),e.Y36(_.F0),e.Y36(C.v))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-order"]],decls:2,vars:1,consts:[[3,"isLoading"]],template:function(t,o){1&t&&e._UZ(0,"router-outlet")(1,"app-loading-container",0),2&t&&(e.xp6(1),e.Q6J("isLoading",o.isLoading))},dependencies:[_.lC,F.o]}),a})();var T=n(262),Q=n(4004),S=n(4128),P=n(8746),D=n(9646),x=n(8132),I=n(7030),Y=n(9586),V=n(1805),$=n(1914);function H(a,u){if(1&a&&(e.TgZ(0,"app-icon-container",12),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function X(a,u){if(1&a&&(e.TgZ(0,"app-icon-container",13),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function G(a,u){if(1&a&&(e.TgZ(0,"app-icon-container",22),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function w(a,u){if(1&a&&(e.TgZ(0,"li",16)(1,"div",17),e.YNc(2,H,2,1,"app-icon-container",18),e.YNc(3,X,2,1,"app-icon-container",19),e.YNc(4,G,2,1,"app-icon-container",20),e.qZA(),e.TgZ(5,"div",21),e._uU(6),e.qZA()()),2&a){const t=u.$implicit;e.xp6(1),e.Q6J("ngSwitch",t.display),e.xp6(1),e.Q6J("ngSwitchCase","visible"),e.xp6(1),e.Q6J("ngSwitchCase","hidden"),e.xp6(3),e.hij(" ",t.value," ")}}function k(a,u){if(1&a&&(e.ynx(0),e.TgZ(1,"div",8)(2,"p",9),e._uU(3),e.qZA(),e._UZ(4,"hr",10),e.TgZ(5,"div",11)(6,"p"),e._uU(7,"\u4ed5\u5165\u5148Web\u30b7\u30b9\u30c6\u30e0\u3067\u306e\u72b6\u614b\uff1a"),e.qZA(),e.TgZ(8,"app-icon-container",12),e._uU(9,"\u898b\u3048\u308b"),e.qZA(),e.TgZ(10,"app-icon-container",13),e._uU(11,"\u898b\u3048\u306a\u3044"),e.qZA()(),e.TgZ(12,"ul",14),e.YNc(13,w,7,4,"li",15),e.qZA()(),e.BQk()),2&a){const t=e.oxw();e.xp6(3),e.hij(" ",t.order.product_name?t.order.product_name:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),e.xp6(10),e.Q6J("ngForOf",t.listItems)}}function q(a,u){1&a&&(e.TgZ(0,"div",23)(1,"p",24),e._uU(2,"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."),e.qZA()())}const ee=function(){return{path:"/purchase-order/specification",text:"\u767a\u6ce8\u500b\u7968\u4e00\u89a7"}},te=function(){return{text:"\u767a\u6ce8\u500b\u7968\u8a73\u7d30"}},ne=function(a,u){return[a,u]};let oe=(()=>{class a{constructor(t,o,c,d){this.route=t,this.modal=o,this.orderService=c,this.common=d,this.order={},this.orderId=this.route.snapshot.params.id,this.removeMethod$=this.orderService.remove(this.orderId).pipe((0,T.K)(this.handleError())),this.listItems=[{name:"\u500b\u7968No",display:"visible",prop_name:"id"},{name:"\u767a\u6ce8\u66f8No",display:"visible",prop_name:"purchase_order_id"},{name:"\u30b9\u30c6\u30fc\u30bf\u30b9",display:"visible",prop_name:"order_status_value"},{name:"\u5546\u54c1\u540d",display:"visible",prop_name:"product_name"},{name:"\u767a\u6ce8\u6570\u91cf",display:"visible",prop_name:"order_quantity"},{name:"\u767a\u6ce8\u5546\u54c1\u767b\u9332\u8005",display:"visible",prop_name:"created_at"},{name:"\u767a\u6ce8\u5546\u54c1\u767b\u9332\u65e5\u6642",display:"visible",prop_name:"created_at"},{name:"\u691c\u54c1\u6570\u91cf",display:"visible",prop_name:"receiving_quantity"},{name:"\u691c\u54c1\u65e5\u6642",display:"hidden",prop_name:"receiving_date"},{name:"\u691c\u54c1\u62c5\u5f53\u8005",display:"hidden",prop_name:"receiving_employee_id"},{name:"\u6700\u7d42\u66f4\u65b0\u65e5\u6642",display:"hidden",prop_name:"updated_at"},{name:"\u6700\u7d42\u66f4\u65b0\u8005",display:"hidden",prop_name:"updated_id"}]}ngOnInit(){window.scrollTo(0,0),this.common.loading=!0;const t=this.orderService.find(this.orderId).pipe((0,Q.U)(o=>o.data[0]),(0,T.K)(this.handleError()));(0,S.D)({order$:t}).pipe((0,P.x)(()=>this.common.loading=!1)).subscribe(o=>{this.order=o.order$,this.updater=`${this.order.employee_updated_last_name}\u3000${this.order.employee_updated_first_name}`,this.setListItemsValue(o.order$)})}handleError(){return t=>(console.error(t),this.modal.setModal(`\u901a\u4fe1\u30a8\u30e9\u30fc(${t.status})`,t.message,"danger","\u9589\u3058\u308b",""),(0,D.of)({}))}setListItemsValue(t){this.listItems.filter(o=>o.prop_name).forEach(o=>{o.value=(t[o.prop_name]??"")+""}),t.created_at&&(this.getListItem("\u767a\u6ce8\u5546\u54c1\u767b\u9332\u65e5\u6642").value=new Date(t.created_at).toLocaleString()),this.getListItem("\u767a\u6ce8\u5546\u54c1\u767b\u9332\u8005").value=`${t.employee_created_last_name} ${t.employee_created_first_name}`,""!=this.getListItem("\u691c\u54c1\u65e5\u6642").value&&(this.getListItem("\u691c\u54c1\u65e5\u6642").value=new Date(t.receiving_date).toLocaleString()),this.getListItem("\u691c\u54c1\u62c5\u5f53\u8005").value=`${t.employee_receiving_last_name} ${t.employee_receiving_first_name}`,t.updated_at&&(this.getListItem("\u6700\u7d42\u66f4\u65b0\u65e5\u6642").value=new Date(t.updated_at).toLocaleString(),this.getListItem("\u6700\u7d42\u66f4\u65b0\u8005").value=`${t.employee_updated_last_name} ${t.employee_updated_first_name}`)}getListItem(t){return this.listItems.find(o=>o.name===t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.gz),e.Y36(f.Z),e.Y36(x.p),e.Y36(C.v))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-detail"]],decls:13,vars:9,consts:[[3,"breadcrumbList"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"flex","flex-row","items-center","gap-6"],["path","/purchase-order/specification"],[1,"width-limit-break","border-t","border-gray-400"],[4,"ngIf"],["class","mt-12 text-center",4,"ngIf"],[1,"mt-8","py-8","px-6","bg-white","shadow","border","border-gray-300"],[1,"mt-1","mb-2","text-lg"],[1,"border-t-primary-light-hover","border-t-4","mb-2"],[1,"flex","gap-6","text-sm","mb-2"],["icon","eye-line","appendClassForIcon","fill-success"],["icon","eye-off-line","appendClassForIcon","fill-danger"],[1,"border-t","border-y","border-gray-200","shadow"],["class","flex flex-row items-center border-b border-b-gray-200",4,"ngFor","ngForOf"],[1,"flex","flex-row","items-center","border-b","border-b-gray-200"],[1,"px-4","py-3","bg-slate-100","min-w-[200px]","min-h-[48px]",3,"ngSwitch"],["icon","eye-line","appendClassForIcon","fill-success",4,"ngSwitchCase"],["icon","eye-off-line","appendClassForIcon","fill-danger",4,"ngSwitchCase"],["icon","edit-2-line","appendClassForIcon","fill-danger",4,"ngSwitchDefault"],[1,"px-4","py-3","border-l","border-l-gray-200","min-h-[48px]","grow"],["icon","edit-2-line","appendClassForIcon","fill-danger"],[1,"mt-12","text-center"],[1,"text-2xl","text-slate-600"]],template:function(t,o){1&t&&(e._UZ(0,"app-breadcrumb-org",0),e.TgZ(1,"main")(2,"h1",1),e._uU(3,"\u767a\u6ce8\u500b\u7968\u8a73\u7d30"),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"app-back-to-link-org",4),e._uU(7,"\u4e00\u89a7\u3078\u623b\u308b"),e.qZA()(),e.TgZ(8,"app-last-updater-org"),e._uU(9),e.qZA()(),e._UZ(10,"hr",5),e.YNc(11,k,14,2,"ng-container",6),e.YNc(12,q,3,0,"div",7),e.qZA()),2&t&&(e.Q6J("breadcrumbList",e.WLB(6,ne,e.DdM(4,ee),e.DdM(5,te))),e.xp6(9),e.hij(" \u6700\u7d42\u66f4\u65b0\u8005\uff1a",o.updater," "),e.xp6(2),e.Q6J("ngIf",!o.common.loading),e.xp6(1),e.Q6J("ngIf",o.common.loading))},dependencies:[r.sg,r.O5,r.RF,r.n9,r.ED,I.Z,Y.i,V.R,$.J]}),a})();var B=n(7579),y=n(529),b=n(4006),U=n(3605),Z=n(9042),ae=n(67),R=n(5450),re=n(4562),ie=n(4416),se=n(6082),le=n(6232),ue=n(6502),ce=n(3148),de=n(5146),me=n(3761),pe=n(1451),_e=n(7540),ge=n(9612);function ve(a,u){1&a&&e.GkF(0,26)}function he(a,u){1&a&&e.GkF(0,26)}function fe(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"app-button",27),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.handleClickSubmitButton())}),e._uU(1," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),e.qZA()}}function Ce(a,u){1&a&&(e.TgZ(0,"app-button",28),e._uU(1," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),e.qZA())}function Ee(a,u){if(1&a&&(e.TgZ(0,"p",29),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorConst.FORM_ERROR.DATE_TERM_TO_BEFORE_FROM," ")}}let Ae=(()=>{class a{constructor(t,o,c,d,m){this.fb=t,this.supplierService=o,this.employeeService=c,this.productService=d,this.divisionService=m,this.subscription=new v.w0,this.searchEvent=new e.vpe,this.errorEvent=new e.vpe,this.hasPanelOpened=!1,this.rotateAnimation="",this.errorConst=i.c,this.form=this.fb.group({id:"",purchase_order_id:"",supplier_id:"",supplier_name:"",order_status_division_id:"",product_id:"",product_name:"",created_id:"",receiving_employee_id:"",shelf_value:"",created_at:this.fb.group({from:"",to:""},{validators:[R.d.beforeFromDate()]}),receiving_date:this.fb.group({from:"",to:""},{validators:[R.d.beforeFromDate()]})})}get ctrls(){return this.form.controls}ngOnInit(){this.initialization()}ngOnDestroy(){this.subscription.unsubscribe()}initialization(){this.subscription.add((0,S.D)([this.employeeService.getAsSelectOptions(),this.divisionService.getAsSelectOptions({name:Z.z.ORDER_STATUS})]).pipe((0,T.K)(t=>(t.emit(t),(0,D.of)(t.error)))).subscribe(t=>{console.log(t),t instanceof y.UA?this.handleError(t.status,t.message):null!=t?(this.employeeSuggests=t[0],this.statusOptions=[{value:"",text:ae.s.PLEASE_SELECT}].concat(t[1][Z.z.ORDER_STATUS])):this.handleError(400,s.yR.BODY.HAS_ERROR)}))}invalid(t){return(t.touched||t.dirty)&&t.invalid}panelOpenButtonOnClick(){this.hasPanelOpened?(this.hasPanelOpened=!1,this.rotateAnimation="rotate-animation-0"):(this.hasPanelOpened=!0,this.rotateAnimation="rotate-animation-180")}handleClickClearButton(){Object.values(this.ctrls).forEach(t=>{t instanceof b.cw?Object.values(t.controls).forEach(o=>{o.patchValue("")}):t.patchValue("")})}handleClickSubmitButton(){const t=this.form.value;console.log(t);const o=U.v.flattingFormValue(t);this.searchEvent.emit(U.v.removeNullsAndBlanks(o))}handleError(t,o){this.errorEvent.emit({status:t,title:"\u767a\u6ce8\u500b\u7968\u4e00\u89a7\u7d5e\u308a\u8fbc\u307f\uff1a"+s.yR.TITLE.HAS_ERROR,message:o})}getProductSuggests(){return{observable:this.productService.getAll({name:this.ctrls.product_name.value}),idField:"id",nameField:"name"}}getSupplierSuggests(){return{observable:this.supplierService.getAll({name:this.ctrls.supplier_name.value}),idField:"id",nameField:"name"}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(b.qu),e.Y36(re.p),e.Y36(ie.G),e.Y36(se.M),e.Y36(le.E))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-search"]],outputs:{searchEvent:"searchEvent",errorEvent:"errorEvent"},decls:55,vars:34,consts:[[1,"mt-8","mb-4"],[3,"click"],["icon","filter-2-line",1,"w-6"],[1,"inline-block","ml-1","mr-2"],["icon","arrow-down-s-fill",1,"w-6"],[1,"mb-6"],[1,"order-search","width-limit-break","bg-white",3,"ngClass"],[1,"w-[1280px]","mx-auto","px-4",3,"ngSubmit"],[1,"flex","gap-6","mb-6"],[1,"w-1/6",3,"formCtrl"],[1,"w-2/6"],["nameAttrValue","status_division_id","idAttrValue","status-division-id",1,"grow",3,"formCtrl","options","invalid"],["idAttrValue","supplier_id","nameAttrValue","supplier_name",3,"idCtrl","nameCtrl","apiInput"],[1,"w-1/3"],["idAttrValue","product_id","nameAttrValue","product_name",3,"idCtrl","nameCtrl","apiInput"],["nameAttrValue","created_id","idAttrValue","created-id","placeholder","\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",3,"formCtrl","suggests","invalid"],["nameAttrValue","receiving_employee_id","idAttrValue","receiving-employee-id","placeholder","\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",3,"formCtrl","suggests","invalid"],[1,"w-1/5"],[3,"formCtrl"],[3,"dateFromFormCtrl","dateToFormCtrl","invalid"],["message","",4,"ngIf","ngIfThen"],[1,"flex","gap-8","mt-10"],["btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",3,"click",4,"ngIf","ngIfElse"],[1,"mt-2","text-sm","text-red"],["disable",""],["beforeFromDate",""],["message",""],["btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",3,"click"],["btnFillColor","text-white bg-slate-300 hover:bg-slate-300"],[1,"mt-1","pl-1","text-sm","text-red"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"app-button",1),e.NdJ("click",function(){return o.panelOpenButtonOnClick()}),e._UZ(2,"app-icon",2),e.TgZ(3,"span",3),e._uU(4),e.qZA(),e._UZ(5,"app-icon",4),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"form",7),e.NdJ("ngSubmit",function(){return o.handleClickSubmitButton()}),e.TgZ(9,"div",8)(10,"app-text-clear-container",9),e._uU(11,"\u767a\u6ce8\u66f8No"),e.qZA(),e.TgZ(12,"app-text-clear-container",9),e._uU(13,"\u500b\u7968No"),e.qZA(),e.TgZ(14,"div",10)(15,"app-select-container",11)(16,"span"),e._uU(17,"\u30b9\u30c6\u30fc\u30bf\u30b9"),e.qZA()()(),e.TgZ(18,"div",10)(19,"app-real-time-suggest-container",12),e._uU(20," \u4ed5\u5165\u5148\u540d "),e.qZA()()(),e.TgZ(21,"div",8)(22,"div",13)(23,"app-real-time-suggest-container",14),e._uU(24," \u5546\u54c1\u540d "),e.qZA()(),e.TgZ(25,"div",13)(26,"app-select-suggest-container",15),e._uU(27," \u767a\u6ce8\u5546\u54c1\u767b\u9332\u8005 "),e.qZA()(),e.TgZ(28,"div",13)(29,"app-select-suggest-container",16),e._uU(30," \u691c\u54c1\u62c5\u5f53\u8005 "),e.qZA()()(),e.TgZ(31,"div",8)(32,"div",17)(33,"app-text-clear-container",18),e._uU(34,"\u68da\u756a"),e.qZA()(),e.TgZ(35,"div")(36,"app-date-term-clear-container",19)(37,"span"),e._uU(38,"\u767a\u6ce8\u5546\u54c1\u767b\u9332\u65e5"),e.qZA(),e.YNc(39,ve,1,0,"ng-container",20),e.qZA()(),e.TgZ(40,"div")(41,"app-date-term-clear-container",19)(42,"span"),e._uU(43,"\u691c\u54c1\u65e5"),e.qZA(),e.YNc(44,he,1,0,"ng-container",20),e.qZA()()(),e.TgZ(45,"div",21)(46,"app-button",1),e.NdJ("click",function(){return o.handleClickClearButton()}),e._uU(47," \u5165\u529b\u5185\u5bb9\u30af\u30ea\u30a2 "),e.qZA(),e.YNc(48,fe,2,0,"app-button",22),e.qZA(),e.TgZ(49,"p",23),e._uU(50," \u203b \u5165\u529b\u5185\u5bb9\u3092\u30af\u30ea\u30a2\u3057\u305f\u5f8c\u306b\u7d5e\u308a\u8fbc\u307f\u5b9f\u884c\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u5168\u3066\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002 "),e.qZA()()()(),e.YNc(51,Ce,2,0,"ng-template",null,24,e.W1O),e.YNc(53,Ee,2,1,"ng-template",null,25,e.W1O)),2&t){const c=e.MAs(52),d=e.MAs(54);e.xp6(4),e.hij(" ",o.hasPanelOpened?"\u7d5e\u308a\u8fbc\u307f\u30d5\u30a9\u30fc\u30e0\u975e\u8868\u793a":"\u7d5e\u308a\u8fbc\u307f\u30d5\u30a9\u30fc\u30e0\u8868\u793a"," "),e.xp6(1),e.Tol(o.rotateAnimation),e.xp6(2),e.Q6J("ngClass",o.hasPanelOpened?"is-open shadow":""),e.xp6(3),e.Q6J("formCtrl",o.ctrls.purchase_order_id),e.xp6(2),e.Q6J("formCtrl",o.ctrls.id),e.xp6(3),e.Q6J("formCtrl",o.ctrls.order_status_division_id)("options",o.statusOptions)("invalid",o.invalid(o.ctrls.order_status_division_id)),e.xp6(4),e.Q6J("idCtrl",o.ctrls.supplier_id)("nameCtrl",o.ctrls.supplier_name)("apiInput",o.getSupplierSuggests()),e.xp6(4),e.Q6J("idCtrl",o.ctrls.product_id)("nameCtrl",o.ctrls.product_name)("apiInput",o.getProductSuggests()),e.xp6(3),e.Q6J("formCtrl",o.ctrls.created_id)("suggests",o.employeeSuggests)("invalid",o.invalid(o.ctrls.created_id)),e.xp6(3),e.Q6J("formCtrl",o.ctrls.receiving_employee_id)("suggests",o.employeeSuggests)("invalid",o.invalid(o.ctrls.receiving_employee_id)),e.xp6(4),e.Q6J("formCtrl",o.ctrls.shelf_value),e.xp6(3),e.Q6J("dateFromFormCtrl",o.ctrls.created_at.controls.from)("dateToFormCtrl",o.ctrls.created_at.controls.to)("invalid",!!o.ctrls.created_at.errors),e.xp6(3),e.Q6J("ngIf",null==o.ctrls.created_at.errors?null:o.ctrls.created_at.errors.beforeFromDate)("ngIfThen",d),e.xp6(2),e.Q6J("dateFromFormCtrl",o.ctrls.receiving_date.controls.from)("dateToFormCtrl",o.ctrls.receiving_date.controls.to)("invalid",!!o.ctrls.receiving_date.errors),e.xp6(3),e.Q6J("ngIf",null==o.ctrls.receiving_date.errors?null:o.ctrls.receiving_date.errors.beforeFromDate)("ngIfThen",d),e.xp6(4),e.Q6J("ngIf",o.form.valid)("ngIfElse",c)}},dependencies:[r.mk,r.O5,b._Y,b.JL,ue.P,ce.w,de.r,me.o,pe.d,_e.X,ge.Y],styles:[".order-search[_ngcontent-%COMP%]{max-height:0;padding:0 2.5rem;margin:0;transition:max-height .8s,padding .8s,margin .8s ease;overflow:hidden}.order-search.is-open[_ngcontent-%COMP%]{max-height:100vh;padding:2.5rem;margin:2rem 0}"]}),a})();var J=n(8505),Oe=n(3900),Te=n(8782),Me=n(2640);let De=(()=>{class a{constructor(t,o,c,d,m){this.orderService=t,this.common=o,this.modalService=c,this.router=d,this.flashMessageService=m,this.subscription=new v.w0,this.errorEvent=new e.vpe,this.filter={},this.pages={page:1,itemsPerPage:10,sort:{column:"\u500b\u7968No",order:"desc"}},this.tableParams=new B.x,this.errorModalTitle="\u66f4\u65b0\u30a8\u30e9\u30fc\uff1a"+s.yR.TITLE.HAS_ERROR,this.tableNameMapping=[{name:"id",name_jp:"\u500b\u7968No"},{name:"purchase_order_id",name_jp:"\u767a\u6ce8\u66f8No"},{name:"order_status_value",name_jp:"\u30b9\u30c6\u30fc\u30bf\u30b9"},{name:"product_name",name_jp:"\u5546\u54c1\u540d"},{name:"supplier_name",name_jp:"\u4ed5\u5165\u5148\u540d"},{name:"product_minimum_order_quantity",name_jp:"\u6700\u5c0f\u767a\u6ce8\u6570"},{name:"order_quantity",name_jp:"\u767a\u6ce8\u6570\u91cf"},{name:"receiving_quantity",name_jp:"\u691c\u54c1\u6570\u91cf"},{name:"receiving_date",name_jp:"\u691c\u54c1\u65e5\u6642"},{name:"shelf_value",name_jp:"\u9673\u5217\u68da"}],this.listPagePath="/order/specification"}ngOnInit(){this.subscribeEventListener(),this.eventListener.next(this.pages)}changeItemData(t){this.common.loading=!0;let o=Number(t.id),c=Number(t.value);this.subscription.add(this.orderService.find(o).pipe((0,P.x)(()=>this.common.loading=!0),(0,T.K)(d=>(0,D.of)(d))).subscribe(d=>{if(d instanceof y.UA)return void this.handleError(d.status,d.message);let m=d.data[0];this.orderService.update(o,{order_quantity:c,purchase_order_id:m.purchase_order_id,product_id:m.product_id}).pipe((0,P.x)(()=>this.common.loading=!1),(0,T.K)(O=>(0,D.of)(O))).subscribe(O=>{O instanceof y.UA?this.handleError(O.status,O.error.message):(this.flashMessageService.setFlashMessage(O.message,"success",15e3),this.common.loading=!1)})}))}subscribeEventListener(){this.subscription?.unsubscribe(),this.subscription=this.eventListener.pipe((0,J.b)(()=>this.common.loading=!0),(0,Oe.w)(t=>this.orderService.getAll(this.createApiParams(t))),(0,T.K)(t=>(0,D.of)(t)),(0,J.b)(()=>this.common.loading=!1)).subscribe({next:t=>{this.common.loading=!1,t instanceof y.UA?this.handleError(t.status,t.error.message):(t.data.forEach((c,d)=>{""!==c.product_name_alias&&(t.data[d].product_name=c.product_name_alias)}),console.log(t),this.tableParams.next(this.createTableParams(t)))},complete:()=>this.subscribeEventListener()})}createApiParams(t){this.isTableWithPaginationEvent(t)?this.pages=t:(this.filter=t,this.pages.page=1);const o=this.tableNameMapping.find(c=>c.name_jp===this.pages.sort.column)?.name;return{...this.filter,limit:this.pages.itemsPerPage,offset:(this.pages.page-1)*this.pages.itemsPerPage,sort:o?`${o}:${this.pages.sort.order}`:""}}isTableWithPaginationEvent(t){const{page:o,itemsPerPage:c,sort:d}=t;return"number"==typeof o&&"number"==typeof c&&"object"==typeof d}handleError(t,o){this.errorEvent.emit({status:t,title:"\u767a\u6ce8\u500b\u7968\u4e00\u89a7\uff1a"+s.yR.TITLE.HAS_ERROR,message:o})}createTableParams(t){const o=this.tableNameMapping.map(m=>m.name_jp),c=t.data.map(m=>this.tableNameMapping.map(M=>m[M.name])),d=t.data;return c.forEach((m,M)=>{let g=-1,rt=d[M].product_id;g=o.indexOf("\u500b\u7968No");let it=m[g];m[g]={href:`./detail/${m[g]}`,text:m[g]+""},g=o.indexOf("\u5546\u54c1\u540d"),m[g]={href:`/master/product/detail/${rt}`,text:m[g]+"",target:!0},g=o.indexOf("\u691c\u54c1\u6570\u91cf"),m[g]=""===m[g]?0:m[g],g=o.indexOf("\u691c\u54c1\u65e5\u6642"),m[g]=""===m[g]||"NaT"===m[g]?"":new Date(m[g]).toLocaleString(),g=o.indexOf("\u9673\u5217\u68da"),m[g]=m[g],g=o.indexOf("\u767a\u6ce8\u6570\u91cf"),m[g]={id:"order_quantity__"+it,text:!0,name:"order_quantity",value:(""===m[g]?0:m[g])+""},g=o.indexOf("\u6700\u5c0f\u767a\u6ce8\u6570"),m[g]=""===m[g]?"\u672a\u8a2d\u5b9a":m[g]}),{total:t.totalItems,header:o,body:c}}ngOnDestroy(){this.subscription?.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x.p),e.Y36(C.v),e.Y36(f.Z),e.Y36(_.F0),e.Y36(Te.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-table"]],inputs:{eventListener:"eventListener"},outputs:{errorEvent:"errorEvent"},decls:2,vars:2,consts:[[3,"params","loading","pageChange","changeItem"]],template:function(t,o){1&t&&(e.TgZ(0,"app-table-with-pagination",0),e.NdJ("pageChange",function(d){return o.eventListener.next(d)})("changeItem",function(d){return o.changeItemData(d)}),e._uU(1,"\u767a\u6ce8\u500b\u7968\u4e00\u89a7"),e.qZA()),2&t&&e.Q6J("params",o.tableParams)("loading",o.common.loading)},dependencies:[Me.i]}),a})();const be=function(){return{text:"\u767a\u6ce8\u500b\u7968\u4e00\u89a7"}},ye=function(a){return[a]},L=function(){return{exact:!0}},Pe=[{path:"",component:z,children:[{path:"",component:(()=>{class a{constructor(t){this.errorService=t,this.parentSearchEvent=new B.x,this.parentTableEvent=new B.x,this.subscription=new v.w0}ngOnInit(){this.subscription.add(this.parentSearchEvent.subscribe(t=>{this.parentTableEvent.next(t)}))}ngOnDestroy(){this.subscription.unsubscribe()}handleError(t){this.errorService.setError({status:t.status,title:t.title,message:t.message})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(A.T))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-list"]],decls:11,vars:11,consts:[[3,"breadcrumbList"],[1,"mt-6","mb-12"],["routerLink","/purchase-order/order-data-creation","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/purchase-order","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/purchase-order/specification","routerLinkActive","active",3,"routerLinkActiveOptions"],[3,"searchEvent","errorEvent"],[3,"eventListener","errorEvent"]],template:function(t,o){1&t&&(e._UZ(0,"app-breadcrumb-org",0),e.TgZ(1,"div",1)(2,"button",2),e._uU(3," \u767a\u6ce8\u30c7\u30fc\u30bf\u4f5c\u6210 "),e.qZA(),e.TgZ(4,"button",3),e._uU(5," \u767a\u6ce8\u66f8\u4e00\u89a7 "),e.qZA(),e.TgZ(6,"button",4),e._uU(7," \u767a\u6ce8\u500b\u7968\u4e00\u89a7 "),e.qZA()(),e.TgZ(8,"app-search",5),e.NdJ("searchEvent",function(d){return o.parentSearchEvent.next(d)})("errorEvent",function(d){return o.handleError(d)}),e.qZA(),e.TgZ(9,"div")(10,"app-table",6),e.NdJ("errorEvent",function(d){return o.handleError(d)}),e.qZA()()),2&t&&(e.Q6J("breadcrumbList",e.VKq(6,ye,e.DdM(5,be))),e.xp6(2),e.Q6J("routerLinkActiveOptions",e.DdM(8,L)),e.xp6(2),e.Q6J("routerLinkActiveOptions",e.DdM(9,L)),e.xp6(2),e.Q6J("routerLinkActiveOptions",e.DdM(10,L)),e.xp6(4),e.Q6J("eventListener",o.parentTableEvent))},dependencies:[_.rH,_.Od,I.Z,Ae,De],styles:["button[_ngcontent-%COMP%]{border-width:1px;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding:.25rem 1rem}button[_ngcontent-%COMP%]:first-child{border-top-left-radius:.25rem;border-bottom-left-radius:.25rem}button[_ngcontent-%COMP%]:last-child{border-top-right-radius:.25rem;border-bottom-right-radius:.25rem}.active[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}"]}),a})()},{path:"detail/:id",component:oe}]}];let Be=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[_.Bz.forChild(Pe),_.Bz]}),a})();var Le=n(9307),Fe=n(3042),Se=n(3962),xe=n(4470),Ie=n(1326),Ue=n(3718),K=n(5274),Ze=n(8460);let Re=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[r.ez,Ze.A,K.s]}),a})();var Je=n(8367),Ke=n(4787),We=n(855),W=n(3894),N=n(8511),Ne=n(4560),je=n(5773),ze=n(6320),j=n(4663);let Qe=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[r.ez,ze.r,j.Q]}),a})();var Ye=n(9434),Ve=n(1819),$e=n(7090),He=n(4854);let Xe=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[r.ez,b.UX,Ue.z,Re,Je.a,Ke.N,We.W,W.h,N.Q,Ne.Z,r.ez,je.i,K.s,Qe,Ye.H,Ve.l,$e.G,He.C]}),a})();var Ge=n(3183),we=n(4933),ke=n(6968),qe=n(6021),et=n(9104),tt=n(3560),nt=n(6181),ot=n(6321);let at=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[C.v],imports:[r.ez,Be,Le.u,Fe.C,Se.J,xe.x,Ie.z,Xe,Ge.F,we.M,ke.V,qe.v,et.u,tt.r,W.h,nt.A,N.Q,j.Q,ot.T]}),a})()}}]);