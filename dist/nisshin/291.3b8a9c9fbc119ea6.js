"use strict";(self.webpackChunknisshin=self.webpackChunknisshin||[]).push([[291],{8593:(ae,H,u)=>{u.d(H,{n:()=>z});var x=u(6895),V=u(4006),q=u(1571);let z=(()=>{class B{}return B.\u0275fac=function(C){return new(C||B)},B.\u0275mod=q.oAB({type:B}),B.\u0275inj=q.cJS({imports:[x.ez,V.UX]}),B})()},7291:(ae,H,u)=>{u.r(H),u.d(H,{RentalSlipModule:()=>ec});var x=u(6895),V=u(1690),q=u(727),z=u(5698),B=u(9300),G=u(8037),C=u(6585),e=u(1571),S=u(1609),N=u(2334),P=u(8832),Ft=u(2125);let bt=(()=>{class n{constructor(t,i,r,o){this.modalService=t,this.errorService=i,this.router=r,this.common=o,this.subscription=new q.w0,this.isLoading=!1}ngOnInit(){this.subscription.add(this.errorService.getError().subscribe(t=>{this.handleError(t)})),this.subscription.add(this.common.loading$.subscribe(t=>{setTimeout(()=>this.isLoading=t)}))}ngOnDestroy(){this.subscription.unsubscribe()}handleError(t){t.redirectPath&&(this.redirectPath=t.redirectPath),this.modalService.setModal(t.title,0===t.status?t.message+G.c.GUIDANCE_OF_SUPPORT:`\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9: ${t.status} \n\u30e1\u30c3\u30bb\u30fc\u30b8: `+t.message+G.c.GUIDANCE_OF_SUPPORT,"danger",C.yR.BUTTON_TITLE.CLOSE,""),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,z.q)(1),(0,B.h)(r=>this.modalService.getModalProperties().title===t.title)).subscribe(r=>{this.redirectPath&&this.router.navigateByUrl(this.redirectPath)}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.Z),e.Y36(N.T),e.Y36(V.F0),e.Y36(P.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-rental-slip"]],decls:2,vars:1,consts:[[3,"isLoading"]],template:function(t,i){1&t&&e._UZ(0,"router-outlet")(1,"app-loading-container",0),2&t&&(e.xp6(1),e.Q6J("isLoading",i.isLoading))},dependencies:[V.lC,Ft.o]}),n})();var he=u(7579),fe=u(7030),R=u(529),l=u(4006),te=u(4128),k=u(262),b=u(9646),X=u(5450),D=u(9042),_e=u(67);const A={FAILED_CHOICES_FOR_NARROWING_DOWN:"\u7d5e\u308a\u8fbc\u307f\u7528\u9078\u629e\u80a2\u304c\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002",ERROR:{CANNOT_BE_DELETED:"\u3053\u306e\u30c7\u30fc\u30bf\u306f\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3002",ATTEMPTED_TO_MODIFY_ACCEPTED_DATA_CHANGE:"\u8cb8\u51fa\u4e2d\u306e\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u3092\u524a\u9664\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u305f\u3081\u51e6\u7406\u3092\u5b9f\u884c\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u3002"},DELIVERY_DIVISION:{CODE:{NO_DELIVERY:0,DELIVERY_INCLUDED:1},VALUE:{NO_DELIVERY:"\u914d\u9001\u306a\u3057",DELIVERY_INCLUDED:"\u914d\u9001\u3042\u308a"}},COLLECTION_DIVISION:{CODE:{NO_COLLECTION:0,COLLECTION_AVAILABLE:1},VALUE:{NO_COLLECTION:"\u56de\u53ce\u306a\u3057",COLLECTION_AVAILABLE:"\u56de\u53ce\u3042\u308a"}},CUSTOMER_TYPE_DIVISION:{CODE:{CLIENT:0,MEMBER:1,GENERAL:2},VALUE:{CLIENT:"\u5f97\u610f\u5148",MEMBER:"\u4f1a\u54e1",GENERAL:"\u4e00\u822c"}},SETTLE_STATUS_DIVISION:{CODE:{UNSETTLED:0,SETTLED:1},VALUE:{UNSETTLED:"\u7cbe\u7b97\u524d",SETTLED:"\u7cbe\u7b97\u6e08\u307f"}},INCIDENT_DIVISION:{CODE:{NO_INCIDENTS:0,INCIDENT_IN_PROGRESS:1,INCIDENT_RESOLUTION:2},VALUE:{NO_INCIDENTS:"\u30a4\u30f3\u30b7\u30c7\u30f3\u30c8\u306a\u3057",INCIDENT_IN_PROGRESS:"\u30a4\u30f3\u30b7\u30c7\u30f3\u30c8\u767a\u751f\u4e2d",INCIDENT_RESOLUTION:"\u30a4\u30f3\u30b7\u30c7\u30f3\u30c8\u89e3\u6d88"}},STATUS_CODE:{ACCEPTED:0,TICKET_ISSUED:1,READY_FOR_RENTAL:2,PARTIALLY_RENTED:3,ALL_RENTED:4,PARTIALLY_RETURNED:5,PARTIALLY_OVERDUE:6,ALL_OVERDUE:7,ALL_RETURNED:98,CANCELLED:99},STATUS:{ACCEPTED:"\u53d7\u4ed8\u6e08\u307f",TICKET_ISSUED:"\u53d7\u4ed8\u7968\u767a\u884c\u6e08\u307f",READY_FOR_RENTAL:"\u8cb8\u51fa\u6e96\u5099\u5b8c\u4e86",PARTIALLY_RENTED:"\u4e00\u90e8\u8cb8\u51fa\u4e2d",ALL_RENTED:"\u5168\u3066\u8cb8\u51fa\u4e2d",PARTIALLY_RETURNED:"\u4e00\u90e8\u8fd4\u5374\u6e08\u307f",PARTIALLY_OVERDUE:"\u4e00\u90e8\u5ef6\u6ede\u4e2d",ALL_OVERDUE:"\u5168\u3066\u5ef6\u6ede\u4e2d",ALL_RETURNED:"\u5168\u3066\u8fd4\u5374\u6e08\u307f",CANCELLED:"\u30ad\u30e3\u30f3\u30bb\u30eb"},CALLED_NUMBER_PREFIX:"3"};var I=u(1267),Ce=u(4416),xe=u(2425),Se=u(6341),Te=u(6232),ue=u(6604),de=u(4345),Ot=u(2456),He=u(7540),ce=u(1451),pe=u(5146),Ae=u(3761),yt=u(3148);function Nt(n,a){1&n&&e.GkF(0,30)}function Rt(n,a){1&n&&e.GkF(0,30)}function kt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-button",31),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handleClickSubmitButton())}),e._uU(1," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),e.qZA()}}function Zt(n,a){1&n&&(e.TgZ(0,"app-button",32),e._uU(1," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),e.qZA())}function Mt(n,a){if(1&n&&(e.TgZ(0,"p",33),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorConst.FORM_ERROR.DATE_TERM_TO_BEFORE_FROM," ")}}let Ut=(()=>{class n{constructor(t,i,r,o,s,_,d,p){this.fb=t,this.employeeService=i,this.clientService=r,this.memberService=o,this.divisionService=s,this.rentalSlipService=_,this.rentalService=d,this.cdr=p,this.subscription=new q.w0,this.searchEvent=new e.vpe,this.errorEvent=new e.vpe,this.productSuggests=[],this.prouctlistbase=[],this.productnameSuggests=[],this.slip_id_lists=[],this.tagSuggests=[],this.hasPanelOpened=!1,this.rotateAnimation="",this.rsConst=A,this.errorConst=G.c,this.today=(new Date).toISOString(),this.df=this.fb.group({product_name:"",product_id:""}),this.form=this.fb.group({id:"",mobile_number:"",shipping_address:"",client_id:"",member_id:"",status_division_id:"",reception_employee_id:"",rental_slip_id:"",reception_date:this.fb.group({from:"",to:""},{validators:[X.d.beforeFromDate()]}),scheduled_rental_date:this.fb.group({from:"",to:""},{validators:[X.d.beforeFromDate()]}),scheduled_return_date:this.fb.group({from:"",to:""},{validators:[X.d.beforeFromDate()]}),reception_tag:"",settle_status_division_id:""})}get fc(){return this.form.controls}get dfc(){return this.df.controls}ngOnInit(){this.initialization()}initialization(){this.subscription.add((0,te.D)([this.employeeService.getAsSelectOptions(),this.clientService.getAsSelectOptions(),this.memberService.getAll({$select:"id,last_name,first_name"}),this.divisionService.getAsSelectOptions(),this.rentalSlipService.getAll()]).pipe((0,k.K)(t=>(t.emit(t),(0,b.of)(t.error)))).subscribe(t=>{if(t instanceof R.UA)return void this.handleError(t.status,t.message);if(null==t)return void this.handleError(400,C.yR.BODY.HAS_ERROR);if(5!==t.length)return void this.handleError(400,C.yR.BODY.HAS_ERROR);this.employeeSuggests=t[0],this.clientSuggests=t[1],this.memberSuggests=t[2].data.map(c=>({text:c.last_name+" "+c.first_name,value:c.id}));const i=t[3],o=[{value:"",text:_e.s.PLEASE_SELECT}];this.statusOptions=o.concat(i[D.z.RENTAL_SLIP_STATUS]),this.settleDivisions=o.concat(i[D.z.SETTLE_STATUS]);let _=[];t[4].data.filter(c=>{""!=c.reception_tag&&_.push(c.reception_tag)});let p=Array.from(new Set(_));for(let c in p)this.tagSuggests.push({value:p[c],text:p[c]});t[4].data.filter(c=>{""!=c.id&&this.slip_id_lists.push(c.id)}),this.subscription.add(this.rentalService.getAll({rental_slip_id:this.slip_id_lists.join(",")}).subscribe(c=>{c.data.filter(f=>{const T=this.prouctlistbase.findIndex(y=>y.rental_product_name===f.rental_product_name);T>-1?this.prouctlistbase[T].rental_slip_id.push(f.rental_slip_id):(this.prouctlistbase.push({rental_product_id:f.rental_product_id,rental_slip_id:[f.rental_slip_id],rental_product_name:f.rental_product_name}),this.productnameSuggests.push({value:f.rental_product_id,text:String(f.rental_product_name)}))}),this.dfc.product_name.valueChanges.subscribe(f=>{console.log("Form value changed:",f);const T=this.prouctlistbase.filter(y=>y.rental_product_id===Number(f));if(T[0].rental_slip_id){let y=Array.from(new Set(T[0].rental_slip_id)),O=String(y.join(","));this.fc.id.setValue(O),this.dfc.product_id.setValue("")}})})),this._initSearch()}))}_initSearch(){if(void 0===this.settleDivisions)return;const t=this.settleDivisions.find(s=>s.text===this.rsConst.SETTLE_STATUS_DIVISION.VALUE.UNSETTLED);void 0!==t&&this.fc.settle_status_division_id.patchValue(String(t.value));const i=this.fc.scheduled_rental_date.get("from"),r=new Date,o=this.formatDate(r);i&&(i.patchValue(o),this.cdr.detectChanges()),this.handleClickSubmitButton()}formatDate(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}invalid(t){return(t.touched||t.dirty)&&t.invalid}panelOpenButtonOnClick(){this.hasPanelOpened?(this.hasPanelOpened=!1,this.rotateAnimation="rotate-animation-0"):(this.hasPanelOpened=!0,this.rotateAnimation="rotate-animation-180")}handleClickClearButton(){Object.values(this.fc).forEach(t=>{t instanceof l.cw?Object.values(t.controls).forEach(i=>{i.patchValue("")}):t.patchValue("")})}handleClickSubmitButton(){const t=this.form.value;console.log(t);const i=(0,I.vP)(t);this.searchEvent.emit((0,I.g3)(i))}handleError(t,i){this.errorEvent.emit({status:t,title:"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u4e00\u89a7\u7d5e\u308a\u8fbc\u307f\uff1a"+C.yR.TITLE.HAS_ERROR,message:i})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(Ce.G),e.Y36(xe.y),e.Y36(Se.n),e.Y36(Te.E),e.Y36(ue.m),e.Y36(de.b),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-search"]],outputs:{searchEvent:"searchEvent",errorEvent:"errorEvent"},decls:66,vars:38,consts:[[1,"mt-8","mb-4"],[3,"click"],["icon","filter-2-line",1,"w-6"],[1,"inline-block","ml-1","mr-2"],["icon","arrow-down-s-fill",1,"w-6"],[1,"mb-6"],[1,"rental-slip-search","width-limit-break","bg-white",3,"ngClass"],[1,"w-[1280px]","mx-auto","px-4",3,"ngSubmit"],[1,"flex","gap-6"],[1,"w-1/6"],[3,"formCtrl"],[1,"w-3/6"],[1,"flex","gap-6","mt-4"],[1,"w-1/4"],["nameAttrValue","status_division_id","idAttrValue","status-division-id",3,"formCtrl","options","invalid"],["nameAttrValue","client_id","idAttrValue","client-id",3,"formCtrl","suggests","invalid"],["nameAttrValue","member_id","idAttrValue","member-id",3,"formCtrl","suggests","invalid"],["nameAttrValue","reception_employee_id","idAttrValue","reception-employee-id",3,"formCtrl","suggests","invalid"],[1,"w-2/4"],["nameAttrValue","product_name","idAttrValue","product-name",3,"formCtrl","suggests"],[1,"hidden"],[1,"w-1/3"],[3,"dateFromFormCtrl","dateToFormCtrl","invalid"],["message","",4,"ngIf","ngIfThen"],["nameAttrValue","settle_status_division_id","idAttrValue","settle-status-division-id",3,"formCtrl","options","invalid"],[1,"flex","gap-8","mt-10"],["btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",3,"click",4,"ngIf","ngIfElse"],[1,"mt-2","text-sm","text-red"],["disable",""],["beforeFromDate",""],["message",""],["btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",3,"click"],["btnFillColor","text-white bg-slate-300 hover:bg-slate-300"],[1,"mt-1","pl-1","text-sm","text-red"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"app-button",1),e.NdJ("click",function(){return i.panelOpenButtonOnClick()}),e._UZ(2,"app-icon",2),e.TgZ(3,"span",3),e._uU(4),e.qZA(),e._UZ(5,"app-icon",4),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"form",7),e.NdJ("ngSubmit",function(){return i.handleClickSubmitButton()}),e.TgZ(9,"div",8)(10,"div",9)(11,"app-input-container",10),e._uU(12," \u53d7\u4ed8\u7968ID "),e.qZA()(),e.TgZ(13,"div",9)(14,"app-input-container",10),e._uU(15," \u53d7\u4ed8\u6642\u767b\u9332\u96fb\u8a71\u756a\u53f7 "),e.qZA()(),e.TgZ(16,"div",9)(17,"app-input-container",10),e._uU(18," \u53d7\u4ed8\u30bf\u30b0 "),e.qZA()(),e.TgZ(19,"div",11)(20,"app-input-container",10),e._uU(21," \u914d\u9001\u5148 "),e.qZA()()(),e.TgZ(22,"div",12)(23,"div",13)(24,"app-select-container",14),e._uU(25," \u30b9\u30c6\u30fc\u30bf\u30b9 "),e.qZA()(),e.TgZ(26,"div",13)(27,"app-select-suggest-container",15),e._uU(28," \u5f97\u610f\u5148\u540d "),e.qZA()(),e.TgZ(29,"div",13)(30,"app-select-suggest-container",16),e._uU(31," \u4f1a\u54e1\u540d "),e.qZA()(),e.TgZ(32,"div",13)(33,"app-select-suggest-container",17),e._uU(34," \u53d7\u4ed8\u62c5\u5f53\u8005\u540d "),e.qZA()()(),e.TgZ(35,"div",8)(36,"div",18)(37,"app-select-suggest-container",19),e._uU(38," \u5546\u54c1\u540d "),e.qZA(),e.TgZ(39,"div",20),e._UZ(40,"app-input-container",10),e.qZA()()(),e.TgZ(41,"div",12)(42,"div",21)(43,"app-date-term-clear-container",22)(44,"span"),e._uU(45,"\u8cb8\u51fa\u4e88\u5b9a\u65e5"),e.qZA(),e.YNc(46,Nt,1,0,"ng-container",23),e.qZA()(),e.TgZ(47,"div",21)(48,"app-date-term-clear-container",22)(49,"span"),e._uU(50,"\u8fd4\u5374\u4e88\u5b9a\u65e5"),e.qZA(),e.YNc(51,Rt,1,0,"ng-container",23),e.qZA()()(),e.TgZ(52,"div",12)(53,"div",21)(54,"app-select-container",24),e._uU(55," \u7cbe\u7b97\u30b9\u30c6\u30fc\u30bf\u30b9 "),e.qZA()()(),e.TgZ(56,"div",25)(57,"app-button",1),e.NdJ("click",function(){return i.handleClickClearButton()}),e._uU(58," \u5165\u529b\u5185\u5bb9\u30af\u30ea\u30a2 "),e.qZA(),e.YNc(59,kt,2,0,"app-button",26),e.qZA(),e.TgZ(60,"p",27),e._uU(61," \u203b \u5165\u529b\u5185\u5bb9\u3092\u30af\u30ea\u30a2\u3057\u305f\u5f8c\u306b\u7d5e\u308a\u8fbc\u307f\u5b9f\u884c\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u5168\u3066\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002 "),e.qZA()()()(),e.YNc(62,Zt,2,0,"ng-template",null,28,e.W1O),e.YNc(64,Mt,2,1,"ng-template",null,29,e.W1O)),2&t){const r=e.MAs(63),o=e.MAs(65);e.xp6(4),e.hij(" ",i.hasPanelOpened?"\u7d5e\u308a\u8fbc\u307f\u30d5\u30a9\u30fc\u30e0\u975e\u8868\u793a":"\u7d5e\u308a\u8fbc\u307f\u30d5\u30a9\u30fc\u30e0\u8868\u793a"," "),e.xp6(1),e.Tol(i.rotateAnimation),e.xp6(2),e.Q6J("ngClass",i.hasPanelOpened?"is-open shadow":""),e.xp6(4),e.Q6J("formCtrl",i.fc.id),e.xp6(3),e.Q6J("formCtrl",i.fc.mobile_number),e.xp6(3),e.Q6J("formCtrl",i.fc.reception_tag),e.xp6(3),e.Q6J("formCtrl",i.fc.shipping_address),e.xp6(4),e.Q6J("formCtrl",i.fc.status_division_id)("options",i.statusOptions)("invalid",i.invalid(i.fc.status_division_id)),e.xp6(3),e.Q6J("formCtrl",i.fc.client_id)("suggests",i.clientSuggests)("invalid",i.invalid(i.fc.client_id)),e.xp6(3),e.Q6J("formCtrl",i.fc.member_id)("suggests",i.memberSuggests)("invalid",i.invalid(i.fc.member_id)),e.xp6(3),e.Q6J("formCtrl",i.fc.reception_employee_id)("suggests",i.employeeSuggests)("invalid",i.invalid(i.fc.reception_employee_id)),e.xp6(4),e.Q6J("formCtrl",i.dfc.product_name)("suggests",i.productnameSuggests),e.xp6(3),e.Q6J("formCtrl",i.fc.rental_slip_id),e.xp6(3),e.Q6J("dateFromFormCtrl",i.fc.scheduled_rental_date.controls.from)("dateToFormCtrl",i.fc.scheduled_rental_date.controls.to)("invalid",!!i.fc.scheduled_rental_date.errors),e.xp6(3),e.Q6J("ngIf",null==i.fc.scheduled_rental_date.errors?null:i.fc.scheduled_rental_date.errors.beforeFromDate)("ngIfThen",o),e.xp6(2),e.Q6J("dateFromFormCtrl",i.fc.scheduled_return_date.controls.from)("dateToFormCtrl",i.fc.scheduled_return_date.controls.to)("invalid",!!i.fc.scheduled_return_date.errors),e.xp6(3),e.Q6J("ngIf",null==i.fc.scheduled_return_date.errors?null:i.fc.scheduled_return_date.errors.beforeFromDate)("ngIfThen",o),e.xp6(3),e.Q6J("formCtrl",i.fc.settle_status_division_id)("options",i.settleDivisions)("invalid",i.invalid(i.fc.settle_status_division_id)),e.xp6(5),e.Q6J("ngIf",i.form.valid)("ngIfElse",r)}},dependencies:[x.mk,x.O5,l._Y,l.JL,Ot.h,He.X,ce.d,pe.r,Ae.o,yt.w],styles:[".rental-slip-search[_ngcontent-%COMP%]{max-height:0;padding:0 2.5rem;margin:0;transition:max-height .8s,padding .8s,margin .8s ease-in;overflow:hidden}.rental-slip-search.is-open[_ngcontent-%COMP%]{max-height:100vh;padding:2.5rem;margin:2rem 0}.hidden[_ngcontent-%COMP%]{display:none}"]}),n})();var me=u(8505),Lt=u(3900),Bt=u(2640);let qt=(()=>{class n{constructor(t,i,r,o){this.rsService=t,this.rService=i,this.common=r,this.fb=o,this.subscription=new q.w0,this.errorEvent=new e.vpe,this.filter={},this.defaultSort={column:"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968ID",order:"desc"},this.pages={page:1,itemsPerPage:10,sort:this.defaultSort},this.tableParams=new he.x,this.tableNameMapping=[{name:"id",name_jp:"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968ID"},{name:"customer_type_division_id",name_jp:"\u304a\u5ba2\u69d8\u30bf\u30a4\u30d7"},{name:"client_id",name_jp:"\u304a\u5ba2\u69d8\u540d"},{name:"reception_date",name_jp:"\u53d7\u4ed8\u65e5\u6642"},{name:"reception_employee_id",name_jp:"\u53d7\u4ed8\u62c5\u5f53\u8005"},{name:"status_division_id",name_jp:"\u30b9\u30c6\u30fc\u30bf\u30b9"}],this.searchForms=this.fb.group({rental_status:""}),this.searchOptions=[{text:"\u30ea\u30bb\u30c3\u30c8",value:"none"},{text:"\u7fcc\u65e5\u8cb8\u51fa",value:"nextdate"},{text:"\u672a\u5f15\u304d\u53d6\u308a",value:"notpickup"},{text:"\u5ef6\u6ede",value:"detention"}],this.DELINQUENCY_OVERDUDE=1,this.DELINQUENCY_NOT_OVERDUDE=0}get fc(){return this.searchForms.controls}ngOnInit(){this.subscribeEventListener()}subscribeEventListener(){this.subscription?.unsubscribe(),this.rental_slip_id_list&&("reset"==this.rental_slip_id_list[0]?this.filter={}:"none"==this.rental_slip_id_list[0]?this.filter={id:0}:Object.assign(this.filter,{id:this.rental_slip_id_list.join(",")})),this.subscription=this.eventListener.pipe((0,me.b)(()=>this.common.loading=!0),(0,Lt.w)(t=>this.rsService.getAll(this.createApiParams(t))),(0,k.K)(t=>(0,b.of)(t)),(0,me.b)(()=>this.common.loading=!1)).subscribe({next:t=>{this.common.loading=!1,t instanceof R.UA?this.handleError(t.status,t.error.message):this.tableParams.next(this.createTableParams(t))},complete:()=>this.subscribeEventListener()})}createApiParams(t){this.isTableWithPaginationEvent(t)?this.pages=t:(this.filter=t,this.pages.page=1),0===Object.keys(this.pages.sort).length&&(this.pages.sort=this.defaultSort);const i=this.tableNameMapping.find(r=>r.name_jp===this.pages.sort.column)?.name;return{...this.filter,limit:this.pages.itemsPerPage,offset:(this.pages.page-1)*this.pages.itemsPerPage,sort:i?`${i}:${this.pages.sort.order}`:""}}isTableWithPaginationEvent(t){const{page:i,itemsPerPage:r,sort:o}=t;return"number"==typeof i&&"number"==typeof r&&"object"==typeof o}handleError(t,i){this.errorEvent.emit({status:t,title:"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u4e00\u89a7\uff1a"+C.yR.TITLE.HAS_ERROR,message:i})}createTableParams(t){const i=this.tableNameMapping.map(o=>o.name_jp),r=t.data.map(o=>this.tableNameMapping.map(s=>o[s.name]));return r.forEach((o,s)=>{let _=-1;switch(_=i.indexOf("\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968ID"),o[_]={href:`./detail/${o[_]}`,text:o[_]+""},_=i.indexOf("\u304a\u5ba2\u69d8\u30bf\u30a4\u30d7"),o[_]=String(t.data[s].division_customer_type_value),_=i.indexOf("\u304a\u5ba2\u69d8\u540d"),t.data[s].division_customer_type_code){case A.CUSTOMER_TYPE_DIVISION.CODE.CLIENT:o[_]=String(t.data[s].client_name);break;case A.CUSTOMER_TYPE_DIVISION.CODE.MEMBER:o[_]=String(t.data[s].member_last_name)+" "+String(t.data[s].member_first_name);break;case A.CUSTOMER_TYPE_DIVISION.CODE.GENERAL:o[_]=String(t.data[s].last_name)+" "+String(t.data[s].first_name);break;default:o[_]="\u4e0d\u660e"}_=i.indexOf("\u53d7\u4ed8\u65e5\u6642"),o[_]=""===o[_]||"NaT"===o[_]?"":new Date(o[_]).toLocaleString(),_=i.indexOf("\u53d7\u4ed8\u62c5\u5f53\u8005"),o[_]=t.data[s].employee_reception_last_name+" "+t.data[s].employee_reception_first_name,_=i.indexOf("\u30b9\u30c6\u30fc\u30bf\u30b9"),o[_]=String(t.data[s].division_status_value)}),{total:t.totalItems,header:i,body:r}}get searchFormFc(){return this.searchForms.controls}simplifiedSorting(t){this.searchValue=t.target.value;let i={},r="",o="";switch(this.searchValue){case"detention":i={delinquency_flag:this.DELINQUENCY_OVERDUDE};break;case"nextdate":r=this.getDate(1)+" 00:00:00",o=this.getDate(2)+" 00:00:00",i={from_scheduled_rental_date:r,to_scheduled_rental_date:o};break;case"notpickup":o=this.getDate(0)+" 00:00:00",i={delinquency_flag:this.DELINQUENCY_NOT_OVERDUDE,to_scheduled_rental_date:o};break;default:return i=!1,this.rental_slip_id_list=["reset"],void this.ngOnInit()}this.getRentalParams(i)}getUniqRentalSlipIds(t){const i=new Map,r=[];for(const o of t)i.has(o.rental_slip_id)||(r.push(o.rental_slip_id),i.set(o.rental_slip_id,!0));return r}getDate(t){let i=new Date;return new Date(i.setDate(i.getDate()+t)).toLocaleDateString()}getRentalParams(t){this.common.loading=!0,this.subscription.add(this.rService.getAll(t).subscribe(i=>{i instanceof R.UA?this.handleError(i.status,i.error.message):(this.rental_slip_id_list=this.getUniqRentalSlipIds(i.data),0==this.rental_slip_id_list.length&&(this.rental_slip_id_list=["none"]),this.ngOnInit())}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ue.m),e.Y36(de.b),e.Y36(P.v),e.Y36(l.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-table"]],inputs:{eventListener:"eventListener"},outputs:{errorEvent:"errorEvent"},decls:6,vars:5,consts:[[3,"params","loading","pageChange"],[3,"formGroup"],[1,"w-1/4"],["nameAttrValue","rental_status","idAttrValue","rental_status","placeholder","\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",3,"formCtrl","options","change"]],template:function(t,i){1&t&&(e.TgZ(0,"app-table-with-pagination",0),e.NdJ("pageChange",function(o){return i.eventListener.next(o)}),e._uU(1," \u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u4e00\u89a7 "),e.TgZ(2,"div")(3,"form",1)(4,"div",2)(5,"app-select-container",3),e.NdJ("change",function(o){return i.simplifiedSorting(o)}),e.qZA()()()()()),2&t&&(e.Q6J("params",i.tableParams)("loading",i.common.loading),e.xp6(3),e.Q6J("formGroup",i.searchForms),e.xp6(2),e.Q6J("formCtrl",i.fc.rental_status)("options",i.searchOptions))},dependencies:[Bt.i,l._Y,l.JL,l.sg,ce.d]}),n})();var Vt=u(3360);const Qt=function(){return{text:"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u4e00\u89a7"}},Pt=function(n){return[n]},je=function(){return{exact:!0}};let wt=(()=>{class n{constructor(t){this.errorService=t,this.parentSearchEvent=new he.x,this.parentTableEvent=new he.x,this.subscription=new q.w0}ngOnInit(){this.subscription.add(this.parentSearchEvent.subscribe(t=>{this.parentTableEvent.next(t)}))}ngOnDestroy(){this.subscription.unsubscribe()}handleError(t){this.errorService.setError({status:t.status,title:t.title,message:t.message})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(N.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list"]],decls:13,vars:9,consts:[[3,"breadcrumbList"],[1,"mt-6","mb-12"],["routerLink","/rental-slip","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/rental-slip/rental-product","routerLinkActive","active",3,"routerLinkActiveOptions"],[3,"searchEvent","errorEvent"],[1,"flex","items-center","justify-end","my-2"],[1,"mr-8"],["path","/rental-slip/add","text","\u30ec\u30f3\u30bf\u30eb\u4e88\u7d04\u65b0\u898f\u767b\u9332"],[3,"eventListener","errorEvent"]],template:function(t,i){1&t&&(e._UZ(0,"app-breadcrumb-org",0),e.TgZ(1,"div",1)(2,"button",2),e._uU(3," \u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u4e00\u89a7 "),e.qZA(),e.TgZ(4,"button",3),e._uU(5," \u30ec\u30f3\u30bf\u30eb\u5546\u54c1\u4e00\u89a7 "),e.qZA()(),e.TgZ(6,"app-search",4),e.NdJ("searchEvent",function(o){return i.parentSearchEvent.next(o)})("errorEvent",function(o){return i.handleError(o)}),e.qZA(),e.TgZ(7,"main")(8,"div",5)(9,"div",6),e._UZ(10,"app-new-registration-link-org",7),e.qZA()(),e.TgZ(11,"div")(12,"app-table",8),e.NdJ("errorEvent",function(o){return i.handleError(o)}),e.qZA()()()),2&t&&(e.Q6J("breadcrumbList",e.VKq(5,Pt,e.DdM(4,Qt))),e.xp6(2),e.Q6J("routerLinkActiveOptions",e.DdM(7,je)),e.xp6(2),e.Q6J("routerLinkActiveOptions",e.DdM(8,je)),e.xp6(8),e.Q6J("eventListener",i.parentTableEvent))},dependencies:[V.rH,V.Od,fe.Z,Ut,qt,Vt.S],styles:["button[_ngcontent-%COMP%]{border-width:1px;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding:.25rem 1rem}button[_ngcontent-%COMP%]:first-child{border-top-left-radius:.25rem;border-bottom-left-radius:.25rem}button[_ngcontent-%COMP%]:last-child{border-top-right-radius:.25rem;border-bottom-right-radius:.25rem}.active[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}"]}),n})();var L=u(8746),ze=u(4004),Ie=u(9841),Y=u(3736),oe=u(9343),v=u(349);function ve(n,a,t,i,r){new Date("Invalid Date");let s=[];const _=new Date(n.getTime()),d=new Date(t.getTime()),p=new Date(i.getTime());_.setHours(0,0,0,0),d.setHours(0,0,0,0),p.setHours(0,0,0,0);let m=new Date(_.getTime());for(let h=0;h<a;h++)s.push(m>=d&&m<=p?r:"\u25cb"),m.setDate(m.getDate()+1);return s}function We(n,a){const t=[];for(const i of n){const r=a.filter(o=>o.rental_product_id===i.id);for(const o of r)t.push({rental:o,rentalProduct:i})}return t}function $e(n,a){const i=[...Array(a)].map((r,o)=>{const s=function Gt(n,a){let t=new Date(n);return t.setDate(t.getDate()+a),t}(n,o),_=function Jt(n){return`${n.getMonth()+1}/${n.getDate()}`}(s),d=function Yt(n){return["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"][n.getDay()]}(s);return{value1:_,value2:d,width:"min-w-[48px]",leftPosition:"",isCenter:!0}});return[{value1:"\u9078\u629e",value2:"",width:"min-w-[48px]",leftPosition:"left-0",isCenter:!0},{value1:"\u5546\u54c1ID",value2:"",width:"min-w-[120px]",leftPosition:"left-[48px]",isCenter:!1},{value1:"\u5546\u54c1\u540d",value2:"",width:"min-w-[220px]",leftPosition:"left-[168px]",isCenter:!1},{value1:"\u30ec\u30f3\u30bf\u30eb\u6599\u91d1",value2:"",width:"min-w-[120px]",leftPosition:"left-[388px]",isCenter:!1},{value1:"\u30b9\u30c6\u30fc\u30bf\u30b9",value2:"",width:"min-w-[100px]",leftPosition:"left-[508px]",isCenter:!1},...i]}function Xe(n,a,t,i){return a.map(r=>{const o=n.filter(p=>p.rentalProduct.id===r.id),s=[{value:r,width:"min-w-[48px]",leftPosition:"left-0",isCenter:!0},{value:`${r.id}`,width:"min-w-[120px]",leftPosition:"left-[48px]",isCenter:!1},{value:r.name,width:"min-w-[220px]",leftPosition:"left-[168px]",isCenter:!1},{value:`${r.selling_price} \u5186`,width:"min-w-[120px]",leftPosition:"left-[388px]",isCenter:!1},{value:`${r.division_status_value}`,width:"min-w-[100px]",leftPosition:"left-[508px]",isCenter:!1}];let _=[],d=[];if(o.length){console.log(o);const p=o[0].rental;if(_=ve(t,i,new Date(p.scheduled_rental_date),new Date(p.scheduled_return_date),"\u25b3").map(m=>({value:m,width:"min-w-[48px]",leftPosition:"",isCenter:!0})),p.rental_date){let m=new Date(p.rental_date),c=(new Date).toLocaleString();p.return_date&&(c=p.return_date),d=ve(t,i,new Date(m),new Date(c),"\xd7").map(h=>({value:h,width:"min-w-[48px]",leftPosition:"",isCenter:!0}));for(const h in d)"\xd7"===d[h].value&&(_[h].value="\xd7")}delete o[0];for(const m in o){console.log(o[m].rental);let c=o[m].rental,h=[],f=[];h=ve(t,i,new Date(c.scheduled_rental_date),new Date(c.scheduled_return_date),"\u25b3").map(T=>({value:T,width:"min-w-[48px]",leftPosition:"",isCenter:!0}));for(const T in h)"\u25b3"===h[T].value&&(_[T].value="\u25b3");if(c.rental_date){let T=new Date(c.rental_date),y=(new Date).toLocaleString();c.return_date&&(y=c.return_date),f=ve(t,i,new Date(T),new Date(y),"\xd7").map(O=>({value:O,width:"min-w-[48px]",leftPosition:"",isCenter:!0}));for(const O in d)"\xd7"===f[O].value&&(_[O].value="\xd7")}}}else _=[...Array(i)].map(()=>({value:"\u25cb",width:"min-w-[48px]",leftPosition:"",isCenter:!0}));return[...s,..._]})}var et=u(1269),tt=u(2e3);let Fe=(()=>{class n{constructor(){}createMinimumRentalSlipForm(t){return t.group({store_id:["",[l.kI.required]],reception_employee_id:["",[l.kI.required]],reception_tag:[""],reception_date:["",[l.kI.required]],remarks_1:["",[l.kI.maxLength(255)]],remarks_2:["",[l.kI.maxLength(255)]],send_sms_flg:[""],mobile_number:["",[l.kI.maxLength(20)]],customer_type_division_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX)]]})}createRentalSlipForm(t){return t.group({store_id:["",[l.kI.required]],reception_employee_id:["",[l.kI.required]],reception_tag:[""],reception_date:["",[l.kI.required]],remarks_1:["",[l.kI.maxLength(255)]],remarks_2:["",[l.kI.maxLength(255)]],send_sms_flg:[""],mobile_number:["",[l.kI.maxLength(20)]],shipping_address:["",[l.kI.maxLength(255)]],status_division_id:["",[l.kI.required]],customerTypeGroup:t.group({client_id:["",[l.kI.pattern(v.m.NUMERIC_REG_EX)]],client_name:[""],api_member_cd:[""],api_member_tel:[""],member_id:["",[l.kI.pattern(v.m.NUMERIC_REG_EX)]],full_name:[""]}),customer_type_division_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX)]],settle_status_division_id:["",[l.kI.required]],incident_division_id:["",[l.kI.required]],last_name:["",[l.kI.required,l.kI.maxLength(255)]],first_name:["",[l.kI.maxLength(255)]],last_name_kana:["",[l.kI.maxLength(255),l.kI.pattern(v.m.FULL_WIDTH_KATAKANA_REG_EX)]],first_name_kana:["",[l.kI.maxLength(255),l.kI.pattern(v.m.FULL_WIDTH_KATAKANA_REG_EX)]],tel:["",[l.kI.required,l.kI.maxLength(14),l.kI.pattern(v.m.NUMERIC_REG_EX)]],identification_document_confirmation_date:[""],idConfirmationDate:[""]})}createStatusForm(t){return t.group({status_division_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11)]],reception_employee_id:["",[l.kI.required]],reception_tag:["",[l.kI.required]],processing_units:["",[l.kI.required]]})}createAnyRentalSlipForm(t,i){let r={store_id:["",[l.kI.required]],reception_employee_id:["",[l.kI.required]],reception_tag:[""],reception_date:["",[l.kI.required]],remarks_1:["",[l.kI.maxLength(255)]],remarks_2:["",[l.kI.maxLength(255)]],send_sms_flg:[""],mobile_number:["",[l.kI.maxLength(20)]],shipping_address:["",[l.kI.maxLength(255)]],status_division_id:["",[l.kI.required]],customer_type_division_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX)]],settle_status_division_id:["",[l.kI.required]],incident_division_id:["",[l.kI.required]],idConfirmationDate:[""]},o={client_id:["",[l.kI.pattern(v.m.NUMERIC_REG_EX)]],client_name:[""]},s={api_member_id:[""],api_member_tel:[""],member_id:["",[l.kI.pattern(v.m.NUMERIC_REG_EX)]],full_name:[""]},_={last_name:["",[l.kI.required,l.kI.maxLength(255)]],first_name:["",[l.kI.maxLength(255)]],last_name_kana:["",[l.kI.maxLength(255),l.kI.pattern(v.m.FULL_WIDTH_KATAKANA_REG_EX)]],first_name_kana:["",[l.kI.maxLength(255),l.kI.pattern(v.m.FULL_WIDTH_KATAKANA_REG_EX)]],tel:["",[l.kI.required,l.kI.maxLength(16),l.kI.pattern(v.m.NUMERIC_REG_EX)]],identification_document_confirmation_date:[""]},d={};return i===A.CUSTOMER_TYPE_DIVISION.CODE.MEMBER?d=Object.assign({},r,s):i===A.CUSTOMER_TYPE_DIVISION.CODE.CLIENT?d=Object.assign({},r,o):i===A.CUSTOMER_TYPE_DIVISION.CODE.GENERAL&&(d=Object.assign({},r,_)),t.group(d)}createBulkForm(t){return t.group({scheduled_rental_date:["",[l.kI.required]],scheduled_return_date:["",[l.kI.required]],rental_date:[""],return_date:[""],scheduledDateGroup:t.group({scheduled_rental_date:["",[l.kI.required]],scheduled_return_date:["",[l.kI.required]]},{validators:[X.d.isStartDateGreaterThanOrEqualToEndDate("scheduled_rental_date","scheduled_return_date")]}),dateGroup:t.group({rental_date:[""],return_date:[""]},{validators:[X.d.isStartDateGreaterThanOrEqualToEndDate("scheduled_rental_date","scheduled_return_date")]}),rental_employee_id:[""],return_employee_id:[""],late_return_reported:[""]})}createDiffForm(t){return t.group({scheduled_rental_date:["",[l.kI.required]],scheduled_return_date:["",[l.kI.required]],rental_date:[""],return_date:[""],scheduledDateGroup:t.group({scheduled_rental_date:["",[l.kI.required]],scheduled_return_date:["",[l.kI.required]]},{validators:[X.d.isStartDateGreaterThanOrEqualToEndDate("scheduled_rental_date","scheduled_return_date")]}),dateGroup:t.group({rental_date:[""],return_date:[""]},{validators:[X.d.isStartDateGreaterThanOrEqualToEndDate("scheduled_rental_date","scheduled_return_date")]}),rental_employee_id:[""],return_employee_id:[""],late_return_reported:[""]})}createAddForm(t){return t.group({id:[""],name:[""],rental_product_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11)]],rental_fee:["",[l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.min(1)]],delivery_division_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11)]],collection_division_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11)]],scheduledDateGroup:t.group({scheduled_rental_date:["",[l.kI.required]],scheduled_return_date:["",[l.kI.required]]},{validators:[X.d.isStartDateGreaterThanOrEqualToEndDate("scheduled_rental_date","scheduled_return_date")]}),remarks_1:[""],remarks_2:[""]})}createRentalAddForm(t){return t.group({rental_product_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11)]],rental_product_name:["",[l.kI.required,l.kI.maxLength(255)]],selling_price:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX)]],division_status_value:["",[l.kI.required,l.kI.maxLength(255)]],rental_fee:["",[l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.min(1)]],delivery_division_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11)]],collection_division_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11)]],scheduledDateGroup:t.group({scheduled_rental_date:["",[l.kI.required]],scheduled_return_date:["",[l.kI.required]]},{validators:[X.d.isStartDateGreaterThanOrEqualToEndDate("scheduled_rental_date","scheduled_return_date")]}),remarks_1:[""],remarks_2:[""]})}createRentalEditAddForm(t){return t.group({id:[""],rental_product_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11)]],rental_product_name:["",[l.kI.required,l.kI.maxLength(255)]],selling_price:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX)]],division_status_value:["",[l.kI.required,l.kI.maxLength(255)]],rental_fee:["",[l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.min(1)]],delivery_division_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11)]],collection_division_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11)]],scheduledDateGroup:t.group({scheduled_rental_date:["",[l.kI.required]],scheduled_return_date:["",[l.kI.required]]},{validators:[X.d.isStartDateGreaterThanOrEqualToEndDate("scheduled_rental_date","scheduled_return_date")]}),remarks_1:[""],remarks_2:[""]})}createEditForm(t){return t.group({rental_product_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11)]],rental_fee:["",[l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.min(1)]],delivery_division_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11)]],delivery_price:[""],collection_division_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11)]],scheduledDateGroup:t.group({scheduled_rental_date:["",[l.kI.required]],scheduled_return_date:["",[l.kI.required]]},{validators:[X.d.isStartDateGreaterThanOrEqualToEndDate("scheduled_rental_date","scheduled_return_date")]}),dateGroup:t.group({rental_date:[""],return_date:[""]}),late_return_reported:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX)]],settle_status_division_id:[""],grace_period_end:[""],remarks_1:[""],remarks_2:[""],rental_employee_id:[""],return_employee_id:[""],late_fee:[""],refund_fee:[""]})}resetAddForm(t){t.reset({id:"",name:"",rental_product_id:"",rental_fee:"",delivery_division_id:"",collection_division_id:"",scheduledDateGroup:{scheduled_rental_date:"",scheduled_return_date:""},remarks_1:"",remarks_2:""})}resetEditForm(t){t.reset({rental_product_id:"",rental_fee:"",delivery_division_id:"",delivery_price:"",collection_division_id:"",scheduledDateGroup:{scheduled_rental_date:"",scheduled_return_date:""},dateGroup:{rental_date:"",return_date:""},late_return_reported:"",settle_status_division_id:"",grace_period_end:"",remarks_1:"",remarks_2:""})}setEditFormData(t,i){try{t.reset({rental_product_id:String(i.rental_product_id),rental_fee:String(i.rental_fee),delivery_division_id:String(i.delivery_division_id),delivery_price:String(i.delivery_price),collection_division_id:String(i.collection_division_id),scheduledDateGroup:{scheduled_rental_date:new Date(i.scheduled_rental_date).toISOString(),scheduled_return_date:new Date(i.scheduled_return_date).toISOString()},dateGroup:{rental_date:i.rental_date?new Date(i.rental_date).toISOString():"",return_date:i.return_date?new Date(i.return_date).toISOString():""},late_return_reported:String(i.late_return_reported),settle_status_division_id:String(i.settle_status_division_id),grace_period_end:String(i.grace_period_end),remarks_1:i.remarks_1,remarks_2:i.remarks_2},{emitEvent:!1})}catch(r){throw r instanceof Error?r:(console.error("Unexpected error:",r),new Error("\u30ec\u30f3\u30bf\u30eb\u5546\u54c1\u66f4\u65b0\u306e\u305f\u3081\u306e\u30d5\u30a9\u30fc\u30e0\u30c7\u30fc\u30bf\u306e\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002"))}}changeValidatorsForRentalFeeControl(t,i){i.delivery_charge_flag?(t.rental_fee.addValidators([l.kI.required]),t.rental_fee.updateValueAndValidity()):(t.rental_fee.removeValidators([l.kI.required]),t.rental_fee.updateValueAndValidity())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var be=u(8782),nt=u(6626),it=u(476),rt=u(4151),Oe=u(7137),at=u(9744),ot=u(387),ye=u(1805),Ne=u(8187),Re=u(2195),ke=u(228),Ze=u(1914),Kt=u(9612),Ht=u(5142),jt=u(6303);function zt(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",8),e._UZ(2,"app-spinner",9),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.Q6J("appendClassForSpinner","border-green-200 border-l-success"))}function Wt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.updateSelectedOption(o))}),e.TgZ(1,"div",13),e._uU(2),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.text)}}function $t(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",10),e.YNc(2,Wt,3,1,"div",11),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.filteredOptions)}}const Xt=["*",[["","message",""]]],en=["*","[message]"];let Me=(()=>{class n{constructor(){this.subscription=new q.w0,this.invalid=!1,this.buttonDisabled=!0,this.idValueChanges=new he.x,this.selectedData=new e.vpe,this.filteredOptions=[],this.originalDataMap=new Map,this.isSearchLoading=!1}ngOnInit(){this.subscription.add(this.fc.valueChanges.subscribe(t=>{console.log(t),this.inputValue=t}))}onSearchButtonClick(){console.log(this.inputValue),this.subscription.add(this.getOptions(this.inputValue).subscribe())}getOptions(t){return null===t||""===t||void 0===t?(this.fc.reset("",{emitEvent:!1}),this.filteredOptions=[],this.isSearchLoading=!1,this.idValueChanges.next(""),(0,b.of)(null)):(this.isSearchLoading=!0,this.filteredOptions=[],this.originalDataMap.clear(),this.apiInput.observable.pipe((0,me.b)(()=>this.isSearchLoading=!0),(0,me.b)(i=>{this.isSearchLoading=!1,console.log(i),i.totalItems>0?this.filteredOptions=i.data.map(r=>{const o=r[this.apiInput.valueTargetColumn];let s=r[this.apiInput.textTargetColumn];return this.apiInput.textAttachColumn&&(s+=` ${r[this.apiInput.textAttachColumn]}`),this.originalDataMap.set(String(o),r),{value:o,text:s}}):(alert("\u8a72\u5f53\u3059\u308b\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093"),this.fc.reset("",{emitEvent:!1}),this.filteredOptions=[])}),(0,k.K)(i=>(this.fc.reset("",{emitEvent:!1}),this.filteredOptions=[],this.isSearchLoading=!1,(0,b.of)(i)))))}searchInputOnBlur(){setTimeout(()=>{this.filteredOptions=[]},200)}updateSelectedOption(t){this.fc.patchValue(t[this.targetOptionData],{emitEvent:!1}),this.idValueChanges.next(String(t.value));const i=this.originalDataMap.get(String(t.value));i&&this.selectedData.emit(i),this.filteredOptions=[],this.originalDataMap.clear()}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-search-suggest-container"]],inputs:{fc:"fc",targetOptionData:"targetOptionData",nameAttrValue:"nameAttrValue",idAttrValue:"idAttrValue",labelSize:"labelSize",invalid:"invalid",buttonDisabled:"buttonDisabled",apiInput:"apiInput"},outputs:{idValueChanges:"idValueChanges",selectedData:"selectedData"},ngContentSelectors:en,decls:12,vars:9,consts:[[1,"flex","flex-col"],[1,"ml-1","mb-1",3,"labelSize","forAttrValue"],[1,"flex","gap-3"],[1,"flex","flex-col","relative","grow"],["type","text",1,"search-suggest-container",3,"id","name","formControl","ngClass","blur"],[4,"ngIf"],[1,"w-[84px]"],[3,"buttonDisabled","click"],[1,"absolute","top-[10px]","left-[18px]","z-50"],["width","w-6","height","h-6","borderWidth","border-[4px]",3,"appendClassForSpinner"],[1,"z-50","shadow","py-2","border","border-t-0","border-slate-300","absolute","top-[42px]","rounded-b-md","bg-white","max-h-[240px]","w-[100%]","overflow-y-auto","grow"],["class","cursor-pointer hover:bg-iron-blue-200",3,"click",4,"ngFor","ngForOf"],[1,"cursor-pointer","hover:bg-iron-blue-200",3,"click"],[1,"py-1","px-2"]],template:function(t,i){1&t&&(e.F$t(Xt),e.TgZ(0,"div",0)(1,"app-label",1),e.Hsn(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"input",4),e.NdJ("blur",function(){return i.searchInputOnBlur()}),e.qZA(),e.Hsn(6,1),e.YNc(7,zt,3,1,"ng-container",5),e.YNc(8,$t,3,1,"ng-container",5),e.qZA(),e.TgZ(9,"div",6)(10,"app-button",7),e.NdJ("click",function(){return i.onSearchButtonClick()}),e._uU(11,"\u691c\u7d22"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("labelSize",i.labelSize)("forAttrValue",i.idAttrValue),e.xp6(4),e.s9C("id",i.idAttrValue),e.s9C("name",i.nameAttrValue),e.Q6J("formControl",i.fc)("ngClass",i.invalid?"invalid":""),e.xp6(2),e.Q6J("ngIf",i.isSearchLoading),e.xp6(1),e.Q6J("ngIf",i.filteredOptions.length>0),e.xp6(2),e.Q6J("buttonDisabled",i.isSearchLoading||i.buttonDisabled))},dependencies:[x.mk,x.sg,x.O5,l.Fj,l.JJ,l.oH,Ht.O,jt._,pe.r],styles:[".search-suggest-container[_ngcontent-%COMP%]{display:block;width:100%;border-radius:.25rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(203 213 225 / var(--tw-border-opacity));padding:.5rem}.search-suggest-container[_ngcontent-%COMP%]:focus{border-width:1px;--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity))}.search-suggest-container[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.search-suggest-container[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.invalid[_ngcontent-%COMP%]{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(234 179 8 / var(--tw-ring-opacity)) }"]}),n})();var st=u(7362),lt=u(1043),_t=u(1208);function tn(n,a){1&n&&e.GkF(0)}function nn(n,a){1&n&&e.GkF(0,33)}function rn(n,a){1&n&&e.GkF(0)}function an(n,a){1&n&&e.GkF(0,33)}function on(n,a){1&n&&e.GkF(0)}function sn(n,a){1&n&&e.GkF(0,33)}function ln(n,a){1&n&&e.GkF(0)}function _n(n,a){1&n&&e.GkF(0,33)}function un(n,a){1&n&&e.GkF(0)}function dn(n,a){1&n&&e.GkF(0,33)}function cn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div")(2,"label",35)(3,"input",38),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onProcessingUnitsRadioChange(r))}),e.qZA(),e._uU(4),e.qZA()(),e.BQk()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(3),e.Q6J("checked",t.value===i.BULK)("id","processing-unit"+t.value)("name","processing-unit"+ +t.value)("value",t.value),e.xp6(1),e.hij(" ",t.display," ")}}function pn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",34),e.ynx(2),e.TgZ(3,"div")(4,"label",35)(5,"input",36),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onCheckSmsSend(r))}),e.qZA(),e._uU(6," SMS\u9001\u4fe1\u3059\u308b "),e.qZA()(),e.BQk(),e.qZA(),e.TgZ(7,"div",34),e.YNc(8,cn,5,5,"ng-container",37),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("checked",t.smsIsChecked),e.xp6(3),e.Q6J("ngForOf",t.processingUnits)}}function mn(n,a){1&n&&e.GkF(0)}function gn(n,a){1&n&&e.GkF(0)}const hn=function(){return{label:"\u4f1a\u54e1ID\u3067\u691c\u7d22",required:!1}},fn=function(){return{label:"\u96fb\u8a71\u756a\u53f7\u3067\u691c\u7d22",required:!1}};function Cn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",48)(1,"div",24)(2,"app-real-time-suggest-container",49),e.NdJ("selectedData",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onMemberIdSuggestDataSelected(r))}),e.YNc(3,mn,1,0,"ng-container",16),e.qZA()(),e._uU(4," \xa0 "),e.TgZ(5,"div",50)(6,"app-real-time-suggest-container",51),e.NdJ("selectedData",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onMemberNameSuggestDataSelected(r))}),e.YNc(7,gn,1,0,"ng-container",16),e.qZA()()()}if(2&n){const t=e.oxw(2),i=e.MAs(50);e.xp6(2),e.Q6J("idCtrl",t.memberFc.member_id)("nameCtrl",t.memberFc.api_member_cd)("apiInput",t.getMemberSuggests()),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(10,hn)),e.xp6(3),e.Q6J("idCtrl",t.memberFc.api_member_tel)("nameCtrl",t.memberFc.api_member_tel)("apiInput",t.getMemberTelSuggests()),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(11,fn))}}function Tn(n,a){1&n&&e.GkF(0)}function vn(n,a){1&n&&e.GkF(0,33)}const En=function(){return{label:"",required:!1}},ne=function(n){return{ctrl:n}};function Dn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",48)(1,"div",52)(2,"app-real-time-suggest-container",53),e.NdJ("selectedData",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onClientNameSuggestDataSelected(r))}),e.YNc(3,Tn,1,0,"ng-container",16),e.YNc(4,vn,1,0,"ng-container",17),e.TgZ(5,"div",54)(6,"span",55),e._uU(7,"\u5f97\u610f\u5148\u540d"),e.qZA(),e.TgZ(8,"span",56),e._uU(9,"\u4f1a\u54e1\u540d\u3068\u5f97\u610f\u5148\u540d\u306f\u3069\u3061\u304b\u5fc5\u9808"),e.qZA()()()()()}if(2&n){const t=e.oxw(2),i=e.MAs(50),r=e.MAs(52);e.xp6(2),e.Q6J("idCtrl",t.clientFc.client_id)("nameCtrl",t.clientFc.client_name)("apiInput",t.getClientSuggests()),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(7,En)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(8,ne,t.clientFc.client_id))}}function xn(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.TgZ(3,"span",63),e._uU(4,"\uff08\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u306e\u78ba\u8a8d\u304c\u5fc5\u8981\u3067\u3059\uff01\uff09"),e.qZA()(),e.BQk()),2&n){const t=e.oxw(5);e.xp6(2),e.hij(" \u524d\u56de\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u78ba\u8a8d\u65e5\uff1a",t.selectedCustomer.idConfirmationDate," ")}}function Sn(n,a){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw(5);e.xp6(1),e.hij(" \u524d\u56de\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u78ba\u8a8d\u65e5\uff1a",t.selectedCustomer.idConfirmationDate," ")}}function An(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,xn,5,1,"ng-container",59),e.YNc(2,Sn,2,1,"ng-template",null,62,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw(4);e.xp6(1),e.Q6J("ngIf",i.selectedCustomer.isIdConfirmationRequired)("ngIfElse",t)}}function In(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",61)(2,"p"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.YNc(10,An,4,2,"div",26),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(3),e.AsE(" \u304a\u5ba2\u69d8\u540d\uff1a",t.selectedCustomer.fullName,"",t.selectedCustomer.fullNameKana?"\uff08"+t.selectedCustomer.fullNameKana+"\uff09":""," "),e.xp6(2),e.Oqu(t.selectedCustomer.fullNameKana),e.xp6(2),e.hij("\u96fb\u8a71\u756a\u53f7\uff1a",t.selectedCustomer.tel,""),e.xp6(2),e.hij("\u3054\u4f4f\u6240\uff1a",t.selectedCustomer.address,""),e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_MEMBER)}}function Fn(n,a){1&n&&(e.TgZ(0,"p",64),e._uU(1," \u304a\u5ba2\u69d8\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044 "),e.qZA())}function bn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",66)(1,"app-button",67),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4);return e.KtG(r.confirmedIdentityVerificationDocuments())}),e._uU(2," \u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f "),e.qZA()()}}function On(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,bn,3,0,"div",65),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.selectedCustomer?null:t.selectedCustomer.id)}}function yn(n,a){if(1&n&&(e.TgZ(0,"div",57)(1,"div",58)(2,"span"),e._uU(3,"\u9078\u629e\u4e2d\u304a\u5ba2\u69d8\u60c5\u5831"),e.qZA(),e.YNc(4,In,11,6,"ng-container",59),e.YNc(5,Fn,2,0,"ng-template",null,60,e.W1O),e.qZA(),e.YNc(7,On,2,1,"div",26),e.qZA()),2&n){const t=e.MAs(6),i=e.oxw(2);e.xp6(4),e.Q6J("ngIf",null==i.selectedCustomer?null:i.selectedCustomer.id)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",i.selectedCustomerCode===i.DIVISION_CUSTOMER_CODE_MEMBER)}}function Nn(n,a){1&n&&e.GkF(0)}function Rn(n,a){1&n&&e.GkF(0,33)}function kn(n,a){1&n&&e.GkF(0)}function Zn(n,a){1&n&&e.GkF(0,33)}function Mn(n,a){1&n&&e.GkF(0)}function Un(n,a){1&n&&e.GkF(0,33)}function Ln(n,a){1&n&&e.GkF(0)}function Bn(n,a){1&n&&e.GkF(0,33)}function qn(n,a){1&n&&e.GkF(0)}function Vn(n,a){1&n&&e.GkF(0,33)}function Qn(n,a){1&n&&e.GkF(0)}function Pn(n,a){1&n&&e.GkF(0,33)}function wn(n,a){1&n&&e.GkF(0)}function Gn(n,a){1&n&&e.GkF(0,33)}function Jn(n,a){1&n&&e.GkF(0)}function Yn(n,a){1&n&&e.GkF(0,33)}const Kn=function(){return{label:"\u59d3 \u540d",required:!0}},ut=function(){return{label:"\u3000",required:!1}},Hn=function(){return{label:"\u96fb\u8a71\u756a\u53f7\uff08\u534a\u89d2\u6570\u5b5716\u6841\u4ee5\u5185\uff09",required:"false"}},jn=function(){return{label:"\u30bb\u30a4 \u30e1\u30a4",required:!1}},dt=function(){return{label:"\u643a\u5e2f\u96fb\u8a71\u756a\u53f7\uff08\u534a\u89d2\u6570\u5b5716\u6841\u4ee5\u5185\uff09",required:!1}},W=function(n){return{fc:n}},Ue=function(){return{label:"\u914d\u9001\u5148\u4f4f\u6240\uff08255\u6587\u5b57\u4ee5\u5185\uff09",required:!1}},zn=function(){return{label:"\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f",required:!1}};function Wn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",57)(2,"div",24)(3,"app-text-container",68),e.YNc(4,Nn,1,0,"ng-container",16),e.YNc(5,Rn,1,0,"ng-container",17),e.qZA()(),e.TgZ(6,"div",24)(7,"app-text-container",69),e.YNc(8,kn,1,0,"ng-container",16),e.YNc(9,Zn,1,0,"ng-container",17),e.qZA()(),e.TgZ(10,"div",24)(11,"app-text-container",70),e.YNc(12,Mn,1,0,"ng-container",16),e.YNc(13,Un,1,0,"ng-container",17),e.qZA()()(),e.TgZ(14,"div",57)(15,"div",24)(16,"app-text-container",71),e.YNc(17,Ln,1,0,"ng-container",16),e.YNc(18,Bn,1,0,"ng-container",17),e.qZA()(),e.TgZ(19,"div",24)(20,"app-text-container",72),e.YNc(21,qn,1,0,"ng-container",16),e.YNc(22,Vn,1,0,"ng-container",17),e.qZA()(),e.TgZ(23,"div",24)(24,"app-text-container",73),e.YNc(25,Qn,1,0,"ng-container",16),e.YNc(26,Pn,1,0,"ng-container",17),e.qZA()()(),e.TgZ(27,"div",57)(28,"div",74)(29,"app-text-container",75),e.YNc(30,wn,1,0,"ng-container",16),e.YNc(31,Gn,1,0,"ng-container",17),e.qZA()(),e.TgZ(32,"div",76)(33,"div")(34,"app-checkbox",77),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onCheckId(r))}),e.YNc(35,Jn,1,0,"ng-container",16),e.YNc(36,Yn,1,0,"ng-container",17),e.qZA()()()()()}if(2&n){const t=e.oxw(2),i=e.MAs(50),r=e.MAs(52),o=e.MAs(58);e.xp6(3),e.Q6J("formCtrl",t.generalFc.last_name)("invalid",t.formControlStateManager(t.generalFc.last_name)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(48,Kn)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(49,ne,t.generalFc.last_name)),e.xp6(2),e.Q6J("formCtrl",t.generalFc.first_name)("invalid",t.formControlStateManager(t.generalFc.first_name)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(51,ut)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(52,ne,t.generalFc.first_name)),e.xp6(2),e.Q6J("formCtrl",t.generalFc.tel)("invalid",t.formControlStateManager(t.generalFc.tel)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(54,Hn)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(55,ne,t.generalFc.tel)),e.xp6(3),e.Q6J("formCtrl",t.generalFc.last_name_kana)("invalid",t.formControlStateManager(t.generalFc.last_name_kana)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(57,jn)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(58,ne,t.generalFc.last_name_kana)),e.xp6(2),e.Q6J("formCtrl",t.generalFc.first_name_kana)("invalid",t.formControlStateManager(t.generalFc.first_name_kana)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(60,ut)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(61,ne,t.generalFc.first_name_kana)),e.xp6(2),e.Q6J("formCtrl",t.commonFc.mobile_number)("invalid",t.formControlStateManager(t.commonFc.mobile_number)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(63,dt)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(64,W,t.commonFc.mobile_number)),e.xp6(3),e.Q6J("formCtrl",t.generalFc.shipping_address)("invalid",t.formControlStateManager(t.generalFc.shipping_address)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(66,Ue)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(67,W,t.generalFc.shipping_address)),e.xp6(3),e.Q6J("formCtrl",t.generalFc.idConfirmationDate_check)("invalid",t.formControlStateManager(t.generalFc.idConfirmationDate_check)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(69,zn)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(70,ne,t.generalFc.idConfirmationDate_check))}}function $n(n,a){1&n&&e.GkF(0)}function Xn(n,a){1&n&&e.GkF(0,33)}function ei(n,a){1&n&&e.GkF(0)}function ti(n,a){1&n&&e.GkF(0,33)}function ni(n,a){1&n&&e.GkF(0)}function ii(n,a){1&n&&e.GkF(0,33)}function ri(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"app-text-container",75),e.YNc(2,ni,1,0,"ng-container",16),e.YNc(3,ii,1,0,"ng-container",17),e.qZA(),e.BQk()),2&n){const t=e.oxw(3),i=e.MAs(50),r=e.MAs(52);e.xp6(1),e.Q6J("formCtrl",t.memberFc.shipping_address)("invalid",t.formControlStateManager(t.memberFc.shipping_address)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(6,Ue)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(7,W,t.memberFc.shipping_address))}}function ai(n,a){1&n&&e.GkF(0)}function oi(n,a){1&n&&e.GkF(0,33)}function si(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"app-text-container",75),e.YNc(2,ai,1,0,"ng-container",16),e.YNc(3,oi,1,0,"ng-container",17),e.qZA(),e.BQk()),2&n){const t=e.oxw(3),i=e.MAs(50),r=e.MAs(52);e.xp6(1),e.Q6J("formCtrl",t.clientFc.shipping_address)("invalid",t.formControlStateManager(t.clientFc.shipping_address)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(6,Ue)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(7,W,t.clientFc.shipping_address))}}function li(n,a){1&n&&e.GkF(0)}function _i(n,a){1&n&&e.GkF(0,33)}function ui(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",42)(2,"div",78),e.YNc(3,ri,4,9,"ng-container",26),e.YNc(4,si,4,9,"ng-container",26),e.qZA(),e.TgZ(5,"div",24)(6,"app-text-container",73),e.YNc(7,li,1,0,"ng-container",16),e.YNc(8,_i,1,0,"ng-container",17),e.qZA()()(),e.BQk()),2&n){const t=e.oxw(2),i=e.MAs(50),r=e.MAs(58);e.xp6(3),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_MEMBER),e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_CLIENT),e.xp6(2),e.Q6J("formCtrl",t.commonFc.mobile_number)("invalid",t.formControlStateManager(t.commonFc.mobile_number)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(8,dt)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(9,W,t.commonFc.mobile_number))}}const di=function(){return{label:"\u5099\u80031",required:!1}},ci=function(){return{label:"\u5099\u80032",required:!1}};function pi(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",39),e.YNc(2,Cn,8,12,"div",40),e.YNc(3,Dn,10,10,"div",40),e.qZA(),e.YNc(4,yn,8,3,"div",41),e.YNc(5,Wn,37,72,"div",26),e.TgZ(6,"div",42)(7,"div",43)(8,"app-textarea-container",44),e.YNc(9,$n,1,0,"ng-container",16),e.YNc(10,Xn,1,0,"ng-container",17),e.qZA()(),e.TgZ(11,"div",43)(12,"app-textarea-container",45),e.YNc(13,ei,1,0,"ng-container",16),e.YNc(14,ti,1,0,"ng-container",17),e.qZA()()(),e.YNc(15,ui,9,11,"ng-container",26),e.TgZ(16,"div",42)(17,"div",46)(18,"p",47),e._uU(19," \u203b \u914d\u9001\u5148\u304c\u767b\u9332\u5148\u3068\u7570\u306a\u308b\u5834\u5408\u3001\u767b\u9332\u3055\u308c\u305f\u96fb\u8a71\u756a\u53f7\u4ee5\u5916\u306b\u9023\u7d61\u3092\u5e0c\u671b\u3059\u308b\u643a\u5e2f\u96fb\u8a71\u756a\u53f7\u304c\u3042\u308b\u5834\u5408\u3001\u4e0a\u8a18\u306e\u9805\u76ee\u3078\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 "),e.qZA()()()()),2&n){const t=e.oxw(),i=e.MAs(50),r=e.MAs(52);e.xp6(2),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_MEMBER),e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_CLIENT),e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_MEMBER||t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_CLIENT),e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_GENERAL),e.xp6(3),e.Q6J("formCtrl",t.commonFc.remarks_1)("invalid",t.formControlStateManager(t.commonFc.remarks_1)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(17,di)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(18,W,t.commonFc.remarks_1)),e.xp6(2),e.Q6J("formCtrl",t.commonFc.remarks_2)("invalid",t.formControlStateManager(t.commonFc.remarks_2)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(20,ci)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(21,W,t.commonFc.remarks_2)),e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_MEMBER||t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_CLIENT)}}function mi(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2,"\u8cb8\u51fa\u671f\u9593\u8a2d\u5b9a\uff08\u53d7\u4ed8\u8868\u5358\u4f4d\uff09"),e.qZA(),e.TgZ(3,"form",80)(4,"table")(5,"tr")(6,"th"),e._uU(7,"\u8cb8\u51fa\u4e88\u5b9a\u65e5"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"\u8fd4\u5374\u4e88\u5b9a\u65e5"),e.qZA()(),e.TgZ(10,"tr")(11,"td")(12,"div",81),e._UZ(13,"app-datepicker",82),e.qZA()(),e.TgZ(14,"td")(15,"div",81),e._UZ(16,"app-datepicker",83),e.qZA()()()()(),e.BQk()),2&n){const t=e.oxw(2);let i,r;e.xp6(3),e.Q6J("formGroup",t.rentalDateForms),e.xp6(10),e.Q6J("formCtrl",t.getBulkScheduledRentalDateControl())("invalid",t.formControlStateManager(null==(i=t.rentalDateForms.get("bulkScheduledDateGroup"))?null:i.get("bulk_scheduled_rental_date"))||(null==(i=t.rentalDateForms.get("bulkScheduledDateGroup"))||null==i.errors?null:i.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(3),e.Q6J("formCtrl",t.getBulkScheduledReturnDateControl())("invalid",t.formControlStateManager(null==(r=t.rentalDateForms.get("bulkScheduledDateGroup"))?null:r.get("bulk_scheduled_return_date"))||(null==(r=t.rentalDateForms.get("bulkScheduledDateGroup"))||null==r.errors?null:r.errors.isStartDateGreaterThanOrEqualToEndDate))}}function gi(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",79),e.YNc(2,mi,17,5,"ng-container",26),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.showBulkSuggest)}}function hi(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"app-datepicker",123),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);let r,o;e.xp6(1),e.Q6J("formCtrl",i.getScheduledReturnDateControl(t))("invalid",i.formControlStateManager(null==(r=t.get("scheduledDateGroup"))?null:r.get("scheduled_return_date"))||(null==(r=t.get("scheduledDateGroup"))||null==(o=r.get("scheduled_return_date"))||null==o.errors?null:o.errors.isStartDateGreaterThanOrEqualToEndDate))}}function fi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"tr",113)(1,"td",114),e._uU(2),e.qZA(),e.TgZ(3,"td",115),e._uU(4),e.qZA(),e.TgZ(5,"td",114),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td",114),e._uU(9),e.qZA(),e.TgZ(10,"td",116)(11,"div",117),e._UZ(12,"app-datepicker",118),e.qZA()(),e.TgZ(13,"td",116)(14,"div",117),e.YNc(15,hi,2,2,"ng-container",26),e.qZA()(),e.TgZ(16,"td",114)(17,"div",117),e._UZ(18,"app-select",119),e.qZA()(),e.TgZ(19,"td",114)(20,"div"),e._UZ(21,"app-select",120),e.qZA()(),e.TgZ(22,"td",114),e._uU(23),e.ALo(24,"number"),e.qZA(),e.TgZ(25,"td",114)(26,"div",121)(27,"app-icon-container",122),e.NdJ("click",function(){const o=e.CHM(t).index,s=e.oxw(3);return e.KtG(s.deleteSelectedRentalProduct(o))}),e.qZA()()()()}if(2&n){const t=a.$implicit,i=a.index,r=e.oxw(3);let o,s;e.Q6J("formGroupName",i),e.xp6(2),e.hij(" ",t.value.rental_product_id," "),e.xp6(2),e.hij(" ",t.value.rental_product_name," "),e.xp6(2),e.hij(" ",e.lcZ(7,17,t.value.selling_price)," \u5186 "),e.xp6(3),e.hij(" ",t.value.division_status_value," "),e.xp6(1),e.Q6J("hidden",!r.showOnebyoneSuggest),e.xp6(2),e.Q6J("formCtrl",r.getScheduledRentalDateControl(t))("invalid",r.formControlStateManager(null==(o=t.get("scheduledDateGroup"))?null:o.get("scheduled_rental_date"))||(null==(o=t.get("scheduledDateGroup"))||null==o.errors?null:o.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("hidden",!r.showOnebyoneSuggest),e.xp6(2),e.Q6J("ngIf",null==(s=t.get("scheduledDateGroup"))?null:s.get("scheduled_rental_date")),e.xp6(3),e.Q6J("formCtrl",r.getFormControlTypeValue(t,"delivery_division_id"))("options",r.deliveryDivisionOptions)("invalid",r.formControlStateManager(r.getFormControlTypeValue(t,"delivery_division_id"))),e.xp6(3),e.Q6J("formCtrl",r.getFormControlTypeValue(t,"collection_division_id"))("options",r.collectionDivisionOptions)("invalid",r.formControlStateManager(r.getFormControlTypeValue(t,"collection_division_id"))),e.xp6(2),e.hij(" ",e.lcZ(24,19,t.value.rental_fee)," \u5186 ")}}function Ci(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",84)(2,"div",79)(3,"span"),e._uU(4,"\u9078\u629e\u4e2d\u5546\u54c1\u60c5\u5831"),e.qZA(),e.TgZ(5,"form",80)(6,"table",106)(7,"thead")(8,"tr")(9,"th",107),e._uU(10," ID "),e.qZA(),e.TgZ(11,"th",108),e._uU(12," \u5546\u54c1\u540d "),e.qZA(),e.TgZ(13,"th",107),e._uU(14," \u57fa\u672c\u6599\u91d1 "),e.qZA(),e.TgZ(15,"th",107),e._uU(16," \u30b9\u30c6\u30fc\u30bf\u30b9 "),e.qZA(),e.TgZ(17,"th",109),e._uU(18," \u8cb8\u51fa\u4e88\u5b9a\u65e5 "),e.qZA(),e.TgZ(19,"th",109),e._uU(20," \u8fd4\u5374\u4e88\u5b9a\u65e5 "),e.qZA(),e.TgZ(21,"th",110),e._uU(22," \u914d\u9001\u533a\u5206 "),e.qZA(),e.TgZ(23,"th",110),e._uU(24," \u56de\u53ce\u533a\u5206 "),e.qZA(),e.TgZ(25,"th",107),e._uU(26," \u30ec\u30f3\u30bf\u30eb\u6599\u91d1 "),e.qZA(),e.TgZ(27,"th",107),e._uU(28," \u524a\u9664 "),e.qZA()()(),e.TgZ(29,"tbody",111),e.ynx(30),e.YNc(31,fi,28,21,"tr",112),e.BQk(),e.qZA()()()()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("formGroup",t.rentalAddForms),e.xp6(12),e.Q6J("hidden",!t.showOnebyoneSuggest),e.xp6(2),e.Q6J("hidden",!t.showOnebyoneSuggest),e.xp6(12),e.Q6J("ngForOf",t.rentalAddFormArrayControls)}}function Ti(n,a){1&n&&e.GkF(0)}function vi(n,a){1&n&&e.GkF(0,33)}const ct=function(n,a){return{"cursor-not-allowed":n,"cursor-pointer":a}};function Ei(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div")(2,"label",124)(3,"input",125),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onRentalProductAcquisitionTypeRadioChange(r))}),e.qZA(),e._uU(4),e.qZA()(),e.BQk()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.WLB(8,ct,i.showProductNameSuggest,!i.showProductNameSuggest)),e.xp6(1),e.Q6J("checked",t.value===i.RENTAL_PRODUCT_ACQUISITION_ALL)("id","rental-product-"+t.value)("name","rental_product_"+ +t.value)("value",t.value)("disabled",i.showProductNameSuggest)("ngClass",e.WLB(11,ct,i.showProductNameSuggest,!i.showProductNameSuggest)),e.xp6(1),e.hij(" ",t.display," ")}}function Di(n,a){1&n&&e._UZ(0,"app-icon",128)}const xi=function(n){return{"rounded-b-md":n}};function Si(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",126),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.drillDownMenu(o.id,o.has_children))}),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.YNc(4,Di,1,0,"app-icon",127),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit,i=a.last;e.xp6(1),e.Q6J("ngClass",e.VKq(3,xi,i)),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",t.has_children)}}function Ai(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"br"),e._uU(2),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.value2)}}const Ii=function(n,a){return{"justify-center text-center":n,"sticky z-30 bg-white":a}};function Fi(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"span",130),e._uU(2),e.YNc(3,Ai,3,1,"ng-container",26),e.qZA(),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.MT6("inline-flex h-[59px] ",t.leftPosition," ",t.width," items-center px-1 py-2"),e.Q6J("ngClass",e.WLB(7,Ii,t.isCenter,t.leftPosition)),e.xp6(1),e.hij(" ",t.value1," "),e.xp6(1),e.Q6J("ngIf",t.value2)}}function bi(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",129),e.YNc(2,Fi,4,10,"ng-container",37),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.reservationStatusHeader)}}const Oi=function(n,a,t,i){return{"justify-center text-center":n,"bg-iron-blue-100":a,"bg-white":t,"sticky z-1":i}};function yi(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",130)(2,"input",134),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw(4);return e.KtG(s.onCheckboxChange(r,o.value))}),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw().index;e.xp6(1),e.MT6("flex relative ",t.leftPosition," ",t.width," items-center px-1 py-2"),e.Q6J("ngClass",e.l5B(5,Oi,t.isCenter,i%2==0,i%2!=0,t.leftPosition))}}const Ni=function(n,a,t,i){return{"justify-center text-center":n,"bg-iron-blue-100":a,"bg-white":t,"sticky z-10":i}};function Ri(n,a){if(1&n&&(e.TgZ(0,"span",130),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw().index;e.MT6("flex ",t.leftPosition," ",t.width," items-center px-1 py-2"),e.Q6J("ngClass",e.l5B(6,Ni,t.isCenter,i%2==0,i%2!=0,t.leftPosition)),e.xp6(1),e.hij(" ",t.value," ")}}function ki(n,a){if(1&n&&(e.ynx(0),e.YNc(1,yi,3,10,"ng-container",59),e.YNc(2,Ri,2,11,"ng-template",null,133,e.W1O),e.BQk()),2&n){const t=a.first,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf",t)("ngIfElse",i)}}function Zi(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",131)(2,"div",132),e.YNc(3,ki,4,2,"ng-container",37),e.qZA()(),e.BQk()),2&n){const t=a.$implicit;e.xp6(3),e.Q6J("ngForOf",t)}}function Mi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Zi,4,1,"ng-container",37),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.reservationStatusBody)}}const Ui=function(){return{label:"\u8868\u793a\u958b\u59cb\u65e5",required:!1}},pt=function(n,a){return{"max-h-0 opacity-0 overflow-hidden":n,"search-panel-height mt-4 opacity-100":a}},Li=function(n,a){return{"-translate-x-[324px]":n,"translate-x-0":a}},Bi=function(n,a){return{"opacity-0 cursor-none":n,"opacity-100 cursor-pointer":a}},qi=function(n,a){return{"w-full":n,"w-[calc(100%-312px)] translate-x-[312px]":a}};function Vi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,Ci,32,4,"ng-container",26),e.TgZ(2,"div",84)(3,"div",85)(4,"h2"),e._uU(5,"\u5546\u54c1\u4e88\u7d04\u72b6\u6cc1"),e.qZA(),e.TgZ(6,"div")(7,"app-date-term",86),e.YNc(8,Ti,1,0,"ng-container",16),e.YNc(9,vi,1,0,"ng-container",17),e.qZA()()(),e._UZ(10,"hr",87),e.TgZ(11,"div",88)(12,"div",89)(13,"app-button",90),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.toggleCategoryMenu())}),e._uU(14,"\u5206\u985e\u3067\u7d5e\u308a\u8fbc\u307f"),e.qZA(),e.TgZ(15,"app-button",90),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.toggleProductNameSuggest())}),e._uU(16,"\u5546\u54c1\u540d\u3067\u691c\u7d22"),e.qZA(),e.TgZ(17,"app-button",90),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.toggleProductIdSuggest())}),e._uU(18,"\u5546\u54c1ID\u3067\u691c\u7d22"),e.qZA()(),e.TgZ(19,"div",91)(20,"div",92),e.YNc(21,Ei,5,14,"ng-container",37),e.qZA(),e.TgZ(22,"div",93)(23,"p"),e._uU(24,"\u25cb\uff1a\u4e88\u7d04\u53ef\u80fd\u3001"),e.qZA(),e.TgZ(25,"p"),e._uU(26,"\u25b3\uff1a\u4e88\u7d04\u4e2d\u3001"),e.qZA(),e.TgZ(27,"p"),e._uU(28,"\xd7\uff1a\u8cb8\u51fa\u4e2d"),e.qZA()()()(),e.TgZ(29,"div",46),e._UZ(30,"hr"),e.qZA(),e.TgZ(31,"div",94)(32,"div",74)(33,"app-search-suggest-container",95),e.NdJ("idValueChanges",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onProductSuggestIdChange(r))})("selectedData",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onProductSuggestDataSelected(r))}),e.TgZ(34,"div",54)(35,"span",55),e._uU(36,"\u5546\u54c1\u540d"),e.qZA()()()()(),e.TgZ(37,"div",94)(38,"div",74)(39,"app-search-suggest-container",96),e.NdJ("idValueChanges",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onProductSuggestIdChange(r))})("selectedData",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onProductSuggestDataSelected(r))}),e.TgZ(40,"div",54)(41,"span",55),e._uU(42,"\u5546\u54c1ID"),e.qZA()()()()(),e.TgZ(43,"div",97)(44,"div",98)(45,"div",99)(46,"div")(47,"app-icon",100),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.drillUpMenu())}),e.qZA()(),e.TgZ(48,"div"),e._uU(49),e.qZA(),e.TgZ(50,"div"),e._UZ(51,"app-icon",101),e.qZA()(),e.TgZ(52,"div",102),e.YNc(53,Si,5,5,"ng-container",37),e.qZA()(),e.TgZ(54,"div",103)(55,"div",104)(56,"div",105),e.YNc(57,bi,3,1,"ng-container",26),e.YNc(58,Mi,2,1,"ng-container",26),e.qZA()()()()()()}if(2&n){const t=e.oxw(),i=e.MAs(50),r=e.MAs(52);e.xp6(1),e.Q6J("ngIf",t.rentalAddFormArrayControls&&t.rentalAddFormArrayControls.length>0),e.xp6(6),e.Q6J("formCtrl",t.displayStartDateFc.display_start_date)("invalid",t.formControlStateManager(t.displayStartDateFc.display_start_date)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(28,Ui)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(29,W,t.displayStartDateFc.display_start_date)),e.xp6(4),e.Q6J("buttonDisabled",t.showProductNameSuggest||t.showProductIdSuggest),e.xp6(2),e.Q6J("buttonDisabled",t.showProductIdSuggest||t.isCategoryMenuOpen),e.xp6(2),e.Q6J("buttonDisabled",t.showProductNameSuggest||t.isCategoryMenuOpen),e.xp6(4),e.Q6J("ngForOf",t.rentalProductAcquisitionTypes),e.xp6(10),e.Q6J("ngClass",e.WLB(31,pt,!t.showProductNameSuggest,t.showProductNameSuggest)),e.xp6(2),e.Q6J("fc",t.productFc.product_name)("apiInput",t.getProductNameFormSuggests())("invalid",t.formControlStateManager(t.productFc.product_name))("buttonDisabled",!t.showProductNameSuggest),e.xp6(4),e.Q6J("ngClass",e.WLB(34,pt,!t.showProductIdSuggest,t.showProductIdSuggest)),e.xp6(2),e.Q6J("fc",t.productFc.id)("apiInput",t.getProductIdFormSuggests())("invalid",t.formControlStateManager(t.productFc.product_name))("buttonDisabled",!t.showProductIdSuggest),e.xp6(5),e.Q6J("ngClass",e.WLB(37,Li,!t.isCategoryMenuOpen,t.isCategoryMenuOpen)),e.xp6(3),e.Q6J("ngClass",e.WLB(40,Bi,t.isLargeCategory,!t.isLargeCategory)),e.xp6(2),e.Oqu(t.categoryTitle[t.currentCategoryLevel]),e.xp6(4),e.Q6J("ngForOf",t.currentCategoryData),e.xp6(1),e.Q6J("ngClass",e.WLB(43,qi,!t.isCategoryMenuOpen,t.isCategoryMenuOpen)),e.xp6(3),e.Q6J("ngIf",t.reservationStatusHeader.length>0),e.xp6(1),e.Q6J("ngIf",t.reservationStatusBody.length>0)}}function Qi(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",135)(2,"app-button",136),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.registerRentalSlip())}),e._uU(3,"\u4fdd\u5b58"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("buttonDisabled",t.commonForm.invalid||t.commonForm.pristine||t.clientForm.invalid||t.clientForm.pristine)}}function Pi(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",135)(2,"app-button",136),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.registerRentalSlip())}),e._uU(3,"\u4fdd\u5b58"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("buttonDisabled",t.commonForm.invalid||t.commonForm.pristine||t.memberForm.invalid||t.memberForm.pristine)}}function wi(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",135)(2,"app-button",136),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.registerRentalSlip())}),e._uU(3,"\u4fdd\u5b58"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("buttonDisabled",t.commonForm.invalid||t.commonForm.pristine||t.generalForm.invalid||t.generalForm.pristine)}}function Gi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Qi,4,1,"ng-container",26),e.YNc(2,Pi,4,1,"ng-container",26),e.YNc(3,wi,4,1,"ng-container",26),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.selectedCustomer.customer_type_code===t.DIVISION_CUSTOMER_CODE_CLIENT),e.xp6(1),e.Q6J("ngIf",t.selectedCustomer.customer_type_code===t.DIVISION_CUSTOMER_CODE_MEMBER),e.xp6(1),e.Q6J("ngIf",t.selectedCustomer.customer_type_code===t.DIVISION_CUSTOMER_CODE_GENERAL)}}function Ji(n,a){1&n&&(e.TgZ(0,"span",138),e._uU(1,"\u5fc5\u9808"),e.qZA())}function Yi(n,a){if(1&n&&(e.TgZ(0,"div",54)(1,"span"),e._uU(2),e.qZA(),e.YNc(3,Ji,2,0,"span",137),e.qZA()),2&n){const t=a.label,i=a.required;e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",i)}}function Ki(n,a){if(1&n&&(e.TgZ(0,"p",140),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.errorConst.FORM_ERROR.REQUIRED_ITEM," ")}}function Hi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Ki,2,1,"p",139),e.BQk()),2&n){const t=e.oxw().fc;e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function ji(n,a){if(1&n&&e.YNc(0,Hi,2,1,"ng-container",26),2&n){const t=a.fc,i=e.oxw();e.Q6J("ngIf",i.formControlStateManager(t))}}function zi(n,a){if(1&n&&(e.TgZ(0,"p",140),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.errorConst.FORM_ERROR.FULL_WIDTH_KATAKANA_RESTRICTION_VIOLATION," ")}}function Wi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,zi,2,1,"p",139),e.BQk()),2&n){const t=e.oxw().fc;e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.pattern)}}function $i(n,a){if(1&n&&e.YNc(0,Wi,2,1,"ng-container",26),2&n){const t=a.fc,i=e.oxw();e.Q6J("ngIf",i.formControlStateManager(t))}}function Xi(n,a){1&n&&(e.TgZ(0,"p",140),e._uU(1," \u203b \u96fb\u8a71\u756a\u53f7\u307e\u305f\u306f\u643a\u5e2f\u96fb\u8a71\u756a\u53f7\u3069\u3061\u3089\u304b\u4e00\u65b9\u5fc5\u9808 "),e.qZA())}function er(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Xi,2,0,"p",139),e.BQk()),2&n){const t=e.oxw().fc;e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.eitherRequired)}}function tr(n,a){if(1&n&&e.YNc(0,er,2,1,"ng-container",26),2&n){const t=a.fc,i=e.oxw();e.Q6J("ngIf",i.formControlStateManager(t))}}function nr(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p",140),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(2),e.hij(" ",t.errorConst.FORM_ERROR.EXCEEDED_CHARACTER_MIN_LIMIT," ")}}function ir(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p",140),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(2),e.hij(" ",t.errorConst.FORM_ERROR.EXCEEDED_CHARACTER_MAX_LIMIT," ")}}function rr(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p",140),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(2),e.hij(" ",t.errorConst.FORM_ERROR.NUMERIC_LIMIT_VIOLATION," ")}}function ar(n,a){if(1&n&&(e.ynx(0),e.YNc(1,nr,3,1,"ng-container",26),e.YNc(2,ir,3,1,"ng-container",26),e.YNc(3,rr,3,1,"ng-container",26),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf","minlength"===t.key),e.xp6(1),e.Q6J("ngIf","maxlength"===t.key),e.xp6(1),e.Q6J("ngIf","pattern"===t.key)}}function or(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ar,4,3,"ng-container",37),e.ALo(2,"keyvalue"),e.BQk()),2&n){const t=e.oxw().fc;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.errors))}}function sr(n,a){if(1&n&&e.YNc(0,or,3,3,"ng-container",26),2&n){const t=a.fc,i=e.oxw();e.Q6J("ngIf",i.formControlStateManager(t))}}function lr(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p",140),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.errorConst.FORM_ERROR.DATE_SPECIFICATION_VIOLATION," ")}}function _r(n,a){if(1&n&&e.YNc(0,lr,3,1,"ng-container",26),2&n){const t=a.fc;e.Q6J("ngIf",null==t.errors?null:t.errors.endingDateIsSmaller)}}const ur=function(n){return{path:n,text:"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u4e00\u89a7"}},dr=function(){return{text:"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u65b0\u898f\u767b\u9332"}},cr=function(n,a){return[n,a]},pr=function(){return{label:"\u53d7\u4ed8\u62c5\u5f53\u8005",required:!0}},mr=function(){return{label:"\u793e\u54e1ID\u3067\u9078\u629e",required:!1}},gr=function(){return{label:"\u53d7\u4ed8\u65e5",required:!0}},hr=function(){return{label:"\u5e97\u8217",required:!0}},fr=function(){return{label:"\u304a\u5ba2\u69d8\u30bf\u30a4\u30d7",required:"true"}};let Cr=(()=>{class n{constructor(t,i,r,o,s,_,d,p,m,c,h,f,T,y,O,M,K,g,U,J){this.fb=t,this.authorService=i,this.modalService=r,this.router=o,this.storeService=s,this.clientService=_,this.memberService=d,this.employeeService=p,this.divisionService=m,this.errorService=c,this.formService=h,this.flashMessageService=f,this.largeCategoryService=T,this.mediumCategoryService=y,this.smallCategoryService=O,this.rentalProductService=M,this.rentalService=K,this.rentalSlipService=g,this.common=U,this.dIService=J,this.subscription=new q.w0,this.idConfirmationDate=!1,this.listPagePath="/rental-slip",this.cancelModalTitle="\u30ec\u30f3\u30bf\u30eb\u4e88\u7d04\u53d7\u4ed8\u898f\u767b\u9332\u30ad\u30e3\u30f3\u30bb\u30eb\uff1a"+C.yR.TITLE.CANCEL,this.errorModalTitle="\u30ec\u30f3\u30bf\u30eb\u4e88\u7d04\u53d7\u4ed8\u65b0\u898f\u767b\u9332\u30a8\u30e9\u30fc\uff1a"+C.yR.TITLE.HAS_ERROR,this.errorConst=G.c,this.rsConst=A,this.RENTED=Y.q.STATUS.RENTED,this.RENTABLE=Y.q.STATUS.RENTABLE,this.commonForm=this.fb.group({customer_type_division_id:["",[l.kI.required]],store_id:["",[l.kI.required]],reception_employee_id:["",[l.kI.required]],reception_date:["",[l.kI.required]],mobile_number:["",[l.kI.maxLength(20)]],send_sms_flg:[""],remarks_1:["",[l.kI.maxLength(255)]],remarks_2:["",[l.kI.maxLength(255)]],status_division_id:["",[l.kI.required]],settle_status_division_id:["",[l.kI.required]],incident_division_id:["",[l.kI.required]],idConfirmationDate:[""]}),this.clientForm=this.fb.group({client_id:["",[l.kI.pattern(v.m.NUMERIC_REG_EX)]],client_name:[""],shipping_address:["",[l.kI.maxLength(255)]]}),this.memberForm=this.fb.group({api_member_cd:[""],api_member_tel:[""],member_id:["",[l.kI.pattern(v.m.NUMERIC_REG_EX)]],full_name:[""],shipping_address:["",[l.kI.maxLength(255)]]}),this.generalForm=this.fb.group({last_name:["",[l.kI.required,l.kI.maxLength(255)]],first_name:["",[l.kI.maxLength(255)]],last_name_kana:["",[l.kI.maxLength(255),l.kI.pattern(v.m.FULL_WIDTH_KATAKANA_REG_EX)]],first_name_kana:["",[l.kI.maxLength(255),l.kI.pattern(v.m.FULL_WIDTH_KATAKANA_REG_EX)]],tel:["",[l.kI.required,l.kI.maxLength(14),l.kI.pattern(v.m.NUMERIC_REG_EX)]],shipping_address:["",[l.kI.maxLength(255)]],identification_document_confirmation_date:[""],idConfirmationDate_check:[""]}),this.initialDate={bulkScheduledDateGroup:{bulk_scheduled_rental_date:(new Date).toISOString(),bulk_scheduled_return_date:(new Date).toISOString()}},this.product_id_list=[],this.update_product_item=[],this.getReceptionEmployeeByIdForm=this.fb.group({get_reception_employee_by_id:["",[l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11),l.kI.min(1)]]}),this.DIVISION_CUSTOMER_CODE_MEMBER=String(A.CUSTOMER_TYPE_DIVISION.CODE.MEMBER),this.DIVISION_CUSTOMER_CODE_CLIENT=String(A.CUSTOMER_TYPE_DIVISION.CODE.CLIENT),this.DIVISION_CUSTOMER_CODE_GENERAL=String(A.CUSTOMER_TYPE_DIVISION.CODE.GENERAL),this.ONEBYONE="onebyone",this.BULK="bulk",this.PROCESSINGUNIT_ONEBYONE_VALUE=0,this.PROCESSINGUNIT_BULK_VALUE=1,this.processingUnitsDefaultValue=0,this.processingUnitsPostValue=0,this.processingUnits=[{value:this.ONEBYONE,display:"\u660e\u7d30\u5358\u4f4d",id:1},{value:this.BULK,display:"\u53d7\u4ed8\u7968\u5358\u4f4d",id:0}],this.selectedprocessingUnits=this.BULK,this.showOnebyoneSuggest=!1,this.showBulkSuggest=!0,this.smsIsChecked=!1,this.selectedSMS=0,this.identificationIsChecked=!1,this.idCheckedDateTime=0,this.rentalDateForms=this.fb.group({bulkScheduledDateGroup:this.fb.group({bulk_scheduled_rental_date:[new Date(String(this.initialDate.bulkScheduledDateGroup?.bulk_scheduled_rental_date))],bulk_scheduled_return_date:[new Date(String(this.initialDate.bulkScheduledDateGroup?.bulk_scheduled_return_date))]})}),this.memberSuggestForm=this.fb.group({id:["",[l.kI.required]],full_name:[""]}),this.clientSuggestForm=this.fb.group({id:["",[l.kI.required]],client_name:[""]}),this.RESERVATION_STATUS_PERIOD=21,this.reservationStatusHeader=[],this.reservationStatusBody=[],this.RENTAL_PRODUCT_ACQUISITION_ALL="all",this.RENTAL_PRODUCT_ACQUISITION_RESERVABLE="reservable",this.selectedRentalProductAcquisitionType=this.RENTAL_PRODUCT_ACQUISITION_ALL,this.rentalProductAcquisitionTypes=[{value:this.RENTAL_PRODUCT_ACQUISITION_ALL,display:"\u5168\u5546\u54c1"},{value:this.RENTAL_PRODUCT_ACQUISITION_RESERVABLE,display:"\u4e88\u7d04\u53ef\u80fd\u306a\u5546\u54c1\u306e\u307f"}],this.displayStartDateForm=this.fb.group({display_start_date:["",[l.kI.required]]}),this.productSuggestForm=this.fb.group({id:["",[l.kI.required]],product_name:[""]}),this.showProductNameSuggest=!1,this.showProductIdSuggest=!1,this.isCategoryMenuOpen=!1,this.isLargeCategory=!0,this.currentCategoryLevel="large",this.categoryTitle={large:"\u5927\u5206\u985e",medium:"\u4e2d\u5206\u985e",small:"\u5c0f\u5206\u985e"},this.rentalAddForms=this.fb.group({forms:this.fb.array([])})}get commonFc(){return this.commonForm.controls}get clientFc(){return this.clientForm.controls}get memberFc(){return this.memberForm.controls}get generalFc(){return this.generalForm.controls}get getEmployeeByIdFc(){return this.getReceptionEmployeeByIdForm.controls}get rentalDateFormsControls(){return this.rentalDateForms.controls}resetCustomerInfo(){let t;this.selectedCustomerCode===this.DIVISION_CUSTOMER_CODE_MEMBER?(this.resetClientForm(),this.resetGeneralFrom(),t=Number(A.CUSTOMER_TYPE_DIVISION.VALUE.MEMBER)):this.selectedCustomerCode===this.DIVISION_CUSTOMER_CODE_CLIENT?(this.resetMemberForm(),this.resetGeneralFrom(),t=Number(A.CUSTOMER_TYPE_DIVISION.VALUE.CLIENT)):this.selectedCustomerCode===this.DIVISION_CUSTOMER_CODE_GENERAL&&(this.resetClientForm(),this.resetMemberForm(),t=Number(A.CUSTOMER_TYPE_DIVISION.VALUE.GENERAL)),this.selectedCustomer={type:t,customer_type_code:this.selectedCustomerCode,id:"",fullName:"",fullNameKana:"",address:"",tel:"",idConfirmationDate:"",isIdConfirmationRequired:!0}}resetMemberForm(){this.memberSFc.full_name.patchValue("",{emitEvent:!0}),this.memberSFc.id.patchValue(""),this.memberFc.member_id.patchValue(""),this.memberFc.shipping_address.patchValue("")}resetClientForm(){this.clientSFc.client_name.patchValue("",{emitEvent:!0}),this.clientSFc.id.patchValue(""),this.clientFc.client_id.patchValue(""),this.clientFc.shipping_address.patchValue("")}resetGeneralFrom(){this.generalFc.first_name.patchValue(""),this.generalFc.first_name_kana.patchValue(""),this.generalFc.last_name.patchValue(""),this.generalFc.last_name_kana.patchValue(""),this.generalFc.tel.patchValue(""),this.generalFc.shipping_address.patchValue(""),this.commonFc.mobile_number.patchValue(""),this.commonFc.idConfirmationDate.patchValue(""),this.idConfirmationDate=!1,this.generalFc.idConfirmationDate_check.patchValue("")}onCheckSmsSend(t){t.target.checked?(this.smsIsChecked=!0,this.selectedSMS=1):(this.smsIsChecked=!1,this.selectedSMS=0)}onCheckId(t){const i=(new Date).toLocaleString();t.target.checked?(this.identificationIsChecked=!0,this.idCheckedDateTime=1,this.generalFc.identification_document_confirmation_date.setValue(i)):(this.identificationIsChecked=!1,this.idCheckedDateTime=0,this.generalFc.identification_document_confirmation_date.setValue(""),this.generalFc.idConfirmationDate_check.setValue(""))}onProcessingUnitsRadioChange(t){if(this.selectedprocessingUnits=t.target.value,this.toggleProcessingUnits(),!1===this.showOnebyoneSuggest){this.rentalDateFormsControls.bulkScheduledDateGroup.value.bulk_scheduled_rental_date=new Date(String(this.initialDate.bulkScheduledDateGroup?.bulk_scheduled_rental_date)).toLocaleString(),this.rentalDateFormsControls.bulkScheduledDateGroup.value.bulk_scheduled_return_date=new Date(String(this.initialDate.bulkScheduledDateGroup?.bulk_scheduled_return_date)).toLocaleString();let r=this.getBulkScheduledRentalDateControl(),o=this.getBulkScheduledReturnDateControl();for(let s in this.rentalAddFormArray.controls)this.rentalAddFormArray.controls[s].value.scheduledDateGroup.scheduled_rental_date=new Date(String(r.value)).toISOString(),this.rentalAddFormArray.controls[s].get("scheduledDateGroup")?.get("scheduled_rental_date")?.setValue(new Date(String(r.value)).toISOString()),this.rentalAddFormArray.controls[s].value.scheduledDateGroup.scheduled_return_date=new Date(String(o.value)).toISOString(),this.rentalAddFormArray.controls[s].get("scheduledDateGroup")?.get("scheduled_return_date")?.setValue(new Date(String(o.value)).toISOString())}}toggleProcessingUnits(){this.selectedprocessingUnits===this.ONEBYONE?(this.showOnebyoneSuggest=!this.showOnebyoneSuggest,this.showBulkSuggest=!1,this.showOnebyoneSuggest=!0,this.processingUnitsPostValue=1):(this.showBulkSuggest=!this.showBulkSuggest,this.showBulkSuggest=!0,this.showOnebyoneSuggest=!1,this.processingUnitsPostValue=0)}get memberSFc(){return this.memberSuggestForm.controls}get clientSFc(){return this.clientSuggestForm.controls}getMemberFormNameSuggests(){let t=this.memberFc.full_name.value;null===t&&(t="");const[i,...r]=t.split(/\s|\u3000/),o=r.join(" ");return{observable:this.memberService.getAll({last_name:i,first_name:o}),valueTargetColumn:"id",textTargetColumn:"last_name",textAttachColumn:"first_name"}}getMemberSuggests(){const t=Number(this.memberFc.api_member_cd.value);return{observable:this.memberService.getAll({member_cd:t}),idField:"id",nameField:"member_cd"}}getMemberTelSuggests(){const t=Number(this.memberFc.api_member_tel.value);return{observable:this.memberService.getAll({tel:t}),idField:"id",nameField:"last_name",otherField:"first_name"}}onMemberIdSuggestDataSelected(t){const i=t.last_name+" "+t.first_name;let r="";t.last_name_kana?r=t.first_name_kana?t.last_name_kana+" "+t.first_name_kana:t.last_name_kana:t.first_name_kana&&(r=t.first_name_kana);const p=(t.province?t.province:"")+(t.locality?t.locality:"")+(t.street_address?t.street_address:"")+(t.other_address?t.other_address:""),m=new Date,c=t.identification_document_confirmation_date?new Date(t.identification_document_confirmation_date).toLocaleDateString():"",h=""===c||new Date(c)<=new Date(m.getFullYear()-1,m.getMonth(),m.getDate());this.selectedCustomer={type:Number(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_MEMBER),customer_type_code:this.DIVISION_CUSTOMER_CODE_MEMBER,id:String(t.id),fullName:i,fullNameKana:r,address:p,tel:t.tel?t.tel:"",idConfirmationDate:""===c?"\u672a\u78ba\u8a8d":c,isIdConfirmationRequired:h},this.idConfirmationDate=!!h,this.selectedMember=t,this.selectedClient={},this.clientFc.client_id.patchValue(""),this.memberFc.member_id.patchValue(String(t.id)),this.commonFc.customer_type_division_id.patchValue(String(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_MEMBER))}onMemberNameSuggestDataSelected(t){const i=t.last_name+" "+t.first_name;let r="";t.last_name_kana?r=t.first_name_kana?t.last_name_kana+" "+t.first_name_kana:t.last_name_kana:t.first_name_kana&&(r=t.first_name_kana);const p=(t.province?t.province:"")+(t.locality?t.locality:"")+(t.street_address?t.street_address:"")+(t.other_address?t.other_address:""),m=new Date,c=t.identification_document_confirmation_date?new Date(t.identification_document_confirmation_date).toLocaleDateString():"",h=""===c||new Date(c)<=new Date(m.getFullYear()-1,m.getMonth(),m.getDate());this.selectedCustomer={type:Number(A.CUSTOMER_TYPE_DIVISION.VALUE.MEMBER),customer_type_code:this.DIVISION_CUSTOMER_CODE_MEMBER,id:String(t.id),fullName:i,fullNameKana:r,address:p,tel:t.tel?t.tel:"",idConfirmationDate:""===c?"\u672a\u78ba\u8a8d":c,isIdConfirmationRequired:h},this.selectedMember=t,this.selectedClient={},this.clientFc.client_id.patchValue(""),this.memberFc.member_id.patchValue(String(t.id)),this.commonFc.customer_type_division_id.patchValue(String(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_MEMBER))}getClientFormNameSuggests(){return{observable:this.clientService.getAll({name:this.clientFc.client_name.value}),valueTargetColumn:"id",textTargetColumn:"name"}}onClientNameSuggestDataSelected(t){const _=(t.province?t.province:"")+(t.locality?t.locality:"")+(t.street_address?t.street_address:"")+(t.other_address?t.other_address:"");new Date,this.selectedCustomer={type:Number(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_CLIENT),customer_type_code:this.DIVISION_CUSTOMER_CODE_CLIENT,id:String(t.id),fullName:t.name,fullNameKana:t.name_kana,address:_,tel:t.tel?t.tel:"",idConfirmationDate:"\u672a\u78ba\u8a8d",isIdConfirmationRequired:!1},this.selectedClient=t,this.selectedMember={},this.memberFc.member_id.patchValue(""),this.clientFc.client_id.patchValue(String(t.id))}updateCustomerData(t){this.common.loading=!0,this.subscription.add(t.pipe((0,k.K)(i=>(0,b.of)(i)),(0,L.x)(()=>{this.common.loading=!1})).subscribe(i=>{if(i instanceof R.UA)return this.handleError(i.status,i.error?i.error.title:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",i.error?i.error.message:i.message),void(this.common.loading=!1);this.selectedCustomer.customer_type_code===this.DIVISION_CUSTOMER_CODE_MEMBER?this.onMemberNameSuggestDataSelected(this.selectedMember):this.selectedCustomer.customer_type_code===this.DIVISION_CUSTOMER_CODE_CLIENT&&this.onClientNameSuggestDataSelected(this.selectedClient),this.flashMessageService.setFlashMessage(i.message,"success",15e3)}))}onRentalProductAcquisitionTypeRadioChange(t){this.selectedRentalProductAcquisitionType=t.target.value}resetProductSearch(){this.productSuggestForm.reset(),this.productSearchResults=[],this.productSearchResults=[],this.update_product_item=[]}get displayStartDateFc(){return this.displayStartDateForm.controls}get productFc(){return this.productSuggestForm.controls}onCheckboxChange(t,i){const o=t.target.checked;if(o&&"string"!=typeof i)this.addRentalAddForm(i);else if(!o&&"string"!=typeof i){let _,s=this.rentalAddFormArray.value;for(let d=0;d<s.length;d++)i.id===s[d].rental_product_id&&(_=d);(null!=_||null!=_)&&this.deleteSelectedRentalProduct(_)}}deleteSelectedRentalProduct(t){this.rentalAddFormArray.removeAt(t),delete this.update_product_item[t]}toggleProductNameSuggest(){this.reservationStatusBody=[],!this.validateDisplayStartDate()&&(this.showProductNameSuggest=!this.showProductNameSuggest)}toggleProductIdSuggest(){this.reservationStatusBody=[],!this.validateDisplayStartDate()&&(this.showProductIdSuggest=!this.showProductIdSuggest)}getProductNameFormSuggests(){const t={name:this.productFc.product_name.value,data_permission_division_id:this.DATA_PERMISSION_DIVISION_ID_PUBLIC};return console.log(t),this.selectedRentalProductAcquisitionType===this.RENTAL_PRODUCT_ACQUISITION_RESERVABLE&&(t.status_division_id=this.PRODUCT_STATUS_DIVISION_RENTABLE),{observable:this.rentalProductService.getAll({...t}),valueTargetColumn:"id",textTargetColumn:"name"}}getProductIdFormSuggests(){const t={id:this.productFc.id.value,data_permission_division_id:this.DATA_PERMISSION_DIVISION_ID_PUBLIC};return this.selectedRentalProductAcquisitionType===this.RENTAL_PRODUCT_ACQUISITION_RESERVABLE&&(t.status_division_id=this.PRODUCT_STATUS_DIVISION_RENTABLE),{observable:this.rentalProductService.getAll({...t}),valueTargetColumn:"id",textTargetColumn:"id",textAttachColumn:"name"}}onProductSuggestIdChange(t){}onProductSuggestDataSelected(t,i){this.reservationStatusBody=[],this.subscription.add(this.getSelectedRentalProductsAndReservationStatus(t).subscribe(r=>{r&&this.createReservationStatusList(r.rentalProducts,r.rentals,i)}))}getSelectedRentalProductsAndReservationStatus(t){const i=new Date(String(this.displayStartDateFc.display_start_date.value)),r=new Date(String(this.displayStartDateFc.display_start_date.value));r.setDate(i.getDate()+this.RESERVATION_STATUS_PERIOD),this.common.loading=!0;const o={product_barcode:t.product_barcode,data_permission_division_id:this.DATA_PERMISSION_DIVISION_ID_PUBLIC};this.selectedRentalProductAcquisitionType===this.RENTAL_PRODUCT_ACQUISITION_RESERVABLE&&(o.status_division_id=this.PRODUCT_STATUS_DIVISION_RENTABLE);let s=i.toLocaleDateString()+" 00:00:00",_=r.toLocaleDateString()+" 00:00:00";const d={rental_product_id:t.id,schedulfrom_created_ated_rental_date:s,to_created_at:_};return(0,te.D)([this.rentalProductService.getAll({...o}),this.rentalService.getAll({...d})]).pipe((0,k.K)(p=>(p instanceof R.UA&&this.handleError(p.status,p.error?p.error.title:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",p.error?p.error.message:p.message),(0,b.of)(null))),(0,ze.U)(p=>(this.common.loading=!1,p?{rentalProducts:p[0].data,rentals:p[1].data}:null)),(0,L.x)(()=>this.common.loading=!1))}createReservationStatusList(t,i,r){const o=new Date(String(this.displayStartDateFc.display_start_date.value)),s=We(t,i);this.reservationStatusHeader=$e(o,this.RESERVATION_STATUS_PERIOD),Xe(s,t,o,this.RESERVATION_STATUS_PERIOD).forEach(d=>{console.log(d),null!=r?this.reservationStatusBody[r]=d:this.reservationStatusBody.push(d)})}validateDisplayStartDate(){return""===this.displayStartDateFc.display_start_date.value&&(alert("\u8868\u793a\u958b\u59cb\u65e5\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044"),!0)}toggleCategoryMenu(){this.reservationStatusBody=[],!this.validateDisplayStartDate()&&(this.isCategoryMenuOpen=!this.isCategoryMenuOpen,this.currentCategoryLevel="large",this.currentCategoryData=this.largeCategories,this.isLargeCategory=!0)}getRentalProductsByCategory(t){let i;this.reservationStatusBody=[],this.common.loading=!0,i=this.rentalProductService.getAll("large"===this.currentCategoryLevel?{large_category_id:t,data_permission_division_id:this.DATA_PERMISSION_DIVISION_ID_PUBLIC}:"medium"===this.currentCategoryLevel?{medium_category_id:t,data_permission_division_id:this.DATA_PERMISSION_DIVISION_ID_PUBLIC}:{small_category_id:t,data_permission_division_id:this.DATA_PERMISSION_DIVISION_ID_PUBLIC}),this.subscription.add(i.pipe((0,k.K)(r=>(0,b.of)(r instanceof R.UA?r:null)),(0,L.x)(()=>this.common.loading=!1)).subscribe(r=>{if(r instanceof R.UA)return this.handleError(r.status,r.error?r.error.title:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",r.error?r.error.message:r.message),void(this.common.loading=!1);null!==r?r.totalItems>0?r.data.forEach((s,_)=>{console.log(s),console.log(_),this.onProductSuggestDataSelected(s,_)}):alert("\u5546\u54c1\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f"):alert("\u5546\u54c1\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}))}drillDownMenu(t,i){if("large"===this.currentCategoryLevel){if(!i)return void this.getRentalProductsByCategory(t);this.isLargeCategory=!1,this.currentCategoryLevel="medium",this.currentCategoryData=this.mediumCategories.filter(r=>r.large_category_id===t)}else{if("medium"!==this.currentCategoryLevel)return void this.getRentalProductsByCategory(t);if(!i)return void this.getRentalProductsByCategory(t);this.isLargeCategory=!1,this.currentCategoryLevel="small",this.currentCategoryData=this.smallCategories.filter(r=>r.medium_category_id===t)}}drillUpMenu(){"large"!==this.currentCategoryLevel&&("medium"===this.currentCategoryLevel?(this.isLargeCategory=!0,this.currentCategoryLevel="large",this.currentCategoryData=this.largeCategories):"small"===this.currentCategoryLevel&&(this.isLargeCategory=!1,this.currentCategoryLevel="medium",this.currentCategoryData=this.mediumCategories))}setHasChildren(){const t=this.largeCategories.map(o=>(o.has_children=this.mediumCategories.filter(_=>_.large_category_id===o.id).length>0,o));this.largeCategories=t;const i=this.mediumCategories.map(o=>(o.has_children=this.smallCategories.filter(_=>_.medium_category_id===o.id).length>0,o));this.mediumCategories=i;const r=this.smallCategories.map(o=>(o.has_children=!1,o));this.smallCategories=r}get rentalAddFormArray(){return this.rentalAddForms.get("forms")}get rentalAddFormArrayControls(){return this.rentalAddFormArray.controls}getInitialDate(){return(new Date).toISOString()}getScheduledRentalDateControl(t){return t.get("scheduledDateGroup")?.get("scheduled_rental_date")}getScheduledReturnDateControl(t){return t.get("scheduledDateGroup")?.get("scheduled_return_date")}getBulkScheduledRentalDateControl(){return this.rentalDateForms.get("bulkScheduledDateGroup")?.get("bulk_scheduled_rental_date")}getBulkScheduledReturnDateControl(){return this.rentalDateForms.get("bulkScheduledDateGroup")?.get("bulk_scheduled_return_date")}getFormControlTypeValue(t,i){return t.get(i)}addRentalAddForm(t){let i={scheduled_rental_date:(new Date).toISOString(),scheduled_return_date:(new Date).toISOString()};if(!1===this.showOnebyoneSuggest){let c=this.getBulkScheduledRentalDateControl(),h=this.getBulkScheduledReturnDateControl();i={scheduled_rental_date:new Date(String(c.value)).toISOString(),scheduled_return_date:new Date(String(h.value)).toISOString()}}this.update_product_item.push(t);const r={rental_product_id:t.id,rental_product_name:t.name,selling_price:t.selling_price,division_status_value:`${t.division_status_value}`,delivery_division_id:this.DELIVERY_REQUEST_DIVISION_ID_NO_DELIVERY,collection_division_id:this.COLLECTION_REQUEST_DIVISION_ID_NO_COLLECTION,rental_item_count:1,delinquency_flag:0,rental_fee:t.selling_price,rental_date:"",scheduledDateGroup:i},o=this.formService.createRentalAddForm(this.fb),s=o.get("scheduledDateGroup.scheduled_rental_date")?.valueChanges,_=o.get("scheduledDateGroup.scheduled_return_date")?.valueChanges;s&&_&&this.subscription.add((0,Ie.a)([s,_]).subscribe(([c,h])=>{o.patchValue({rental_fee:this.calculateRentalFee(t,c,h)})}));const d=(new Date).toISOString(),p=(new Date).toISOString(),m=this.calculateRentalFee(t,d,p);m instanceof Error?alert(m.message):(r.rental_fee=m,o.patchValue(r),this.rentalAddFormArray.push(o))}calculateRentalFee(t,i,r){const o=t.selling_price;if(t.delivery_charge_flag)return o;const _=Number(t.division_sales_tax_code),d=(0,I.zn)(_),p=Number(t.division_sales_fraction_code),m=(0,I.fy)(p),c=(0,I.e_)(o,d.taxRate,d.isTaxIncluded,m);if(c instanceof Error)throw c;const h=new Date(String(i)).setHours(0,0,0,0),f=new Date(h),T=new Date(String(r)).setHours(0,0,0,0),y=new Date(T),O=(0,I.Sz)(f,y);let M=0;return M=d.isTaxIncluded?o:c.priceWithoutTax+c.taxAmount,(0,I._k)(0===O?M:M+.7*M*O)}initWithAuthorInfo(t){this.authorName=t.last_name+" "+t.first_name,this.authorRole=t.role_name?t.role_name:"",this.commonFc.reception_employee_id.patchValue(String(t.id)),this.commonFc.store_id.patchValue(String(t.store_id)),this.commonFc.reception_date.patchValue((new Date).toISOString())}getEmployeeById(t){this.employeeSuggests.find(i=>{Number(i.value)===Number(t)&&this.commonFc.reception_employee_id.patchValue(String(i.value))})}ngOnInit(){this.authorService.author?(this.initWithAuthorInfo(this.authorService.author),this.initOptions()):this.subscription.add(this.authorService.author$.subscribe(r=>{this.initWithAuthorInfo(r),this.initOptions()})),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,B.h)(r=>this.modalService.getModalProperties().title===this.cancelModalTitle)).subscribe(r=>{r===C.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl(this.listPagePath)})),this.subscription.add(this.getEmployeeByIdFc.get_reception_employee_by_id.valueChanges.subscribe(r=>{null==r||""===r||this.getEmployeeById(r)})),this.resetCustomerInfo(),this.subscription.add(this.commonFc.customer_type_division_id.valueChanges.subscribe(r=>{this.selectedCustomerType(r)}));let t=this.getBulkScheduledRentalDateControl(),i=this.getBulkScheduledReturnDateControl();this.subscription.add(t?.valueChanges.subscribe(r=>{r&&i.patchValue(r)}))}ngOnDestroy(){this.subscription.unsubscribe()}selectedCustomerType(t){if(null===t)return void this.handleError(400,this.errorModalTitle,"\u9078\u629e\u80a2\u53d6\u5f97\u30a8\u30e9\u30fc");const i=this.customerTypes.find(r=>String(r.value)===String(t));void 0!==i?(this.customerType=i,this.selectedCustomerCode=String(this.customerType.code)):this.handleError(400,this.errorModalTitle,"\u9078\u629e\u80a2\u53d6\u5f97\u30a8\u30e9\u30fc")}formControlStateManager(t){return null!=t&&(t.touched||t.dirty)&&t.invalid}simpleFormControlStateManager(t){return(t.touched||t.dirty)&&t.invalid}detectErrors(t,i){return t instanceof R.UA?(this.handleError(t.status,this.errorModalTitle,t.message),!0):(null==t||t.length!==i)&&(this.handleError(400,this.errorModalTitle,C.yR.BODY.HAS_ERROR),!0)}generateStatusDivisions(t){return null==t||0===t[D.z.DELIVERY_REQUEST].length||0===t[D.z.COLLECTION_REQUEST].length?(this.handleError(400,this.errorModalTitle,C.yR.BODY.HAS_ERROR),!1):(this.deliveryDivisionOptions=t[D.z.DELIVERY_REQUEST],this.collectionDivisionOptions=t[D.z.COLLECTION_REQUEST],!0)}initOptions(){this.common.loading=!0,this.subscription.add((0,te.D)([this.storeService.getAsSelectOptions(),this.employeeService.getAsSelectOptions(),this.divisionService.getAsSelectOptions(),this.largeCategoryService.getAll(),this.mediumCategoryService.getAll(),this.smallCategoryService.getAll()]).pipe((0,L.x)(()=>this.common.loading=!1),(0,k.K)(r=>(0,b.of)(r))).subscribe(r=>{if(this.detectErrors(r,6))return;this.storeSuggests=r[0],this.employeeSuggests=r[1];const s=r[2];this.generateStatusDivisions(r[2]),this.largeCategories=r[3].data,this.currentCategoryData=this.largeCategories,this.mediumCategories=r[4].data,this.smallCategories=r[5].data,this.setHasChildren(),this.displayStartDateFc.display_start_date.patchValue((new Date).toISOString()),this._setDivisions(s),this._setHiddenValue(),this.commonFc.status_division_id.patchValue(String(this.RENTAL_SLIP_INITIAL_STATUS_ACCEPTED)),this.commonFc.incident_division_id.patchValue(String(this.RENTAL_SLIP_INITIAL_INCIDENT_DIVISION_NO_INCIDENTS)),this.commonFc.settle_status_division_id.patchValue(String(this.RENTAL_SLIP_INITIAL_SETTLE_STATUS_DIVISION_UNSETTLED))})),this.getBulkScheduledRentalDateControl()?.valueChanges.subscribe(r=>{for(let o in this.rentalAddFormArray.controls)this.rentalAddFormArray.controls[o].value.scheduledDateGroup.scheduled_rental_date=r,this.rentalAddFormArray.controls[o].get("scheduledDateGroup")?.get("scheduled_rental_date")?.setValue(r)}),this.getBulkScheduledReturnDateControl()?.valueChanges.subscribe(r=>{for(let o in this.rentalAddFormArray.controls)this.rentalAddFormArray.controls[o].value.scheduledDateGroup.scheduled_return_date=r,this.rentalAddFormArray.controls[o].get("scheduledDateGroup")?.get("scheduled_return_date")?.setValue(r)})}onClickReset(){window.location.reload()}handleClickCancel(){this.commonForm.pristine?this.router.navigateByUrl(this.listPagePath):this.modalService.setModal(this.cancelModalTitle,C.yR.BODY.CANCEL,"warning",C.yR.BUTTON_TITLE.EXECUTION,C.yR.BUTTON_TITLE.CANCEL)}handleError(t,i,r){this.errorService.setError({status:t,title:i,message:r})}registerRentalSlip(){const t=this.rentalAddForms.value.forms.map(r=>(r.rental_item_count=1,r.delinquency_flag=0,r.rental_date="",r.settle_status_division_id=this.RENTAL_SLIP_INITIAL_SETTLE_STATUS_DIVISION_UNSETTLED,r.scheduled_rental_date=new Date(String(r.scheduledDateGroup.scheduled_rental_date)).toLocaleString(),r.scheduled_return_date=new Date(String(r.scheduledDateGroup.scheduled_return_date)).toLocaleString(),r.settle_status_division_id=this.commonFc.settle_status_division_id.value,this.product_id_list.push(r.rental_product_id),r)),i={store_id:Number(this.commonFc.store_id.value),reception_employee_id:Number(this.commonFc.reception_employee_id.value),reception_date:new Date(String(this.commonFc.reception_date.value)).toLocaleString(),remarks_1:this.commonFc.remarks_1.value?this.commonFc.remarks_1.value:"",remarks_2:this.commonFc.remarks_2.value?this.commonFc.remarks_2.value:"",mobile_number:this.commonFc.mobile_number.value?this.commonFc.mobile_number.value:"",status_division_id:Number(this.commonFc.status_division_id.value),incident_division_id:Number(this.commonFc.incident_division_id.value),settle_status_division_id:Number(this.commonFc.settle_status_division_id.value),customer_type_division_id:Number(this.commonFc.customer_type_division_id.value),rental:[...t],send_sms_flg:this.selectedSMS,processing_units:this.processingUnitsPostValue,shipping_address:""};if(this.commonFc.customer_type_division_id.value===String(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_MEMBER))i.member_id=Number(this.memberFc.member_id.value),i.shipping_address=this.memberFc.shipping_address.value?this.memberFc.shipping_address.value:"";else if(this.commonFc.customer_type_division_id.value===String(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_CLIENT))i.client_id=Number(this.clientFc.client_id.value),i.shipping_address=this.clientFc.shipping_address.value?this.clientFc.shipping_address.value:"";else{if(this.commonFc.customer_type_division_id.value!==String(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_GENERAL))return void alert("\u304a\u5ba2\u69d8\u30bf\u30a4\u30d7\u533a\u5206\u304c\u672a\u9078\u629e\u3067\u3059");i.identification_document_confirmation_date=this.generalFc.identification_document_confirmation_date.value?this.generalFc.identification_document_confirmation_date.value:"",i.first_name=this.generalFc.first_name.value?this.generalFc.first_name.value:"",i.first_name_kana=this.generalFc.first_name_kana.value?this.generalFc.first_name_kana.value:"",i.last_name=this.generalFc.last_name.value?this.generalFc.last_name.value:"",i.last_name_kana=this.generalFc.last_name_kana.value?this.generalFc.last_name_kana.value:"",i.tel=this.generalFc.tel.value?this.generalFc.tel.value:"",i.shipping_address=this.generalFc.shipping_address.value?this.generalFc.shipping_address.value:""}this.common.loading=!0,this.commonForm.markAsPristine(),this.clientForm.markAsPristine(),this.memberForm.markAsPristine(),this.subscription.add(this.rentalSlipService.add(i).pipe((0,k.K)(r=>(0,b.of)(r)),(0,L.x)(()=>this.common.loading=!1)).subscribe(r=>{if(r instanceof R.UA)return this.handleError(r.status,r.error?r.error.title:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",r.error?r.error.message:r.message),this.common.loading=!1,this.commonForm.markAsDirty(),this.memberForm.markAsDirty(),void this.clientForm.markAsDirty();this.setProductItemStatus(this.PRODUCT_STATUS_DIVISION_RESERVED);let o=this.listPagePath+"/detail/"+String(r.message);this.router.navigateByUrl(o)}))}getLastAddRentalSlip(t){this.subscription.add(this.rentalSlipService.getAll({customer_type_division_id:t.customer_type_division_id,incident_division_id:t.incident_division_id,member_id:t.member_id,mobile_number:t.mobile_number,processing_units:t.processing_units,reception_date:t.reception_date,reception_employee_id:t.reception_employee_id,settle_status_division_id:t.settle_status_division_id,shipping_address:t.shipping_address,store_id:t.store_id}).pipe((0,k.K)(r=>(0,b.of)(r)),(0,L.x)(()=>this.common.loading=!1)).subscribe(r=>{if(this.common.loading=!1,r.data[0].id)if(r.data[0].id){let o=this.listPagePath+"/detail/"+String(r.data[0].id);this.router.navigateByUrl(o)}else this.router.navigateByUrl(this.listPagePath)}))}setProductItemStatus(t){if(0==this.update_product_item.length)return!1;for(let i in this.update_product_item)this.update_product_item[i].status_division_id=t,this.updateProductItemStatus(this.update_product_item[i]);return!0}updateProductItemStatus(t){this.subscription.add(this.rentalProductService.update(t.id,t).pipe((0,k.K)(i=>(0,b.of)(i)),(0,L.x)(()=>this.common.loading=!1)).subscribe(i=>{i instanceof R.UA&&this.handleError(i.status,i.error?i.error.title:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",i.error?i.error.message:i.message)}))}getDivisionSelectOption(t,i){const r=t[i];return r.length<1&&this.handleError(400,this.errorModalTitle,C.yR.BODY.HAS_ERROR),[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...r]}_setDivisions(t){this.RENTAL_SLIP_INITIAL_STATUS_ACCEPTED=this.dIService.getDivisionid(t,D.z.RENTAL_SLIP_STATUS,A.STATUS_CODE.ACCEPTED),this.RENTAL_SLIP_INITIAL_SETTLE_STATUS_DIVISION_UNSETTLED=this.dIService.getDivisionid(t,D.z.SETTLE_STATUS,A.SETTLE_STATUS_DIVISION.CODE.UNSETTLED),this.RENTAL_SLIP_INITIAL_INCIDENT_DIVISION_NO_INCIDENTS=this.dIService.getDivisionid(t,D.z.INCIDENT,A.INCIDENT_DIVISION.CODE.NO_INCIDENTS),this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_MEMBER=this.dIService.getDivisionid(t,D.z.CUSTOMER_TYPE,A.CUSTOMER_TYPE_DIVISION.CODE.MEMBER),this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_CLIENT=this.dIService.getDivisionid(t,D.z.CUSTOMER_TYPE,A.CUSTOMER_TYPE_DIVISION.CODE.CLIENT),this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_GENERAL=this.dIService.getDivisionid(t,D.z.CUSTOMER_TYPE,A.CUSTOMER_TYPE_DIVISION.CODE.GENERAL),this.PRODUCT_STATUS_DIVISION_RENTABLE=this.dIService.getDivisionid(t,D.z.RENTAL_PRODUCT_STATUS,Y.q.STATUS_CODE.RENTABLE),console.log(this.PRODUCT_STATUS_DIVISION_RENTABLE),this.PRODUCT_STATUS_DIVISION_RESERVED=this.dIService.getDivisionid(t,D.z.RENTAL_PRODUCT_STATUS,Y.q.STATUS_CODE.RESERVED),this.PRODUCT_STATUS_DIVISION_LENDING=this.dIService.getDivisionid(t,D.z.RENTAL_PRODUCT_STATUS,Y.q.STATUS_CODE.RENTED),this.PRODUCT_STATUS_DIVISION_RETURNED=this.dIService.getDivisionid(t,D.z.RENTAL_PRODUCT_STATUS,Y.q.STATUS_CODE.RETURNED),this.DATA_PERMISSION_DIVISION_ID_PUBLIC=this.dIService.getDivisionid(t,D.z.DATA_PERMISSION,_e.s.DATA_PERMISSION.CODE.PUBLIC),this.DELIVERY_REQUEST_DIVISION_ID_NO_DELIVERY=this.dIService.getDivisionid(t,D.z.DELIVERY_REQUEST,oe.L.DELIVERY_REQUEST.CODE.NO_DELIVERY),this.COLLECTION_REQUEST_DIVISION_ID_NO_COLLECTION=this.dIService.getDivisionid(t,D.z.COLLECTION_REQUEST,oe.L.COLLECTION_REQUEST.CODE.NO_COLLECTION),this.settleStatusDivisionOptions=this.getDivisionSelectOption(t,D.z.SETTLE_STATUS),this.incidentDivisionOptions=this.getDivisionSelectOption(t,D.z.INCIDENT),this.statusDivisionOptions=this.getDivisionSelectOption(t,D.z.RENTAL_SLIP_STATUS),this.customerTypes=this.getDivisionSelectOption(t,D.z.CUSTOMER_TYPE)}_setHiddenValue(){this._setStatusDivisionId(this.commonFc),this._setIncidentDivisionId(this.commonFc),this._setSettleStatusDivisionId(this.commonFc)}_setStatusDivisionId(t){const i=this.statusDivisionOptions.find(r=>r.text===this.rsConst.STATUS.ACCEPTED);t.status_division_id.patchValue(i?.value)}_setIncidentDivisionId(t){const i=this.incidentDivisionOptions.find(r=>r.text===this.rsConst.INCIDENT_DIVISION.VALUE.NO_INCIDENTS);t.incident_division_id.patchValue(i?.value)}_setSettleStatusDivisionId(t){const i=this.settleStatusDivisionOptions.find(r=>r.text===this.rsConst.SETTLE_STATUS_DIVISION.VALUE.UNSETTLED);t.settle_status_division_id.patchValue(i?.value)}confirmedIdentityVerificationDocuments(){if(!confirm("\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u304b\uff1f\n\u66f4\u65b0\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3053\u306e\u51e6\u7406\u306f\u53d6\u308a\u6d88\u305b\u307e\u305b\u3093\u3002"))return;let i;if(this.selectedCustomer.customer_type_code===this.DIVISION_CUSTOMER_CODE_MEMBER){{if(null==this.selectedMember||0===Object.keys(this.selectedMember).length)return void alert("\u304a\u5ba2\u69d8\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f");const r=(new Date).toLocaleString(),o={member_cd:this.selectedMember.member_cd,last_name:this.selectedMember.last_name,first_name:this.selectedMember.first_name,last_name_kana:this.selectedMember.last_name_kana,first_name_kana:this.selectedMember.first_name_kana,postal_code:this.selectedMember.postal_code,province:this.selectedMember.province,locality:this.selectedMember.locality,street_address:this.selectedMember.street_address,other_address:this.selectedMember.other_address,tel:this.selectedMember.tel,mail:this.selectedMember.mail,point:this.selectedMember.point,status_division_id:this.selectedMember.status_division_id,remarks_1:this.selectedMember.remarks_1,remarks_2:this.selectedMember.remarks_2,identification_document_confirmation_date:r};this.selectedMember.identification_document_confirmation_date=r,i=this.memberService.update(this.selectedMember.id,o)}this.updateCustomerData(i)}else alert("\u304a\u5ba2\u69d8\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f")}getClientSuggests(){return{observable:this.clientService.getAll({name:this.clientFc.client_name.value}),idField:"id",nameField:"name"}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(et.Y),e.Y36(S.Z),e.Y36(V.F0),e.Y36(tt.d),e.Y36(xe.y),e.Y36(Se.n),e.Y36(Ce.G),e.Y36(Te.E),e.Y36(N.T),e.Y36(Fe),e.Y36(be.P),e.Y36(nt.T),e.Y36(it.G),e.Y36(rt.i),e.Y36(Oe.h),e.Y36(de.b),e.Y36(ue.m),e.Y36(P.v),e.Y36(at.J))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add"]],decls:61,vars:62,consts:[[3,"breadcrumbList"],[1,"mb-8"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"cursor-pointer",3,"click"],[1,"text-lg","font-semibold"],[3,"roleTypeName"],[1,"width-limit-break","border-t","border-gray-400"],[1,"mt-8","py-6","bg-white","shadow","border","border-gray-300","border-t-primary-light","border-t-4","rounded-b-md"],[1,"px-6","pb-1","flex","justify-between","items-end"],[1,"items-end"],[1,"px-6"],[1,"mt-4","px-6","flex","gap-4"],[1,"w-2/4"],[1,"flex","gap-4"],[1,"w-3/5"],["nameAttrValue","reception_employee_id","idAttrValue","reception-employee-id",3,"formCtrl","options","invalid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["message","",4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-2/5"],["nameAttrValue","get_reception_employee_by_id","idAttrValue","get-reception-employee-by-id",3,"formCtrl","invalid"],[1,"w-1/4"],["nameAttrValue","reception_date","idAttrValue","reception-date",3,"formCtrl","invalid"],["nameAttrValue","store_id","idAttrValue","store-id",3,"formCtrl","options","invalid"],[1,"mt-6","px-6","flex"],[1,"w-1/3"],["nameAttrValue","customer_type_division_id","idAttrValue","customer-type-division-id",3,"options","formCtrl","invalid","change"],[4,"ngIf"],["labels",""],["errors",""],["fullWidthKatakana",""],["eitherRequiredErrors",""],["telAndMobileNumber",""],["dateErrors",""],["message",""],[1,"flex","w-1/4","px-6","pt-9"],[1,"block","relative","pl-6","cursor-pointer"],["type","checkbox","nameAttrValue","send_sms_flg","idAttrValue","send-sms-flg","name","send_sms_flg",1,"w-4","h-4","cursor-pointer","absolute","top-0","bottom-0","left-0","m-auto",3,"checked","change"],[4,"ngFor","ngForOf"],["type","radio",1,"w-4","h-4","cursor-pointer","absolute","top-0","bottom-0","left-1","m-auto",3,"checked","id","name","value","change"],[1,"mt-6","px-6","flex","gap-4","flex"],["class","mt-4 flex w-2/3",4,"ngIf"],["class","mt-6 px-6 flex gap-4",4,"ngIf"],[1,"flex","gap-4","mt-6","px-6"],[1,"w-1/2"],["nameAttrValue","remarks_1","idAttrValue","remarks-1",3,"formCtrl","invalid"],["nameAttrValue","remarks_2","idAttrValue","remarks-2",3,"formCtrl","invalid"],[1,"mt-2","px-6"],[1,"text-primary-light","text-sm"],[1,"mt-4","flex","w-2/3"],["nameAttrValue","api_member_cd","idAttrValue","api-member-cd",3,"idCtrl","nameCtrl","apiInput","selectedData"],[1,"w-1/3","px-6"],["nameAttrValue","api_member_tel","idAttrValue","api-member-tel",3,"idCtrl","nameCtrl","apiInput","selectedData"],[1,"w-4/5"],["nameAttrValue","client_name","idAttrValue","client_id",3,"idCtrl","nameCtrl","apiInput","selectedData"],[1,"flex","items-center","gap-2"],[1,"text-sm"],[1,"ml-1","px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],[1,"mt-6","px-6","flex","gap-4"],[1,"w-[59%]"],[4,"ngIf","ngIfElse"],["noCustomerInfoSelected",""],[1,"mt-1","p-2","text-gray-800","border","border-gray-300","rounded-md","bg-blue-100"],["idConfirmed",""],[1,"text-danger","font-semibold"],[1,"mt-1","p-2","text-gray-500","border","border-gray-300","rounded-md","bg-blue-100"],["class","1/4 mt-7",4,"ngIf"],[1,"1/4","mt-7"],[3,"click"],["nameAttrValue","last_name","idAttrValue","last-name",3,"formCtrl","invalid"],["nameAttrValue","first_name","idAttrValue","first-name",3,"formCtrl","invalid"],["nameAttrValue","tel","idAttrValue","tel",3,"formCtrl","invalid"],["nameAttrValue","last_name_kana","idAttrValue","last-name-kana",3,"formCtrl","invalid"],["nameAttrValue","first_name_kana","idAttrValue","first-name-kana",3,"formCtrl","invalid"],["nameAttrValue","mobile_number","idAttrValue","mobile-number",3,"formCtrl","invalid"],[1,"w-2/3"],["nameAttrValue","shipping_address","idAttrValue","shipping-address",3,"formCtrl","invalid"],[1,"1/3","px-6","pt-9"],[3,"formCtrl","invalid","change"],[1,"w-4/6"],[1,"mt-6","px-6"],[3,"formGroup"],["formGroupName","bulkScheduledDateGroup"],["nameAttrValue","bulk_scheduled_rental_date","idAttrValue","bulk-scheduled-rental-date",3,"formCtrl","invalid"],["nameAttrValue","bulk_scheduled_return_date","idAttrValue","bulk-scheduled-return-date",3,"formCtrl","invalid"],[1,"mt-3","py-6","bg-white","shadow","border","border-gray-300","rounded-b-md"],[1,"px-6","flex","justify-between","items-end"],["nameAttrValue","display_start_date","idAttrValue","display-start-date",3,"formCtrl","invalid"],[1,"mt-2"],[1,"mt-6","px-6","flex","justify-between"],[1,"flex","gap-2"],[3,"buttonDisabled","click"],[1,"flex","justify-end","gap-8","items-end"],[1,"flex","gap-6"],[1,"flex","gap-1"],[1,"my-4","px-6","flex","transition-all","duration-500","ease-linear",3,"ngClass"],["nameAttrValue","product_name","idAttrValue","product-name","targetOptionData","text",3,"fc","apiInput","invalid","buttonDisabled","idValueChanges","selectedData"],["nameAttrValue","product_id","idAttrValue","product-id","targetOptionData","text",3,"fc","apiInput","invalid","buttonDisabled","idValueChanges","selectedData"],[1,"mt-2","mx-6","pb-3","flex","relative","overflow-x-hidden"],[1,"absolute","top-0","w-[300px]","min-w-[300px]","transition-transform","duration-500","ease-in-out","transform","border","border-gray-200","shadow-md","rounded-b-md",3,"ngClass"],[1,"sticky","top-0","w-[300px]","min-w-[300px]","flex","justify-between","bg-iron-blue-400","px-4","py-2","items-center"],["icon","arrow-left-s-line",1,"w-6","h-6x",3,"ngClass","click"],["icon","arrow-left-s-line",1,"w-6","h-6x","opacity-0","cursor-none"],[1,"absolute","top-[40px]","max-h-[453px]","w-[300px]","min-w-[300px]","overflow-y-auto","border","border-gray-200","shadow-md","rounded-b-md"],[1,"transition-all","duration-500","ease-in-out",3,"ngClass"],[1,"overflow-x-auto","transition-all","duration-500","ease-in-out","mx-1","shadow-md","rounded-b-md","border-t","border-slate-100","relative"],[1,"rental-reservation-table",2,"z-index","1"],[1,"w-full","border-collapse",2,"z-index","1"],[1,"border","border-slate-200","text-sm","font-normal","px-2","py-1"],[1,"border","border-slate-200","text-left","text-sm","font-normal","px-2","py-1","w-[300px]"],[1,"border","border-slate-200","text-sm","font-normal","px-2","py-1","w-[140px]",3,"hidden"],[1,"border","border-slate-200","text-sm","font-normal","px-2","py-1","w-[140px]"],["formArrayName","forms"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],[1,"border","border-slate-200","text-sm","text-center","px-2","py-1"],[1,"border","border-slate-200","text-sm","px-2","py-1"],[1,"border","border-slate-200","text-sm","text-center","px-2","py-1",3,"hidden"],["formGroupName","scheduledDateGroup"],["nameAttrValue","scheduled_rental_date","idAttrValue","scheduled-rental-date",3,"formCtrl","invalid"],["nameAttrValue","delivery_division_id","idAttrValue","delivery-division-id",3,"formCtrl","options","invalid"],["nameAttrValue","collection_division_id","idAttrValue","collection-division-id",3,"formCtrl","options","invalid"],[1,"flex","justify-center"],["icon","delete-bin-line","appendClassForIcon","cursor-pointer fill-danger group-hover:fill-danger-hover",1,"h-6","w-6",3,"click"],["nameAttrValue","scheduled_return_date","idAttrValue","scheduled-return-date",3,"formCtrl","invalid"],[1,"block","relative","pl-6","cursor-pointer",3,"ngClass"],["type","radio",1,"w-4","h-4","absolute","top-0","bottom-0","left-0","m-auto","cursor-pointer",3,"checked","id","name","value","disabled","ngClass","change"],[1,"flex","justify-between","px-4","py-2","border-t","border-iron-blue-300","cursor-pointer","bg-white","even:bg-iron-blue-100","hover:bg-iron-blue-200","hover:transition-all","duration-300",3,"ngClass","click"],["icon","arrow-right-s-line","class","w-6 h-6",4,"ngIf"],["icon","arrow-right-s-line",1,"w-6","h-6"],[1,"rental-reservation-table-header"],[3,"ngClass"],[1,"flex"],[1,"rental-reservation-table-body"],["normalColumn",""],["type","checkbox",1,"w-4","h-4","absolute","top-0","bottom-0","left-0","right-0","m-auto","cursor-pointer",3,"change"],[1,"width-limit-break","bg-primary-light","flex","flex-row","justify-center","bottom-[40px]","left-0","right-0","p-2","fixed","gap-8",2,"z-index","2"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",3,"buttonDisabled","click"],["class","px-3 py-0.5 text-xs text-white bg-warning-dark rounded-full",4,"ngIf"],[1,"px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],["class","mt-1 pl-1 text-sm text-red",4,"ngIf"],[1,"mt-1","pl-1","text-sm","text-red"]],template:function(t,i){if(1&t&&(e._UZ(0,"app-breadcrumb-org",0),e.TgZ(1,"main",1)(2,"div",2)(3,"div",3),e.NdJ("click",function(){return i.handleClickCancel()}),e._UZ(4,"app-cancel-link-org"),e.qZA(),e.TgZ(5,"div")(6,"h1",4),e._uU(7,"\u30ec\u30f3\u30bf\u30eb\u4e88\u7d04\u65b0\u898f\u53d7\u4ed8"),e.qZA()(),e.TgZ(8,"div")(9,"app-last-updater-org",5),e._uU(10),e.qZA()()(),e._UZ(11,"hr",6),e.TgZ(12,"div",7)(13,"form")(14,"div",8)(15,"div")(16,"h2",9),e._uU(17,"\u4e88\u7d04\u60c5\u5831\u5165\u529b"),e.qZA()()(),e.TgZ(18,"div",10),e._UZ(19,"hr"),e.qZA(),e.TgZ(20,"div",11)(21,"div",12)(22,"div",13)(23,"div",14)(24,"app-select-container",15),e.YNc(25,tn,1,0,"ng-container",16),e.YNc(26,nn,1,0,"ng-container",17),e.qZA()(),e.TgZ(27,"div",18)(28,"app-text-container",19),e.YNc(29,rn,1,0,"ng-container",16),e.YNc(30,an,1,0,"ng-container",17),e.qZA()()()(),e.TgZ(31,"div",20)(32,"app-date-term",21),e.YNc(33,on,1,0,"ng-container",16),e.YNc(34,sn,1,0,"ng-container",17),e.qZA()(),e.TgZ(35,"div",20)(36,"app-select-container",22),e.YNc(37,ln,1,0,"ng-container",16),e.YNc(38,_n,1,0,"ng-container",17),e.qZA()()(),e.TgZ(39,"div",23)(40,"div",24)(41,"app-select-container",25),e.NdJ("change",function(){return i.resetCustomerInfo()}),e.YNc(42,un,1,0,"ng-container",16),e.YNc(43,dn,1,0,"ng-container",17),e.qZA()(),e.YNc(44,pn,9,2,"ng-container",26),e.qZA(),e.YNc(45,pi,20,23,"div",26),e.qZA(),e.YNc(46,gi,3,1,"div",26),e.qZA(),e.YNc(47,Vi,59,46,"div",26),e.YNc(48,Gi,4,3,"ng-container",26),e.qZA(),e.YNc(49,Yi,4,2,"ng-template",null,27,e.W1O),e.YNc(51,ji,1,1,"ng-template",null,28,e.W1O),e.YNc(53,$i,1,1,"ng-template",null,29,e.W1O),e.YNc(55,tr,1,1,"ng-template",null,30,e.W1O),e.YNc(57,sr,1,1,"ng-template",null,31,e.W1O),e.YNc(59,_r,1,1,"ng-template",null,32,e.W1O)),2&t){const r=e.MAs(50),o=e.MAs(52);e.Q6J("breadcrumbList",e.WLB(44,cr,e.VKq(41,ur,i.listPagePath),e.DdM(43,dr))),e.xp6(9),e.Q6J("roleTypeName",i.authorRole?i.authorRole:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."),e.xp6(1),e.hij(" \u767b\u9332\u8005\uff1a",i.authorName?i.authorName:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),e.xp6(14),e.Q6J("formCtrl",i.commonFc.reception_employee_id)("options",i.employeeSuggests)("invalid",i.formControlStateManager(i.commonFc.reception_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.DdM(47,pr)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(48,W,i.commonFc.reception_employee_id)),e.xp6(2),e.Q6J("formCtrl",i.getEmployeeByIdFc.get_reception_employee_by_id)("invalid",i.formControlStateManager(i.getEmployeeByIdFc.get_reception_employee_by_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.DdM(50,mr)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(51,W,i.getEmployeeByIdFc.get_reception_employee_by_id)),e.xp6(2),e.Q6J("formCtrl",i.commonFc.reception_date)("invalid",i.formControlStateManager(i.commonFc.reception_date)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.DdM(53,gr)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(54,W,i.commonFc.reception_date)),e.xp6(2),e.Q6J("formCtrl",i.commonFc.store_id)("options",i.storeSuggests)("invalid",i.formControlStateManager(i.commonFc.store_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.DdM(56,hr)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(57,W,i.commonFc.store_id)),e.xp6(3),e.Q6J("options",i.customerTypes)("formCtrl",i.commonFc.customer_type_division_id)("invalid",i.simpleFormControlStateManager(i.commonFc.customer_type_division_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.DdM(59,fr)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(60,ne,i.commonFc.customer_type_division_id)),e.xp6(1),e.Q6J("ngIf",i.selectedCustomerCode),e.xp6(1),e.Q6J("ngIf",i.selectedCustomerCode),e.xp6(1),e.Q6J("ngIf",i.selectedCustomerCode),e.xp6(1),e.Q6J("ngIf",i.selectedCustomerCode),e.xp6(1),e.Q6J("ngIf",i.customerType)}},dependencies:[x.mk,x.sg,x.O5,x.tP,l._Y,l.JL,l.sg,l.x0,l.CE,fe.Z,ot.K,ye.R,Ne.a,Re.O,ke.t,ce.d,pe.r,Ze.J,Kt.Y,Me,Ae.o,st.Q,lt.H,_t.b,x.JJ,x.Nd],styles:[".search-panel-height[_ngcontent-%COMP%]{max-height:88px}.rental-reservation-table[_ngcontent-%COMP%]{height:500px;min-height:500px;max-height:500px;position:relative}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-header[_ngcontent-%COMP%]{display:inline-flex;position:sticky;top:0;left:0;z-index:20}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-top:1px solid #d1d5db;border-bottom:1px solid #d1d5db;border-right:1px solid #d1d5db;background-color:#fff}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{border-left:1px solid #d1d5db!important}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-body[_ngcontent-%COMP%]{display:inline-flex}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-bottom:1px solid #d1d5db;border-right:1px solid #d1d5db}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{border-left:1px solid #d1d5db!important}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-body[_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%]{background-color:#f1f5f9}"]}),n})();var Tr=u(5861),vr=u(247),Er=u(2398),Dr=u(9586),xr=u(4720),Sr=u(460);function Ar(n,a){1&n&&e.GkF(0)}function Ir(n,a){1&n&&e.GkF(0,49)}function Fr(n,a){1&n&&e.GkF(0)}function br(n,a){1&n&&e.GkF(0)}function Or(n,a){1&n&&e.GkF(0)}function yr(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(2),e.hij("\u53d7\u4ed8\u7968\u756a\u53f7\uff1a",t.rs.id,"")}}function Nr(n,a){if(1&n&&(e.ynx(0),e.YNc(1,yr,3,1,"ng-container",41),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.disabledRentalTodayButton())}}function Rr(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(2),e.hij("\u53d7\u4ed8\u7968\u756a\u53f7\uff1a",t.rs.id,"")}}function kr(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Rr,3,1,"ng-container",41),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.detailUnitdisabledRentalTodayButton())}}function Zr(n,a){1&n&&e.GkF(0)}function Mr(n,a){1&n&&e.GkF(0)}function Ur(n,a){1&n&&e.GkF(0)}function Lr(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"app-barcode",50),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("value",t.barcodeValue)}}function Br(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Lr,2,1,"ng-container",41),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.disabledRentalTodayButton())}}function qr(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"app-barcode",50),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("value",t.barcodeValue)}}function Vr(n,a){if(1&n&&(e.ynx(0),e.YNc(1,qr,2,1,"ng-container",41),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.detailUnitdisabledRentalTodayButtonBarcode())}}function Qr(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Br,2,1,"ng-container",41),e.YNc(2,Vr,2,1,"ng-container",41),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.rs.processing_units),e.xp6(1),e.Q6J("ngIf","1"===(null==t.rs.processing_units?null:t.rs.processing_units.toString()))}}function Pr(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"app-barcode",50),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("value",t.barcodeValue)}}function wr(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Pr,2,1,"ng-container",41),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.disabledRentalTodayButton())}}function Gr(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"app-barcode",50),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("value",t.barcodeValue)}}function Jr(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Gr,2,1,"ng-container",41),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.selectedCustomerStatus.rental_employee_id&&t.selectedCustomerStatus.reception_tag)}}function Yr(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p",51),e._uU(2),e.qZA(),e.TgZ(3,"p",52),e._uU(4,"\u91d1\u7269\u30fb\u5efa\u8a2d\u30fb\u8fb2\u5712\u8cc7\u6750\u306e\u5c02\u9580\u5e97"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.TgZ(9,"p",53),e._uU(10),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.basicInformation.name),e.xp6(4),e.AsE("TEL : ",t.companyTel,"\u3000FAX : ",t.companyFax,""),e.xp6(2),e.AsE("\u3012",t.companyPostalCode," ",t.companyAddress,""),e.xp6(2),e.hij(" \u4ee3\u8868\u53d6\u7de0\u5f79\u3000",t.basicInformation.representative_name," "),e.xp6(2),e.hij("\u62c5\u5f53\uff1a",t.receptionEmployeeFullName,"")}}function Kr(n,a){1&n&&e.GkF(0)}function Hr(n,a){1&n&&e.GkF(0,49)}function jr(n,a){1&n&&e.GkF(0)}function zr(n,a){1&n&&e.GkF(0,49)}const se=function(){return{label:"\u8cb8\u51fa\u62c5\u5f53\u8005",required:!0}},Q=function(n){return{fc:n}},$=function(){return{label:"\u793e\u54e1ID\u3067\u9078\u629e",required:!1}};function Wr(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",55)(2,"app-select-container",56),e.YNc(3,Kr,1,0,"ng-container",28),e.YNc(4,Hr,1,0,"ng-container",29),e.qZA(),e.TgZ(5,"app-text-container",57),e.YNc(6,jr,1,0,"ng-container",28),e.YNc(7,zr,1,0,"ng-container",29),e.qZA()(),e.TgZ(8,"div",58)(9,"app-button",59),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.rentalToday())}),e._uU(10,"\u8cb8\u51fa\uff08\u5f53\u65e5\uff09"),e.qZA()(),e._UZ(11,"div",45),e.BQk()}if(2&n){const t=e.oxw(3),i=e.MAs(32),r=e.MAs(34);e.xp6(2),e.Q6J("formCtrl",t.bulkFc.rental_employee_id)("options",t.employeeSuggests)("invalid",t.formControlStateManager(t.bulkFc.rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(14,se)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(15,Q,t.bulkFc.rental_employee_id)),e.xp6(1),e.Q6J("formCtrl",t.getEmployeeByIdFcRental.get_rental_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(17,$)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(18,Q,t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(2),e.Q6J("buttonDisabled",t.disabledRentalTodayButton())}}function $r(n,a){1&n&&e.GkF(0)}function Xr(n,a){1&n&&e.GkF(0,49)}function ea(n,a){1&n&&e.GkF(0)}function ta(n,a){1&n&&e.GkF(0,49)}function na(n,a){1&n&&e.GkF(0)}function ia(n,a){1&n&&e.GkF(0,49)}function ra(n,a){1&n&&e.GkF(0)}function aa(n,a){1&n&&e.GkF(0,49)}function oa(n,a){1&n&&e.GkF(0)}function sa(n,a){1&n&&e.GkF(0,49)}const Le=function(){return{label:"\u8fd4\u5374\u62c5\u5f53\u8005",required:!0}},Be=function(){return{label:"\u5ef6\u6ede\u5831\u544a",required:"true"}},Z=function(n){return{ctrl:n}};function la(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",55)(2,"app-select-container",60),e.YNc(3,$r,1,0,"ng-container",28),e.YNc(4,Xr,1,0,"ng-container",29),e.qZA(),e._uU(5," \xa0 "),e.TgZ(6,"app-text-container",61),e.YNc(7,ea,1,0,"ng-container",28),e.YNc(8,ta,1,0,"ng-container",29),e.qZA()(),e.TgZ(9,"div",55)(10,"app-select-container",62),e.YNc(11,na,1,0,"ng-container",28),e.YNc(12,ia,1,0,"ng-container",29),e.qZA(),e._uU(13," \xa0 "),e.TgZ(14,"app-text-container",63),e.YNc(15,ra,1,0,"ng-container",28),e.YNc(16,aa,1,0,"ng-container",29),e.qZA()(),e.TgZ(17,"div",64)(18,"app-select-container",65),e.YNc(19,oa,1,0,"ng-container",28),e.YNc(20,sa,1,0,"ng-container",29),e.qZA()(),e._UZ(21,"div",64),e.BQk()),2&n){const t=e.oxw(3),i=e.MAs(32),r=e.MAs(34);e.xp6(2),e.Q6J("formCtrl",t.bulkFc.rental_employee_id)("options",t.employeeSuggests)("invalid",t.formControlStateManager(t.bulkFc.rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(33,se)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(34,Q,t.bulkFc.rental_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.getEmployeeByIdFcRental.get_rental_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(36,$)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(37,Q,t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.bulkFc.return_employee_id)("options",t.employeeSuggests)("invalid",t.formControlStateManager(t.bulkFc.return_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(39,Le)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(40,Q,t.bulkFc.return_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.getEmployeeByIdFcReturn.get_return_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcReturn.get_return_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(42,$)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(43,Q,t.getEmployeeByIdFcReturn.get_return_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.bulkFc.late_return_reported)("options",t.lateReturnReportedOptions)("invalid",t.formControlStateManager(t.bulkFc.late_return_reported)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(45,Be)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(46,Z,t.bulkFc.late_return_reported))}}function _a(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",54),e.YNc(2,Wr,12,20,"ng-container",41),e.YNc(3,la,22,48,"ng-container",41),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",!t.rentalItemStatus),e.xp6(1),e.Q6J("ngIf",t.rentalItemStatus)}}function ua(n,a){1&n&&e.GkF(0)}function da(n,a){1&n&&e.GkF(0,49)}function ca(n,a){1&n&&e.GkF(0)}function pa(n,a){1&n&&e.GkF(0,49)}function ma(n,a){1&n&&e.GkF(0)}function ga(n,a){1&n&&e.GkF(0)}function ha(n,a){1&n&&e.GkF(0,49)}function fa(n,a){1&n&&e.GkF(0)}function Ca(n,a){1&n&&e.GkF(0,49)}const Ta=function(){return{label:"\u8fd4\u5374\u65e5",required:!1}};function va(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",67)(2,"app-date-term",74),e.YNc(3,fa,1,0,"ng-container",28),e.YNc(4,Ca,1,0,"ng-container",29),e.qZA()(),e.BQk()),2&n){const t=e.oxw(3),i=e.MAs(32),r=e.MAs(34);e.xp6(2),e.Q6J("formCtrl",t.bulkFc.dateGroup.controls.return_date)("invalid",t.formControlStateManager(t.bulkFc.dateGroup.controls.return_date)||(null==t.bulkFc.dateGroup.errors?null:t.bulkFc.dateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(6,Ta)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(7,Z,t.bulkFc.dateGroup.controls.return_date))}}function Ea(n,a){1&n&&(e.ynx(0),e._UZ(1,"div",67),e.BQk())}function Da(n,a){1&n&&e.GkF(0)}function xa(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",75)(2,"app-button",76),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.returnToday())}),e._uU(3,"\u8fd4\u5374\uff08\u5f53\u65e5\uff09"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("buttonDisabled",t.disabledReturnTodayButton())}}const Ee=function(){return{label:"\u8cb8\u51fa\u4e88\u5b9a\u65e5",required:!0}},De=function(){return{label:"\u8fd4\u5374\u4e88\u5b9a\u65e5",required:!0}},ie=function(n){return{ctrls:n}},Sa=function(){return{label:"\u8cb8\u51fa\u65e5",required:!1}};function Aa(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",54)(2,"div",45)(3,"div",66)(4,"div",67)(5,"app-date-term",68),e.YNc(6,ua,1,0,"ng-container",28),e.YNc(7,da,1,0,"ng-container",29),e.qZA()(),e.TgZ(8,"div",67)(9,"app-date-term",69),e.YNc(10,ca,1,0,"ng-container",28),e.YNc(11,pa,1,0,"ng-container",29),e.qZA()()(),e.YNc(12,ma,1,0,"ng-container",28),e.qZA(),e.TgZ(13,"div",45)(14,"div",66)(15,"div",67)(16,"app-date-term",70),e.YNc(17,ga,1,0,"ng-container",28),e.YNc(18,ha,1,0,"ng-container",29),e.qZA()(),e.YNc(19,va,5,9,"ng-container",41),e.YNc(20,Ea,2,0,"ng-container",41),e.qZA(),e.YNc(21,Da,1,0,"ng-container",28),e.qZA(),e.TgZ(22,"div",55),e.YNc(23,xa,4,1,"ng-container",41),e.TgZ(24,"div",71)(25,"app-button",72),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onClickBulkFormReset())}),e._uU(26,"\u30af\u30ea\u30a2"),e.qZA(),e.TgZ(27,"app-button",73),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.bulkSave())}),e._uU(28,"\u4fdd\u5b58"),e.qZA()()()(),e.BQk()}if(2&n){const t=e.oxw(2),i=e.MAs(32),r=e.MAs(34),o=e.MAs(38);e.xp6(5),e.Q6J("formCtrl",t.bulkFc.scheduledDateGroup.controls.scheduled_rental_date)("invalid",t.formControlStateManager(t.bulkFc.scheduledDateGroup.controls.scheduled_rental_date)||(null==t.bulkFc.scheduledDateGroup.errors?null:t.bulkFc.scheduledDateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(26,Ee)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(27,Z,t.bulkFc.scheduledDateGroup.controls.scheduled_rental_date)),e.xp6(2),e.Q6J("formCtrl",t.bulkFc.scheduledDateGroup.controls.scheduled_return_date)("invalid",t.formControlStateManager(t.bulkFc.scheduledDateGroup.controls.scheduled_return_date)||(null==t.bulkFc.scheduledDateGroup.errors?null:t.bulkFc.scheduledDateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(29,De)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(30,Z,t.bulkFc.scheduledDateGroup.controls.scheduled_return_date)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(32,ie,t.bulkFc.scheduledDateGroup)),e.xp6(4),e.Q6J("formCtrl",t.bulkFc.dateGroup.controls.rental_date)("invalid",t.formControlStateManager(t.bulkFc.dateGroup.controls.rental_date)||(null==t.bulkFc.dateGroup.errors?null:t.bulkFc.dateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(34,Sa)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(35,Z,t.bulkFc.dateGroup.controls.rental_date)),e.xp6(1),e.Q6J("ngIf",t.rentalItemStatus),e.xp6(1),e.Q6J("ngIf",!t.rentalItemStatus),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(37,ie,t.bulkFc.dateGroup)),e.xp6(2),e.Q6J("ngIf",!t.boolean_return_date&&t.boolean_rental_date),e.xp6(4),e.Q6J("buttonDisabled",t.disabledBulkSaveButton())}}function Ia(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",94)(2,"app-icon-container",95),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,o=e.oxw(4);return e.KtG(o.editFormOpen(r))}),e.qZA()(),e.BQk()}}function Fa(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Ia,3,0,"ng-container",7),e.BQk()),2&n){const t=e.oxw(5),i=e.MAs(22);e.xp6(1),e.Q6J("ngIf",!t.addFormIsOpen)("ngIfElse",i)}}function ba(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-icon-container",96),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,o=e.oxw(4);return e.KtG(o.deleteRental(r.id))}),e.qZA(),e.BQk()}}function Oa(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",94),e.YNc(2,ba,2,0,"ng-container",41),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",!t.rental_date)}}function ya(n,a){1&n&&e.GkF(0)}function Na(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",85)(2,"div",97),e.YNc(3,ya,1,0,"ng-container",46),e.qZA()()()),2&n){const t=e.oxw().$implicit,i=e.oxw(4),r=e.MAs(28);e.xp6(3),e.Q6J("ngIf",!i.addFormIsOpen&&i.editFormIsOpen&&i.editTarget.id===t.id)("ngIfThen",r)}}const mt=function(n){return{"bg-slate-100":n}};function Ra(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"tr",88)(2,"td",89)(3,"div",90)(4,"p"),e._uU(5),e.qZA()()(),e.TgZ(6,"td",89)(7,"div",90)(8,"p"),e._uU(9),e.qZA()()(),e.TgZ(10,"td",89)(11,"div")(12,"p"),e._uU(13),e.qZA(),e.TgZ(14,"p",91),e._uU(15),e.qZA(),e.TgZ(16,"p",91),e._uU(17),e.qZA()()(),e.TgZ(18,"td",89)(19,"div",90)(20,"p"),e._uU(21),e.qZA()()(),e.TgZ(22,"td",89)(23,"div",92)(24,"p"),e._uU(25),e.qZA()()(),e.TgZ(26,"td",89)(27,"div",90)(28,"p"),e._uU(29),e.qZA()()(),e.TgZ(30,"td",89)(31,"div",90)(32,"p"),e._uU(33),e.qZA()()(),e.TgZ(34,"td",89)(35,"div",90)(36,"p"),e._uU(37),e.qZA()()(),e.TgZ(38,"td",89)(39,"div",90)(40,"p"),e._uU(41),e.qZA()()(),e.TgZ(42,"td",89)(43,"div",90)(44,"p"),e._uU(45),e.qZA()()(),e.TgZ(46,"td",89)(47,"div",90)(48,"p"),e._uU(49),e.qZA()()(),e.ynx(50),e.TgZ(51,"td",89)(52,"div",93),e.YNc(53,Fa,2,2,"ng-container",41),e.YNc(54,Oa,3,1,"ng-container",7),e.qZA()(),e.BQk(),e.qZA(),e.ynx(55),e.YNc(56,Na,4,2,"tr",41),e.BQk()()),2&n){const t=a.$implicit,i=e.oxw(4),r=e.MAs(24);e.xp6(1),e.Q6J("ngClass",e.VKq(18,mt,i.editTarget&&i.editTarget.id===t.id)),e.xp6(4),e.Oqu(t.id),e.xp6(4),e.Oqu(t.rental_product_id),e.xp6(4),e.Oqu(t.rental_product_name),e.xp6(2),e.hij(" ",t.remarks_1?"\u5099\u80031: "+t.remarks_1:""," "),e.xp6(2),e.hij(" ",t.remarks_2?"\u5099\u80032: "+t.remarks_2:""," "),e.xp6(4),e.Oqu(t.rental_item_count),e.xp6(4),e.hij("",t.rental_fee.toLocaleString()," \u5186"),e.xp6(4),e.Oqu(t.division_delivery_value),e.xp6(4),e.Oqu(t.division_collection_value),e.xp6(4),e.hij(" ",t.scheduled_rental_date," "),e.xp6(4),e.hij(" ",t.rental_date," "),e.xp6(4),e.hij(" ",t.scheduled_return_date," "),e.xp6(4),e.hij(" ",t.return_date," "),e.xp6(4),e.Q6J("ngIf",i.is_processing_units),e.xp6(1),e.Q6J("ngIf",!i.addFormIsOpen&&!i.editFormIsOpen)("ngIfElse",r),e.xp6(2),e.Q6J("ngIf",!i.addFormIsOpen&&i.editFormIsOpen&&i.editTarget.id===t.id)}}function ka(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Ra,57,20,"ng-container",84),e.TgZ(2,"tr")(3,"td",85)(4,"div",86),e._uU(5," \u5408\u8a08\u91d1\u984d\uff08\u7a0e\u8fbc\uff09 "),e.TgZ(6,"span",87),e._uU(7),e.qZA(),e._uU(8," \u5186 "),e.qZA()()(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.rentals),e.xp6(6),e.Oqu(t.totalAmount?t.totalAmount.toLocaleString():"")}}function Za(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"table",77)(2,"thead",78)(3,"th",79)(4,"div")(5,"p"),e._uU(6,"ID"),e.qZA()()(),e.TgZ(7,"th",79)(8,"div")(9,"p"),e._uU(10,"\u5546\u54c1ID"),e.qZA()()(),e.TgZ(11,"th",80)(12,"div")(13,"p"),e._uU(14,"\u54c1\u540d"),e.qZA()()(),e.TgZ(15,"th",79)(16,"div")(17,"p"),e._uU(18,"\u6570\u91cf"),e.qZA()()(),e.TgZ(19,"th",81)(20,"div")(21,"p"),e._uU(22,"\u6599\u91d1\uff08\u7a0e\u8fbc\uff09"),e.qZA()()(),e.TgZ(23,"th",82)(24,"div")(25,"p"),e._uU(26,"\u914d\u9001\u533a\u5206"),e.qZA()()(),e.TgZ(27,"th",82)(28,"div")(29,"p"),e._uU(30,"\u56de\u53ce\u533a\u5206"),e.qZA()()(),e.TgZ(31,"th",82)(32,"div")(33,"p"),e._uU(34,"\u8cb8\u51fa\u4e88\u5b9a\u65e5"),e.qZA()()(),e.TgZ(35,"th",82)(36,"div")(37,"p"),e._uU(38,"\u8cb8\u51fa\u65e5"),e.qZA()()(),e.TgZ(39,"th",82)(40,"div")(41,"p"),e._uU(42,"\u8fd4\u5374\u4e88\u5b9a\u65e5"),e.qZA()()(),e.TgZ(43,"th",82)(44,"div")(45,"p"),e._uU(46,"\u8fd4\u5374\u65e5"),e.qZA()()(),e.ynx(47),e.TgZ(48,"th",83)(49,"div")(50,"p"),e._uU(51,"\u64cd\u4f5c"),e.qZA()()(),e.BQk(),e.qZA(),e.TgZ(52,"tbody",78),e.YNc(53,ka,9,2,"ng-container",41),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(53),e.Q6J("ngIf",t.rentals.length>0)}}function Ma(n,a){1&n&&e.GkF(0)}function Ua(n,a){1&n&&e.GkF(0,49)}function La(n,a){1&n&&e.GkF(0)}function Ba(n,a){1&n&&e.GkF(0,49)}function qa(n,a){1&n&&e.GkF(0)}function Va(n,a){1&n&&e.GkF(0,49)}function Qa(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",101)(2,"app-button",102),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4);return e.KtG(r.receiptToday())}),e._uU(3,"\u53d7\u9818\uff08\u5f53\u65e5\uff09"),e.qZA()(),e.BQk()}}const Pa=function(){return{label:"\u53d7\u9818\u62c5\u5f53\u8005",required:!0}},gt=function(){return{label:"\u53d7\u9818\u30fb\u8fd4\u91d1\u65e5",required:!1}};function wa(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",54)(2,"div",55)(3,"app-select-container",62),e.YNc(4,Ma,1,0,"ng-container",28),e.YNc(5,Ua,1,0,"ng-container",29),e.qZA(),e._uU(6," \xa0 "),e.TgZ(7,"app-text-container",63),e.YNc(8,La,1,0,"ng-container",28),e.YNc(9,Ba,1,0,"ng-container",29),e.qZA()(),e.TgZ(10,"div",64)(11,"app-date-term",74),e.YNc(12,qa,1,0,"ng-container",28),e.YNc(13,Va,1,0,"ng-container",29),e.qZA()(),e._UZ(14,"div",64),e.TgZ(15,"div",55),e.YNc(16,Qa,4,0,"ng-container",41),e.TgZ(17,"div",71)(18,"app-button",72),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.onClickDiffFormReset())}),e._uU(19,"\u30af\u30ea\u30a2"),e.qZA(),e.TgZ(20,"app-button",100),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.handleClickDiffSaveButton(""))}),e._uU(21,"\u4fdd\u5b58"),e.qZA()()()(),e.BQk()}if(2&n){const t=e.oxw(3),i=e.MAs(32),r=e.MAs(34);e.xp6(3),e.Q6J("formCtrl",t.diffFc.return_employee_id)("options",t.employeeSuggests)("invalid",t.formControlStateManager(t.diffFc.return_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(20,Pa)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(21,Q,t.diffFc.return_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.getEmployeeByIdFcDiff.get_return_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcDiff.get_return_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(23,$)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(24,Q,t.getEmployeeByIdFcDiff.get_return_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.diffFc.dateGroup.controls.return_date)("invalid",t.formControlStateManager(t.diffFc.dateGroup.controls.return_date)||(null==t.diffFc.dateGroup.errors?null:t.diffFc.dateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(26,gt)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(27,Z,t.diffFc.dateGroup.controls.return_date)),e.xp6(3),e.Q6J("ngIf",!t.boolean_receipt_date)}}function Ga(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",103),e._UZ(2,"div",104),e.TgZ(3,"div",105),e._uU(4),e.qZA(),e._UZ(5,"div",104),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(4),e.hij(" ",t.refund_msg," ")}}function Ja(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",94)(2,"app-icon-container",95),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,o=e.oxw(4);return e.KtG(o.editFormOpen(r))}),e.qZA()(),e.BQk()}}function Ya(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Ja,3,0,"ng-container",7),e.BQk()),2&n){const t=e.oxw(5),i=e.MAs(22);e.xp6(1),e.Q6J("ngIf",!t.addFormIsOpen)("ngIfElse",i)}}function Ka(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",94)(2,"app-icon-container",96),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,o=e.oxw(4);return e.KtG(o.deleteRental(r.id))}),e.qZA()(),e.BQk()}}function Ha(n,a){1&n&&e.GkF(0)}function ja(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",85)(2,"div",97),e.YNc(3,Ha,1,0,"ng-container",46),e.qZA()()()),2&n){const t=e.oxw().$implicit,i=e.oxw(4),r=e.MAs(30);e.xp6(3),e.Q6J("ngIf",!i.addFormIsOpen&&i.editFormIsOpen&&i.editTarget.id===t.id)("ngIfThen",r)}}function za(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"tr",88)(2,"td",89)(3,"div",90)(4,"p"),e._uU(5),e.qZA()()(),e.TgZ(6,"td",89)(7,"div",90)(8,"p"),e._uU(9),e.qZA()()(),e.TgZ(10,"td",89)(11,"div",90)(12,"p"),e._uU(13),e.qZA()()(),e.TgZ(14,"td",89)(15,"div")(16,"p"),e._uU(17),e.qZA(),e.TgZ(18,"p",91),e._uU(19),e.qZA(),e.TgZ(20,"p",91),e._uU(21),e.qZA()()(),e.TgZ(22,"td",89)(23,"div",90)(24,"p"),e._uU(25),e.qZA()()(),e.TgZ(26,"td",89)(27,"div",92)(28,"p"),e._uU(29),e.qZA()()(),e.TgZ(30,"td",89)(31,"div",90)(32,"p"),e._uU(33,"-"),e.qZA()()(),e.TgZ(34,"td",89)(35,"div",90)(36,"p"),e._uU(37,"-"),e.qZA()()(),e.TgZ(38,"td",89)(39,"div",90)(40,"p"),e._uU(41),e.qZA()()(),e.TgZ(42,"td",89)(43,"div",90)(44,"p"),e._uU(45),e.qZA()()(),e.TgZ(46,"td",89)(47,"div",90)(48,"p"),e._uU(49),e.qZA()()(),e.ynx(50),e.TgZ(51,"td",89)(52,"div",93),e.YNc(53,Ya,2,2,"ng-container",41),e.YNc(54,Ka,3,0,"ng-container",7),e.qZA()(),e.BQk(),e.qZA(),e.ynx(55),e.YNc(56,ja,4,2,"tr",41),e.BQk()()),2&n){const t=a.$implicit,i=a.index,r=e.oxw(4),o=e.MAs(24);e.xp6(1),e.Q6J("ngClass",e.VKq(17,mt,r.editTarget&&r.editTarget.id===t.id)),e.xp6(4),e.Oqu(t.parent_id),e.xp6(4),e.Oqu(t.rental_product_id),e.xp6(4),e.Oqu(r.overdue_rentals_ad_status[i]),e.xp6(4),e.Oqu(t.rental_product_name),e.xp6(2),e.hij(" ",t.remarks_1?"\u5099\u80031: "+t.remarks_1:""," "),e.xp6(2),e.hij(" ",t.remarks_2?"\u5099\u80032: "+t.remarks_2:""," "),e.xp6(4),e.Oqu(t.rental_item_count),e.xp6(4),e.AsE(" ",t.late_fee?t.late_fee.toLocaleString():""," ",t.refund_fee?t.refund_fee.toLocaleString():""," \u5186 "),e.xp6(12),e.hij(" ",t.rental_date," "),e.xp6(4),e.hij(" ",t.scheduled_return_date," "),e.xp6(4),e.hij(" ",t.return_date," "),e.xp6(4),e.Q6J("ngIf",r.is_processing_units),e.xp6(1),e.Q6J("ngIf",!r.addFormIsOpen&&!r.editFormIsOpen)("ngIfElse",o),e.xp6(2),e.Q6J("ngIf",!r.addFormIsOpen&&r.editFormIsOpen&&r.editTarget.id===t.id)}}function Wa(n,a){if(1&n&&(e.ynx(0),e.YNc(1,za,57,19,"ng-container",84),e.TgZ(2,"tr")(3,"td",85)(4,"div",86),e._uU(5," \u5408\u8a08\u91d1\u984d "),e.TgZ(6,"span",87),e._uU(7),e.qZA(),e._uU(8," \u5186 "),e.qZA()()(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.overdue_rentals),e.xp6(6),e.hij("",t.overdue_rentals_ad_status[0]===t.DIFF_STAUS_DETENTION?t.overdue_totalAmount.toLocaleString():t.overdue_refund_totalAmount.toLocaleString()," ")}}function $a(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",54)(2,"div",98),e._uU(3,"\u5dee\u984d\u51e6\u7406"),e.qZA()(),e.YNc(4,wa,22,29,"ng-container",41),e.YNc(5,Ga,6,1,"ng-container",41),e.TgZ(6,"div",99)(7,"table",77)(8,"thead",78)(9,"th",79)(10,"div")(11,"p"),e._uU(12,"\u5bfe\u8c61ID"),e.qZA()()(),e.TgZ(13,"th",79)(14,"div")(15,"p"),e._uU(16,"\u5546\u54c1ID"),e.qZA()()(),e.TgZ(17,"th",79)(18,"div")(19,"p"),e._uU(20,"\u30b9\u30c6\u30fc\u30bf\u30b9"),e.qZA()()(),e.TgZ(21,"th",81)(22,"div")(23,"p"),e._uU(24,"\u54c1\u540d"),e.qZA()()(),e.TgZ(25,"th",82)(26,"div")(27,"p"),e._uU(28,"\u6570\u91cf"),e.qZA()()(),e.TgZ(29,"th",81)(30,"div")(31,"p"),e._uU(32,"\u5dee\u984d\uff08\u5ef6\u6ede\u30fb\u6255\u623b\uff09\uff08\u7a0e\u8fbc\uff09"),e.qZA()()(),e.TgZ(33,"th",82)(34,"div")(35,"p"),e._uU(36,"-"),e.qZA()()(),e.TgZ(37,"th",82)(38,"div")(39,"p"),e._uU(40,"-"),e.qZA()()(),e.TgZ(41,"th",82)(42,"div")(43,"p"),e._uU(44,"\u8cb8\u51fa\u65e5"),e.qZA()()(),e.TgZ(45,"th",82)(46,"div")(47,"p"),e._uU(48,"\u8fd4\u5374\u4e88\u5b9a\u65e5"),e.qZA()()(),e.TgZ(49,"th",82)(50,"div")(51,"p"),e._uU(52,"\u53d7\u9818\u30fb\u8fd4\u91d1\u65e5"),e.qZA()()(),e.ynx(53),e.TgZ(54,"th",83)(55,"div")(56,"p"),e._uU(57,"\u64cd\u4f5c"),e.qZA()()(),e.BQk(),e.qZA(),e.TgZ(58,"tbody",78),e.YNc(59,Wa,9,2,"ng-container",41),e.qZA()()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",!t.is_processing_units),e.xp6(1),e.Q6J("ngIf",t.diffrecords.length>0),e.xp6(54),e.Q6J("ngIf",t.overdue_rentals.length>0)}}const Xa=function(){return{label:"\u30b9\u30c6\u30fc\u30bf\u30b9",required:!1}},eo=function(){return{label:"\u53d7\u4ed8\u62c5\u5f53\u8005",required:"true"}},to=function(){return{label:"\u53d7\u4ed8\u30bf\u30b0",required:!0}},no=function(){return{label:"\u51e6\u7406\u5358\u4f4d",required:"true"}};function io(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",21)(2,"div",22)(3,"div",23)(4,"form",24),e.NdJ("submit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.statusUpdate())}),e.TgZ(5,"div",25)(6,"div",26)(7,"app-select-container",27),e.YNc(8,Ar,1,0,"ng-container",28),e.YNc(9,Ir,1,0,"ng-container",29),e.qZA()(),e.TgZ(10,"div",26)(11,"app-select-container",30),e.YNc(12,Fr,1,0,"ng-container",28),e.qZA()(),e.TgZ(13,"div",26)(14,"app-text-container",31),e.YNc(15,br,1,0,"ng-container",28),e.qZA()(),e.TgZ(16,"div",26)(17,"app-select-container",32),e.YNc(18,Or,1,0,"ng-container",28),e.qZA()(),e.TgZ(19,"div",33)(20,"app-button",34),e._uU(21," \u66f4\u65b0 "),e.qZA()()()()(),e.TgZ(22,"div",35)(23,"div")(24,"app-button",36),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.toRegisterDeliverySchedulePage())}),e._uU(25,"\u914d\u9001\u3092\u767b\u9332"),e.qZA()()()()(),e.TgZ(26,"div",37)(27,"div",38)(28,"div",39),e._uU(29),e.qZA(),e.TgZ(30,"div",40),e.YNc(31,Nr,2,1,"ng-container",41),e.YNc(32,kr,2,1,"ng-container",41),e.qZA()(),e.TgZ(33,"div",42)(34,"h2",43),e._uU(35," \u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968 "),e.qZA()(),e.TgZ(36,"div",44)(37,"div",45)(38,"p"),e._uU(39),e.qZA(),e.YNc(40,Zr,1,0,"ng-container",46),e.YNc(41,Mr,1,0,"ng-container",46),e.YNc(42,Ur,1,0,"ng-container",46),e.qZA(),e.TgZ(43,"div"),e.YNc(44,Qr,3,2,"ng-container",41),e.YNc(45,wr,2,1,"ng-container",41),e.YNc(46,Jr,2,1,"ng-container",41),e.qZA(),e.TgZ(47,"div",45)(48,"p"),e._uU(49),e.qZA(),e.YNc(50,Yr,13,7,"ng-container",41),e.qZA()(),e.TgZ(51,"form",47),e.YNc(52,_a,4,2,"ng-container",41),e.YNc(53,Aa,29,39,"ng-container",41),e.qZA(),e.TgZ(54,"div"),e.YNc(55,Za,54,1,"ng-container",41),e.qZA(),e.TgZ(56,"div",48),e.YNc(57,$a,60,3,"ng-container",41),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(),i=e.MAs(32),r=e.MAs(34),o=e.MAs(16),s=e.MAs(18),_=e.MAs(20);e.xp6(4),e.Q6J("formGroup",t.statusForm),e.xp6(3),e.Q6J("formCtrl",t.statusFc.status_division_id)("options",t.statusDivisionOptions)("invalid",t.formControlStateManager(t.statusFc.status_division_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(41,Xa)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(42,Z,t.statusFc.status_division_id)),e.xp6(2),e.Q6J("formCtrl",t.statusFc.reception_employee_id)("options",t.employeeSuggests),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(44,eo)),e.xp6(2),e.Q6J("formCtrl",t.statusFc.reception_tag),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(45,to)),e.xp6(2),e.Q6J("formCtrl",t.statusFc.processing_units)("options",t.processingUnits)("invalid",t.formControlStateManager(t.statusFc.processing_units)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(46,no)),e.xp6(2),e.Q6J("buttonDisabled",t.statusForm.invalid||t.statusForm.pristine),e.xp6(9),e.hij(" ",t.rs.division_status_value," "),e.xp6(2),e.Q6J("ngIf",!t.rs.processing_units),e.xp6(1),e.Q6J("ngIf","1"===(null==t.rs.processing_units?null:t.rs.processing_units.toString())),e.xp6(7),e.hij("\u304a\u5ba2\u69d8\u30bf\u30a4\u30d7\uff1a",t.rs.division_customer_type_value,""),e.xp6(1),e.Q6J("ngIf",t.rs.division_customer_type_value===t.rsConst.CUSTOMER_TYPE_DIVISION.VALUE.CLIENT)("ngIfThen",o),e.xp6(1),e.Q6J("ngIf",t.rs.division_customer_type_value===t.rsConst.CUSTOMER_TYPE_DIVISION.VALUE.MEMBER)("ngIfThen",s),e.xp6(1),e.Q6J("ngIf",t.rs.division_customer_type_value===t.rsConst.CUSTOMER_TYPE_DIVISION.VALUE.GENERAL)("ngIfThen",_),e.xp6(2),e.Q6J("ngIf",(null==t.rs.division_customer_type_code?null:t.rs.division_customer_type_code.toString())===t.DIVISION_CUSTOMER_CODE_GENERAL),e.xp6(1),e.Q6J("ngIf",(null==t.rs.division_customer_type_code?null:t.rs.division_customer_type_code.toString())===t.DIVISION_CUSTOMER_CODE_MEMBER),e.xp6(1),e.Q6J("ngIf",(null==t.rs.division_customer_type_code?null:t.rs.division_customer_type_code.toString())===t.DIVISION_CUSTOMER_CODE_CLIENT),e.xp6(3),e.hij("\u53d7\u4ed8\u65e5\u6642\uff1a",t.receptionDate,""),e.xp6(1),e.Q6J("ngIf",t.basicInformation&&t.rs),e.xp6(1),e.Q6J("formGroup",t.bulkForm),e.xp6(1),e.Q6J("ngIf",!t.is_processing_units),e.xp6(1),e.Q6J("ngIf",!t.is_processing_units),e.xp6(2),e.Q6J("ngIf",t.rentals),e.xp6(2),e.Q6J("ngIf",t.set_overdue_rentals)}}function ro(n,a){1&n&&(e.TgZ(0,"p",106),e._uU(1,"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."),e.qZA())}function ao(n,a){if(1&n&&(e.TgZ(0,"div")(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"p",107)(4,"span",108),e._uU(5),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.rs.client_id),e.xp6(3),e.AsE("",t.rs.client_name," ",t.rs.client_division_title_value,"")}}function oo(n,a){if(1&n&&(e.TgZ(0,"div",53)(1,"ruby")(2,"span",109),e._uU(3),e.qZA(),e.TgZ(4,"rp"),e._uU(5,"("),e.qZA(),e.TgZ(6,"rt"),e._uU(7),e.qZA(),e.TgZ(8,"rp"),e._uU(9,")"),e.qZA()(),e.TgZ(10,"span"),e._uU(11,"\xa0"),e.qZA(),e.TgZ(12,"ruby")(13,"span",109),e._uU(14),e.qZA(),e.TgZ(15,"rp"),e._uU(16,"("),e.qZA(),e.TgZ(17,"rt"),e._uU(18),e.qZA(),e.TgZ(19,"rp"),e._uU(20,")"),e.qZA()(),e.TgZ(21,"span",109),e._uU(22,"\u3000\u69d8"),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.rs.member_last_name),e.xp6(4),e.Oqu(t.rs.member_last_name_kana),e.xp6(7),e.Oqu(t.rs.member_first_name),e.xp6(4),e.Oqu(t.rs.member_first_name_kana)}}function so(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("MOBILE\uff1a:",t.rs.mobile_number,"")}}function lo(n,a){1&n&&(e.ynx(0),e.TgZ(1,"span",114),e._uU(2,"\uff08\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u306e\u78ba\u8a8d\u304c\u5fc5\u8981\u3067\u3059\uff01\uff09"),e.qZA(),e.BQk())}function _o(n,a){1&n&&e.GkF(0)}function uo(n,a){1&n&&e.GkF(0,49)}const co=function(){return{label:"\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f",required:!1}};function po(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",111)(2,"div",112),e.YNc(3,lo,3,0,"ng-container",41),e.qZA(),e.TgZ(4,"app-checkbox",113),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onCheckId(r))}),e.YNc(5,_o,1,0,"ng-container",28),e.YNc(6,uo,1,0,"ng-container",29),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2),i=e.MAs(32),r=e.MAs(34);e.xp6(3),e.Q6J("ngIf",!t.selectedCustomer.isIdConfirmationRequired),e.xp6(1),e.Q6J("formCtrl",t.generalFc.idConfirmationDate_check)("invalid",t.CheckBoxControlStateManager(t.generalFc.idConfirmationDate_check)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(7,co)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(8,Z,t.generalFc.idConfirmationDate_check))}}function mo(n,a){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("\u524d\u56de\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u78ba\u8a8d\u65e5\uff1a",t.selectedCustomer.idConfirmationDate,"")}}function go(n,a){if(1&n&&(e.TgZ(0,"div",53)(1,"ruby")(2,"span",109),e._uU(3),e.qZA(),e.TgZ(4,"rp"),e._uU(5,"("),e.qZA(),e.TgZ(6,"rt"),e._uU(7),e.qZA(),e.TgZ(8,"rp"),e._uU(9,")"),e.qZA()(),e.TgZ(10,"span"),e._uU(11,"\xa0"),e.qZA(),e.TgZ(12,"ruby")(13,"span",109),e._uU(14),e.qZA(),e.TgZ(15,"rp"),e._uU(16,"("),e.qZA(),e.TgZ(17,"rt"),e._uU(18),e.qZA(),e.TgZ(19,"rp"),e._uU(20,")"),e.qZA()(),e.TgZ(21,"span",109),e._uU(22,"\u3000\u69d8"),e.qZA(),e.TgZ(23,"p"),e._uU(24),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.qZA(),e.YNc(27,so,3,1,"ng-container",41),e.TgZ(28,"div"),e.YNc(29,po,7,10,"ng-container",7),e.YNc(30,mo,2,1,"ng-template",null,110,e.W1O),e.qZA()()),2&n){const t=e.MAs(31),i=e.oxw();e.xp6(3),e.Oqu(i.rs.last_name),e.xp6(4),e.Oqu(i.rs.last_name_kana),e.xp6(7),e.Oqu(i.rs.first_name),e.xp6(4),e.Oqu(i.rs.first_name_kana),e.xp6(6),e.hij("\u4f4f\u6240\uff1a",i.rs.shipping_address,""),e.xp6(2),e.hij("TEL\uff1a",i.rs.tel,""),e.xp6(1),e.Q6J("ngIf",i.rs.mobile_number),e.xp6(2),e.Q6J("ngIf",i.selectedCustomer.type.toString()===i.DIVISION_CUSTOMER_CODE_GENERAL)("ngIfElse",t)}}function ho(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-icon-container",115),e.qZA())}function fo(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-icon-container",116),e.qZA())}function Co(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",120)(2,"p"),e._uU(3,"\u9078\u629e\u4e2d\u5546\u54c1"),e.qZA(),e._uU(4),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.AsE(" ID\uff1a",t.addTargetProduct.id,"\u3000\u5546\u54c1\u540d\uff1a",t.addTargetProduct.name," ")}}function To(n,a){1&n&&e.GkF(0)}function vo(n,a){1&n&&e.GkF(0,49)}const ht=function(){return{label:"\u914d\u9001\u6599\uff08\u7a0e\u8fbc\uff09",required:"true"}};function Eo(n,a){if(1&n&&(e.TgZ(0,"div",104)(1,"app-text-container",125),e.YNc(2,To,1,0,"ng-container",28),e.YNc(3,vo,1,0,"ng-container",29),e.qZA()()),2&n){const t=e.oxw(2),i=e.MAs(32),r=e.MAs(34);e.xp6(1),e.Q6J("textRight",!0)("formCtrl",t.addFc.rental_fee)("invalid",t.formControlStateManager(t.addFc.rental_fee)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(7,ht)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(8,Z,t.addFc.rental_fee))}}function Do(n,a){1&n&&e.GkF(0)}function xo(n,a){1&n&&e.GkF(0,49)}function So(n,a){1&n&&e.GkF(0)}function Ao(n,a){1&n&&e.GkF(0,49)}function Io(n,a){1&n&&e.GkF(0)}function Fo(n,a){1&n&&e.GkF(0)}function bo(n,a){1&n&&e.GkF(0,49)}function Oo(n,a){1&n&&e.GkF(0)}function yo(n,a){1&n&&e.GkF(0,49)}const qe=function(){return{label:"\u914d\u9001\u533a\u5206",required:"true"}},Ve=function(){return{label:"\u56de\u53ce\u533a\u5206",required:"true"}};function No(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",54)(2,"div",105)(3,"div",66)(4,"div",67)(5,"app-date-term",68),e.YNc(6,Do,1,0,"ng-container",28),e.YNc(7,xo,1,0,"ng-container",29),e.qZA()(),e.TgZ(8,"div",67)(9,"app-date-term",69),e.YNc(10,So,1,0,"ng-container",28),e.YNc(11,Ao,1,0,"ng-container",29),e.qZA()()(),e.YNc(12,Io,1,0,"ng-container",28),e.qZA(),e.TgZ(13,"div",104)(14,"app-select-container",130),e.YNc(15,Fo,1,0,"ng-container",28),e.YNc(16,bo,1,0,"ng-container",29),e.qZA()(),e.TgZ(17,"div",104)(18,"app-select-container",131),e.YNc(19,Oo,1,0,"ng-container",28),e.YNc(20,yo,1,0,"ng-container",29),e.qZA()()(),e.BQk()),2&n){const t=e.oxw(3),i=e.MAs(32),r=e.MAs(34),o=e.MAs(38);e.xp6(5),e.Q6J("formCtrl",t.addFc.scheduledDateGroup.controls.scheduled_rental_date)("invalid",t.formControlStateManager(t.addFc.scheduledDateGroup.controls.scheduled_rental_date)||(null==t.addFc.scheduledDateGroup.errors?null:t.addFc.scheduledDateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(28,Ee)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(29,Z,t.addFc.scheduledDateGroup.controls.scheduled_rental_date)),e.xp6(2),e.Q6J("formCtrl",t.addFc.scheduledDateGroup.controls.scheduled_return_date)("invalid",t.formControlStateManager(t.addFc.scheduledDateGroup.controls.scheduled_return_date)||(null==t.addFc.scheduledDateGroup.errors?null:t.addFc.scheduledDateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(31,De)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(32,Z,t.addFc.scheduledDateGroup.controls.scheduled_return_date)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(34,ie,t.addFc.scheduledDateGroup)),e.xp6(2),e.Q6J("formCtrl",t.addFc.delivery_division_id)("options",t.deliveryDivisionOptions)("invalid",t.formControlStateManager(t.addFc.delivery_division_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(36,qe)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(37,Z,t.addFc.delivery_division_id)),e.xp6(2),e.Q6J("formCtrl",t.addFc.collection_division_id)("options",t.collectionDivisionOptions)("invalid",t.formControlStateManager(t.addFc.collection_division_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(39,Ve)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(40,Z,t.addFc.collection_division_id))}}function Ro(n,a){1&n&&e.GkF(0)}function ko(n,a){1&n&&e.GkF(0,49)}function Zo(n,a){1&n&&e.GkF(0)}function Mo(n,a){1&n&&e.GkF(0,49)}const Qe=function(){return{label:"\u5099\u80031",required:!1}},Pe=function(){return{label:"\u5099\u80032",required:!1}};function Uo(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,No,21,42,"ng-container",41),e.TgZ(2,"div",54)(3,"div",67)(4,"app-textarea-container",126),e.YNc(5,Ro,1,0,"ng-container",28),e.YNc(6,ko,1,0,"ng-container",29),e.qZA()(),e.TgZ(7,"div",67)(8,"app-textarea-container",127),e.YNc(9,Zo,1,0,"ng-container",28),e.YNc(10,Mo,1,0,"ng-container",29),e.qZA()()(),e._UZ(11,"hr",112),e.TgZ(12,"div",128)(13,"div",129)(14,"app-button",34),e._uU(15," \u8ffd\u52a0 "),e.qZA()(),e.TgZ(16,"div",129)(17,"app-button",36),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.addFormCancel())}),e._uU(18,"\u30ad\u30e3\u30f3\u30bb\u30eb"),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw(2),i=e.MAs(32),r=e.MAs(34);e.xp6(1),e.Q6J("ngIf",!t.selectedProductDeliveryChargeFlag),e.xp6(3),e.Q6J("formCtrl",t.addFc.remarks_1)("invalid",t.formControlStateManager(t.addFc.remarks_1)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(14,Qe)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(15,Z,t.addFc.remarks_1)),e.xp6(2),e.Q6J("formCtrl",t.addFc.remarks_2)("invalid",t.formControlStateManager(t.addFc.remarks_2)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(17,Pe)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(18,Z,t.addFc.remarks_2)),e.xp6(4),e.Q6J("buttonDisabled",t.addForm.invalid||t.addForm.pristine)}}function Lo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",117)(1,"div",118)(2,"form",119),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handleClickRentalAddExecutionButton())})("keydown.enter",function(r){return r.preventDefault()}),e.TgZ(3,"p",118),e._uU(4," \u8ffd\u52a0\u3059\u308b\u5546\u54c1\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u30ec\u30f3\u30bf\u30eb\u53ef\u80fd\u306a\u5546\u54c1\u306e\u307f\u9078\u629e\u3067\u304d\u307e\u3059\uff09 "),e.qZA(),e.TgZ(5,"div",120)(6,"div",105)(7,"app-search-suggest-container",121),e.NdJ("idValueChanges",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onNameSuggestIdChange(r))})("selectedData",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onNameSuggestDataSelected(r))}),e.TgZ(8,"div",122)(9,"span",78),e._uU(10,"\u5546\u54c1\u540d\u3067\u691c\u7d22"),e.qZA()()()(),e.TgZ(11,"div",105)(12,"app-search-suggest-container",123),e.NdJ("idValueChanges",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onIdSuggestIdChange(r))})("selectedData",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onIdSuggestDataSelected(r))}),e.TgZ(13,"div",122)(14,"span",78),e._uU(15,"\u5546\u54c1ID\u3067\u691c\u7d22"),e.qZA()()()()(),e.YNc(16,Co,5,2,"ng-container",41),e.TgZ(17,"div",120),e.YNc(18,Eo,4,10,"ng-template",null,124,e.W1O),e.qZA(),e.YNc(20,Uo,19,20,"ng-container",41),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.addForm),e.xp6(5),e.Q6J("fc",t.addFc.name)("apiInput",t.getAddFormProductNameSuggests())("invalid",t.formControlStateManager(t.addFc.name)),e.xp6(5),e.Q6J("fc",t.addFc.id)("apiInput",t.getAddFormProductIdSuggests())("invalid",t.formControlStateManager(t.addFc.id)),e.xp6(4),e.Q6J("ngIf",t.addFc.rental_product_id.value),e.xp6(4),e.Q6J("ngIf",t.addFc.rental_product_id.value)}}function Bo(n,a){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE(" \u30ec\u30f3\u30bf\u30eb\u6599\u91d1\uff1a",t.editTargetProduct.selling_price,"\uff08",t.editTargetProduct.division_sales_tax_value,"\uff09 ")}}function qo(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",138)(2,"p"),e._uU(3),e.qZA(),e.YNc(4,Bo,2,2,"p",41),e.TgZ(5,"div",139),e._UZ(6,"app-text-container",140),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.hij("\u5546\u54c1\u540d\uff1a",t.editTargetProduct.name,""),e.xp6(1),e.Q6J("ngIf",!t.selectedProductDeliveryChargeFlag),e.xp6(2),e.Q6J("formCtrl",t.editFc.rental_fee)("invalid",t.formControlStateManager(t.editFc.rental_fee))}}function Vo(n,a){1&n&&e.GkF(0)}function Qo(n,a){1&n&&e.GkF(0,49)}const Po=function(){return{label:"\u914d\u9001\u6599\uff08\u7a0e\u8fbc\uff09",required:!1}};function wo(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",104)(2,"app-text-container",141),e.YNc(3,Vo,1,0,"ng-container",28),e.YNc(4,Qo,1,0,"ng-container",29),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2),i=e.MAs(32),r=e.MAs(34);e.xp6(2),e.Q6J("textRight",!0)("formCtrl",t.editFc.delivery_price)("invalid",t.formControlStateManager(t.editFc.delivery_price)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(7,Po)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(8,Z,t.editFc.delivery_price))}}function Go(n,a){1&n&&e.GkF(0)}function Jo(n,a){1&n&&e.GkF(0,49)}function Yo(n,a){1&n&&e.GkF(0)}function Ko(n,a){1&n&&e.GkF(0,49)}function Ho(n,a){1&n&&e.GkF(0)}function jo(n,a){1&n&&e.GkF(0)}function zo(n,a){1&n&&e.GkF(0,49)}function Wo(n,a){1&n&&e.GkF(0)}function $o(n,a){1&n&&e.GkF(0,49)}function Xo(n,a){1&n&&e.GkF(0)}function es(n,a){1&n&&e.GkF(0)}function ts(n,a){1&n&&e.GkF(0,49)}function ns(n,a){1&n&&e.GkF(0)}function is(n,a){1&n&&e.GkF(0,49)}function rs(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",104)(2,"app-select-container",142),e.YNc(3,es,1,0,"ng-container",28),e.YNc(4,ts,1,0,"ng-container",29),e.qZA()(),e.TgZ(5,"div",143)(6,"app-text-container",57),e.YNc(7,ns,1,0,"ng-container",28),e.YNc(8,is,1,0,"ng-container",29),e.qZA(),e.TgZ(9,"div",144)(10,"app-button",145),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.sRentalToday())}),e._uU(11,"\u8cb8\u51fa\uff08\u5f53\u65e5\uff09"),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw(3),i=e.MAs(32),r=e.MAs(34);e.xp6(2),e.Q6J("formCtrl",t.editFc.rental_employee_id)("options",t.employeeSuggests)("invalid",t.formControlStateManager(t.editFc.rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(14,se)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(15,Q,t.editFc.rental_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.getEmployeeByIdFcRental.get_rental_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(17,$)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(18,Q,t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(2),e.Q6J("buttonDisabled",t.detailUnitdisabledRentalTodayButton())}}function as(n,a){1&n&&e.GkF(0)}function os(n,a){1&n&&e.GkF(0,49)}function ss(n,a){1&n&&e.GkF(0)}function ls(n,a){1&n&&e.GkF(0,49)}function _s(n,a){1&n&&e.GkF(0)}function us(n,a){1&n&&e.GkF(0,49)}function ds(n,a){1&n&&e.GkF(0)}function cs(n,a){1&n&&e.GkF(0,49)}function ps(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-text-container",63),e.YNc(2,ds,1,0,"ng-container",28),e.YNc(3,cs,1,0,"ng-container",29),e.qZA(),e.TgZ(4,"div",148)(5,"app-button",145),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4);return e.KtG(r.sReturnToday())}),e._uU(6,"\u8fd4\u5374(\u5f53\u65e5)"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(4),i=e.MAs(32),r=e.MAs(34);e.xp6(1),e.Q6J("formCtrl",t.getEmployeeByIdFcReturn.get_return_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcReturn.get_return_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(7,$)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(8,Q,t.getEmployeeByIdFcReturn.get_return_employee_id)),e.xp6(2),e.Q6J("buttonDisabled",!t.editFc.return_employee_id.value)}}function ms(n,a){1&n&&e.GkF(0)}function gs(n,a){1&n&&e.GkF(0,49)}function hs(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"app-text-container",149),e.YNc(2,ms,1,0,"ng-container",28),e.YNc(3,gs,1,0,"ng-container",29),e.qZA(),e.BQk()),2&n){const t=e.oxw(4),i=e.MAs(32),r=e.MAs(34);e.xp6(1),e.Q6J("formCtrl",t.getEmployeeByIdFcReturn.get_return_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcReturn.get_return_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(6,$)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(7,Q,t.getEmployeeByIdFcReturn.get_return_employee_id))}}function fs(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",104)(2,"app-select-container",142),e.YNc(3,as,1,0,"ng-container",28),e.YNc(4,os,1,0,"ng-container",29),e.qZA()(),e.TgZ(5,"div",104)(6,"app-text-container",146),e.YNc(7,ss,1,0,"ng-container",28),e.YNc(8,ls,1,0,"ng-container",29),e.qZA()(),e.TgZ(9,"div",104)(10,"app-select-container",147),e.YNc(11,_s,1,0,"ng-container",28),e.YNc(12,us,1,0,"ng-container",29),e.qZA()(),e.TgZ(13,"div",143),e.YNc(14,ps,7,10,"ng-container",41),e.YNc(15,hs,4,9,"ng-container",41),e.qZA(),e.BQk()),2&n){const t=e.oxw(3),i=e.MAs(32),r=e.MAs(34);e.xp6(2),e.Q6J("formCtrl",t.editFc.rental_employee_id)("options",t.employeeSuggests)("invalid",t.formControlStateManager(t.editFc.rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(22,se)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(23,Q,t.editFc.rental_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.getEmployeeByIdFcRental.get_rental_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(25,$)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(26,Q,t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.editFc.return_employee_id)("options",t.employeeSuggests)("invalid",t.formControlStateManager(t.editFc.return_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(28,Le)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(29,Q,t.editFc.return_employee_id)),e.xp6(2),e.Q6J("ngIf",!t.boolean_return_date&&t.boolean_rental_date),e.xp6(1),e.Q6J("ngIf",t.boolean_return_date&&!t.boolean_rental_date)}}function Cs(n,a){1&n&&e.GkF(0)}function Ts(n,a){1&n&&e.GkF(0,49)}function vs(n,a){1&n&&e.GkF(0)}function Es(n,a){1&n&&e.GkF(0,49)}function Ds(n,a){1&n&&e.GkF(0)}function xs(n,a){1&n&&e.GkF(0,49)}const ft=function(){return{label:"\u8cb8\u51fa\u65e5(\u6307\u5b9a)",required:!1}},Ss=function(){return{label:"\u8fd4\u5374\u65e5(\u6307\u5b9a)",required:!1}};function As(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",54)(2,"div",105)(3,"div",66)(4,"div",67)(5,"app-date-term",68),e.YNc(6,Go,1,0,"ng-container",28),e.YNc(7,Jo,1,0,"ng-container",29),e.qZA()(),e.TgZ(8,"div",67)(9,"app-date-term",69),e.YNc(10,Yo,1,0,"ng-container",28),e.YNc(11,Ko,1,0,"ng-container",29),e.qZA()()(),e.YNc(12,Ho,1,0,"ng-container",28),e.qZA(),e.TgZ(13,"div",105)(14,"div",66)(15,"div",67)(16,"app-date-term",70),e.YNc(17,jo,1,0,"ng-container",28),e.YNc(18,zo,1,0,"ng-container",29),e.qZA()(),e.TgZ(19,"div",67)(20,"app-date-term",74),e.YNc(21,Wo,1,0,"ng-container",28),e.YNc(22,$o,1,0,"ng-container",29),e.qZA()()(),e.YNc(23,Xo,1,0,"ng-container",28),e.qZA()(),e.TgZ(24,"div",54),e.YNc(25,rs,12,20,"ng-container",41),e.YNc(26,fs,16,31,"ng-container",41),e.qZA(),e.TgZ(27,"div",54)(28,"div",104)(29,"app-select-container",130),e.YNc(30,Cs,1,0,"ng-container",28),e.YNc(31,Ts,1,0,"ng-container",29),e.qZA()(),e.TgZ(32,"div",104)(33,"app-select-container",131),e.YNc(34,vs,1,0,"ng-container",28),e.YNc(35,Es,1,0,"ng-container",29),e.qZA()(),e.TgZ(36,"div",104)(37,"app-select-container",65),e.YNc(38,Ds,1,0,"ng-container",28),e.YNc(39,xs,1,0,"ng-container",29),e.qZA()()(),e.BQk()),2&n){const t=e.oxw(2),i=e.MAs(32),r=e.MAs(34),o=e.MAs(38);e.xp6(5),e.Q6J("formCtrl",t.editFc.scheduledDateGroup.controls.scheduled_rental_date)("invalid",t.formControlStateManager(t.editFc.scheduledDateGroup.controls.scheduled_rental_date)||(null==t.editFc.scheduledDateGroup.errors?null:t.editFc.scheduledDateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(51,Ee)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(52,Z,t.editFc.scheduledDateGroup.controls.scheduled_rental_date)),e.xp6(2),e.Q6J("formCtrl",t.editFc.scheduledDateGroup.controls.scheduled_return_date)("invalid",t.formControlStateManager(t.editFc.scheduledDateGroup.controls.scheduled_return_date)||(null==t.editFc.scheduledDateGroup.errors?null:t.editFc.scheduledDateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(54,De)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(55,Z,t.editFc.scheduledDateGroup.controls.scheduled_return_date)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(57,ie,t.editFc.scheduledDateGroup)),e.xp6(4),e.Q6J("formCtrl",t.editFc.dateGroup.controls.rental_date)("invalid",t.formControlStateManager(t.editFc.dateGroup.controls.rental_date)||(null==t.editFc.dateGroup.errors?null:t.editFc.dateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(59,ft)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(60,Z,t.editFc.dateGroup.controls.rental_date)),e.xp6(2),e.Q6J("formCtrl",t.editFc.dateGroup.controls.return_date)("invalid",t.formControlStateManager(t.editFc.dateGroup.controls.return_date)||(null==t.editFc.dateGroup.errors?null:t.editFc.dateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(62,Ss)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(63,Z,t.editFc.dateGroup.controls.return_date)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(65,ie,t.editFc.dateGroup)),e.xp6(2),e.Q6J("ngIf",!t.rentalItemStatus),e.xp6(1),e.Q6J("ngIf",t.rentalItemStatus),e.xp6(3),e.Q6J("formCtrl",t.editFc.delivery_division_id)("options",t.deliveryDivisionOptions)("invalid",t.formControlStateManager(t.editFc.delivery_division_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(67,qe)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(68,Z,t.editFc.delivery_division_id)),e.xp6(2),e.Q6J("formCtrl",t.editFc.collection_division_id)("options",t.collectionDivisionOptions)("invalid",t.formControlStateManager(t.editFc.collection_division_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(70,Ve)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(71,Z,t.editFc.collection_division_id)),e.xp6(2),e.Q6J("formCtrl",t.editFc.late_return_reported)("options",t.lateReturnReportedOptions)("invalid",t.formControlStateManager(t.editFc.late_return_reported)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(73,Be)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(74,Z,t.editFc.late_return_reported))}}function Is(n,a){1&n&&e.GkF(0)}function Fs(n,a){1&n&&e.GkF(0,49)}function bs(n,a){1&n&&e.GkF(0)}function Os(n,a){1&n&&e.GkF(0,49)}function ys(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",132)(1,"div",118)(2,"p",133)(3,"span",134),e._uU(4,"\u203b \u6599\u91d1\u306f\u5546\u54c1\u306e\u58f2\u4fa1\u30fb\u7a0e\u7387\u30fb\u7a0e\u533a\u5206\uff08\u5185\u7a0e\u307e\u305f\u306f\u5916\u7a0e\uff09\u304b\u3089\u7a0e\u8fbc\u4fa1\u683c\u3092\u8a08\u7b97\u3057\u81ea\u52d5\u7684\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002"),e.qZA()(),e.TgZ(5,"form",135),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.RentalEditExecutionButton())}),e.TgZ(6,"div",136)(7,"div",137)(8,"p"),e._uU(9,"\u7de8\u96c6\u5bfe\u8c61\u306e\u30ec\u30f3\u30bf\u30eb\u5546\u54c1"),e.qZA(),e.YNc(10,qo,7,4,"ng-container",41),e.qZA(),e.YNc(11,wo,5,10,"ng-container",41),e.qZA(),e.YNc(12,As,40,76,"ng-container",41),e.TgZ(13,"div",54)(14,"div",67)(15,"app-textarea-container",126),e.YNc(16,Is,1,0,"ng-container",28),e.YNc(17,Fs,1,0,"ng-container",29),e.qZA()(),e.TgZ(18,"div",67)(19,"app-textarea-container",127),e.YNc(20,bs,1,0,"ng-container",28),e.YNc(21,Os,1,0,"ng-container",29),e.qZA()()(),e._UZ(22,"hr",112),e.TgZ(23,"div",128)(24,"div",129)(25,"app-button",34),e._uU(26," \u4fdd\u5b58 "),e.qZA()(),e.TgZ(27,"div",129)(28,"app-button",36),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.editFormCancel())}),e._uU(29,"\u30ad\u30e3\u30f3\u30bb\u30eb"),e.qZA()()()()()()}if(2&n){const t=e.oxw(),i=e.MAs(32),r=e.MAs(34);e.xp6(5),e.Q6J("formGroup",t.editForm),e.xp6(5),e.Q6J("ngIf",t.editTargetProduct),e.xp6(1),e.Q6J("ngIf",t.selectedProductDeliveryChargeFlag),e.xp6(1),e.Q6J("ngIf",!t.selectedProductDeliveryChargeFlag),e.xp6(3),e.Q6J("formCtrl",t.editFc.remarks_1)("invalid",t.formControlStateManager(t.editFc.remarks_1)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(17,Qe)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(18,Z,t.editFc.remarks_1)),e.xp6(2),e.Q6J("formCtrl",t.editFc.remarks_2)("invalid",t.formControlStateManager(t.editFc.remarks_2)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(20,Pe)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(21,Z,t.editFc.remarks_2)),e.xp6(4),e.Q6J("buttonDisabled",t.detailUnitdisabledRentalTodayButton())}}function Ns(n,a){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE(" \u30ec\u30f3\u30bf\u30eb\u6599\u91d1\uff1a",t.editTargetProduct.selling_price,"\uff08",t.editTargetProduct.division_sales_tax_value,"\uff09 ")}}function Rs(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",138)(2,"p"),e._uU(3),e.qZA(),e.YNc(4,Ns,2,2,"p",41),e.TgZ(5,"div",139),e._UZ(6,"app-text-container",140),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.hij("\u5546\u54c1\u540d\uff1a",t.editTargetProduct.name,""),e.xp6(1),e.Q6J("ngIf",!t.selectedProductDeliveryChargeFlag),e.xp6(2),e.Q6J("formCtrl",t.editFc.rental_fee)("invalid",t.formControlStateManager(t.editFc.rental_fee))}}function ks(n,a){1&n&&e.GkF(0)}function Zs(n,a){1&n&&e.GkF(0,49)}function Ms(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",104)(2,"app-text-container",141),e.YNc(3,ks,1,0,"ng-container",28),e.YNc(4,Zs,1,0,"ng-container",29),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2),i=e.MAs(32),r=e.MAs(34);e.xp6(2),e.Q6J("textRight",!0)("formCtrl",t.editFc.delivery_price)("invalid",t.formControlStateManager(t.editFc.delivery_price)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(7,ht)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(8,Z,t.editFc.delivery_price))}}function Us(n,a){1&n&&e.GkF(0)}function Ls(n,a){1&n&&e.GkF(0,49)}function Bs(n,a){1&n&&e.GkF(0)}function qs(n,a){1&n&&e.GkF(0,49)}function Vs(n,a){1&n&&e.GkF(0)}function Qs(n,a){1&n&&e.GkF(0)}function Ps(n,a){1&n&&e.GkF(0,49)}function ws(n,a){1&n&&e.GkF(0)}function Gs(n,a){1&n&&e.GkF(0,49)}function Js(n,a){1&n&&e.GkF(0)}function Ys(n,a){1&n&&e.GkF(0)}function Ks(n,a){1&n&&e.GkF(0,49)}function Hs(n,a){1&n&&e.GkF(0)}function js(n,a){1&n&&e.GkF(0,49)}function zs(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",104)(2,"app-select-container",142),e.YNc(3,Ys,1,0,"ng-container",28),e.YNc(4,Ks,1,0,"ng-container",29),e.qZA()(),e.TgZ(5,"div",143)(6,"app-text-container",57),e.YNc(7,Hs,1,0,"ng-container",28),e.YNc(8,js,1,0,"ng-container",29),e.qZA(),e.TgZ(9,"div",144)(10,"app-button",150),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.sRentalToday())}),e._uU(11,"\u8cb8\u51fa\uff08\u5f53\u65e5\uff09"),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw(3),i=e.MAs(32),r=e.MAs(34);e.xp6(2),e.Q6J("formCtrl",t.editFc.rental_employee_id)("options",t.employeeSuggests)("invalid",t.formControlStateManager(t.editFc.rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(13,se)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(14,Q,t.editFc.rental_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.getEmployeeByIdFcRental.get_rental_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(16,$)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(17,Q,t.getEmployeeByIdFcRental.get_rental_employee_id))}}function Ws(n,a){1&n&&e.GkF(0)}function $s(n,a){1&n&&e.GkF(0,49)}function Xs(n,a){1&n&&e.GkF(0)}function el(n,a){1&n&&e.GkF(0,49)}function tl(n,a){1&n&&e.GkF(0)}function nl(n,a){1&n&&e.GkF(0,49)}function il(n,a){1&n&&e.GkF(0)}function rl(n,a){1&n&&e.GkF(0,49)}function al(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-text-container",63),e.YNc(2,il,1,0,"ng-container",28),e.YNc(3,rl,1,0,"ng-container",29),e.qZA(),e.TgZ(4,"div",148)(5,"app-button",150),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4);return e.KtG(r.sDiffReturnToday())}),e._uU(6,"\u53d7\u9818\u30fb\u8fd4\u91d1\u65e5(\u5f53\u65e5)"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(4),i=e.MAs(32),r=e.MAs(34);e.xp6(1),e.Q6J("formCtrl",t.getEmployeeByIdFcReturn.get_return_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcReturn.get_return_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(6,$)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(7,Q,t.getEmployeeByIdFcReturn.get_return_employee_id))}}function ol(n,a){1&n&&e.GkF(0)}function sl(n,a){1&n&&e.GkF(0,49)}function ll(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"app-text-container",149),e.YNc(2,ol,1,0,"ng-container",28),e.YNc(3,sl,1,0,"ng-container",29),e.qZA(),e.BQk()),2&n){const t=e.oxw(4),i=e.MAs(32),r=e.MAs(34);e.xp6(1),e.Q6J("formCtrl",t.getEmployeeByIdFcReturn.get_return_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcReturn.get_return_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(6,$)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(7,Q,t.getEmployeeByIdFcReturn.get_return_employee_id))}}function _l(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",104)(2,"app-select-container",142),e.YNc(3,Ws,1,0,"ng-container",28),e.YNc(4,$s,1,0,"ng-container",29),e.qZA()(),e.TgZ(5,"div",104)(6,"app-text-container",146),e.YNc(7,Xs,1,0,"ng-container",28),e.YNc(8,el,1,0,"ng-container",29),e.qZA()(),e.TgZ(9,"div",104)(10,"app-select-container",147),e.YNc(11,tl,1,0,"ng-container",28),e.YNc(12,nl,1,0,"ng-container",29),e.qZA()(),e.TgZ(13,"div",143),e.YNc(14,al,7,9,"ng-container",41),e.YNc(15,ll,4,9,"ng-container",41),e.qZA(),e.BQk()),2&n){const t=e.oxw(3),i=e.MAs(32),r=e.MAs(34);e.xp6(2),e.Q6J("formCtrl",t.editFc.rental_employee_id)("options",t.employeeSuggests)("invalid",t.formControlStateManager(t.editFc.rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(22,se)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(23,Q,t.editFc.rental_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.getEmployeeByIdFcRental.get_rental_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(25,$)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(26,Q,t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.editFc.return_employee_id)("options",t.employeeSuggests)("invalid",t.formControlStateManager(t.editFc.return_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(28,Le)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(29,Q,t.editFc.return_employee_id)),e.xp6(2),e.Q6J("ngIf",!t.boolean_receipt_date),e.xp6(1),e.Q6J("ngIf",t.boolean_receipt_date)}}function ul(n,a){1&n&&e.GkF(0)}function dl(n,a){1&n&&e.GkF(0,49)}function cl(n,a){1&n&&e.GkF(0)}function pl(n,a){1&n&&e.GkF(0,49)}function ml(n,a){1&n&&e.GkF(0)}function gl(n,a){1&n&&e.GkF(0,49)}function hl(n,a){1&n&&e.GkF(0)}const fl=function(){return{label:"\u5dee\u984d(\u5ef6\u6ede)",required:"false"}};function Cl(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"app-text-container",151),e.YNc(2,hl,1,0,"ng-container",28),e.qZA(),e.BQk()),2&n){const t=e.oxw(3),i=e.MAs(32);e.xp6(1),e.Q6J("formCtrl",t.editFc.late_fee)("invalid",t.formControlStateManager(t.editFc.late_fee)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(4,fl))}}function Tl(n,a){1&n&&e.GkF(0)}const vl=function(){return{label:"\u5dee\u984d(\u6255\u623b)",required:"false"}};function El(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"app-text-container",152),e.YNc(2,Tl,1,0,"ng-container",28),e.qZA(),e.BQk()),2&n){const t=e.oxw(3),i=e.MAs(32);e.xp6(1),e.Q6J("formCtrl",t.editFc.refund_fee)("invalid",t.formControlStateManager(t.editFc.refund_fee)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(4,vl))}}function Dl(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",54)(2,"div",105)(3,"div",66)(4,"div",67)(5,"app-date-term",68),e.YNc(6,Us,1,0,"ng-container",28),e.YNc(7,Ls,1,0,"ng-container",29),e.qZA()(),e.TgZ(8,"div",67)(9,"app-date-term",69),e.YNc(10,Bs,1,0,"ng-container",28),e.YNc(11,qs,1,0,"ng-container",29),e.qZA()()(),e.YNc(12,Vs,1,0,"ng-container",28),e.qZA(),e.TgZ(13,"div",105)(14,"div",66)(15,"div",67)(16,"app-date-term",70),e.YNc(17,Qs,1,0,"ng-container",28),e.YNc(18,Ps,1,0,"ng-container",29),e.qZA()(),e.TgZ(19,"div",67)(20,"app-date-term",74),e.YNc(21,ws,1,0,"ng-container",28),e.YNc(22,Gs,1,0,"ng-container",29),e.qZA()()(),e.YNc(23,Js,1,0,"ng-container",28),e.qZA()(),e.TgZ(24,"div",54),e.YNc(25,zs,12,19,"ng-container",41),e.YNc(26,_l,16,31,"ng-container",41),e.qZA(),e.TgZ(27,"div",54)(28,"div",104)(29,"app-select-container",130),e.YNc(30,ul,1,0,"ng-container",28),e.YNc(31,dl,1,0,"ng-container",29),e.qZA()(),e.TgZ(32,"div",104)(33,"app-select-container",131),e.YNc(34,cl,1,0,"ng-container",28),e.YNc(35,pl,1,0,"ng-container",29),e.qZA()(),e.TgZ(36,"div",104)(37,"app-select-container",65),e.YNc(38,ml,1,0,"ng-container",28),e.YNc(39,gl,1,0,"ng-container",29),e.qZA()(),e.TgZ(40,"div",104),e.YNc(41,Cl,3,5,"ng-container",41),e.YNc(42,El,3,5,"ng-container",41),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2),i=e.MAs(32),r=e.MAs(34),o=e.MAs(38);e.xp6(5),e.Q6J("formCtrl",t.editFc.scheduledDateGroup.controls.scheduled_rental_date)("invalid",t.formControlStateManager(t.editFc.scheduledDateGroup.controls.scheduled_rental_date)||(null==t.editFc.scheduledDateGroup.errors?null:t.editFc.scheduledDateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(53,Ee)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(54,Z,t.editFc.scheduledDateGroup.controls.scheduled_rental_date)),e.xp6(2),e.Q6J("formCtrl",t.editFc.scheduledDateGroup.controls.scheduled_return_date)("invalid",t.formControlStateManager(t.editFc.scheduledDateGroup.controls.scheduled_return_date)||(null==t.editFc.scheduledDateGroup.errors?null:t.editFc.scheduledDateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(56,De)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(57,Z,t.editFc.scheduledDateGroup.controls.scheduled_return_date)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(59,ie,t.editFc.scheduledDateGroup)),e.xp6(4),e.Q6J("formCtrl",t.editFc.dateGroup.controls.rental_date)("invalid",t.formControlStateManager(t.editFc.dateGroup.controls.rental_date)||(null==t.editFc.dateGroup.errors?null:t.editFc.dateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(61,ft)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(62,Z,t.editFc.dateGroup.controls.rental_date)),e.xp6(2),e.Q6J("formCtrl",t.editFc.dateGroup.controls.return_date)("invalid",t.formControlStateManager(t.editFc.dateGroup.controls.return_date)||(null==t.editFc.dateGroup.errors?null:t.editFc.dateGroup.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(64,gt)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(65,Z,t.editFc.dateGroup.controls.return_date)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(67,ie,t.editFc.dateGroup)),e.xp6(2),e.Q6J("ngIf",!t.rentalItemStatus),e.xp6(1),e.Q6J("ngIf",t.rentalItemStatus),e.xp6(3),e.Q6J("formCtrl",t.editFc.delivery_division_id)("options",t.deliveryDivisionOptions)("invalid",t.formControlStateManager(t.editFc.delivery_division_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(69,qe)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(70,Z,t.editFc.delivery_division_id)),e.xp6(2),e.Q6J("formCtrl",t.editFc.collection_division_id)("options",t.collectionDivisionOptions)("invalid",t.formControlStateManager(t.editFc.collection_division_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(72,Ve)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(73,Z,t.editFc.collection_division_id)),e.xp6(2),e.Q6J("formCtrl",t.editFc.late_return_reported)("options",t.lateReturnReportedOptions)("invalid",t.formControlStateManager(t.editFc.late_return_reported)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(75,Be)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(76,Z,t.editFc.late_return_reported)),e.xp6(2),e.Q6J("ngIf",t.overdue_rentals_ad_status[0]===t.DIFF_STAUS_DETENTION),e.xp6(1),e.Q6J("ngIf",t.overdue_rentals_ad_status[0]===t.DIFF_STAUS_REFUND)}}function xl(n,a){1&n&&e.GkF(0)}function Sl(n,a){1&n&&e.GkF(0,49)}function Al(n,a){1&n&&e.GkF(0)}function Il(n,a){1&n&&e.GkF(0,49)}function Fl(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",132)(1,"div",118)(2,"p",133)(3,"span",134),e._uU(4,"\u203b \u6599\u91d1\u306f\u5546\u54c1\u306e\u58f2\u4fa1\u30fb\u7a0e\u7387\u30fb\u7a0e\u533a\u5206\uff08\u5185\u7a0e\u307e\u305f\u306f\u5916\u7a0e\uff09\u304b\u3089\u7a0e\u8fbc\u4fa1\u683c\u3092\u8a08\u7b97\u3057\u81ea\u52d5\u7684\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\u3010\u6ede\u7d0d\u30fb\u8fd4\u91d1\u30d5\u30a9\u30fc\u30e0\u3011"),e.qZA()(),e.TgZ(5,"form",135),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handleClickRentalDiffExecutionButton(""))}),e.TgZ(6,"div",136)(7,"div",137)(8,"p"),e._uU(9,"\u7de8\u96c6\u5bfe\u8c61\u306e\u30ec\u30f3\u30bf\u30eb\u5546\u54c1"),e.qZA(),e.YNc(10,Rs,7,4,"ng-container",41),e.qZA(),e.YNc(11,Ms,5,10,"ng-container",41),e.qZA(),e.YNc(12,Dl,43,78,"ng-container",41),e.TgZ(13,"div",54)(14,"div",67)(15,"app-textarea-container",126),e.YNc(16,xl,1,0,"ng-container",28),e.YNc(17,Sl,1,0,"ng-container",29),e.qZA()(),e.TgZ(18,"div",67)(19,"app-textarea-container",127),e.YNc(20,Al,1,0,"ng-container",28),e.YNc(21,Il,1,0,"ng-container",29),e.qZA()()(),e._UZ(22,"hr",112),e.TgZ(23,"div",128)(24,"div",129)(25,"app-button",34),e._uU(26," \u4fdd\u5b58 "),e.qZA()(),e.TgZ(27,"div",129)(28,"app-button",36),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.editFormCancel())}),e._uU(29,"\u30ad\u30e3\u30f3\u30bb\u30eb"),e.qZA()()()()()()}if(2&n){const t=e.oxw(),i=e.MAs(32),r=e.MAs(34);e.xp6(5),e.Q6J("formGroup",t.editForm),e.xp6(5),e.Q6J("ngIf",t.editTargetProduct),e.xp6(1),e.Q6J("ngIf",t.selectedProductDeliveryChargeFlag),e.xp6(1),e.Q6J("ngIf",!t.selectedProductDeliveryChargeFlag),e.xp6(3),e.Q6J("formCtrl",t.editFc.remarks_1)("invalid",t.formControlStateManager(t.editFc.remarks_1)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(17,Qe)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(18,Z,t.editFc.remarks_1)),e.xp6(2),e.Q6J("formCtrl",t.editFc.remarks_2)("invalid",t.formControlStateManager(t.editFc.remarks_2)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(20,Pe)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(21,Z,t.editFc.remarks_2)),e.xp6(4),e.Q6J("buttonDisabled",t.editForm.invalid||t.editForm.pristine)}}function bl(n,a){1&n&&(e.TgZ(0,"span",154),e._uU(1,"\u5fc5\u9808"),e.qZA())}function Ol(n,a){if(1&n&&(e.TgZ(0,"div",122)(1,"span",78),e._uU(2),e.qZA(),e.YNc(3,bl,2,0,"span",153),e.qZA()),2&n){const t=a.label,i=a.required;e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",i)}}function yl(n,a){if(1&n&&(e.TgZ(0,"p",156),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.errorConst.FORM_ERROR.REQUIRED_ITEM," ")}}function Nl(n,a){if(1&n&&(e.ynx(0),e.YNc(1,yl,2,1,"p",155),e.BQk()),2&n){const t=e.oxw().ctrl;e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function Rl(n,a){if(1&n&&e.YNc(0,Nl,2,1,"ng-container",41),2&n){const t=a.ctrl,i=e.oxw();e.Q6J("ngIf",i.formControlStateManager(t))}}function kl(n,a){if(1&n&&(e.TgZ(0,"p",156),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.errorConst.FORM_ERROR.EXCEEDED_CHARACTER_MIN_LIMIT," ")}}function Zl(n,a){if(1&n&&(e.ynx(0),e.YNc(1,kl,2,1,"p",155),e.BQk()),2&n){const t=e.oxw().ctrl;e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.min)}}function Ml(n,a){if(1&n&&e.YNc(0,Zl,2,1,"ng-container",41),2&n){const t=a.ctrl,i=e.oxw();e.Q6J("ngIf",i.formControlStateManager(t))}}function Ul(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p",156),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.errorConst.FORM_ERROR.DATE_SPECIFICATION_VIOLATION," ")}}function Ll(n,a){if(1&n&&e.YNc(0,Ul,3,1,"ng-container",41),2&n){const t=a.ctrls;e.Q6J("ngIf",null==t.errors?null:t.errors.isStartDateGreaterThanOrEqualToEndDate)}}const Bl=function(n){return{path:n,text:"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u4e00\u89a7"}},ql=function(){return{text:"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u8a73\u7d30"}},Vl=function(n,a){return[n,a]};function Pl(n,a){1&n&&e.GkF(0)}function wl(n,a){1&n&&e.GkF(0,74)}function Gl(n,a){1&n&&e.GkF(0)}function Jl(n,a){1&n&&e.GkF(0,74)}function Yl(n,a){1&n&&e.GkF(0)}function Kl(n,a){1&n&&e.GkF(0,74)}function Hl(n,a){1&n&&e.GkF(0)}function jl(n,a){1&n&&e.GkF(0)}function zl(n,a){1&n&&e.GkF(0,74)}function Wl(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div")(2,"label",22)(3,"input",75),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onProcessingUnitsRadioChange(r))}),e.qZA(),e._uU(4),e.qZA()(),e.BQk()}if(2&n){const t=a.$implicit,i=e.oxw();e.xp6(3),e.Q6J("checked",t.value===i.processingUnitValue)("id","processing-unit")("name","processing-unit")("value",t.value),e.xp6(1),e.hij(" ",t.display," ")}}function $l(n,a){1&n&&e.GkF(0)}function Xl(n,a){1&n&&e.GkF(0)}function e_(n,a){1&n&&e.GkF(0)}function t_(n,a){if(1&n&&(e.ynx(0),e.YNc(1,$l,1,0,"ng-container",76),e.YNc(2,Xl,1,0,"ng-container",76),e.YNc(3,e_,1,0,"ng-container",76),e.BQk()),2&n){const t=e.oxw(),i=e.MAs(142),r=e.MAs(144),o=e.MAs(146);e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_CLIENT)("ngIfThen",i),e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_MEMBER)("ngIfThen",r),e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_GENERAL)("ngIfThen",o)}}function n_(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.TgZ(3,"span",83),e._uU(4,"\uff08\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u306e\u78ba\u8a8d\u304c\u5fc5\u8981\u3067\u3059\uff01\uff09"),e.qZA()(),e.BQk()),2&n){const t=e.oxw(5);e.xp6(2),e.hij(" \u524d\u56de\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u78ba\u8a8d\u65e5\uff1a",t.selectedCustomer.idConfirmationDate," ")}}function i_(n,a){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw(5);e.xp6(1),e.hij(" \u524d\u56de\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u78ba\u8a8d\u65e5\uff1a",t.selectedCustomer.idConfirmationDate," ")}}function r_(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,n_,5,1,"ng-container",79),e.YNc(2,i_,2,1,"ng-template",null,82,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw(4);e.xp6(1),e.Q6J("ngIf",i.selectedCustomer.isIdConfirmationRequired)("ngIfElse",t)}}function a_(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",81)(2,"p"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.YNc(10,r_,4,2,"div",26),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(3),e.AsE(" \u304a\u5ba2\u69d8\u540d\uff1a",t.selectedCustomer.fullName,"",t.selectedCustomer.fullNameKana?"\uff08"+t.selectedCustomer.fullNameKana+"\uff09":""," "),e.xp6(2),e.Oqu(t.selectedCustomer.fullNameKana),e.xp6(2),e.hij("\u96fb\u8a71\u756a\u53f7\uff1a",t.selectedCustomer.tel,""),e.xp6(2),e.hij("\u3054\u4f4f\u6240\uff1a",t.selectedCustomer.address,""),e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_MEMBER)}}function o_(n,a){1&n&&(e.TgZ(0,"p",84),e._uU(1," \u304a\u5ba2\u69d8\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044 "),e.qZA())}function s_(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",86)(1,"app-button",87),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4);return e.KtG(r.confirmedIdentityVerificationDocuments())}),e._uU(2," \u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f "),e.qZA()()}}function l_(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,s_,3,0,"div",85),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.selectedCustomer?null:t.selectedCustomer.id)}}function __(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",78)(2,"span"),e._uU(3,"\u9078\u629e\u4e2d\u304a\u5ba2\u69d8\u60c5\u5831"),e.qZA(),e.YNc(4,a_,11,6,"ng-container",79),e.YNc(5,o_,2,0,"ng-template",null,80,e.W1O),e.qZA(),e.YNc(7,l_,2,1,"div",26),e.BQk()),2&n){const t=e.MAs(6),i=e.oxw(2);e.xp6(4),e.Q6J("ngIf",null==i.selectedCustomer?null:i.selectedCustomer.id)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",i.selectedCustomerCode===i.DIVISION_CUSTOMER_CODE_MEMBER&&!0===i.idConfirmationDate)}}function u_(n,a){1&n&&e.GkF(0)}function d_(n,a){1&n&&e.GkF(0,74)}function c_(n,a){1&n&&e.GkF(0)}function p_(n,a){1&n&&e.GkF(0,74)}function m_(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",81)(2,"p"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA()(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(3),e.AsE(" \u304a\u5ba2\u69d8\u540d\uff1a",t.generalFc.last_name.value+""+t.generalFc.first_name.value,"",t.selectedCustomer.fullNameKana?"\uff08"+t.generalFc.last_name.value+" "+t.generalFc.first_name.value+"\uff09":""," "),e.xp6(2),e.hij(" ",t.generalFc.last_name.value+" "+t.generalFc.first_name.value," "),e.xp6(2),e.hij("\u96fb\u8a71\u756a\u53f7\uff1a",t.generalFc.tel.value,""),e.xp6(2),e.hij("\u3054\u4f4f\u6240\uff1a",t.generalFc.shipping_address.value,"")}}function g_(n,a){1&n&&(e.TgZ(0,"p",84),e._uU(1," \u304a\u5ba2\u69d8\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044 "),e.qZA())}const we=function(){return{label:"\u914d\u9001\u5148\u4f4f\u6240\uff08255\u6587\u5b57\u4ee5\u5185\uff09",required:!1}},h_=function(){return{ctrl:"\u203b\u5fc5\u9808\u9805\u76ee\u3067\u3059\u3002"}},f_=function(){return{label:"\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u78ba\u8a8d\u65e5",required:"true"}},w=function(n){return{ctrl:n}};function C_(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",88)(2,"div",89)(3,"app-text-container",90),e.YNc(4,u_,1,0,"ng-container",13),e.YNc(5,d_,1,0,"ng-container",14),e.qZA()(),e.TgZ(6,"div",91)(7,"app-date-term",92),e.YNc(8,c_,1,0,"ng-container",13),e.YNc(9,p_,1,0,"ng-container",14),e.qZA()()(),e._UZ(10,"div",88),e.TgZ(11,"div",77)(12,"div",78)(13,"span"),e._uU(14,"\u9078\u629e\u4e2d\u304a\u5ba2\u69d8\u60c5\u5831"),e.qZA(),e.YNc(15,m_,10,5,"ng-container",79),e.YNc(16,g_,2,0,"ng-template",null,80,e.W1O),e.qZA()(),e.BQk()),2&n){const t=e.MAs(17),i=e.oxw(2),r=e.MAs(150),o=e.MAs(152);e.xp6(3),e.Q6J("formCtrl",i.generalFc.shipping_address)("invalid",i.formControlStateManager(i.generalFc.shipping_address)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.DdM(14,we)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.DdM(15,h_)),e.xp6(2),e.Q6J("formCtrl",i.generalFc.identification_document_confirmation_date)("invalid",i.formControlStateManager(i.generalFc.identification_document_confirmation_date)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.DdM(16,f_)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(17,w,i.generalFc.identification_document_confirmation_date)),e.xp6(6),e.Q6J("ngIf",null==i.selectedCustomer?null:i.selectedCustomer.id)("ngIfElse",t)}}function T_(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",77),e.YNc(2,__,8,3,"ng-container",26),e.qZA(),e.YNc(3,C_,18,19,"ng-container",26),e.BQk()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_MEMBER||t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_CLIENT),e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_GENERAL)}}function v_(n,a){1&n&&e.GkF(0)}function E_(n,a){1&n&&e.GkF(0,74)}function D_(n,a){1&n&&e.GkF(0)}function x_(n,a){1&n&&e.GkF(0,74)}function S_(n,a){1&n&&e.GkF(0)}function A_(n,a){1&n&&e.GkF(0,74)}function I_(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"app-text-container",90),e.YNc(2,S_,1,0,"ng-container",13),e.YNc(3,A_,1,0,"ng-container",14),e.qZA(),e.BQk()),2&n){const t=e.oxw(2),i=e.MAs(150),r=e.MAs(152);e.xp6(1),e.Q6J("formCtrl",t.memberCtrls.shipping_address)("invalid",t.formControlStateManager(t.memberCtrls.shipping_address)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(6,we)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(7,w,t.memberCtrls.shipping_address))}}function F_(n,a){1&n&&e.GkF(0)}function b_(n,a){1&n&&e.GkF(0,74)}function O_(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"app-text-container",90),e.YNc(2,F_,1,0,"ng-container",13),e.YNc(3,b_,1,0,"ng-container",14),e.qZA(),e.BQk()),2&n){const t=e.oxw(2),i=e.MAs(150),r=e.MAs(152);e.xp6(1),e.Q6J("formCtrl",t.clientCtrls.shipping_address)("invalid",t.formControlStateManager(t.clientCtrls.shipping_address)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(6,we)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(7,w,t.clientCtrls.shipping_address))}}function y_(n,a){1&n&&e.GkF(0)}function N_(n,a){1&n&&e.GkF(0,74)}const Ct=function(){return{label:"\u643a\u5e2f\u96fb\u8a71\u756a\u53f7\uff08\u534a\u89d2\u6570\u5b5716\u6841\u4ee5\u5185\uff09",required:!1}};function R_(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",93)(2,"div",94),e.YNc(3,I_,4,9,"ng-container",26),e.YNc(4,O_,4,9,"ng-container",26),e.qZA(),e.TgZ(5,"div",95)(6,"app-text-container",96),e.YNc(7,y_,1,0,"ng-container",13),e.YNc(8,N_,1,0,"ng-container",14),e.qZA()()(),e.TgZ(9,"div",41)(10,"p",97),e._uU(11," \u203b \u914d\u9001\u5148\u304c\u767b\u9332\u5148\u3068\u7570\u306a\u308b\u5834\u5408\u3001\u767b\u9332\u3055\u308c\u305f\u96fb\u8a71\u756a\u53f7\u4ee5\u5916\u306b\u9023\u7d61\u3092\u5e0c\u671b\u3059\u308b\u643a\u5e2f\u96fb\u8a71\u756a\u53f7\u304c\u3042\u308b\u5834\u5408\u3001\u4e0a\u8a18\u306e\u9805\u76ee\u3078\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 "),e.qZA()(),e.BQk()),2&n){const t=e.oxw(),i=e.MAs(150),r=e.MAs(158);e.xp6(3),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_MEMBER),e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_CLIENT),e.xp6(2),e.Q6J("formCtrl",t.commonFc.mobile_number)("invalid",t.formControlStateManager(t.commonFc.mobile_number)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(8,Ct)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(9,w,t.commonFc.mobile_number))}}function k_(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2,"\u8cb8\u51fa\u671f\u9593\u8a2d\u5b9a\uff08\u53d7\u4ed8\u8868\u5358\u4f4d\uff09"),e.qZA(),e.TgZ(3,"form",98)(4,"table")(5,"tr")(6,"th"),e._uU(7,"\u8cb8\u51fa\u4e88\u5b9a\u65e5"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"\u8fd4\u5374\u4e88\u5b9a\u65e5"),e.qZA()(),e.TgZ(10,"tr")(11,"td")(12,"div",99),e._UZ(13,"app-datepicker",100),e.qZA()(),e.TgZ(14,"td")(15,"div",99),e._UZ(16,"app-datepicker",101),e.qZA()()()()(),e.BQk()),2&n){const t=e.oxw();let i,r;e.xp6(3),e.Q6J("formGroup",t.rentalDateForms),e.xp6(10),e.Q6J("formCtrl",t.getBulkScheduledRentalDateControl())("invalid",t.formControlStateManager(null==(i=t.rentalDateForms.get("bulkScheduledDateGroup"))?null:i.get("bulk_scheduled_rental_date"))||(null==(i=t.rentalDateForms.get("bulkScheduledDateGroup"))||null==i.errors?null:i.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(3),e.Q6J("formCtrl",t.getBulkScheduledReturnDateControl())("invalid",t.formControlStateManager(null==(r=t.rentalDateForms.get("bulkScheduledDateGroup"))?null:r.get("bulk_scheduled_return_date"))||(null==(r=t.rentalDateForms.get("bulkScheduledDateGroup"))||null==r.errors?null:r.errors.isStartDateGreaterThanOrEqualToEndDate))}}function Z_(n,a){1&n&&e.GkF(0)}function M_(n,a){1&n&&e.GkF(0,74)}function U_(n,a){1&n&&e.GkF(0)}function L_(n,a){1&n&&e.GkF(0,74)}const Tt=function(){return{label:"\u8cb8\u51fa\u62c5\u5f53\u8005",required:!1}},re=function(n){return{fc:n}},Ge=function(){return{label:"\u793e\u54e1ID\u3067\u9078\u629e",required:!1}};function B_(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",102)(2,"app-select-container",103),e.YNc(3,Z_,1,0,"ng-container",13),e.YNc(4,M_,1,0,"ng-container",14),e.qZA()(),e.TgZ(5,"div",102)(6,"app-text-container",104),e.YNc(7,U_,1,0,"ng-container",13),e.YNc(8,L_,1,0,"ng-container",14),e.qZA()(),e.BQk()),2&n){const t=e.oxw(),i=e.MAs(150),r=e.MAs(152);e.xp6(2),e.Q6J("formCtrl",t.rentalEc.rental_employee_id)("options",t.employeeSuggests)("invalid",t.formControlStateManager(t.rentalEc.rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(13,Tt)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(14,re,t.rentalEc.rental_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.getEmployeeByIdFcRental.get_rental_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(16,Ge)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(17,re,t.getEmployeeByIdFcRental.get_rental_employee_id))}}function q_(n,a){1&n&&e.GkF(0)}function V_(n,a){1&n&&e.GkF(0,74)}function Q_(n,a){1&n&&e.GkF(0)}function P_(n,a){1&n&&e.GkF(0,74)}function w_(n,a){1&n&&e.GkF(0)}function G_(n,a){1&n&&e.GkF(0,74)}function J_(n,a){1&n&&e.GkF(0)}function Y_(n,a){1&n&&e.GkF(0,74)}const K_=function(){return{label:"\u8fd4\u5374\u62c5\u5f53\u8005",required:!1}};function H_(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",102)(2,"app-select-container",103),e.YNc(3,q_,1,0,"ng-container",13),e.YNc(4,V_,1,0,"ng-container",14),e.qZA()(),e.TgZ(5,"div",102)(6,"app-text-container",104),e.YNc(7,Q_,1,0,"ng-container",13),e.YNc(8,P_,1,0,"ng-container",14),e.qZA()(),e.TgZ(9,"div",102)(10,"app-select-container",105),e.YNc(11,w_,1,0,"ng-container",13),e.YNc(12,G_,1,0,"ng-container",14),e.qZA()(),e.TgZ(13,"div",102)(14,"app-text-container",106),e.YNc(15,J_,1,0,"ng-container",13),e.YNc(16,Y_,1,0,"ng-container",14),e.qZA()(),e.BQk()),2&n){const t=e.oxw(),i=e.MAs(150),r=e.MAs(152);e.xp6(2),e.Q6J("formCtrl",t.rentalEc.rental_employee_id)("options",t.employeeSuggests)("invalid",t.formControlStateManager(t.rentalEc.rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(26,Tt)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(27,re,t.rentalEc.rental_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.getEmployeeByIdFcRental.get_rental_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(29,Ge)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(30,re,t.getEmployeeByIdFcRental.get_rental_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.rentalEc.return_employee_id)("options",t.employeeSuggests)("invalid",t.formControlStateManager(t.rentalEc.return_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(32,K_)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(33,re,t.rentalEc.return_employee_id)),e.xp6(2),e.Q6J("formCtrl",t.getEmployeeByIdFcReturn.get_return_employee_id)("invalid",t.formControlStateManager(t.getEmployeeByIdFcReturn.get_return_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(35,Ge)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(36,re,t.getEmployeeByIdFcReturn.get_return_employee_id))}}function j_(n,a){1&n&&e.GkF(0)}function z_(n,a){1&n&&e.GkF(0,74)}function W_(n,a){1&n&&e.GkF(0)}function $_(n,a){1&n&&e.GkF(0,74)}function X_(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",107)(2,"app-button",87),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onClickReset())}),e._uU(3,"\u30af\u30ea\u30a2"),e.qZA(),e.TgZ(4,"app-button",108),e._uU(5,"\u4fdd\u5b58"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("buttonDisabled",t.commonForm.invalid||t.commonForm.pristine||t.clientForm.invalid||t.clientForm.pristine)}}function eu(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",107)(2,"app-button",87),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onClickReset())}),e._uU(3,"\u30af\u30ea\u30a2"),e.qZA(),e.TgZ(4,"app-button",108),e._uU(5,"\u4fdd\u5b58"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("buttonDisabled",t.commonForm.invalid||t.commonForm.pristine||t.memberForm.invalid||t.memberForm.pristine)}}function tu(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",107)(2,"app-button",87),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onClickReset())}),e._uU(3,"\u30af\u30ea\u30a2"),e.qZA(),e.TgZ(4,"app-button",108),e._uU(5,"\u4fdd\u5b58"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("buttonDisabled",t.commonForm.invalid||t.commonForm.pristine||t.generalForm.invalid)}}function nu(n,a){if(1&n&&(e.ynx(0),e.YNc(1,X_,6,1,"ng-container",26),e.YNc(2,eu,6,1,"ng-container",26),e.YNc(3,tu,6,1,"ng-container",26),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_CLIENT),e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_MEMBER),e.xp6(1),e.Q6J("ngIf",t.selectedCustomerCode===t.DIVISION_CUSTOMER_CODE_GENERAL)}}function iu(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",84)(2,"p"),e._uU(3,"\u9078\u629e\u5546\u54c1\u306a\u3057"),e.qZA()(),e.BQk())}function ru(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"app-datepicker",126),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);let r,o;e.xp6(1),e.Q6J("formCtrl",i.getScheduledReturnDateControl(t))("invalid",i.formControlStateManager(null==(r=t.get("scheduledDateGroup"))?null:r.get("scheduled_return_date"))||(null==(r=t.get("scheduledDateGroup"))||null==(o=r.get("scheduled_return_date"))||null==o.errors?null:o.errors.isStartDateGreaterThanOrEqualToEndDate))}}function au(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"tr",116)(1,"td",117),e._uU(2),e.qZA(),e.TgZ(3,"td",117),e._uU(4),e.qZA(),e.TgZ(5,"td",118),e._uU(6),e.qZA(),e.TgZ(7,"td",117),e._uU(8),e.ALo(9,"number"),e.qZA(),e.TgZ(10,"td",117),e._uU(11),e.qZA(),e.TgZ(12,"td",119)(13,"div",120),e._UZ(14,"app-datepicker",121),e.qZA()(),e.TgZ(15,"td",119)(16,"div",120),e.YNc(17,ru,2,2,"ng-container",26),e.qZA()(),e.TgZ(18,"td",117)(19,"div",120),e._UZ(20,"app-select",122),e.qZA()(),e.TgZ(21,"td",117)(22,"div"),e._UZ(23,"app-select",123),e.qZA()(),e.TgZ(24,"td",117),e._uU(25),e.ALo(26,"number"),e.qZA(),e.TgZ(27,"td",117)(28,"div",124)(29,"app-icon-container",125),e.NdJ("click",function(){const o=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.deleteSelectedRentalProduct(o))}),e.qZA()()()()}if(2&n){const t=a.$implicit,i=a.index,r=e.oxw(2);let o,s;e.Q6J("formGroupName",i),e.xp6(2),e.hij(" ",t.value.id," "),e.xp6(2),e.hij(" ",t.value.rental_product_id," "),e.xp6(2),e.hij(" ",t.value.rental_product_name," "),e.xp6(2),e.hij(" ",e.lcZ(9,18,t.value.selling_price)," \u5186 "),e.xp6(3),e.hij(" ",t.value.division_status_value," "),e.xp6(1),e.Q6J("hidden",!r.showOnebyoneSuggest),e.xp6(2),e.Q6J("formCtrl",r.getScheduledRentalDateControl(t))("invalid",r.formControlStateManager(null==(o=t.get("scheduledDateGroup"))?null:o.get("scheduled_rental_date"))||(null==(o=t.get("scheduledDateGroup"))||null==o.errors?null:o.errors.isStartDateGreaterThanOrEqualToEndDate)),e.xp6(1),e.Q6J("hidden",!r.showOnebyoneSuggest),e.xp6(2),e.Q6J("ngIf",null==(s=t.get("scheduledDateGroup"))?null:s.get("scheduled_rental_date")),e.xp6(3),e.Q6J("formCtrl",r.getFormControlTypeValue(t,"delivery_division_id"))("options",r.deliveryDivisionOptions)("invalid",r.formControlStateManager(r.getFormControlTypeValue(t,"delivery_division_id"))),e.xp6(3),e.Q6J("formCtrl",r.getFormControlTypeValue(t,"collection_division_id"))("options",r.collectionDivisionOptions)("invalid",r.formControlStateManager(r.getFormControlTypeValue(t,"collection_division_id"))),e.xp6(2),e.hij(" ",e.lcZ(26,20,t.value.rental_fee)," \u5186 ")}}function ou(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"form",98)(2,"table",109)(3,"thead")(4,"tr")(5,"th",110),e._uU(6," RentalID "),e.qZA(),e.TgZ(7,"th",110),e._uU(8," ID "),e.qZA(),e.TgZ(9,"th",111),e._uU(10," \u5546\u54c1\u540d "),e.qZA(),e.TgZ(11,"th",110),e._uU(12," \u57fa\u672c\u6599\u91d1 "),e.qZA(),e.TgZ(13,"th",110),e._uU(14," \u30b9\u30c6\u30fc\u30bf\u30b9 "),e.qZA(),e.TgZ(15,"th",112),e._uU(16," \u8cb8\u51fa\u4e88\u5b9a\u65e5 "),e.qZA(),e.TgZ(17,"th",112),e._uU(18," \u8fd4\u5374\u4e88\u5b9a\u65e5 "),e.qZA(),e.TgZ(19,"th",113),e._uU(20," \u914d\u9001\u533a\u5206 "),e.qZA(),e.TgZ(21,"th",113),e._uU(22," \u56de\u53ce\u533a\u5206 "),e.qZA(),e.TgZ(23,"th",110),e._uU(24," \u30ec\u30f3\u30bf\u30eb\u6599\u91d1 "),e.qZA(),e.TgZ(25,"th",110),e._uU(26," \u524a\u9664 "),e.qZA()()(),e.TgZ(27,"tbody",114),e.ynx(28),e.YNc(29,au,30,22,"tr",115),e.BQk(),e.qZA()()(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.rentalAddForms),e.xp6(14),e.Q6J("hidden",!t.showOnebyoneSuggest),e.xp6(2),e.Q6J("hidden",!t.showOnebyoneSuggest),e.xp6(12),e.Q6J("ngForOf",t.rentalAddFormArrayControls)}}function su(n,a){1&n&&e.GkF(0)}function lu(n,a){1&n&&e.GkF(0,74)}const vt=function(n,a){return{"cursor-not-allowed":n,"cursor-pointer":a}};function _u(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div")(2,"label",127)(3,"input",128),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onRentalProductAcquisitionTypeRadioChange(r))}),e.qZA(),e._uU(4),e.qZA()(),e.BQk()}if(2&n){const t=a.$implicit,i=e.oxw();e.xp6(2),e.Q6J("ngClass",e.WLB(8,vt,i.showProductNameSuggest,!i.showProductNameSuggest)),e.xp6(1),e.Q6J("checked",t.value===i.RENTAL_PRODUCT_ACQUISITION_ALL)("id","rental-product-"+t.value)("name","rental_product_"+ +t.value)("value",t.value)("disabled",i.showProductNameSuggest)("ngClass",e.WLB(11,vt,i.showProductNameSuggest,!i.showProductNameSuggest)),e.xp6(1),e.hij(" ",t.display," ")}}function uu(n,a){1&n&&e._UZ(0,"app-icon",131)}const du=function(n){return{"rounded-b-md":n}};function cu(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",129),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.drillDownMenu(o.id,o.has_children))}),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.YNc(4,uu,1,0,"app-icon",130),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit,i=a.last;e.xp6(1),e.Q6J("ngClass",e.VKq(3,du,i)),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",t.has_children)}}function pu(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"br"),e._uU(2),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.value2)}}const mu=function(n,a){return{"justify-center text-center":n,"sticky z-30 bg-white":a}};function gu(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"span",133),e._uU(2),e.YNc(3,pu,3,1,"ng-container",26),e.qZA(),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.MT6("inline-flex h-[59px] ",t.leftPosition," ",t.width," items-center px-1 py-2"),e.Q6J("ngClass",e.WLB(7,mu,t.isCenter,t.leftPosition)),e.xp6(1),e.hij(" ",t.value1," "),e.xp6(1),e.Q6J("ngIf",t.value2)}}function hu(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",132),e.YNc(2,gu,4,10,"ng-container",25),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.reservationStatusHeader)}}const fu=function(n,a,t,i){return{"justify-center text-center":n,"bg-iron-blue-100":a,"bg-white":t,"sticky z-1":i}};function Cu(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",133)(2,"input",137),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.onCheckboxChange(r,o.value))}),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw().index;e.xp6(1),e.MT6("flex relative ",t.leftPosition," ",t.width," items-center px-1 py-2"),e.Q6J("ngClass",e.l5B(5,fu,t.isCenter,i%2==0,i%2!=0,t.leftPosition))}}const Tu=function(n,a,t,i){return{"justify-center text-center":n,"bg-iron-blue-100":a,"bg-white":t,"sticky z-10":i}};function vu(n,a){if(1&n&&(e.TgZ(0,"span",133),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw().index;e.MT6("flex ",t.leftPosition," ",t.width," items-center px-1 py-2"),e.Q6J("ngClass",e.l5B(6,Tu,t.isCenter,i%2==0,i%2!=0,t.leftPosition)),e.xp6(1),e.hij(" ",t.value," ")}}function Eu(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Cu,3,10,"ng-container",79),e.YNc(2,vu,2,11,"ng-template",null,136,e.W1O),e.BQk()),2&n){const t=a.first,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf",t)("ngIfElse",i)}}function Du(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",134)(2,"div",135),e.YNc(3,Eu,4,2,"ng-container",25),e.qZA()(),e.BQk()),2&n){const t=a.$implicit;e.xp6(3),e.Q6J("ngForOf",t)}}function xu(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Du,4,1,"ng-container",25),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.reservationStatusBody)}}function Su(n,a){1&n&&e.GkF(0)}function Au(n,a){1&n&&e.GkF(0,74)}const Iu=function(){return{label:"\u5f97\u610f\u5148",required:"true"}};function Fu(n,a){if(1&n&&(e.TgZ(0,"div",138)(1,"div",11)(2,"app-select-suggest-container",139),e.YNc(3,Su,1,0,"ng-container",13),e.YNc(4,Au,1,0,"ng-container",14),e.qZA()()()),2&n){const t=e.oxw(),i=e.MAs(150),r=e.MAs(152);e.xp6(2),e.Q6J("formCtrl",t.clientCtrls.client_id)("suggests",t.clientSuggests)("invalid",t.formControlStateManager(t.clientCtrls.client_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(7,Iu)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(8,w,t.clientCtrls.client_id))}}function bu(n,a){1&n&&e.GkF(0)}function Ou(n,a){1&n&&e.GkF(0,74)}const yu=function(){return{label:"\u4f1a\u54e1",required:"true"}};function Nu(n,a){if(1&n&&(e.TgZ(0,"div",138)(1,"div",11)(2,"app-select-suggest-container",140),e.YNc(3,bu,1,0,"ng-container",13),e.YNc(4,Ou,1,0,"ng-container",14),e.qZA()()()),2&n){const t=e.oxw(),i=e.MAs(150),r=e.MAs(152);e.xp6(2),e.Q6J("formCtrl",t.memberCtrls.member_id)("suggests",t.memberSuggests)("invalid",t.formControlStateManager(t.memberCtrls.member_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(7,yu)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(8,w,t.memberCtrls.member_id))}}function Ru(n,a){1&n&&e.GkF(0)}function ku(n,a){1&n&&e.GkF(0,74)}function Zu(n,a){1&n&&e.GkF(0)}function Mu(n,a){1&n&&e.GkF(0,74)}function Uu(n,a){1&n&&e.GkF(0)}function Lu(n,a){1&n&&e.GkF(0,74)}function Bu(n,a){1&n&&e.GkF(0)}function qu(n,a){1&n&&e.GkF(0,74)}function Vu(n,a){1&n&&e.GkF(0)}function Qu(n,a){1&n&&e.GkF(0,74)}function Pu(n,a){1&n&&e.GkF(0)}function wu(n,a){1&n&&e.GkF(0,74)}const Gu=function(){return{label:"\u59d3 \u540d",required:!0}},Et=function(){return{label:"\u3000",required:!1}},Ju=function(){return{label:"\u96fb\u8a71\u756a\u53f7\uff08\u534a\u89d2\u6570\u5b5716\u6841\u4ee5\u5185\uff09",required:"false"}},Yu=function(){return{label:"\u30bb\u30a4 \u30e1\u30a4",required:!1}};function Ku(n,a){if(1&n&&(e.TgZ(0,"div",77)(1,"div",95)(2,"app-text-container",141),e.YNc(3,Ru,1,0,"ng-container",13),e.YNc(4,ku,1,0,"ng-container",14),e.qZA()(),e.TgZ(5,"div",11)(6,"app-text-container",142),e.YNc(7,Zu,1,0,"ng-container",13),e.YNc(8,Mu,1,0,"ng-container",14),e.qZA()(),e.TgZ(9,"div",11)(10,"app-text-container",143),e.YNc(11,Uu,1,0,"ng-container",13),e.YNc(12,Lu,1,0,"ng-container",14),e.qZA()()(),e.TgZ(13,"div",77)(14,"div",11)(15,"app-text-container",144),e.YNc(16,Bu,1,0,"ng-container",13),e.YNc(17,qu,1,0,"ng-container",14),e.qZA()(),e.TgZ(18,"div",11)(19,"app-text-container",145),e.YNc(20,Vu,1,0,"ng-container",13),e.YNc(21,Qu,1,0,"ng-container",14),e.qZA()(),e.TgZ(22,"div",11)(23,"app-text-container",96),e.YNc(24,Pu,1,0,"ng-container",13),e.YNc(25,wu,1,0,"ng-container",14),e.qZA()()()),2&n){const t=e.oxw(),i=e.MAs(150),r=e.MAs(152),o=e.MAs(158);e.xp6(2),e.Q6J("formCtrl",t.generalFc.last_name)("invalid",t.formControlStateManager(t.generalFc.last_name)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(36,Gu)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(37,w,t.generalFc.last_name)),e.xp6(2),e.Q6J("formCtrl",t.generalFc.first_name)("invalid",t.formControlStateManager(t.generalFc.first_name)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(39,Et)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(40,w,t.generalFc.first_name)),e.xp6(2),e.Q6J("formCtrl",t.generalFc.tel)("invalid",t.formControlStateManager(t.generalFc.tel)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(42,Ju)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(43,w,t.generalFc.tel)),e.xp6(3),e.Q6J("formCtrl",t.generalFc.last_name_kana)("invalid",t.formControlStateManager(t.generalFc.last_name_kana)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(45,Yu)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(46,w,t.generalFc.last_name_kana)),e.xp6(2),e.Q6J("formCtrl",t.generalFc.first_name_kana)("invalid",t.formControlStateManager(t.generalFc.first_name_kana)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(48,Et)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(49,w,t.generalFc.first_name_kana)),e.xp6(2),e.Q6J("formCtrl",t.commonFc.mobile_number)("invalid",t.formControlStateManager(t.commonFc.mobile_number)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(51,Ct)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(52,w,t.commonFc.mobile_number))}}function Hu(n,a){1&n&&e.GkF(0)}function ju(n,a){1&n&&e.GkF(0,74)}const zu=function(){return{label:"\u30b9\u30c6\u30fc\u30bf\u30b9",required:!0}};function Wu(n,a){if(1&n&&(e.TgZ(0,"div",46)(1,"div",146)(2,"app-select-container",147),e.YNc(3,Hu,1,0,"ng-container",13),e.YNc(4,ju,1,0,"ng-container",14),e.qZA()()()),2&n){const t=e.oxw(),i=e.MAs(150),r=e.MAs(152);e.xp6(2),e.Q6J("formCtrl",t.commonFc.status_division_id)("options",t.statusDivisions)("invalid",t.formControlStateManager(t.commonFc.status_division_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(7,zu)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(8,w,t.commonFc.status_division_id))}}function $u(n,a){1&n&&(e.TgZ(0,"span",149),e._uU(1,"\u5fc5\u9808"),e.qZA())}function Xu(n,a){if(1&n&&(e.TgZ(0,"div",52)(1,"span"),e._uU(2),e.qZA(),e.YNc(3,$u,2,0,"span",148),e.qZA()),2&n){const t=a.label,i=a.required;e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",i)}}function ed(n,a){if(1&n&&(e.TgZ(0,"p",151),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.errorConst.FORM_ERROR.REQUIRED_ITEM," ")}}function td(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ed,2,1,"p",150),e.BQk()),2&n){const t=e.oxw().ctrl;e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function nd(n,a){if(1&n&&e.YNc(0,td,2,1,"ng-container",26),2&n){const t=a.ctrl,i=e.oxw();e.Q6J("ngIf",i.formControlStateManager(t))}}function id(n,a){if(1&n&&(e.TgZ(0,"p",151),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.errorConst.FORM_ERROR.FULL_WIDTH_KATAKANA_RESTRICTION_VIOLATION," ")}}function rd(n,a){if(1&n&&(e.ynx(0),e.YNc(1,id,2,1,"p",150),e.BQk()),2&n){const t=e.oxw().ctrl;e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.pattern)}}function ad(n,a){if(1&n&&e.YNc(0,rd,2,1,"ng-container",26),2&n){const t=a.ctrl,i=e.oxw();e.Q6J("ngIf",i.formControlStateManager(t))}}function od(n,a){1&n&&(e.TgZ(0,"p",151),e._uU(1," \u203b \u96fb\u8a71\u756a\u53f7\u307e\u305f\u306f\u643a\u5e2f\u96fb\u8a71\u756a\u53f7\u3069\u3061\u3089\u304b\u4e00\u65b9\u5fc5\u9808 "),e.qZA())}function sd(n,a){if(1&n&&(e.ynx(0),e.YNc(1,od,2,0,"p",150),e.BQk()),2&n){const t=e.oxw().ctrl;e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.eitherRequired)}}function ld(n,a){if(1&n&&e.YNc(0,sd,2,1,"ng-container",26),2&n){const t=a.ctrl,i=e.oxw();e.Q6J("ngIf",i.formControlStateManager(t))}}function _d(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p",151),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(2),e.hij(" ",t.errorConst.FORM_ERROR.EXCEEDED_CHARACTER_MIN_LIMIT," ")}}function ud(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p",151),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(2),e.hij(" ",t.errorConst.FORM_ERROR.EXCEEDED_CHARACTER_MAX_LIMIT," ")}}function dd(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p",151),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(2),e.hij(" ",t.errorConst.FORM_ERROR.NUMERIC_LIMIT_VIOLATION," ")}}function cd(n,a){if(1&n&&(e.ynx(0),e.YNc(1,_d,3,1,"ng-container",26),e.YNc(2,ud,3,1,"ng-container",26),e.YNc(3,dd,3,1,"ng-container",26),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf","minlength"===t.key),e.xp6(1),e.Q6J("ngIf","maxlength"===t.key),e.xp6(1),e.Q6J("ngIf","pattern"===t.key)}}function pd(n,a){if(1&n&&(e.ynx(0),e.YNc(1,cd,4,3,"ng-container",25),e.ALo(2,"keyvalue"),e.BQk()),2&n){const t=e.oxw().ctrl;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.errors))}}function md(n,a){if(1&n&&e.YNc(0,pd,3,3,"ng-container",26),2&n){const t=a.ctrl,i=e.oxw();e.Q6J("ngIf",i.formControlStateManager(t))}}function gd(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p",151),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.errorConst.FORM_ERROR.DATE_SPECIFICATION_VIOLATION," ")}}function hd(n,a){if(1&n&&e.YNc(0,gd,3,1,"ng-container",26),2&n){const t=a.commonFc;e.Q6J("ngIf",null==t.errors?null:t.errors.endingDateIsSmaller)}}const fd=function(n){return{path:n,text:"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u4e00\u89a7"}},Cd=function(){return{text:"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u7de8\u96c6"}},Td=function(n,a){return[n,a]},vd=function(){return{label:"\u53d7\u4ed8\u62c5\u5f53\u8005",required:"true"}},Ed=function(){return{label:"\u53d7\u4ed8\u65e5",required:"true"}},Dd=function(){return{label:"\u5e97\u8217",required:"true"}},xd=function(){return{label:"\u304a\u5ba2\u69d8\u30bf\u30a4\u30d7",required:"true"}},Sd=function(){return{label:"\u5099\u80031",required:!1}},Ad=function(){return{label:"\u5099\u80032",required:!1}},Id=function(n){return{label:n}},Fd=function(n){return{label:n,required:!0}},bd=function(){return{label:"\u8868\u793a\u958b\u59cb\u65e5",required:!1}},Dt=function(n,a){return{"max-h-0 opacity-0 overflow-hidden":n,"search-panel-height mt-4 opacity-100":a}},Od=function(n,a){return{"-translate-x-[324px]":n,"translate-x-0":a}},yd=function(n,a){return{"opacity-0 cursor-none":n,"opacity-100 cursor-pointer":a}},Nd=function(n,a){return{"w-full":n,"w-[calc(100%-312px)] translate-x-[312px]":a}},Rd=[{path:"",component:bt,children:[{path:"",component:wt},{path:"add",component:Cr},{path:"detail/:id",component:(()=>{class n{constructor(t,i,r,o,s,_,d,p,m,c,h,f,T,y){this.fb=t,this.activatedRoute=i,this.errorService=r,this.rsService=o,this.rentalService=s,this.biService=_,this.rentalProductService=d,this.divisionService=p,this.flashMessageService=m,this.modalService=c,this.router=h,this.formService=f,this.common=T,this.employeeService=y,this.subscription=new q.w0,this.actNumSubscription=new q.w0,this.rentals=[],this.overdue_rentals_ad_status=[],this.set_overdue_rentals=!1,this.errorModalTitle="\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u8a73\u7d30\u30a8\u30e9\u30fc\uff1a"+C.yR.TITLE.HAS_ERROR,this.listPagePath="/rental-slip",this.rsConst=A,this.rentalProductConst=Y.q,this.selectedProductPrice=0,this.taxDivisionText="",this.taxFractionConst=vr.f,this.lateReturnReportedOptions=[{value:0,text:"\u9023\u7d61\u306a\u3057"},{value:1,text:"\u9023\u7d61\u3042\u308a"}],this.processingUnits=[{value:"1",text:"\u660e\u7d30\u5358\u4f4d"},{value:"0",text:"\u53d7\u4ed8\u7968\u5358\u4f4d"}],this.isDeliveryRequested=!1,this.totalAmount=0,this.overdue_totalAmount=0,this.overdue_refund_totalAmount=0,this.action_num=0,this.act_num=0,this.rentalItemStatus=!1,this.isUpdatingRental=!1,this.errorConst=G.c,this.deliveryDivisionOptions=[{value:"",text:_e.s.PLEASE_SELECT}],this.collectionDivisionOptions=[{value:"",text:_e.s.PLEASE_SELECT}],this.RENTAL_ITEM_COUNT=1,this.DElIVERY_PRICE=0,this.COLLECTION_PRICE=0,this.addFormIsOpen=!1,this.editFormIsOpen=!1,this.is_processing_units=!1,this.boolean_rental_date=!1,this.boolean_return_date=!1,this.boolean_receipt_date=!1,this.bulk_late_return_reported=0,this.SELECT_RENRAL_LIST_ID=0,this.rental_date_values={scheduled_rental_date:"",scheduled_return_date:"",rental_date:"",return_date:""},this.diff_date_values={scheduled_rental_date:"",scheduled_return_date:"",rental_date:"",return_date:""},this.DIFF_STAUS_DETENTION="\u5ef6\u6ede",this.DIFF_STAUS_REFUND="\u5dee\u984d",this.ProductData=[],this.addDiffRecord=[],this.diffrecords=[],this.refund_msg="",this.REFOUND_MSG="\u8fd4\u91d1\u51e6\u7406\u304c\u767a\u751f\u3057\u307e\u3059\u3001\u8fd4\u5374\u51e6\u7406\u5f8c\u3001\u8fd4\u91d1\u64cd\u4f5c\u3092\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002",this.product_id_list=[],this.update_product_item=[],this.TODAY=new Date,this.DIVISION_CUSTOMER_CODE_MEMBER=String(A.CUSTOMER_TYPE_DIVISION.CODE.MEMBER),this.DIVISION_CUSTOMER_CODE_CLIENT=String(A.CUSTOMER_TYPE_DIVISION.CODE.CLIENT),this.DIVISION_CUSTOMER_CODE_GENERAL=String(A.CUSTOMER_TYPE_DIVISION.CODE.GENERAL),this.idConfirmationDate=!1,this.generalForm=this.fb.group({identification_document_confirmation_date:[""],idConfirmationDate_check:[!1,[l.kI.required]]}),this.selectedCustomerStatus={type:"",reception_tag:!1,rental_employee_id:!1},this.getReceptionEmployeeByIdFormRental=this.fb.group({get_rental_employee_id:["",[l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11),l.kI.min(1)]]}),this.getReceptionEmployeeByIdFormReturn=this.fb.group({get_return_employee_id:["",[l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11),l.kI.min(1)]]}),this.getReceptionEmployeeByIdFormDiff=this.fb.group({get_return_employee_id:["",[l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11),l.kI.min(1)]]}),this.DELIVERY_CHARGE_FLAG_OFF=0,this.DELIVERY_CHARGE_FLAG_ON=1}get statusFc(){return this.statusForm.controls}get addFc(){return this.addForm.controls}get editFc(){return this.editForm.controls}get bulkFc(){return this.bulkForm.controls}get diffFc(){return this.diffForm.controls}get generalFc(){return this.generalForm.controls}onCheckId(t){const i=(new Date).toLocaleString();t.target.checked?(this.confirmedIdentityVerificationDocuments(),this.generalFc.identification_document_confirmation_date.setValue(i),this.selectedCustomer.identification_document_confirmation_date=i,this.selectedCustomer.isIdConfirmationRequired=!0):(this.generalFc.identification_document_confirmation_date.setValue(""),this.selectedCustomer.identification_document_confirmation_date="",this.selectedCustomer.isIdConfirmationRequired=!1)}getEmployeeByIdRental(t){this.employeeSuggests.find(i=>{Number(i.value)===Number(t)&&(1==this.is_processing_units?this.editFc.rental_employee_id.patchValue(i.value):this.bulkFc.rental_employee_id.patchValue(i.value))})}get getEmployeeByIdFcRental(){return this.getReceptionEmployeeByIdFormRental.controls}getEmployeeByIdReturn(t){this.employeeSuggests.find(i=>{Number(i.value)===Number(t)&&(1==this.is_processing_units?this.editFc.return_employee_id.patchValue(i.value):this.bulkFc.return_employee_id.patchValue(i.value))})}get getEmployeeByIdFcReturn(){return this.getReceptionEmployeeByIdFormReturn.controls}getEmployeeByIdDiff(t){this.employeeSuggests.find(i=>{Number(i.value)===Number(t)&&this.diffFc.return_employee_id.patchValue(i.value)})}get getEmployeeByIdFcDiff(){return this.getReceptionEmployeeByIdFormDiff.controls}CheckBoxControlStateManager(t){return(t.touched||t.dirty)&&t.invalid||!1===t.value}formControlStateManager(t){return null!=t&&(t.touched||t.dirty)&&t.invalid}setDefaultValueToAddFormDateGroup(){this.addFc.scheduledDateGroup.controls.scheduled_rental_date.setValue((new Date).toISOString()),this.addFc.scheduledDateGroup.controls.scheduled_return_date.setValue((new Date).toISOString())}resetAddFormValues(){this.formService.resetAddForm(this.addForm)}resetEditFormValues(){this.formService.resetEditForm(this.editForm)}setEditFormData(t,i){const r=(0,I.dR)(t),o=(0,I.dR)(i);if(r||o)this.createErrorAndExecHandleError("\u9078\u629e\u3057\u305f\u30ec\u30f3\u30bf\u30eb\u660e\u7d30\u307e\u305f\u306f\u30ec\u30f3\u30bf\u30eb\u5546\u54c1\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath);else{try{this.formService.setEditFormData(this.editForm,t),this.editFc.rental_fee.setValue(t.rental_fee),this.set_overdue_rentals&&this.editFc.late_fee.setValue(t.late_fee),this.set_overdue_rentals&&this.editFc.refund_fee.setValue(t.refund_fee)}catch(s){return s instanceof Error?void this.createErrorAndExecHandleError(`${s.message}\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002`,this.listPagePath):void this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u5546\u54c1\u66f4\u65b0\u306e\u305f\u3081\u306e\u30d5\u30a9\u30fc\u30e0\u30c7\u30fc\u30bf\u306e\u30bb\u30c3\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath)}this.changeRentalFeeCtrlValidation(i)}}changeRentalFeeCtrlValidation(t){if((0,I.dR)(t))return void this.createErrorAndExecHandleError("\u9078\u629e\u3057\u305f\u30ec\u30f3\u30bf\u30eb\u5546\u54c1\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath);const i=t.delivery_charge_flag;let r;r=this.isEditing()?this.editFc:this.addFc,this.formService.changeValidatorsForRentalFeeControl(r,t),this.selectedProductDeliveryChargeFlag=i}addFormOpen(){this.addFormIsOpen=!0}rentalToday(){this.handleClickBulkSaveButton("rental")}receiptToday(){this.handleClickDiffSaveButton("return")}sRentalToday(){this.handleClickRentalEditExecutionButton("rental")}sReceiptToday(){}returnToday(){let t=this.bulkForm.value,i=new Date;t.dateGroup&&(t.dateGroup.return_date=i),this.checkDatesAndShowModal(t,()=>this.handleClickBulkSaveButton("return"))}sReturnToday(){let t=this.editForm.value,i=new Date;t.dateGroup&&(t.dateGroup.return_date=i),this.checkDatesAndShowModal(t,()=>this.handleClickRentalEditExecutionButton("return"))}bulkSave(){this.checkDatesAndShowModal(this.bulkForm.value,()=>this.handleClickBulkSaveButton(""))}RentalEditExecutionButton(){this.checkDatesAndShowModal(this.editForm.value,()=>this.handleClickRentalEditExecutionButton(""))}sDiffReturnToday(){let t=(new Date).toLocaleDateString();this.handleClickRentalDiffExecutionButton(t)}checkDatesAndShowModal(t,i){t.dateGroup?.return_date&&t.scheduledDateGroup?.scheduled_return_date&&new Date(t.dateGroup.return_date).getTime()<new Date(t.scheduledDateGroup.scheduled_return_date).getTime()?this.saveModal(i):i()}saveModal(t){const i="\u8fd4\u5374\u4e88\u5b9a\u65e5\u3088\u308a\u524d\u306e\u8fd4\u5374\u3068\u306a\u308a\u307e\u3059\u3002\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002";this.modalService.setModal(i,"\u3053\u306e\u64cd\u4f5c\u306f\u53d6\u308a\u6d88\u305b\u307e\u305b\u3093\u3002\u5b9f\u884c\u3057\u307e\u3059\u304b\uff1f","warning",C.yR.BUTTON_TITLE.EXECUTION,C.yR.BUTTON_TITLE.CANCEL),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,z.q)(1),(0,B.h)(s=>this.modalService.getModalProperties().title===i)).subscribe(s=>{s===C.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&t()}))}editFormOpen(t){this.editFormCancel(),this.addDiffRecord=[],console.log(t),this.editTarget=t,this.common.loading=!0,this.rentalItemStatus=""!==t.rental_date,this.subscription.add(this.rentalProductService.find(t.rental_product_id).pipe((0,k.K)(i=>(0,b.of)(i)),(0,L.x)(()=>this.common.loading=!1)).subscribe(i=>{i instanceof R.UA?this.createHttpErrorAndExecHandleError(i,this.listPagePath):null!=i?(this.editTargetProduct=i.data[0],this.setEditFormData(this.editTarget,this.editTargetProduct),this.editFormIsOpen=!0,this.setUpRentalReturnEmployee(),this.setRentalReturnEmployeeDefaultValue(t.rental_employee_id,t.return_employee_id),this.editFc.rental_employee_id.value?this.selectedCustomerStatus.rental_employee_id=!0:this.editFc.rental_employee_id.setValue(this.statusFc.reception_employee_id.value),this.editFc.rental_employee_id.valueChanges.subscribe(r=>{this.selectedCustomerStatus.rental_employee_id=!0}),this.boolean_rental_date=""!=this.dateToString(t.rental_date),this.boolean_return_date=""!=this.dateToString(t.return_date),console.log(this.editTargetProduct),console.log("OpenEdit"),this.checkingTheRentalEditPeriod([this.editTargetProduct],this.rentals)):this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u5546\u54c1\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath)}))}get getBulkDateGroup(){return this.bulkFc.dateGroup.controls}checkingTheRentalPeriod(t,i){this.subscription.add(this.getBulkDateGroup.return_date.valueChanges.subscribe(r=>{if(null!=r&&""!==r){this.diffrecords=[];for(let o in i){let s=t.filter(h=>h.id==i[o].rental_product_id),_=this.calculateRentalFee(s[0],new Date(i[o].scheduled_rental_date).toISOString(),new Date(r).toISOString()),d=i[o].rental_fee,p=_?_-d:0,m=p<0;if(p>=0)return;let c={id:i[o].id,product:s[0],scheduled_rental_date:new Date(i[o].scheduled_rental_date).toISOString(),return_date:new Date(r).toISOString(),before_rental_fee:d,after_rental_fee:_,refund_amount:p,isrefund:m,rentals:i[o]};this.diffrecords.push(c);for(let h in this.diffrecords){let f=this.diffrecords[h].rentals;this.addDiffRecord.push({parent_id:f.id,rental_slip_id:f.rental_slip_id,rental_product_id:f.rental_product_id,rental_item_count:1,rental_fee:0,delivery_division_id:f.delivery_division_id,delivery_date:f.delivery_date,delivery_price:f.delivery_price,collection_division_id:f.collection_division_id,collection_date:f.collection_date,collection_price:f.collection_price,scheduled_rental_date:f.scheduled_rental_date,rental_date:f.rental_date,scheduled_return_date:f.scheduled_return_date,delinquency_flag:f.delinquency_flag,late_fee:this.diffrecords[h].refund_amount,rental_employee_id:f.rental_employee_id,delivery_charge_flag:f.delivery_charge_flag,late_return_reported:f.late_return_reported,grace_period_end:f.grace_period_end,settle_status_division_id:f.settle_status_division_id})}}this.refund_msg="",this.diffrecords.length>0&&(this.refund_msg=this.REFOUND_MSG)}}))}checkingTheRentalEditPeriod(t,i){console.log(t),this.subscription.add(this.editFc.dateGroup.controls.return_date.valueChanges.subscribe(r=>{if(null!=r&&""!==r){this.diffrecords=[];for(let o in i){let s=t.filter(h=>h.id==i[o].rental_product_id),_=this.calculateRentalFee(s[0],new Date(i[o].scheduled_rental_date).toISOString(),new Date(r).toISOString()),d=i[o].rental_fee,p=_?_-d:0,m=p<0;if(p>=0)return;let c={id:i[o].id,product:s[0],scheduled_rental_date:new Date(i[o].scheduled_rental_date).toISOString(),return_date:new Date(r).toISOString(),before_rental_fee:d,after_rental_fee:_,refund_amount:p,isrefund:m,rentals:i[o]};this.diffrecords.push(c);for(let h in this.diffrecords){let f=this.diffrecords[h].rentals;this.addDiffRecord=[{parent_id:f.id,rental_slip_id:f.rental_slip_id,rental_product_id:f.rental_product_id,rental_item_count:1,rental_fee:0,delivery_division_id:f.delivery_division_id,delivery_date:f.delivery_date,delivery_price:f.delivery_price,collection_division_id:f.collection_division_id,collection_date:f.collection_date,collection_price:f.collection_price,scheduled_rental_date:f.scheduled_rental_date,rental_date:f.rental_date,scheduled_return_date:f.scheduled_return_date,delinquency_flag:f.delinquency_flag,late_fee:this.diffrecords[h].refund_amount,rental_employee_id:f.rental_employee_id,delivery_charge_flag:f.delivery_charge_flag,late_return_reported:f.late_return_reported,grace_period_end:f.grace_period_end,settle_status_division_id:f.settle_status_division_id}]}}this.refund_msg="",this.diffrecords.length>0&&(this.refund_msg=this.REFOUND_MSG)}}))}setUpDiffEmployee(){this.subscription.add(this.getEmployeeByIdFcDiff.get_return_employee_id.valueChanges.subscribe(t=>{null==t||""===t||this.getEmployeeByIdDiff(t)}))}setDiffEmployeeDefaultValue(t){t&&this.getEmployeeByIdDiff(String(t))}setUpRentalReturnEmployee(){!1===this.rentalItemStatus?this.subscription.add(this.getEmployeeByIdFcRental.get_rental_employee_id.valueChanges.subscribe(t=>{null==t||""===t||this.getEmployeeByIdRental(t)})):(this.subscription.add(this.getEmployeeByIdFcRental.get_rental_employee_id.valueChanges.subscribe(t=>{null==t||""===t||this.getEmployeeByIdRental(t)})),this.subscription.add(this.getEmployeeByIdFcReturn.get_return_employee_id.valueChanges.subscribe(t=>{})))}setRentalReturnEmployeeDefaultValue(t,i){t&&this.getEmployeeByIdRental(String(t)),i&&this.getEmployeeByIdReturn(String(i))}addFormCancel(){this.addFormIsOpen=!1,this.formService.resetAddForm(this.addForm),this.addTarget={},this.addTargetProduct={}}editFormCancel(){this.editFormIsOpen=!1,this.resetEditFormValues(),this.editTarget={},this.editTargetProduct={},this.selectedCustomerStatus={}}updateSelectedProductDeliveryChargeFlag(t){this.selectedProductDeliveryChargeFlag=t.delivery_charge_flag}createErrorAndExecHandleError(t,i,r,o){this.errorService.setError({status:r=r||400,title:o=o||this.errorModalTitle,message:t,redirectPath:i=i||void 0})}createHttpErrorAndExecHandleError(t,i){this.errorService.setError({status:t.status,title:t.error?t.error.title:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",message:t.error?t.error.message:t.message,redirectPath:i=i||void 0})}setProcessingUnitsFlag(t){this.is_processing_units=!1,1==t&&(this.is_processing_units=!0)}isEditing(){return!!(this.editTarget&&Object.keys(this.editTarget).length>0)}initRentalSlipId(){const t=this.activatedRoute.snapshot.params.id;(0,I.oG)(t)?this.createErrorAndExecHandleError("\u30d1\u30e9\u30e1\u30fc\u30bf\u53d6\u5f97\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath):this.selectedId=Number(t)}ngOnInit(){this.router.onSameUrlNavigation="reload",this.statusForm=this.formService.createStatusForm(this.fb),this.addForm=this.formService.createAddForm(this.fb),this.editForm=this.formService.createEditForm(this.fb),this.bulkForm=this.formService.createBulkForm(this.fb),this.diffForm=this.formService.createDiffForm(this.fb),this.initRentalSlipId(),this.barcodeValue=this.rsConst.CALLED_NUMBER_PREFIX+this.selectedId.toString().padStart(11,"0"),this.editPagePath=this.listPagePath+"/edit/"+this.selectedId,this.subscription.add(this.addFc.scheduledDateGroup.valueChanges.subscribe(t=>{(0,I.dR)(t)||(0,I.nY)(t.scheduled_rental_date)||(0,I.nY)(t.scheduled_return_date)||this.calculateAndSetRentalFee(t.scheduled_rental_date,t.scheduled_return_date)})),this.subscription.add(this.editFc.scheduledDateGroup.valueChanges.subscribe(t=>{0!==Object.keys(t).length&&((0,I.nY)(t.scheduled_rental_date)||(0,I.nY)(t.scheduled_return_date)||this.calculateAndSetRentalFee(t.scheduled_rental_date,t.scheduled_return_date))})),this.initialization(this.selectedId)}issueReceipt(){this.common.loading=!0;const t={customer_type_division_id:this.rs.customer_type_division_id,store_id:this.rs.store_id,client_id:this.rs.client_id,member_id:this.rs.member_id,mobile_number:this.rs.mobile_number,shipping_address:this.rs.shipping_address,status_division_id:this.statusDivisionOptions.find(i=>i.text===this.rsConst.STATUS.TICKET_ISSUED)?.value,remarks_1:this.rs.remarks_1,remarks_2:this.rs.remarks_2,reception_tag:this.reception_tag,reception_date:this.rs.reception_date,reception_employee_id:this.rs.reception_employee_id,settle_status_division_id:this.rs.settle_status_division_id,incident_division_id:this.rs.incident_division_id,processing_units:this.rs.processing_units};this.subscription.add(this.rsService.update(this.rs.id,t).pipe((0,k.K)(i=>(0,b.of)(i)),(0,L.x)(()=>this.common.loading=!1)).subscribe(i=>{if(i instanceof R.UA)this.createHttpErrorAndExecHandleError(i,this.listPagePath);else{if(null==i)return this.common.loading=!1,void this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u306e\u767a\u884c\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath);this.subscription.add(this.updateSlipInfo().subscribe()),this.flashMessageService.setFlashMessage(i.message,"success",15e3),this.common.loading=!1}}))}getAddFormProductNameSuggests(){return{observable:this.rentalProductService.getAll({name:this.addFc.name.value,status_division_id:this.rentalProductStatusRentable.id,data_permission_division_id:this.rentalProductDataPermissionPublish.id}),valueTargetColumn:"id",textTargetColumn:"name"}}onNameSuggestIdChange(t){this.addFc.id.reset("",{emitEvent:!1}),this.addFc.rental_product_id.setValue(t,{emitEvent:!1})}onNameSuggestDataSelected(t){this.addTargetProduct=t,this.updateSelectedProductDeliveryChargeFlag(t)}getAddFormProductIdSuggests(){return{observable:this.rentalProductService.getAll({id:this.addFc.id.value,status_division_id:this.rentalProductStatusRentable.id,data_permission_division_id:this.rentalProductDataPermissionPublish.id}),valueTargetColumn:"id",textTargetColumn:"name"}}onIdSuggestIdChange(t){this.addFc.name.reset("",{emitEvent:!1}),this.addFc.rental_product_id.setValue(t,{emitEvent:!1})}onIdSuggestDataSelected(t){this.addTargetProduct=t,this.updateSelectedProductDeliveryChargeFlag(t)}handleAddProductData(t){if((0,I.dR)(t))return void this.createErrorAndExecHandleError("\u9078\u629e\u3057\u305f\u5546\u54c1\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath);this.addTargetProduct=t,this.selectedProductPrice=t.selling_price;const r=this.taxDivisionOptions.find(_=>_.value===t.sales_tax_division_id);this.taxDivisionText=r?r.text:"",this.selectedProductDeliveryChargeFlag=t.delivery_charge_flag,this.setDefaultValueToAddFormDateGroup();const o=this.deliveryDivisionOptions.find(_=>_.text===this.rsConst.DELIVERY_DIVISION.VALUE.NO_DELIVERY);this.addFc.delivery_division_id.reset(String(o?.value));const s=this.collectionDivisionOptions.find(_=>_.text===this.rsConst.COLLECTION_DIVISION.VALUE.NO_COLLECTION);this.addFc.collection_division_id.reset(String(s?.value)),this.selectedProductDeliveryChargeFlag?(this.addFc.rental_fee.addValidators([l.kI.required]),this.addFc.rental_fee.updateValueAndValidity()):(this.addFc.rental_fee.removeValidators([l.kI.required]),this.addFc.rental_fee.updateValueAndValidity())}setEditProductData(t){this.selectedProductPrice=t.selling_price;const i=this.taxDivisionOptions.find(r=>r.value===t.sales_tax_division_id);this.taxDivisionText=i?i.text:"",this.selectedProductDeliveryChargeFlag=t?t.delivery_charge_flag:this.DELIVERY_CHARGE_FLAG_OFF,this.selectedProductDeliveryChargeFlag?(this.editFc.delivery_division_id.reset(String(this.editTarget.division_delivery_value)),this.editFc.collection_division_id.reset(String(this.editTarget.division_collection_value)),this.editFc.delivery_price.addValidators([l.kI.required]),this.editFc.delivery_price.updateValueAndValidity()):this.editTarget&&Object.keys(this.editTarget).length>0?(this.editFc.delivery_division_id.patchValue(String(this.editTarget.delivery_division_id)),this.editFc.collection_division_id.patchValue(String(this.editTarget.collection_division_id)),this.editFc.scheduledDateGroup.controls.scheduled_rental_date.patchValue(new Date(this.editTarget.scheduled_rental_date).toISOString()),this.editFc.scheduledDateGroup.controls.scheduled_return_date.patchValue(new Date(this.editTarget.scheduled_return_date).toISOString()),this.editFc.dateGroup.controls.rental_date.patchValue(this.editTarget.rental_date?new Date(this.editTarget.rental_date).toISOString():""),this.editFc.dateGroup.controls.return_date.patchValue(this.editTarget.rental_date?new Date(this.editTarget.return_date).toISOString():""),this.editFc.delivery_price.removeValidators([l.kI.required]),this.editFc.delivery_price.updateValueAndValidity()):(this.editFc.delivery_division_id.reset(""),this.editFc.rental_employee_id.reset(""),this.editFc.return_employee_id.reset(""),this.editFc.collection_division_id.reset(""),this.editFc.scheduledDateGroup.controls.scheduled_rental_date.reset(""),this.editFc.scheduledDateGroup.controls.scheduled_return_date.reset(""),this.editFc.dateGroup.controls.rental_date.reset(""),this.editFc.dateGroup.controls.return_date.reset(""),this.editFc.delivery_price.removeValidators([l.kI.required]),this.editFc.delivery_price.updateValueAndValidity())}getTotalAmount(t){if(!Array.isArray(t)||0===t.length)return 0;let i=0;return t.forEach(r=>{i+=r.rental_fee}),i}getOverdueTotalAmount(t){if(!Array.isArray(t)||0===t.length)return 0;let i=0;return t.forEach(r=>{i+=r.late_fee}),console.log("overdueTotalAmount"),console.log(i),i}getOverdueRefundTotalAmount(t){if(!Array.isArray(t)||0===t.length)return 0;let i=0;return t.forEach(r=>{i+=r.refund_fee?r.refund_fee:0}),console.log("overdueRefundTotalAmount"),console.log(i),i}statusDivisionIdUpdate(t,i){this.subscription.add(this.rsService.update(this.rs.id,{customer_type_division_id:this.rs.customer_type_division_id,store_id:this.rs.store_id,client_id:this.rs.client_id,member_id:this.rs.member_id,mobile_number:this.rs.mobile_number,shipping_address:this.rs.shipping_address,status_division_id:t,remarks_1:this.rs.remarks_1,remarks_2:this.rs.remarks_2,reception_tag:this.rs.reception_tag,reception_date:this.rs.reception_date,reception_employee_id:this.rs.reception_employee_id,settle_status_division_id:this.rs.settle_status_division_id,incident_division_id:this.rs.incident_division_id,processing_units:this.rs.processing_units}).pipe((0,k.K)(o=>(0,b.of)(o)),(0,L.x)(()=>this.common.loading=!1)).subscribe(o=>{i&&"function"==typeof i&&i()}))}statusUpdate(){const t=this.statusForm.value;this.common.loading=!0,this.subscription.add(this.rsService.update(this.rs.id,{customer_type_division_id:this.rs.customer_type_division_id,store_id:this.rs.store_id,client_id:this.rs.client_id,member_id:this.rs.member_id,mobile_number:this.rs.mobile_number,shipping_address:this.rs.shipping_address,status_division_id:t.status_division_id,remarks_1:this.rs.remarks_1,remarks_2:this.rs.remarks_2,reception_tag:t.reception_tag,reception_date:this.rs.reception_date,reception_employee_id:t.reception_employee_id,settle_status_division_id:this.rs.settle_status_division_id,incident_division_id:this.rs.incident_division_id,processing_units:t.processing_units}).pipe((0,k.K)(r=>(0,b.of)(r)),(0,L.x)(()=>this.common.loading=!1)).subscribe(r=>{if(!(r instanceof R.UA))return null==r?(this.common.loading=!1,void this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath)):void window.location.reload();this.createHttpErrorAndExecHandleError(r,this.listPagePath)}))}updateSlipInfo(){return this.common.loading=!0,(0,te.D)([this.rsService.find(this.selectedId),this.rentalService.getAll({rental_slip_id:this.selectedId})]).pipe((0,k.K)(t=>(0,b.of)(t)),(0,L.x)(()=>this.common.loading=!1),(0,me.b)(t=>{if(t instanceof R.UA)return void this.createHttpErrorAndExecHandleError(t,this.listPagePath);if(null==t)return this.common.loading=!1,void this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath);if(Array.isArray(t)&&2!==t.length)return this.common.loading=!1,void this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath);this.rs=t[0].data[0],this.updaterFullName=this.rs.employee_updated_last_name+" "+this.rs.employee_updated_first_name,this.receptionEmployeeFullName=this.rs.employee_reception_last_name+" "+this.rs.employee_reception_first_name,this.receptionDate=new Date(this.rs.reception_date).toLocaleString(),this.rentals=[],this.overdue_rentals=[],this.rentals=t[1].data,t[1].data.length>0&&t[1].data.map(s=>(s.scheduled_rental_date=new Date(s.scheduled_rental_date).toLocaleDateString(),s.rental_date=s.rental_date?new Date(s.rental_date).toLocaleDateString():"",s.scheduled_return_date=new Date(s.scheduled_return_date).toLocaleDateString(),s.return_date=s.return_date?new Date(s.return_date).toLocaleDateString():"",s));let i=t[1].data.length>0;i&&t[1].data.map(s=>(s.scheduled_rental_date=this.dateToString(s.scheduled_rental_date),s.rental_date=this.dateToString(s.rental_date),s.scheduled_return_date=this.dateToString(s.scheduled_return_date),s.return_date=this.dateToString(s.return_date),s)),t[1].data.filter(o=>(""!=this.returnStringValue(o.rental_employee_id)&&(this.rental_employee=this.returnStringValue(o.rental_employee_id)),""!=this.returnStringValue(o.return_employee_id)&&(this.return_employee=this.returnStringValue(o.return_employee_id)),!o.parent_id)),console.log("res[1].data"),console.log(t[1].data),this.overdue_rentals=t[1].data.filter(o=>(""!=this.returnStringValue(o.return_employee_id)&&(this.overdue_return_employee=this.returnStringValue(o.return_employee_id)),o.late_fee>0&&this.overdue_rentals_ad_status.push(this.DIFF_STAUS_DETENTION),o.refund_fee&&o.refund_fee>0&&this.overdue_rentals_ad_status.push(this.DIFF_STAUS_REFUND),o.parent_id)),console.log(this.overdue_rentals),!1===this.is_processing_units&&(i&&(this.rental_date_values.scheduled_rental_date=this.rentals[this.SELECT_RENRAL_LIST_ID].scheduled_rental_date,this.rental_date_values.scheduled_return_date=this.rentals[this.SELECT_RENRAL_LIST_ID].scheduled_return_date,this.rental_date_values.rental_date=this.rentals[this.SELECT_RENRAL_LIST_ID].rental_date,this.rental_date_values.return_date=this.rentals[this.SELECT_RENRAL_LIST_ID].return_date),this.overdue_rentals.length>0&&(this.diff_date_values.scheduled_rental_date=this.overdue_rentals[this.SELECT_RENRAL_LIST_ID].scheduled_rental_date,this.diff_date_values.scheduled_return_date=this.overdue_rentals[this.SELECT_RENRAL_LIST_ID].scheduled_return_date,this.diff_date_values.rental_date=this.overdue_rentals[this.SELECT_RENRAL_LIST_ID].rental_date,this.diff_date_values.return_date=this.overdue_rentals[this.SELECT_RENRAL_LIST_ID].return_date),this.rentalItemStatus=""!==this.rental_date_values.rental_date&&null!=this.rental_date_values.rental_date,this.bulkFromInitialize(this.rental_date_values),this.setUpRentalReturnEmployee(),this.setRentalReturnEmployeeDefaultValue(this.rental_employee,this.return_employee)),this.overdue_rentals.length>0&&(this.set_overdue_rentals=!0,this.diffFromInitialize(this.diff_date_values),this.setUpDiffEmployee(),this.setDiffEmployeeDefaultValue(this.overdue_return_employee)),this.rentals.length>0&&(this.isDeliveryRequested=this.isDeliveryRequestedRentals(this.rentals)),this.totalAmount=this.getTotalAmount(this.rentals),this.overdue_totalAmount=this.getOverdueTotalAmount(this.overdue_rentals),this.overdue_refund_totalAmount=this.getOverdueRefundTotalAmount(this.overdue_rentals),this.statusForm.reset({status_division_id:String(this.rs.status_division_id),reception_employee_id:String(this.rs.reception_employee_id),reception_tag:String(this.rs.reception_tag),processing_units:String(this.rs.processing_units)}),this.setProcessingUnitsFlag(this.rs.processing_units),this.common.loading=!1,console.log("overdue_rentals"),console.log(this.overdue_rentals)}))}isDeliveryRequestedRentals(t){return t.some(i=>i.division_delivery_value===this.rsConst.DELIVERY_DIVISION.VALUE.DELIVERY_INCLUDED)}initialization(t){this.common.loading=!0,this.subscription.add((0,te.D)([this.rsService.find(t),this.rentalService.getAll({rental_slip_id:t}),this.biService.find(),this.divisionService.getAll(),this.employeeService.getAll()]).pipe((0,L.x)(()=>this.common.loading=!1),(0,k.K)(i=>(0,b.of)(i))).subscribe(i=>{if(i instanceof R.UA)return void this.createHttpErrorAndExecHandleError(i,this.listPagePath);if(!1===this.createErrorMessage(i))return;this.rs=i[0].data[0],this.setProcessingUnitsFlag(this.rs.processing_units);const r={status_division_id:String(this.rs.status_division_id),reception_employee_id:String(this.rs.reception_employee_id),reception_tag:String(this.rs.reception_tag),processing_units:String(this.rs.processing_units)};this.statusForm.patchValue(r),this.employeeSuggests=i[4].data.map(E=>({value:E.id,text:E.last_name+" "+E.first_name})),this.reception_tag="",this.updaterFullName=this.rs.employee_updated_last_name+" "+this.rs.employee_updated_first_name,this.receptionEmployeeFullName=this.rs.employee_reception_last_name+" "+this.rs.employee_reception_first_name,this.receptionDate=new Date(this.rs.reception_date).toLocaleString(),this.basicInformation=i[2].data[0],this.companyAddress=this.basicInformation.province+this.basicInformation.locality+this.basicInformation.street_address+this.basicInformation.other_address,this.companyTel=(0,I.ni)(String(this.basicInformation.tel)),this.companyFax=(0,I.ni)(String(this.basicInformation.fax)),this.companyPostalCode=(0,I.vf)(String(this.basicInformation.postal_code)),this.selectedProductDeliveryChargeFlag=this.DELIVERY_CHARGE_FLAG_OFF;const s=i[3].data,_=s.filter(E=>E.name===D.z.RENTAL_PRODUCT_STATUS),d=_.find(E=>E.value===Y.q.STATUS.RENTABLE);d&&(this.rentalProductStatusRentable=d),_.filter(E=>{E.division_code===Y.q.STATUS_CODE.RESERVED&&(this.PRODUCT_STATUS_DIVISION_RESERVED=E.id),E.division_code===Y.q.STATUS_CODE.RENTED&&(this.PRODUCT_STATUS_DIVISION_RENTED=E.id),E.division_code===Y.q.STATUS_CODE.RETURNED&&(this.PRODUCT_STATUS_DIVISION_RETURNED=E.id),E.division_code===Y.q.STATUS_CODE.CLEANING&&(this.PRODUCT_STATUS_DIVISION_CLEANING=E.id)});const c=s.filter(E=>E.name===D.z.DATA_PERMISSION).find(E=>"\u516c\u958b\u4e2d"===E.value);c&&(this.rentalProductDataPermissionPublish=c);const h=s.filter(E=>E.name===D.z.SALES_TAX);this.taxDivisionOptions=h.map(E=>({value:E.id,text:E.value}));const T=s.filter(E=>E.name===D.z.DELIVERY_REQUEST).map(E=>({value:E.id,text:E.value}));this.deliveryDivisionOptions=[...this.deliveryDivisionOptions,...T];const O=s.filter(E=>E.name===D.z.COLLECTION_REQUEST).map(E=>({value:E.id,text:E.value}));this.collectionDivisionOptions=[...this.collectionDivisionOptions,...O];const M=s.filter(E=>E.name===D.z.RENTAL_SLIP_STATUS);this.statusDivisionOptions=M.map(E=>({value:E.id,text:E.value}));const g=s.filter(E=>E.name===D.z.SETTLE_STATUS).find(E=>E.value===this.rsConst.SETTLE_STATUS_DIVISION.VALUE.UNSETTLED);if(g&&(this.settleStatusDivision=g),this.rs&&this.rs.division_customer_type_code===Number(this.DIVISION_CUSTOMER_CODE_GENERAL)){const E=new Date,F=this.rs.identification_document_confirmation_date?new Date(this.rs.identification_document_confirmation_date).toLocaleDateString():"",le=""===F||new Date(F)<=new Date(E.getFullYear()-1,E.getMonth(),E.getDate());this.selectedCustomer={type:Number(this.DIVISION_CUSTOMER_CODE_GENERAL),customer_type_code:String(this.rs.customer_type_division_id),id:String(this.rs.id),fullName:this.rs.last_name+" "+this.rs.first_name,fullNameKana:this.rs.last_name_kana+""+this.rs.first_name_kana,address:this.rs.shipping_address?this.rs.shipping_address:"",tel:this.rs.tel?this.rs.tel:"",identification_document_confirmation_date:this.rs.identification_document_confirmation_date?this.rs.identification_document_confirmation_date:"",idConfirmationDate:""===F?"\u672a\u78ba\u8a8d":F,isIdConfirmationRequired:le},this.idConfirmationDate=le,this.generalFc.identification_document_confirmation_date.patchValue(F),!1===le?(this.generalFc.idConfirmationDate_check.patchValue(!0),this.generalFc.identification_document_confirmation_date.setValue(F),this.selectedCustomer.identification_document_confirmation_date=F,this.selectedCustomer.isIdConfirmationRequired=!0):(this.generalFc.idConfirmationDate_check.patchValue(!1),this.generalFc.identification_document_confirmation_date.setValue(""),this.selectedCustomer.identification_document_confirmation_date="",this.selectedCustomer.isIdConfirmationRequired=!1)}let U=i[1].data.length>0,J=!1,j=!1;if(U){if(i[1].data.map(F=>(F.scheduled_rental_date=this.dateToString(F.scheduled_rental_date),F.rental_date=this.dateToString(F.rental_date),F.scheduled_return_date=this.dateToString(F.scheduled_return_date),F.return_date=this.dateToString(F.return_date),F.rental_date&&(J=!0),F.rental_employee_id&&(j=!0),F)),this.rs&&this.rs.division_customer_type_code===Number(this.DIVISION_CUSTOMER_CODE_MEMBER)?(this.selectedCustomerStatus.type=String(this.rs.division_customer_type_code),this.selectedCustomerStatus.rental_employee_id=j,this.selectedCustomerStatus.reception_tag=!!this.rs.reception_tag):(this.rs&&Number(this.DIVISION_CUSTOMER_CODE_CLIENT),this.selectedCustomerStatus.type=String(this.rs.division_customer_type_code),this.selectedCustomerStatus.rental_employee_id=j,this.selectedCustomerStatus.reception_tag=!!this.rs.reception_tag),!1===this.is_processing_units&&this.bulkFc.rental_employee_id.valueChanges.subscribe(F=>{this.selectedCustomerStatus.rental_employee_id=!0}),this.rentals=i[1].data.filter(F=>(F.late_return_reported>0&&(this.bulk_late_return_reported=F.late_return_reported),""!=this.returnStringValue(F.rental_employee_id)&&(this.rental_employee=this.returnStringValue(F.rental_employee_id)),""!=this.returnStringValue(F.return_employee_id)&&(this.return_employee=this.returnStringValue(F.return_employee_id)),""!=this.dateToString(F.rental_date)&&(this.boolean_rental_date=!0),""!=this.dateToString(F.return_date)&&(this.boolean_return_date=!0),!F.parent_id)),this.overdue_rentals=i[1].data.filter(F=>(""!=this.returnStringValue(F.return_employee_id)&&(this.overdue_return_employee=this.returnStringValue(F.return_employee_id)),F.late_fee>0&&this.overdue_rentals_ad_status.push(this.DIFF_STAUS_DETENTION),F.refund_fee&&F.refund_fee>0&&this.overdue_rentals_ad_status.push(this.DIFF_STAUS_REFUND),""!=this.dateToString(F.return_date)&&(this.boolean_receipt_date=!0),F.parent_id)),console.log(this.overdue_rentals),console.log(this.overdue_rentals_ad_status),!1===this.is_processing_units){U&&(this.rental_date_values.scheduled_rental_date=this.rentals[this.SELECT_RENRAL_LIST_ID].scheduled_rental_date?this.rentals[this.SELECT_RENRAL_LIST_ID].scheduled_rental_date:"",this.rental_date_values.scheduled_return_date=this.rentals[this.SELECT_RENRAL_LIST_ID].scheduled_return_date?this.rentals[this.SELECT_RENRAL_LIST_ID].scheduled_return_date:"",this.rental_date_values.rental_date=this.rentals[this.SELECT_RENRAL_LIST_ID].rental_date?this.rentals[this.SELECT_RENRAL_LIST_ID].rental_date:"",this.rental_date_values.return_date=this.rentals[this.SELECT_RENRAL_LIST_ID].return_date?this.rentals[this.SELECT_RENRAL_LIST_ID].return_date:""),this.overdue_rentals.length>0&&(this.diff_date_values.scheduled_rental_date=this.overdue_rentals[this.SELECT_RENRAL_LIST_ID].scheduled_rental_date,this.diff_date_values.scheduled_return_date=this.overdue_rentals[this.SELECT_RENRAL_LIST_ID].scheduled_return_date,this.diff_date_values.rental_date=this.overdue_rentals[this.SELECT_RENRAL_LIST_ID].rental_date,this.diff_date_values.return_date=this.overdue_rentals[this.SELECT_RENRAL_LIST_ID].return_date),this.rentalItemStatus=""!==this.rental_date_values.rental_date&&null!=this.rental_date_values.rental_date,this.bulkFromInitialize(this.rental_date_values),this.setUpRentalReturnEmployee(),this.setRentalReturnEmployeeDefaultValue(this.rental_employee,this.return_employee);let F=[],le=[];U&&(F=i[1].data.filter(ee=>(le.push(ee.rental_product_id),ee.rental_product_id)));let tc=Array.from(new Set(le)).join(",");this.subscription.add((0,te.D)([this.rentalProductService.getAll({id:tc})]).pipe((0,L.x)(()=>this.common.loading=!1),(0,k.K)(ee=>(0,b.of)(ee))).subscribe(ee=>{ee instanceof R.UA?this.createHttpErrorAndExecHandleError(ee,this.listPagePath):null!=ee?(this.ProductData=ee[0].data,this.checkingTheRentalPeriod(this.ProductData,this.rentals)):this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u5546\u54c1\u306e\u30c7\u30fc\u30bf\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath)}))}this.overdue_rentals.length>0&&(this.set_overdue_rentals=!0,this.diffFromInitialize(this.diff_date_values),this.setUpDiffEmployee(),this.setDiffEmployeeDefaultValue(this.overdue_return_employee)),this.rentals.length>0&&(this.isDeliveryRequested=this.isDeliveryRequestedRentals(this.rentals)),this.totalAmount=this.getTotalAmount(this.rentals),this.overdue_totalAmount=this.getOverdueTotalAmount(this.overdue_rentals),this.overdue_refund_totalAmount=this.getOverdueRefundTotalAmount(this.overdue_rentals)}this.common.loading=!1}))}createErrorMessage(t){let i=!0;return null==t&&(this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath),i=!1),Array.isArray(t)&&5!==t.length&&(this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath),i=!1),(0,I.bz)(t[0])&&(this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath),i=!1),0!==t[1].data.length&&(0,I.bz)(t[1])&&(this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u660e\u7d30\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath),i=!1),(0,I.bz)(t[2])&&(this.createErrorAndExecHandleError("\u57fa\u672c\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath),i=!1),i}handleClickBulkSaveButton(t){const i=this.bulkForm.value;let r=!1,o="",s="";if(i.dateGroup?.return_date&&i.scheduledDateGroup?.scheduled_return_date){const g=new Date(i.scheduledDateGroup.scheduled_return_date).getTime(),U=new Date(i.dateGroup.return_date).getTime();o=new Date(i.dateGroup.return_date).toLocaleDateString(),s=new Date(i.dateGroup.rental_date).toLocaleDateString(),U<g&&(r=!0)}this.common.loading=!0;let _=new Date,d=this.bulkForm.value,p=this.rentals;const m=this.statusForm.value;if("rental"==t){if(this.bulkFc.dateGroup.controls.rental_date.patchValue(_),!d.rental_employee_id)return alert("\u8cb8\u51fa\u62c5\u5f53\u8005\u304c\u672a\u9078\u629e\u3067\u3059"),void(this.common.loading=!1);if(this.rs.division_customer_type_code===Number(this.rsConst.CUSTOMER_TYPE_DIVISION.CODE.GENERAL)&&!1===this.selectedCustomer.isIdConfirmationRequired)return alert("\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u306e\u78ba\u8a8d\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u305b\u3093"),void(this.common.loading=!1);this.confirmedIdentityVerificationDocuments()}else if("return"==t){if(!d.return_employee_id)return alert("\u8fd4\u5374\u62c5\u5f53\u8005\u304c\u672a\u9078\u629e\u3067\u3059"),void(this.common.loading=!1);this.bulkFc.dateGroup.controls.return_date.patchValue(_)}let f,c=[];p.map(g=>{let U={id:g.id,parent_id:this.selectedId,late_return_reported:d.late_return_reported,collection_division_id:g.collection_division_id,delinquency_flag:g.delinquency_flag,delivery_division_id:g.delivery_division_id,rental_date:this._dateToString(this.bulkFc.dateGroup.controls.rental_date.value),rental_fee:g.rental_fee,return_date:this._dateToString(this.bulkFc.dateGroup.controls.return_date.value),rental_item_count:g.rental_item_count,rental_product_id:g.rental_product_id,rental_product_name:g.rental_product_name,scheduled_rental_date:this._dateToString(d.scheduledDateGroup?.scheduled_rental_date),scheduled_return_date:this._dateToString(d.scheduledDateGroup?.scheduled_return_date),settle_status_division_id:g.settle_status_division_id,rental_employee_id:d.rental_employee_id?d.rental_employee_id:"",return_employee_id:d.return_employee_id?d.return_employee_id:""};if(r){let J=this.ProductData.find(j=>j.id==g.rental_product_id);if(J&&U.rental_date&&U.return_date){let j=this.calculateRentalFee(J,U.rental_date,U.return_date);"number"==typeof j&&j>0&&(U.refund_fee=U.rental_fee-j)}}c.push(U)}),console.log("rental_datas"),console.log(c),f=""==this._dateToString(d.dateGroup?.return_date)?this.PRODUCT_STATUS_DIVISION_RENTED:this.PRODUCT_STATUS_DIVISION_CLEANING;let T=this.statusDivisionOptions.find(g=>g.text===this.rs.division_status_value);this.bulkFc.dateGroup.controls.rental_date.value&&!this.bulkFc.dateGroup.controls.return_date.value?T=this.statusDivisionOptions.find(g=>g.text===A.STATUS.ALL_RENTED):this.bulkFc.dateGroup.controls.rental_date.value&&this.bulkFc.dateGroup.controls.return_date.value&&(T=this.statusDivisionOptions.find(g=>g.text===A.STATUS.ALL_RETURNED));const y={id:this.selectedId,customer_type_division_id:this.rs.customer_type_division_id,store_id:this.rs.store_id,client_id:this.rs.client_id,member_id:this.rs.member_id,mobile_number:this.rs.mobile_number,shipping_address:this.rs.shipping_address,status_division_id:T.value?T.value:m.status_division_id,remarks_1:this.rs.remarks_1,remarks_2:this.rs.remarks_2,reception_tag:m.reception_tag,reception_date:this.rs.reception_date,reception_employee_id:m.reception_employee_id,settle_status_division_id:this.rs.settle_status_division_id,incident_division_id:this.rs.incident_division_id,processing_units:m.processing_units};if(this.action_num=0,this.action_num+=p.length,this.action_num+=this.ProductData.length,c.length>0)for(let g=0;g<c.length;g++)this.updateRentalItem(c[g]);let O;this.setRentalProductsStatusDivision(f),O=this.rsService.update(this.selectedId,y),setInterval(()=>{this.action_num>0&&this.action_num==this.act_num&&O.subscribe({complete:()=>{window.location.reload()}})},1e3)}setRentalProductsStatusDivision(t){if(this.ProductData.length>0)for(let i in this.ProductData){this.ProductData[i].status_division_id=t;const r={product_id_list:String(this.ProductData[i].id),status_division_id:t};this.setRentalProductStatusDivisionId(r),this.act_num+=1}}setRentalProductStatusDivisionId(t){this.subscription.add(this.rentalProductService.update(Number(t.product_id_list),t).pipe((0,k.K)(i=>(0,b.of)(i)),(0,L.x)(()=>this.common.loading=!0)).subscribe(i=>{i instanceof R.UA&&this.handleError(i.status,i.error?i.error.title:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",i.error?i.error.message:i.message)}))}handleClickDiffSaveButton(t){var i=this;return(0,Tr.Z)(function*(){i.common.loading=!0;let r=new Date;"rental"==t?i.diffFc.dateGroup.controls.rental_date.patchValue(r):"return"==t&&i.diffFc.dateGroup.controls.return_date.patchValue(r);let o=i.diffForm.value,s=i.overdue_rentals;if(s.map(d=>{d.rental_fee=0,d.return_employee_id=o.return_employee_id,d.scheduled_return_date=i._dateToString(o.scheduledDateGroup?.scheduled_return_date),d.return_date=i._dateToString(o.dateGroup?.return_date)}),s.length>0)for(let d in s)yield i.updateRentalItem(s[d],!0);i.subscription.add(i.updateSlipInfo().subscribe(()=>{console.log(i.selectedId),window.location.reload()}))})()}onClickBulkFormReset(){this.getEmployeeByIdFcRental.get_rental_employee_id.patchValue(null),this.getEmployeeByIdFcReturn.get_return_employee_id.patchValue(null),this.bulkFromInitialize(this.rental_date_values)}onClickDiffFormReset(){this.getEmployeeByIdFcDiff.get_return_employee_id.patchValue(null),this.diffFromInitialize(this.diff_date_values)}changeReturnDate(){}addRentalItem(t){this.subscription.add(this.rentalService.add(t).pipe((0,L.x)(()=>this.common.loading=!0),(0,k.K)(i=>(0,b.of)(i))).subscribe(i=>{i instanceof R.UA?this.handleError(i.status,this.errorModalTitle,i.message):this.act_num+=1}))}updateRentalItem(t,i=!1){console.log(t);let r={id:t.id,rental_slip_id:this.selectedId,late_return_reported:t.late_return_reported,collection_division_id:t.collection_division_id,delinquency_flag:t.delinquency_flag,delivery_division_id:t.delivery_division_id,rental_date:t.rental_date,rental_fee:t.rental_fee,return_date:t.return_date,rental_item_count:t.rental_item_count,rental_product_id:t.rental_product_id,rental_product_name:t.rental_product_name,scheduled_rental_date:t.scheduled_rental_date,scheduled_return_date:t.scheduled_return_date,settle_status_division_id:t.settle_status_division_id,rental_employee_id:t.rental_employee_id,return_employee_id:t.return_employee_id,refund_fee:t.refund_fee?t.refund_fee:"",only_update:String(i)};"id"in r&&this.subscription.add(this.rentalService.update(r.id,r).pipe((0,L.x)(()=>this.common.loading=!0),(0,k.K)(o=>(0,b.of)(o))).subscribe(o=>{o instanceof R.UA?this.handleError(o.status,this.errorModalTitle,o.message):(this.act_num+=1,console.log("Rental Item Updated"))}))}bulkFromInitialize(t){this.bulkForm.reset({rental_employee_id:this.rental_employee,return_employee_id:this.return_employee,late_return_reported:this.bulk_late_return_reported,scheduledDateGroup:{scheduled_rental_date:new Date(t.scheduled_rental_date).toISOString(),scheduled_return_date:new Date(t.scheduled_return_date).toISOString()},dateGroup:{rental_date:t.rental_date?new Date(t.rental_date).toISOString():"",return_date:t.return_date?new Date(t.return_date).toISOString():""}},{emitEvent:!1})}diffFromInitialize(t){this.diffForm.reset({rental_employee_id:this.rental_employee,return_employee_id:this.return_employee,scheduledDateGroup:{scheduled_rental_date:t.scheduled_rental_date?new Date(t.scheduled_rental_date).toISOString():"",scheduled_return_date:t.scheduled_return_date?new Date(t.scheduled_return_date).toISOString():""},dateGroup:{rental_date:t.rental_date?new Date(t.rental_date).toISOString():"",return_date:t.return_date?new Date(t.return_date).toISOString():""}},{emitEvent:!1})}_dateToString(t){return null==t||""===t?"":new Date(t).toLocaleDateString()}dateToString(t){return t?new Date(t).toLocaleDateString():""}returnStringValue(t){return null==t||""===t?"":String(t)}calculateSingleItemRentalFee(t,i){if(!t||0===Object.keys(t).length||!i||0===Object.keys(i).length)return null;const r=Number(i.division_sales_tax_code),o=(0,I.zn)(r),s=Number(i.division_sales_fraction_code),_=(0,I.fy)(s);let d;return i.delivery_charge_flag?(d=(0,I.e_)(t.rental_fee,o.taxRate,o.isTaxIncluded,_),d instanceof Error?null:d):(d=(0,I.e_)(i.selling_price,o.taxRate,o.isTaxIncluded,_),d instanceof Error?null:d)}calculateAndSetRentalFee(t,i){if(!t||!i)return void(this.selectedProductPrice=this.addTargetProduct.selling_price);const r=!!(this.editTarget&&Object.keys(this.editTarget).length>0);let o,s,_;if(o=r?this.editFc:this.addFc,s=r?this.editTargetProduct:this.addTargetProduct,!s||0===Object.keys(s).length)return void(this.selectedProductPrice=0);_=s.delivery_charge_flag?{rental_fee:o.rental_fee}:{rental_fee:s.selling_price};const d=this.calculateSingleItemRentalFee(_,s);if(!d)return void this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u6599\u91d1\u306e\u7b97\u51fa\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath);let p,m;const c=new Date(String(t)).setHours(0,0,0,0);p=new Date(c);const h=new Date(String(i)).setHours(0,0,0,0);m=new Date(h);const T=(0,I.Sz)(p,m)+1;let y=0;y=T>1?Number(d?.priceWithTax)/100*70*T:Number(d?.priceWithTax),this.selectedProductPrice=y}handleClickRentalAddExecutionButton(){this.addFormIsOpen=!1,this.addOrUpdate("")}handleClickRentalEditExecutionButton(t){this.editFormIsOpen=!1,this.rentalItemUpdate(t)}handleClickRentalDiffExecutionButton(t){this.editFormIsOpen=!1,this.rentalDiffItemUpdate(t)}executeAction(){this.addForm.reset(),this.editForm.reset(),this.common.loading=!1,this.isUpdatingRental=!1,console.log("Updated")}checkConfirmationRequired(t,i){if("rental"==t){if(this.editFc.dateGroup.controls.rental_date.patchValue(i),this.rs.division_customer_type_code===Number(this.rsConst.CUSTOMER_TYPE_DIVISION.CODE.GENERAL)&&!1===this.selectedCustomer.isIdConfirmationRequired)return alert("\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u306e\u78ba\u8a8d\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u305b\u3093"),void(this.common.loading=!1);this.confirmedIdentityVerificationDocuments()}else"return"==t&&this.editFc.dateGroup.controls.return_date.patchValue(i)}setGracePeriodEnd(t){let i;if(t.late_return_reported){let r=new Date(String(t.scheduledDateGroup?.scheduled_return_date));r.setHours(9,0,0,0);let o=r.getTime()+864e5;i=new Date(o).toLocaleString()}return i}finalizeUpdate(){this.editForm.reset(),this.common.loading=!1,this.isUpdatingRental=!1,window.location.reload()}rentalItemUpdate(t){this.common.loading=!0;let i=new Date;this.checkConfirmationRequired(t,i.toISOString()),this.editTarget&&Object.keys(this.editTarget);const o=this.editForm.value;let _=this.editTargetProduct,d=this.editTarget.rental_fee,p=this.setGracePeriodEnd(o),m=!1,c="",h="";if(o.dateGroup?.return_date&&o.scheduledDateGroup?.scheduled_return_date){const O=new Date(o.scheduledDateGroup.scheduled_return_date).getTime(),M=new Date(o.dateGroup.return_date).getTime();c=new Date(o.dateGroup.return_date).toLocaleDateString(),h=new Date(o.dateGroup.rental_date).toLocaleDateString(),M<O&&(m=!0)}let f=!1;this.editTarget.parent_id&&(f=!0);let T={};if(T={id:this.editTarget.id,rental_slip_id:this.selectedId,rental_product_id:Number(o.rental_product_id),rental_item_count:this.RENTAL_ITEM_COUNT,rental_fee:this.selectedProductDeliveryChargeFlag?o.rental_fee:d,delivery_division_id:Number(o.delivery_division_id),delivery_price:this.DElIVERY_PRICE,collection_division_id:Number(o.collection_division_id),collection_price:this.COLLECTION_PRICE,delivery_charge_flag:this.selectedProductDeliveryChargeFlag,scheduled_rental_date:new Date(String(o.scheduledDateGroup?.scheduled_rental_date)).toLocaleDateString(),scheduled_return_date:new Date(String(o.scheduledDateGroup?.scheduled_return_date)).toLocaleDateString(),rental_date:o.dateGroup?.rental_date?this._dateToString(o.dateGroup?.rental_date):"",return_date:o.dateGroup?.return_date?this._dateToString(o.dateGroup?.return_date):"",delinquency_flag:0,grace_period_end:p||"",late_fee:Number(o.late_fee),late_return_reported:o.late_return_reported,settle_status_division_id:this.editTarget.settle_status_division_id,remarks_1:o.remarks_1?String(o.remarks_1):"",remarks_2:o.remarks_2?String(o.remarks_2):"",return_employee_id:o.return_employee_id?String(o.return_employee_id):"",rental_employee_id:o.rental_employee_id?String(o.rental_employee_id):""},m&&(console.log("rentalProduct"),console.log(_),_&&T.rental_date&&T.return_date)){let O=this.calculateRentalFee(_,T.rental_date,T.return_date);"number"==typeof O&&O>0&&(T.refund_fee=T.rental_fee-O)}console.log("--param check--"),console.log("\u8fd4\u5374\u65e5\u304c\u4e88\u5b9a\u3088\u308a\u65e9\u3044\u304b"+String(m)),console.log(this.editTarget),console.log("\u5b50\u8981\u7d20\u304c\u3042\u308b\u304b\uff1f"),console.log(T),console.log("--param check--");let y=this.rentalService.update(this.editTarget.id,T).pipe((0,k.K)(O=>(0,b.of)(O)),(0,L.x)(()=>{console.log("1. observable$"),this.editFormCancel()}));this.subscription.add(y.subscribe(O=>{if(O instanceof R.UA)return this.isUpdatingRental=!1,void this.createHttpErrorAndExecHandleError(O,this.listPagePath);if(null==O)return this.isUpdatingRental=!1,void this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u660e\u7d30\u306e\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath);let M;if(M=""==this._dateToString(T.return_date)?this.PRODUCT_STATUS_DIVISION_RENTED:this.PRODUCT_STATUS_DIVISION_CLEANING,this.updateRentalItem(T,f),_){const g={product_id_list:String(_.id),status_division_id:M};this.setRentalProductStatusDivisionId(g)}const K=this.getStatusDivisionId(T);this.statusDivisionIdUpdate(K.value,()=>{this.finalizeUpdate()})}))}addOrUpdate(t){this.common.loading=!0;let i=new Date;if("rental"==t){if(this.editFc.dateGroup.controls.rental_date.patchValue(i.toISOString()),this.rs.division_customer_type_code===Number(this.rsConst.CUSTOMER_TYPE_DIVISION.CODE.GENERAL)&&!1===this.selectedCustomer.isIdConfirmationRequired)return alert("\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u306e\u78ba\u8a8d\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u305b\u3093"),void(this.common.loading=!1);this.confirmedIdentityVerificationDocuments()}else"return"==t&&this.editFc.dateGroup.controls.return_date.patchValue(i.toISOString());const r=!!(this.editTarget&&Object.keys(this.editTarget).length>0),o=this.addForm.value,s=this.editForm.value;let _,d;_=r?this.editTarget:this.addTarget,d=r?this.editTargetProduct:this.addTargetProduct;let p=_.rental_fee,m={};if(r){let h;if(console.log("editing"),s.late_return_reported){let f=new Date(String(s.scheduledDateGroup?.scheduled_return_date));f.setHours(9,0,0,0);let T=f.getTime()+864e5;h=new Date(T).toLocaleString()}m={rental_slip_id:this.selectedId,rental_product_id:Number(s.rental_product_id),rental_item_count:this.RENTAL_ITEM_COUNT,rental_fee:this.selectedProductDeliveryChargeFlag?s.rental_fee:p,delivery_division_id:Number(s.delivery_division_id),delivery_price:this.DElIVERY_PRICE,collection_division_id:Number(s.collection_division_id),collection_price:this.COLLECTION_PRICE,delivery_charge_flag:this.selectedProductDeliveryChargeFlag,scheduled_rental_date:new Date(String(s.scheduledDateGroup?.scheduled_rental_date)).toLocaleDateString(),scheduled_return_date:new Date(String(s.scheduledDateGroup?.scheduled_return_date)).toLocaleDateString(),rental_date:s.dateGroup?.rental_date?new Date(String(s.dateGroup?.rental_date)).toLocaleString():"",return_date:s.dateGroup?.return_date?new Date(String(s.dateGroup?.return_date)).toLocaleString():"",delinquency_flag:0,grace_period_end:h||"",late_fee:Number(s.late_fee),late_return_reported:s.late_return_reported,settle_status_division_id:this.editTarget.settle_status_division_id,remarks_1:s.remarks_1?String(s.remarks_1):"",remarks_2:s.remarks_2?String(s.remarks_2):"",return_employee_id:s.return_employee_id?String(s.return_employee_id):"",rental_employee_id:s.rental_employee_id?String(s.rental_employee_id):""}}else m={rental_slip_id:this.selectedId,rental_product_id:Number(o.rental_product_id),rental_item_count:this.RENTAL_ITEM_COUNT,rental_fee:this.selectedProductDeliveryChargeFlag?o.rental_fee:p,delivery_division_id:Number(o.delivery_division_id),delivery_price:this.DElIVERY_PRICE,collection_division_id:Number(o.collection_division_id),collection_price:this.COLLECTION_PRICE,delivery_charge_flag:this.selectedProductDeliveryChargeFlag,scheduled_rental_date:new Date(String(o.scheduledDateGroup?.scheduled_rental_date)).toLocaleString(),scheduled_return_date:new Date(String(o.scheduledDateGroup?.scheduled_return_date)).toLocaleString(),delinquency_flag:0,late_return_reported:0,settle_status_division_id:this.settleStatusDivision.id,remarks_1:o.remarks_1?String(o.remarks_1):"",remarks_2:o.remarks_2?String(o.remarks_2):""};this.isUpdatingRental=!0;let c=this.rentalService.add(m).pipe((0,k.K)(h=>(0,b.of)(h)),(0,L.x)(()=>{this.addFormCancel()}));r&&(c=this.rentalService.update(this.editTarget.id,m).pipe((0,k.K)(h=>(0,b.of)(h)),(0,L.x)(()=>{console.log("1. observable$"),this.editFormCancel()}))),this.subscription.add(c.subscribe(h=>{if(h instanceof R.UA)return this.isUpdatingRental=!1,void this.createHttpErrorAndExecHandleError(h,this.listPagePath);if(null==h)return this.isUpdatingRental=!1,void this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u660e\u7d30\u306e\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath);let f;if(f=""==this._dateToString(m.return_date)?this.PRODUCT_STATUS_DIVISION_RENTED:this.PRODUCT_STATUS_DIVISION_CLEANING,this.action_num=0,this.action_num+=d?1:0,this.action_num+=this.addDiffRecord.length,this.action_num+=this.ProductData.length,m.length>0&&this.updateRentalItem(m),this.addDiffRecord.length>0&&this.addRentalItem(this.addDiffRecord[0]),d){const T={product_id_list:String(d.id),status_division_id:f};this.setRentalProductStatusDivisionId(T),this.act_num+=1,this.rsService.setActionNum(this.act_num)}this.actNumSubscription=this.rsService.actionNum$.subscribe(T=>{if(T>0&&T===this.act_num){const y=this.getStatusDivisionId(m);this.statusDivisionIdUpdate(y.value,()=>console.log("Updated")),this.executeAction()}else console.log("check")})}))}getStatusDivisionId(t){let i=this.statusDivisionOptions.find(r=>r.text===this.rs.division_status_value);if(t.rental_date&&!t.return_date){const r=this.rentals.filter(o=>""!=o.rental_date);i=this.statusDivisionOptions.find(this.rentals.length>0&&r.length+1>=this.rentals.length?o=>o.text===A.STATUS.ALL_RENTED:o=>o.text===A.STATUS.PARTIALLY_RENTED)}else if(t.rental_date&&t.return_date){const r=this.rentals.filter(o=>""!=o.return_date);i=this.statusDivisionOptions.find(this.rentals.length>0&&r.length+1>=this.rentals.length?o=>o.text===A.STATUS.ALL_RETURNED:o=>o.text===A.STATUS.PARTIALLY_RETURNED)}return i}deleteRental(t){let i;if(i=this.rentals.find(s=>s.id===t),i=this.overdue_rentals.find(s=>s.id===t),console.log(i),i?.rental_date)return void this.createErrorAndExecHandleError("\u8cb8\u51fa\u65e5\u304c\u8a2d\u5b9a\u3055\u308c\u305f\u30c7\u30fc\u30bf\u306e\u305f\u3081\u524a\u9664\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u30c7\u30fc\u30bf\u306e\u524a\u9664\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u307e\u3067\u304a\u554f\u3044\u5408\u308f\u305b\u304f\u3060\u3055\u3044\u3002",this.listPagePath);const r="\u30ec\u30f3\u30bf\u30eb"+C.yR.TITLE.DELETE;this.modalService.setModal(r,C.yR.BODY.DELETE,"danger",C.yR.BUTTON_TITLE.DELETE,C.yR.BUTTON_TITLE.CANCEL),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,z.q)(1),(0,B.h)(s=>this.modalService.getModalProperties().title===r)).subscribe(s=>{s===C.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&(this.rentals=this.rentals.filter(_=>_.id!==t),this.isUpdatingRental=!0,this.rentalService.remove(t).pipe((0,L.x)(()=>this.isUpdatingRental=!1),(0,k.K)(_=>(0,b.of)(_))).subscribe(_=>{_ instanceof R.UA?this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u660e\u7d30\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath):this.flashMessageService.setFlashMessage(_.message,"success",15e3)}))}))}toRegisterDeliverySchedulePage(){const t=oe.L.SALES_TYPE.find(i=>i.name===oe.L.RENTAL);this.router.navigate(["delivery/add"],{queryParams:{salesType:t?.id,slipId:this.selectedId}})}ngOnDestroy(){this.subscription.unsubscribe(),this.actNumSubscription&&this.actNumSubscription.unsubscribe()}handleError(t,i,r){this.errorService.setError({status:t,title:i,message:r})}calculateRentalFee(t,i,r){console.log(t);const o=t.selling_price;if(t.delivery_charge_flag)return o;const _=Number(t.division_sales_tax_code),d=(0,I.zn)(_),p=Number(t.division_sales_fraction_code),m=(0,I.fy)(p),c=(0,I.e_)(o,d.taxRate,d.isTaxIncluded,m);if(c instanceof Error)throw c;const h=new Date(String(i)).setHours(0,0,0,0),f=new Date(h),T=new Date(String(r)).setHours(0,0,0,0),y=new Date(T),O=(0,I.Sz)(f,y);let M=0;return M=d.isTaxIncluded?o:c.priceWithoutTax+c.taxAmount,0===O?(0,I._k)(M):M+.7*M*O}getRntalPrice(t){return{observable:this.rentalProductService.getAll({id:t}),valueTargetColumn:"id",textTargetColumn:"rental_price"}}detailUnitdisabledRentalTodayButton(){return!!(!0===this.statusForm.invalid||this.rs.division_customer_type_code===Number(this.rsConst.CUSTOMER_TYPE_DIVISION.CODE.GENERAL)&&!1===this.selectedCustomer.isIdConfirmationRequired||this.editForm.invalid||this.processingUnits.find(r=>"\u660e\u7d30\u5358\u4f4d"===r.text)?.value===this.statusFc.processing_units.value&&this.editForm.get("dateGroup.rental_date")?.value&&!this.editForm.get("return_employee_id")?.value)}detailUnitdisabledRentalTodayButtonBarcode(){return!!(!0===this.statusForm.invalid||this.rs.division_customer_type_code===Number(this.rsConst.CUSTOMER_TYPE_DIVISION.CODE.GENERAL)&&!1===this.selectedCustomer.isIdConfirmationRequired||this.editForm.invalid)}disabledRentalTodayButton(){let t=!1;return this.rs.division_customer_type_code===Number(this.rsConst.CUSTOMER_TYPE_DIVISION.CODE.GENERAL)&&!1===this.selectedCustomer.isIdConfirmationRequired?(t=!1,!0):!0===this.statusForm.invalid||(this.bulkForm.value.rental_employee_id||(t=!0),t)}disabledReturnTodayButton(){let t=!1;return this.rs.division_customer_type_code===Number(this.rsConst.CUSTOMER_TYPE_DIVISION.CODE.GENERAL)&&!1===this.selectedCustomer.isIdConfirmationRequired?(t=!0,!0):this.rs.division_status_value!==this.rsConst.STATUS.ACCEPTED&&!0===this.statusForm.invalid||(this.bulkForm.value.return_employee_id||(t=!0),t)}disabledBulkSaveButton(){let t=!1;if(this.rs.division_customer_type_code===Number(this.rsConst.CUSTOMER_TYPE_DIVISION.CODE.GENERAL)&&!1===this.selectedCustomer.isIdConfirmationRequired)return t=!0,!0;if(!0===this.statusForm.invalid)return!0;let i=this.bulkForm.value;return!1===this.rentalItemStatus?i.rental_employee_id||(t=!0):(!i.rental_employee_id||!i.return_employee_id)&&(t=!0),t}confirmedIdentityVerificationDocuments(){let t;const i=(new Date).toLocaleString();t=this.rsService.update(this.selectedId,{reception_date:this.rs.reception_date,remarks_1:this.rs.remarks_1,remarks_2:this.rs.remarks_2,customer_type_division_id:this.rs.customer_type_division_id,reception_employee_id:this.rs.reception_employee_id,status_division_id:this.rs.status_division_id,store_id:this.rs.store_id,settle_status_division_id:this.rs.settle_status_division_id,incident_division_id:this.rs.incident_division_id,processing_units:this.rs.processing_units,mobile_number:this.rs.mobile_number,send_sms_flg:this.rs.send_sms_flg,last_name:this.rs.last_name,first_name:this.rs.first_name,last_name_kana:this.rs.last_name_kana,first_name_kana:this.rs.first_name_kana,shipping_address:this.rs.shipping_address,tel:this.rs.tel,identification_document_confirmation_date:i}),this.updateCustomerData(t)}updateCustomerData(t){this.common.loading=!0,this.subscription.add(t.pipe((0,k.K)(i=>(0,b.of)(i)),(0,L.x)(()=>{this.common.loading=!1})).subscribe(i=>{if(i instanceof R.UA)return this.handleError(i.status,i.error?i.error.title:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",i.error?i.error.message:i.message),void(this.common.loading=!1);this.flashMessageService.setFlashMessage(i.message,"success",15e3)}))}rentalDiffItemUpdate(t){this.common.loading=!0;let i=new Date;this.checkConfirmationRequired(t,i.toISOString()),this.editTarget&&Object.keys(this.editTarget);const o=this.editForm.value;let d=this.editTarget.rental_fee,p=this.setGracePeriodEnd(o),m={};m={id:this.editTarget.id,rental_slip_id:this.selectedId,rental_product_id:Number(o.rental_product_id),rental_item_count:this.RENTAL_ITEM_COUNT,rental_fee:this.selectedProductDeliveryChargeFlag?o.rental_fee:d,delivery_division_id:Number(o.delivery_division_id),delivery_price:this.DElIVERY_PRICE,collection_division_id:Number(o.collection_division_id),collection_price:this.COLLECTION_PRICE,delivery_charge_flag:this.selectedProductDeliveryChargeFlag,scheduled_rental_date:new Date(String(o.scheduledDateGroup?.scheduled_rental_date)).toLocaleDateString(),scheduled_return_date:new Date(String(o.scheduledDateGroup?.scheduled_return_date)).toLocaleDateString(),rental_date:o.dateGroup?.rental_date?this._dateToString(o.dateGroup?.rental_date):"",return_date:o.dateGroup?.return_date?this._dateToString(o.dateGroup?.return_date):"",delinquency_flag:0,grace_period_end:p||"",late_fee:Number(o.late_fee),late_return_reported:o.late_return_reported,settle_status_division_id:this.editTarget.settle_status_division_id,remarks_1:o.remarks_1?String(o.remarks_1):"",remarks_2:o.remarks_2?String(o.remarks_2):"",return_employee_id:o.return_employee_id?String(o.return_employee_id):"",rental_employee_id:o.rental_employee_id?String(o.rental_employee_id):"",refund_fee:o.refund_fee?Number(o.refund_fee):0},o.dateGroup?.return_date||this.createErrorAndExecHandleError("\u8fd4\u5374\u65e5\u304c\u672a\u5165\u529b\u306e\u305f\u3081\u3001\u66f4\u65b0\u3067\u304d\u307e\u305b\u3093\u3002","");let c=this.rentalService.update(this.editTarget.id,m).pipe((0,k.K)(h=>(0,b.of)(h)),(0,L.x)(()=>{console.log("1. observable$"),this.editFormCancel()}));this.subscription.add(c.subscribe(h=>h instanceof R.UA?(this.isUpdatingRental=!1,void this.createHttpErrorAndExecHandleError(h,this.listPagePath)):null==h?(this.isUpdatingRental=!1,void this.createErrorAndExecHandleError("\u30ec\u30f3\u30bf\u30eb\u660e\u7d30\u306e\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath)):(this.updateRentalItem(m,!0),void this.subscription.add(this.updateSlipInfo().subscribe(()=>{console.log(this.selectedId),window.location.reload()})))))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(V.gz),e.Y36(N.T),e.Y36(ue.m),e.Y36(de.b),e.Y36(Er.h),e.Y36(Oe.h),e.Y36(Te.E),e.Y36(be.P),e.Y36(S.Z),e.Y36(V.F0),e.Y36(Fe),e.Y36(P.v),e.Y36(Ce.G))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-detail"]],decls:39,vars:12,consts:[[3,"breadcrumbList"],[1,"mb-8"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"flex","flex-row","items-center","gap-6"],[3,"path"],[1,"width-limit-break","border-t","border-gray-400"],[4,"ngIf","ngIfElse"],["duringAcquisition",""],["client",""],["member",""],["general",""],["inoperableEditIcon",""],["inoperableDeleteIcon",""],["add",""],["edit",""],["receipt",""],["labels",""],["errors",""],["minErrors",""],["dateErrors",""],[1,"mt-8"],[1,"flex","justify-between"],[1,"w-3/5"],[1,"text-base",3,"formGroup","submit"],[1,"flex","gap-4"],[1,"w-1/5"],["nameAttrValue","status_division_id","idAttrValue","status_division_id",3,"formCtrl","options","invalid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["message","",4,"ngTemplateOutlet","ngTemplateOutletContext"],["nameAttrValue","reception_employee_id","idAttrValue","reception-employee-id","placeholder","\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",3,"formCtrl","options"],["nameAttrValue","reception_tag","idAttrValue","reception-tag",3,"formCtrl"],["nameAttrValue","processing_units","idAttrValue","processing-units","placeholder","\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",3,"formCtrl","options","invalid"],[1,"mt-6","w-1/5"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",3,"buttonDisabled"],[1,"flex","gap-6","mt-6","items-center"],[3,"click"],[1,"mt-4","mb-24","py-8","px-6","bg-white","shadow","border","border-gray-300"],[1,"relative"],[1,"absolute","left-[-20px]","top-[-28px]","bg-primary-hover","px-4","py-1","rounded-full","text-white"],[1,"absolute","right-0"],[4,"ngIf"],[1,"flex","justify-center"],[1,"text-center","text-2xl","border-b","border-slate-500"],[1,"flex","justify-between","mt-2"],[1,"w-1/3"],[4,"ngIf","ngIfThen"],[3,"formGroup"],[1,"w-ful"],["message",""],["elementId","barcode",3,"value"],[1,"text-2xl","text-center","mt-2"],[1,"text-center","mb-2"],[1,"mt-2"],[1,"mt-4","mx-4","flex","gap-6"],[1,"w-1/3","flex"],["nameAttrValue","rental_employee_id","idAttrValue","rental-employee-id",1,"w-2/3",3,"formCtrl","options","invalid"],["nameAttrValue","get_rental_employee_id","idAttrValue","get-rental-employee-id",1,"w-1/3",3,"formCtrl","invalid"],[1,"w-1/3","mt-6"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",1,"ml-2","mr-2",3,"buttonDisabled","click"],["nameAttrValue","rental_employee_id","idAttrValue","rental-employee-id",1,"w-3/5",3,"formCtrl","options","invalid"],["nameAttrValue","get_rental_employee_id","idAttrValue","get-rental-employee-id",1,"w-2/5",3,"formCtrl","invalid"],["nameAttrValue","return_employee_id","idAttrValue","return-employee-id",1,"w-3/5",3,"formCtrl","options","invalid"],["nameAttrValue","get_return_employee_id","idAttrValue","get-return-employee-id",1,"w-2/5",3,"formCtrl","invalid"],[1,"w-1/6"],["nameAttrValue","late_return_reported","idAttrValue","late-return-reported",3,"formCtrl","options","invalid"],[1,"flex","gap-6"],[1,"w-1/2"],["nameAttrValue","scheduled_rental_date","idAttrValue","scheduled-rental-date",3,"formCtrl","invalid"],["nameAttrValue","scheduled_return_date","idAttrValue","scheduled-return-date",3,"formCtrl","invalid"],["nameAttrValue","rental_date","idAttrValue","rental-date",3,"formCtrl","invalid"],[1,"flex","flex-row","justify-center","bottom-[40px]","edit_save_buttom"],[1,"ml-2","mr-2","mt-6",3,"click"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",1,"ml-2","mr-2","mt-6",3,"buttonDisabled","click"],["nameAttrValue","return_date","idAttrValue","return-date",3,"formCtrl","invalid"],[1,"mt-6"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",1,"mr-2",3,"buttonDisabled","click"],[1,"mt-6","w-[100%]","table-fixed","border-collapse","border","border-slate-500"],[1,"text-sm"],[1,"border","border-slate-300","w-[64px]"],[1,"border","border-slate-300"],[1,"border","border-slate-300","w-[180px]"],[1,"border","border-slate-300","w-[80px]"],[1,"border","border-slate-300","w-[100px]"],[4,"ngFor","ngForOf"],["colspan","11",1,"border","border-slate-300"],[1,"text-right","pr-2","py-2","text-sm"],[1,"text-base","font-bold"],[3,"ngClass"],[1,"border","border-slate-300","px-1"],[1,"text-center"],[1,"text-xs","mt-1"],[1,"text-right"],[1,"flex","justify-around"],[1,"cursor-pointer"],["appendClassForIcon","fill-warning group-hover:fill-warning-hover","icon","edit-2-line",3,"click"],["icon","delete-bin-line","appendClassForIcon","cursor-pointer fill-danger group-hover:fill-danger-hover",3,"click"],[1,"bg-slate-100"],[1,"w-full"],[1,"flex","justify-end"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",1,"ml-2","mr-2","mt-6",3,"click"],[1,"w-2/5","mt-6","ml-2"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",3,"click"],[1,"mt-","mx-4","flex","gap-6"],[1,"w-1/4"],[1,"w-2/4"],[1,"text-3xl","text-center","text-slate-500","mt-6"],[1,"mt-1"],[1,"text-lg","border-b","border-slate-500"],[1,"text-2xl"],["idConfirmed",""],[1,"1/4","mt-3"],[1,"mt-4"],[3,"formCtrl","invalid","change"],[1,"text-danger","font-semibold"],["appendClassForIcon","fill-slate-200","icon","edit-2-line"],["icon","delete-bin-line","appendClassForIcon","fill-slate-200"],[1,"mt-6","py-4","bg-slate-100","text-base"],[1,"mx-4"],["autocomplete","off",1,"mt-4",3,"formGroup","ngSubmit","keydown.enter"],[1,"mx-4","mt-4","flex","gap-6"],["nameAttrValue","name","idAttrValue","name","targetOptionData","text",3,"fc","apiInput","invalid","idValueChanges","selectedData"],[1,"flex","items-center","gap-2"],["nameAttrValue","id","idAttrValue","id","targetOptionData","value",3,"fc","apiInput","invalid","idValueChanges","selectedData"],["addFormDeliveryCharge",""],["nameAttrValue","rental_fee","idAttrValue","rental-fee",3,"textRight","formCtrl","invalid"],["nameAttrValue","remarks_1","idAttrValue","remarks-1",3,"formCtrl","invalid"],["nameAttrValue","remarks_2","idAttrValue","remarks-2",3,"formCtrl","invalid"],[1,"flex","gap-6","justify-end","mx-4","pb-2"],[1,"pt-7"],["nameAttrValue","delivery_division_id","idAttrValue","delivery-division-id",3,"formCtrl","options","invalid"],["nameAttrValue","collection_division_id","idAttrValue","collection-division-id",3,"formCtrl","options","invalid"],[1,"py-4","bg-slate-50","text-base"],[1,"mx-4","text-rose-500"],[1,"border-b","border-rose-500"],["autocomplete","off",1,"mt-4",3,"formGroup","ngSubmit"],[1,"mx-4","flex","gap-6"],[1,"w-3/4"],[1,"flex","gap-14"],[2,"display","none"],["nameAttrValue","rental_fee","idAttrValue","rental-fee",3,"formCtrl","invalid"],["nameAttrValue","delivery_price","idAttrValue","delivery-price",2,"display","hidden",3,"textRight","formCtrl","invalid"],["nameAttrValue","rental_employee_id","idAttrValue","rental-employee-id",3,"formCtrl","options","invalid"],[1,"w-1/4","flex"],[1,"w-2/3","mt-6"],["btnType","button","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",1,"ml-2","mr-2",3,"buttonDisabled","click"],["nameAttrValue","get_rental_employee_id","idAttrValue","get-rental-employee-id",3,"formCtrl","invalid"],["nameAttrValue","return_employee_id","idAttrValue","return-employee-id",3,"formCtrl","options","invalid"],[1,"w-3/5","mt-6"],["nameAttrValue","get_return_employee_id","idAttrValue","get-return-employee-id",1,"w-full",3,"formCtrl","invalid"],["btnType","button","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",1,"ml-2","mr-2",3,"click"],["nameAttrValue","late_fee","idAttrValue","late-fee",3,"formCtrl","invalid"],["nameAttrValue","refund_fee","idAttrValue","refund-fee",3,"formCtrl","invalid"],["class","px-3 py-0.5 text-xs text-white bg-warning-dark rounded-full",4,"ngIf"],[1,"px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],["class","mt-1 pl-1 text-sm text-red",4,"ngIf"],[1,"mt-1","pl-1","text-sm","text-red"]],template:function(t,i){if(1&t&&(e._UZ(0,"app-breadcrumb-org",0),e.TgZ(1,"main",1)(2,"h1",2),e._uU(3,"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u8a73\u7d30"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"app-back-to-link-org",5),e._uU(7,"\u4e00\u89a7\u3078\u623b\u308b"),e.qZA(),e._UZ(8,"app-edit-link-org",5),e.qZA(),e.TgZ(9,"app-last-updater-org"),e._uU(10),e.qZA()(),e._UZ(11,"hr",6),e.YNc(12,io,58,47,"ng-container",7),e.qZA(),e.YNc(13,ro,2,0,"ng-template",null,8,e.W1O),e.YNc(15,ao,6,3,"ng-template",null,9,e.W1O),e.YNc(17,oo,23,4,"ng-template",null,10,e.W1O),e.YNc(19,go,32,9,"ng-template",null,11,e.W1O),e.YNc(21,ho,2,0,"ng-template",null,12,e.W1O),e.YNc(23,fo,2,0,"ng-template",null,13,e.W1O),e.YNc(25,Lo,21,9,"ng-template",null,14,e.W1O),e.YNc(27,ys,30,23,"ng-template",null,15,e.W1O),e.YNc(29,Fl,30,23,"ng-template",null,16,e.W1O),e.YNc(31,Ol,4,2,"ng-template",null,17,e.W1O),e.YNc(33,Rl,1,1,"ng-template",null,18,e.W1O),e.YNc(35,Ml,1,1,"ng-template",null,19,e.W1O),e.YNc(37,Ll,1,1,"ng-template",null,20,e.W1O)),2&t){const r=e.MAs(14);e.Q6J("breadcrumbList",e.WLB(9,Vl,e.VKq(6,Bl,i.listPagePath),e.DdM(8,ql))),e.xp6(6),e.Q6J("path",i.listPagePath),e.xp6(2),e.Q6J("path",i.editPagePath),e.xp6(2),e.hij(" \u6700\u7d42\u66f4\u65b0\u8005\uff1a",i.updaterFullName?i.updaterFullName:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),e.xp6(2),e.Q6J("ngIf",i.rs)("ngIfElse",r)}},dependencies:[x.mk,x.sg,x.O5,x.tP,l._Y,l.JL,l.sg,fe.Z,ye.R,Ne.a,Re.O,ke.t,ce.d,pe.r,Dr.i,xr._,Sr.d,Ze.J,Me,_t.b]}),n})()},{path:"edit/:id",component:(()=>{class n{constructor(t,i,r,o,s,_,d,p,m,c,h,f,T,y,O,M,K,g,U,J,j){this.fb=t,this.formService=i,this.authorService=r,this.modalService=o,this.router=s,this.storeService=_,this.clientService=d,this.memberService=p,this.employeeService=m,this.divisionService=c,this.errorService=h,this.rsService=f,this.flashMessageService=T,this.activatedRoute=y,this.common=O,this.largeCategoryService=M,this.mediumCategoryService=K,this.smallCategoryService=g,this.rentalProductService=U,this.rentalService=J,this.dIService=j,this.subscription=new q.w0,this.idConfirmationDate=!1,this.listPagePath="/rental-slip",this.errorHasOccurred=!1,this.cancelModalTitle="\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u7de8\u96c6\u30ad\u30e3\u30f3\u30bb\u30eb\uff1a"+C.yR.TITLE.CANCEL,this.errorModalTitle="\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u7de8\u96c6\u30a8\u30e9\u30fc\uff1a"+C.yR.TITLE.HAS_ERROR,this.rentalDivisionListName="\u30ec\u30f3\u30bf\u30eb\u5546\u54c1\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",this.errorConst=G.c,this.divisionConst=D.z,this.rsConst=A,this.RENTED=Y.q.STATUS.RENTED,this.RENTABLE=Y.q.STATUS.RENTABLE,this.clientForm=this.fb.group({client_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX)]],shipping_address:["",[l.kI.maxLength(255)]]}),this.memberForm=this.fb.group({member_id:["",[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX)]],shipping_address:["",[l.kI.maxLength(255)]]}),this.generalForm=this.fb.group({last_name:["",[l.kI.required,l.kI.maxLength(255)]],first_name:["",[l.kI.maxLength(255)]],last_name_kana:["",[l.kI.maxLength(255),l.kI.pattern(v.m.FULL_WIDTH_KATAKANA_REG_EX)]],first_name_kana:["",[l.kI.maxLength(255),l.kI.pattern(v.m.FULL_WIDTH_KATAKANA_REG_EX)]],shipping_address:["",[l.kI.maxLength(255)]],tel:["",[l.kI.required,l.kI.maxLength(14),l.kI.pattern(v.m.NUMERIC_REG_EX)]],identification_document_confirmation_date:["",[l.kI.required]]}),this.commonForm=this.fb.group({reception_date:["",[l.kI.required]],remarks_1:["",[l.kI.maxLength(255)]],remarks_2:["",[l.kI.maxLength(255)]],customer_type_division_id:["",[l.kI.pattern(v.m.NUMERIC_REG_EX)]],store_id:["",[l.kI.required]],reception_employee_id:["",[l.kI.required]],status_division_id:[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX)],settle_status_division_id:[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX)],incident_division_id:[l.kI.required,l.kI.pattern(v.m.NUMERIC_REG_EX)],mobile_number:["",[l.kI.minLength(10),l.kI.maxLength(14),l.kI.pattern(v.m.NUMERIC_REG_EX)]],send_sms_flg:[""],processing_units:[""],idConfirmationDate:[""]}),this.MEMBER="member",this.CLIENT="client",this.DIVISION_CUSTOMER_CODE_MEMBER=String(A.CUSTOMER_TYPE_DIVISION.CODE.MEMBER),this.DIVISION_CUSTOMER_CODE_CLIENT=String(A.CUSTOMER_TYPE_DIVISION.CODE.CLIENT),this.DIVISION_CUSTOMER_CODE_GENERAL=String(A.CUSTOMER_TYPE_DIVISION.CODE.GENERAL),this.selectedSMS=0,this.identificationIsChecked=!1,this.idCheckedDateTime=0,this.showMemberSuggest=!1,this.showClientSuggest=!1,this.ONEBYONE="ONEBYONE",this.BULK="BULK",this.PROCESSINGUNIT_ONEBYONE_VALUE=1,this.PROCESSINGUNIT_BULK_VALUE=0,this.processingUnitsDefaultValue=0,this.processingUnitsPostValue=0,this.processingUnits=[{processing_units_id:this.PROCESSINGUNIT_ONEBYONE_VALUE,value:this.ONEBYONE,display:"\u660e\u7d30\u5358\u4f4d"},{processing_units_id:this.PROCESSINGUNIT_BULK_VALUE,value:this.BULK,display:"\u53d7\u4ed8\u7968\u5358\u4f4d"}],this.selectedprocessingUnits=this.ONEBYONE,this.showOnebyoneSuggest=!0,this.showBulkSuggest=!0,this.smsIsChecked=!1,this.rentalEmployeeForms=this.fb.group({rental_employee_id:[""],return_employee_id:[""]}),this.rentalSlipForm=this.formService.createRentalSlipForm(this.fb),this.initialDate={bulkScheduledDateGroup:{bulk_scheduled_rental_date:(new Date).toISOString(),bulk_scheduled_return_date:(new Date).toISOString()}},this.rentalDateForms=this.fb.group({bulkScheduledDateGroup:this.fb.group({bulk_scheduled_rental_date:[new Date(String(this.initialDate.bulkScheduledDateGroup?.bulk_scheduled_rental_date))],bulk_scheduled_return_date:[new Date(String(this.initialDate.bulkScheduledDateGroup?.bulk_scheduled_return_date))]})}),this.rentalItemStatus=!0,this.getReceptionEmployeeByIdFormRental=this.fb.group({get_rental_employee_id:["",[l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11),l.kI.min(1)]]}),this.getReceptionEmployeeByIdFormReturn=this.fb.group({get_return_employee_id:["",[l.kI.pattern(v.m.NUMERIC_REG_EX),l.kI.maxLength(11),l.kI.min(1)]]}),this.rentalAddForms=this.fb.group({forms:this.fb.array([])}),this.isCategoryMenuOpen=!1,this.isLargeCategory=!0,this.currentCategoryLevel="large",this.categoryTitle={large:"\u5927\u5206\u985e",medium:"\u4e2d\u5206\u985e",small:"\u5c0f\u5206\u985e"},this.showProductIdSuggest=!1,this.showProductNameSuggest=!1,this.RESERVATION_STATUS_PERIOD=21,this.reservationStatusHeader=[],this.reservationStatusBody=[],this.RENTAL_PRODUCT_ACQUISITION_ALL="all",this.RENTAL_PRODUCT_ACQUISITION_RESERVABLE="reservable",this.selectedRentalProductAcquisitionType=this.RENTAL_PRODUCT_ACQUISITION_ALL,this.rentalProductAcquisitionTypes=[{value:this.RENTAL_PRODUCT_ACQUISITION_ALL,display:"\u5168\u5546\u54c1"},{value:this.RENTAL_PRODUCT_ACQUISITION_RESERVABLE,display:"\u4e88\u7d04\u53ef\u80fd\u306a\u5546\u54c1\u306e\u307f"}],this.displayStartDateForm=this.fb.group({display_start_date:["",[l.kI.required]]}),this.productSuggestForm=this.fb.group({id:["",[l.kI.required]],product_name:[""]})}getScheduledRentalDateControl(t){return t.get("scheduledDateGroup")?.get("scheduled_rental_date")}getScheduledReturnDateControl(t){return t.get("scheduledDateGroup")?.get("scheduled_return_date")}getBulkScheduledRentalDateControl(){return this.rentalDateForms.get("bulkScheduledDateGroup")?.get("bulk_scheduled_rental_date")}getBulkScheduledReturnDateControl(){return this.rentalDateForms.get("bulkScheduledDateGroup")?.get("bulk_scheduled_return_date")}getFormControlTypeValue(t,i){return t.get(i)}getEmployeeByIdRental(t){this.employeeSuggests.find(i=>{Number(i.value)===Number(t)&&(this.rentalEc.rental_employee_id.patchValue(i.value),this.rental_employee=String(i.value))})}get getEmployeeByIdFcRental(){return this.getReceptionEmployeeByIdFormRental.controls}getEmployeeByIdReturn(t){this.employeeSuggests.find(i=>{Number(i.value)===Number(t)&&(this.rentalEc.return_employee_id.patchValue(i.value),this.return_employee=String(i.value))})}get getEmployeeByIdFcReturn(){return this.getReceptionEmployeeByIdFormReturn.controls}onCheckSmsSend(t){t.target.checked?(this.smsIsChecked=!0,this.selectedSMS=1):(this.smsIsChecked=!1,this.selectedSMS=0)}get clientCtrls(){return this.clientForm.controls}get memberCtrls(){return this.memberForm.controls}get commonFc(){return this.commonForm.controls}get generalFc(){return this.generalForm.controls}get rentalDateFormsControls(){return this.rentalDateForms.controls}get rentalEc(){return this.rentalEmployeeForms.controls}get rentalAddFormArray(){return this.rentalAddForms.get("forms")}get rentalAddFormArrayControls(){return this.rentalAddFormArray.controls}deleteSelectedRentalProduct(t){let i=this.rentalAddFormArray.controls[t].value;"id"in i?(this.deleteRentalProduct(i.id),this.rentalAddFormArray.removeAt(t)):this.rentalAddFormArray.removeAt(t)}deleteRentalProduct(t){this.common.loading=!0,this.subscription.add(this.rentalService.remove(t).pipe((0,L.x)(()=>this.common.loading=!1),(0,k.K)(i=>(0,b.of)(i))).subscribe(i=>{i instanceof R.UA?this.handleError(i.status,this.errorModalTitle,i.message,this.detailPagePath):(this.flashMessageService.setFlashMessage(i.message,"success",15e3),this.common.loading=!1)}))}formControlStateManager(t){return null!=t&&(t.touched||t.dirty)&&t.invalid}validateDisplayStartDate(){return""===this.displayStartDateFc.display_start_date.value&&(alert("\u8868\u793a\u958b\u59cb\u65e5\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044"),!0)}toggleCategoryMenu(){this.validateDisplayStartDate()||(this.isCategoryMenuOpen=!this.isCategoryMenuOpen,this.currentCategoryLevel="large",this.currentCategoryData=this.largeCategories,this.isLargeCategory=!0)}toggleProductNameSuggest(){this.validateDisplayStartDate()||(this.showProductNameSuggest=!this.showProductNameSuggest)}toggleProductIdSuggest(){this.validateDisplayStartDate()||(this.showProductIdSuggest=!this.showProductIdSuggest)}onRentalProductAcquisitionTypeRadioChange(t){this.selectedRentalProductAcquisitionType=t.target.value}resetProductSearch(){this.productSuggestForm.reset(),this.productSearchResults=[],this.productSearchResults=[]}get displayStartDateFc(){return this.displayStartDateForm.controls}get productFc(){return this.productSuggestForm.controls}get rentalSlipFc(){return this.rentalSlipForm.controls}getProductNameFormSuggests(){const t={name:this.productFc.product_name.value,data_permission_division_id:this.RENTAL_PRODUCT_DATA_PERMISSION_DIVISION_ID_PUBLIC};return this.selectedRentalProductAcquisitionType===this.RENTAL_PRODUCT_ACQUISITION_RESERVABLE&&(t.status_division_id=this.RENTAL_PRODUCT_STATUS_DIVISION_ID_RENTABLE),{observable:this.rentalProductService.getAll({...t}),valueTargetColumn:"id",textTargetColumn:"name"}}ngOnInit(){this.subscription.add(this.modalService.closeEventObservable$.pipe((0,B.h)(s=>this.modalService.getModalProperties().title===this.cancelModalTitle)).subscribe(s=>{s===C.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl(this.detailPagePath)})),this.subscription.add(this.commonFc.customer_type_division_id.valueChanges.subscribe(s=>{}));const t=this.activatedRoute.snapshot.params.id;if(this.isParameterInvalid(t))return void this.handleError(400,this.errorModalTitle,"\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath);let r=this.getBulkScheduledRentalDateControl(),o=this.getBulkScheduledReturnDateControl();this.subscription.add(r?.valueChanges.subscribe(s=>{s&&o.patchValue(s)})),this.selectedId=Number(t),this.detailPagePath=this.listPagePath+"/detail/"+t,this.initOptions(Number(t))}selectedCustomerType(t){if(null===t)return void this.handleError(400,this.errorModalTitle,"\u9078\u629e\u80a2\u53d6\u5f97\u30a8\u30e9\u30fc");const i=this.customerTypes.find(r=>String(r.value)===String(t));void 0!==i?(this.customerType=i,this.selectedCustomerCode=String(this.customerType.code)):this.handleError(400,this.errorModalTitle,"\u9078\u629e\u80a2\u53d6\u5f97\u30a8\u30e9\u30fc")}resetCustomerInfo(){const i=this.rentalSlip;if(this.selectedCustomer={type:void 0,customer_type_code:this.selectedCustomerCode,id:"",fullName:"",fullNameKana:"",address:"",tel:"",idConfirmationDate:"",isIdConfirmationRequired:!0,identification_document_confirmation_date:""},this.selectedCustomerCode===this.DIVISION_CUSTOMER_CODE_MEMBER){this.clientCtrls.client_id.setValue(""),this.commonFc.mobile_number.setValue("");let r=this.members.find(o=>o.id===i.member_id);this.onMemberNameSuggestDataSelected(r),this.rentalSlipFc.customerTypeGroup.controls.member_id.setValue(i.member_id),this.selectedCustomer.type=Number(A.CUSTOMER_TYPE_DIVISION.VALUE.MEMBER),this.memberCtrls.shipping_address.setValue(String(i.shipping_address))}else if(this.selectedCustomerCode===this.DIVISION_CUSTOMER_CODE_CLIENT){this.rentalSlipFc.customerTypeGroup.controls.member_id.patchValue(""),this.memberCtrls.member_id.setValue(""),this.commonFc.mobile_number.setValue("");let r=this.clients.find(o=>o.id===i.client_id);this.onClientNameSuggestDataSelected(r),this.rentalSlipFc.customerTypeGroup.controls.client_id.setValue(i.client_id),this.selectedCustomer.type=Number(A.CUSTOMER_TYPE_DIVISION.VALUE.CLIENT),this.clientCtrls.shipping_address.setValue(String(i.shipping_address))}else this.selectedCustomerCode===this.DIVISION_CUSTOMER_CODE_GENERAL&&(this.selectedCustomer.type=Number(A.CUSTOMER_TYPE_DIVISION.VALUE.GENERAL),this.generalFc.shipping_address.setValue(String(i.shipping_address)));this.commonFc.store_id.setValue(String(i.store_id)),this.commonFc.remarks_1.setValue(String(i.remarks_1)),this.commonFc.remarks_2.setValue(String(i.remarks_2)),this.commonFc.reception_date.setValue(i.reception_date),this.commonFc.reception_employee_id.setValue(String(i.reception_employee_id))}isParameterInvalid(t){return null===t||!!isNaN(Number(t))}ngOnDestroy(){this.subscription.unsubscribe()}getRentalProducts(t){this.common.loading=!0,this.rentalProductService.getAll({id:t}),this.subscription.add(this.rentalProductService.find(t).pipe((0,k.K)(r=>(0,b.of)(r instanceof R.UA?r:null)),(0,L.x)(()=>this.common.loading=!1)).subscribe(r=>{if(r instanceof R.UA)return this.handleError(r.status,r.error?r.error.title:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",r.error?r.error.message:r.message),void(this.common.loading=!1);null!==r?r.totalItems>0||alert("\u5546\u54c1\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f"):alert("\u5546\u54c1\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}))}initOptions(t){this.common.loading=!0,this.subscription.add((0,te.D)([this.storeService.getAsSelectOptions(),this.clientService.getAll(),this.memberService.getAll(),this.employeeService.getAll(),this.divisionService.getAsSelectOptions(),this.rsService.find(t),this.largeCategoryService.getAll(),this.mediumCategoryService.getAll(),this.smallCategoryService.getAll(),this.rentalService.getAll({rental_slip_id:this.selectedId}),this.rentalProductService.getAll()]).pipe((0,L.x)(()=>this.common.loading=!1),(0,k.K)(i=>(0,b.of)(i))).subscribe(i=>{if(i instanceof R.UA)return void this.handleError(i.status,this.errorModalTitle,i.message);if(null==i)return void this.handleError(400,this.errorModalTitle,C.yR.BODY.HAS_ERROR);if(11!==i.length)return void this.handleError(400,this.errorModalTitle,C.yR.BODY.HAS_ERROR);this.rentalSlip=i[5].data[0];const r=i[5].data[0],o=this.rsConst;this.storeSuggests=i[0],this.clients=i[1].data,this.clientSuggests=i[1].data.map(g=>({value:g.id,text:g.name})),this.members=i[2].data,this.memberSuggests=i[2].data.map(g=>({value:g.id,text:g.last_name+" "+g.first_name}));const s=i[3].data,_=s.find(g=>g.id===r.updated_id);_&&(this.lastUpdater=_.last_name+" "+_.first_name),this.employeeSuggests=s.map(g=>({value:g.id,text:g.last_name+" "+g.first_name})),this._employeeSuggests=i[3].data;const d=i[4];this.largeCategories=i[6].data,this.currentCategoryData=this.largeCategories,this.mediumCategories=i[7].data,this.smallCategories=i[8].data,this.setHasChildren(),this.displayStartDateFc.display_start_date.patchValue((new Date).toISOString()),this._setDivisions(d),this._setHiddenValue();const p=this.customerTypes_.find(g=>g.value===r.customer_type_division_id);this.selectedCustomerCode=String(p.code);const m=i[4];this.setStatusDivisions(o,m[D.z.RENTAL_SLIP_STATUS],r),this.commonFc.customer_type_division_id.patchValue(r.customer_type_division_id),this.rentals=i[9].data.filter(g=>(g.rental_employee_id&&(this.rental_employee=String(g.rental_employee_id)),g.return_employee_id&&(this.return_employee=String(g.return_employee_id)),!g.parent_id)),this.overdue_rentals=i[9].data.filter(g=>(g.rental_employee_id&&(this.rental_employee=String(g.rental_employee_id)),g.return_employee_id&&(this.return_employee=String(g.return_employee_id)),g.parent_id));let h=m[D.z.SALES_TAX];const T=i[10].data;for(let g in this.rentals){let U=T.filter(E=>E.id===this.rentals[g].rental_product_id),J=h.find(E=>E.code===U[0].division_sales_tax_code);this.setRentalAddForm({...this.rentals[g],division_status_code:U[0].division_status_code,division_status_name:U[0].division_status_name,division_status_value:U[0].division_status_value,rental_product:U[0],division_sales_tax_code:J.division_sales_tax_code,division_sales_tax_name:J.division_sales_tax_name,division_sales_tax_value:J.division_sales_tax_value,selling_price:U[0].selling_price})}this.settleDivisions=m[D.z.SETTLE_STATUS],this.incidentDivisions=m[D.z.INCIDENT],this.statusDivisionId=r.status_division_id,this.generateStatusDivisions(i[4]);let M=this.processingUnits.filter(g=>{let U=0;return r.processing_units&&(U=1),g.processing_units_id===U});this.processingUnit=M[0],this.processingUnitValue=M[0].value,this.selectedprocessingUnits=this.processingUnitValue,this.toggleProcessingUnits();const K={store_id:String(r.store_id),customer_type_division_id:String(r.customer_type_division_id),shipping_address:r.shipping_address,status_division_id:r.status_division_id,remarks_1:r.remarks_1,remarks_2:r.remarks_2,reception_date:r.reception_date,mobile_number:r.mobile_number,reception_employee_id:String(r.reception_employee_id),settle_status_division_id:r.settle_status_division_id,incident_division_id:r.incident_division_id,send_sms_flg:r.send_sms_flg,processing_units:this.processingUnit.processing_units_id};if(this.commonForm.patchValue(K),this.selectedCustomerCode===this.DIVISION_CUSTOMER_CODE_MEMBER){this.selectedCustomer={type:Number(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_MEMBER),customer_type_code:this.selectedCustomerCode,id:String(r.id),fullName:r.fullName,fullNameKana:r.fullNameKana,address:r.address,tel:r.tel?r.tel:"",idConfirmationDate:"",isIdConfirmationRequired:!0,identification_document_confirmation_date:""};const g={member_id:String(r.member_id)};this.memberForm.patchValue(g);let U=this.members.find(J=>J.id===r.member_id);this.onMemberNameSuggestDataSelected(U)}else if(this.selectedCustomerCode===this.DIVISION_CUSTOMER_CODE_CLIENT){this.selectedCustomer={type:Number(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_CLIENT),customer_type_code:this.selectedCustomerCode,id:String(r.id),fullName:r.fullName,fullNameKana:r.fullNameKana,address:r.address,tel:r.tel?r.tel:"",idConfirmationDate:"",isIdConfirmationRequired:!0,identification_document_confirmation_date:""};const g={client_id:String(r.client_id)};this.clientForm.patchValue(g);let U=this.clients.find(J=>J.id===r.client_id);this.onClientNameSuggestDataSelected(U)}else this.generalForm.patchValue({last_name:r.last_name,first_name:r.first_name,last_name_kana:r.last_name_kana,first_name_kana:r.first_name_kana,tel:r.tel,identification_document_confirmation_date:r.identification_document_confirmation_date,shipping_address:r.shipping_address}),this.selectedCustomer={type:Number(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_CLIENT),customer_type_code:this.selectedCustomerCode,id:String(r.id),fullName:this.generalFc.last_name.value+" "+this.generalFc.first_name.value,fullNameKana:this.generalFc.last_name_kana.value+""+this.generalFc.first_name_kana.value,address:this.generalFc.shipping_address.value?this.generalFc.shipping_address.value:"",tel:this.generalFc.tel.value?this.generalFc.tel.value:"",identification_document_confirmation_date:this.generalFc.identification_document_confirmation_date.value?this.generalFc.identification_document_confirmation_date.value:"",idConfirmationDate:"",isIdConfirmationRequired:!0};1==r.send_sms_flg?(this.smsIsChecked=!0,this.selectedSMS=1):(this.smsIsChecked=!1,this.selectedSMS=0),!1===this.rentalItemStatus?this.subscription.add(this.getEmployeeByIdFcRental.get_rental_employee_id.valueChanges.subscribe(g=>{null==g||""===g||this.getEmployeeByIdRental(g)})):(this.subscription.add(this.getEmployeeByIdFcRental.get_rental_employee_id.valueChanges.subscribe(g=>{null==g||""===g||this.getEmployeeByIdRental(g)})),this.subscription.add(this.getEmployeeByIdFcReturn.get_return_employee_id.valueChanges.subscribe(g=>{null==g||""===g||this.getEmployeeByIdReturn(g)}))),this.rental_employee&&this.getEmployeeByIdRental(String(this.rental_employee)),this.return_employee&&this.getEmployeeByIdReturn(String(this.return_employee))}))}setStatusDivisions(t,i,r){switch(r.division_status_code){case t.STATUS_CODE.ACCEPTED:this.statusDivisions=i.filter(o=>String(o.text)===t.STATUS.CANCELLED||String(o.text)===t.STATUS.TICKET_ISSUED);break;case t.STATUS_CODE.TICKET_ISSUED:this.statusDivisions=i.filter(o=>String(o.text)===t.STATUS.ACCEPTED||String(o.text)===t.STATUS.READY_FOR_RENTAL||String(o.text)===t.STATUS.CANCELLED);break;case this.rsConst.STATUS_CODE.READY_FOR_RENTAL:this.statusDivisions=i.filter(o=>String(o.text)===t.STATUS.PARTIALLY_RENTED||String(o.text)===t.STATUS.ALL_RENTED||String(o.text)===t.STATUS.CANCELLED);break;case this.rsConst.STATUS_CODE.PARTIALLY_RENTED:case this.rsConst.STATUS_CODE.ALL_RENTED:this.statusDivisions=i.filter(o=>String(o.text)===t.STATUS.ALL_RENTED);break;case this.rsConst.STATUS_CODE.PARTIALLY_RETURNED:this.statusDivisions=i.filter(o=>String(o.text)===t.STATUS.PARTIALLY_RETURNED);break;case this.rsConst.STATUS_CODE.PARTIALLY_OVERDUE:this.statusDivisions=i.filter(o=>String(o.text)===t.STATUS.PARTIALLY_OVERDUE);break;case this.rsConst.STATUS_CODE.ALL_OVERDUE:this.statusDivisions=i.filter(o=>String(o.text)===t.STATUS.ALL_OVERDUE);break;case this.rsConst.STATUS_CODE.ALL_RETURNED:this.statusDivisions=i.filter(o=>String(o.text)===t.STATUS.ALL_RETURNED);break;case this.rsConst.STATUS_CODE.CANCELLED:this.statusDivisions=i.filter(o=>String(o.text)===t.STATUS.CANCELLED)}this.statusDivisions=[{value:r.status_division_id,text:r.division_status_value},...this.statusDivisions]}onMemberNameSuggestDataSelected(t){if(void 0===t)return void(this.selectedCustomer={type:Number(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_CLIENT),customer_type_code:this.selectedCustomerCode,id:"",fullName:"",fullNameKana:"",address:"",tel:"",idConfirmationDate:"",isIdConfirmationRequired:!0,identification_document_confirmation_date:""});const i=t.last_name+" "+t.first_name;let r="";t.last_name_kana?r=t.first_name_kana?t.last_name_kana+" "+t.first_name_kana:t.last_name_kana:t.first_name_kana&&(r=t.first_name_kana);const p=(t.province?t.province:"")+(t.locality?t.locality:"")+(t.street_address?t.street_address:"")+(t.other_address?t.other_address:""),m=new Date,c=t.identification_document_confirmation_date?new Date(t.identification_document_confirmation_date).toLocaleDateString():"",h=""===c||new Date(c)<=new Date(m.getFullYear()-1,m.getMonth(),m.getDate());this.selectedMember=t,this.selectedCustomer={type:Number(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_MEMBER),customer_type_code:this.selectedCustomerCode,id:String(t.id),fullName:i,fullNameKana:r,address:p,tel:t.tel?t.tel:"",identification_document_confirmation_date:"",idConfirmationDate:""===c?"\u672a\u78ba\u8a8d":c,isIdConfirmationRequired:h},this.idConfirmationDate=!!h,this.memberCtrls.member_id.patchValue(String(t.id))}onClientNameSuggestDataSelected(t){if(void 0===t)return void(this.selectedCustomer={type:Number(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_CLIENT),customer_type_code:this.selectedCustomerCode,id:"",fullName:"",fullNameKana:"",address:"",tel:"",idConfirmationDate:"",isIdConfirmationRequired:!0,identification_document_confirmation_date:""});const _=(t.province?t.province:"")+(t.locality?t.locality:"")+(t.street_address?t.street_address:"")+(t.other_address?t.other_address:"");new Date,this.selectedCustomer={type:Number(this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_CLIENT),customer_type_code:this.selectedCustomerCode,id:String(t.id),fullName:t.name,fullNameKana:t.name_kana,address:_,tel:t.tel?t.tel:"",idConfirmationDate:"",isIdConfirmationRequired:!0,identification_document_confirmation_date:""},this.clientCtrls.client_id.patchValue(String(t.id))}getMemberFormNameSuggests(){let t=this.rentalSlipFc.customerTypeGroup.controls.full_name.value;null===t&&(t="");const[i,...r]=t.split(/\s|\u3000/),o=r.join(" ");return{observable:this.memberService.getAll({last_name:i,first_name:o}),valueTargetColumn:"id",textTargetColumn:"last_name",textAttachColumn:"first_name"}}getClientFormNameSuggests(){return{observable:this.clientService.getAll({name:this.rentalSlipFc.customerTypeGroup.controls.client_name.value}),valueTargetColumn:"id",textTargetColumn:"name"}}onClickReset(){window.location.reload()}handleClickCancel(){this.commonForm.pristine?this.router.navigateByUrl(this.detailPagePath):this.modalService.setModal(this.cancelModalTitle,C.yR.BODY.CANCEL,"warning",C.yR.BUTTON_TITLE.EXECUTION,C.yR.BUTTON_TITLE.CANCEL)}handleClickSaveButton(){this.commonForm.markAsPristine(),this.clientForm.markAsPristine(),this.memberForm.markAsPristine(),this.errorHasOccurred=!1,this.common.loading=!0;const t=this.commonForm.value,i=this.rentalAddForms.value.forms.map(_=>(_.rental_item_count=1,_.delinquency_flag=0,_.scheduled_rental_date=new Date(String(_.scheduledDateGroup.scheduled_rental_date)).toLocaleString(),_.scheduled_return_date=new Date(String(_.scheduledDateGroup.scheduled_return_date)).toLocaleString(),_.settle_status_division_id=String(t.settle_status_division_id),this.rental_employee&&(_.rental_employee_id=this.rental_employee),this.return_employee&&(_.return_employee_id=this.return_employee),_));if(!this.employeeSuggests.some(_=>Number(_.value)===Number(t.reception_employee_id)))return this.commonFc.reception_employee_id.setValue(""),void(this.common.loading=!1);if(!this.storeSuggests.some(_=>Number(_.value)===Number(t.store_id)))return this.commonFc.store_id.setValue(""),void(this.common.loading=!1);if(null==t.reception_date||""===t.reception_date)return this.commonFc.reception_date.setValue(""),void(this.common.loading=!1);let s={reception_date:new Date(String(t.reception_date)).toLocaleString(),remarks_1:t.remarks_1,remarks_2:t.remarks_2,customer_type_division_id:t.customer_type_division_id,reception_employee_id:t.reception_employee_id,status_division_id:this.statusDivisionId,store_id:t.store_id,settle_status_division_id:String(t.settle_status_division_id),incident_division_id:String(t.incident_division_id),processing_units:String(this.processingUnitsPostValue),mobile_number:String(this.commonFc.mobile_number.value),send_sms_flg:String(this.selectedSMS)};switch(this.selectedCustomerCode){case String(this.rsConst.CUSTOMER_TYPE_DIVISION.CODE.CLIENT):s.client_id=String(this.clientCtrls.client_id.value),s.shipping_address=String(this.clientCtrls.shipping_address.value);break;case String(this.rsConst.CUSTOMER_TYPE_DIVISION.CODE.MEMBER):s.member_id=String(this.memberCtrls.member_id.value),s.shipping_address=String(this.memberCtrls.shipping_address.value);break;case String(this.rsConst.CUSTOMER_TYPE_DIVISION.CODE.GENERAL):s.first_name=String(this.generalFc.first_name.value),s.last_name=String(this.generalFc.last_name.value),s.first_name_kana=String(this.generalFc.first_name_kana.value),s.last_name_kana=String(this.generalFc.last_name_kana.value),s.shipping_address=String(this.generalFc.shipping_address.value),s.tel=String(this.generalFc.tel.value),s.identification_document_confirmation_date=new Date(String(this.generalFc.identification_document_confirmation_date.value)).toLocaleString()}if(i.length>0)for(let _ in i)this.updateRentalItem(i[_]);this.subscription.add(this.rsService.update(this.selectedId,s).pipe((0,L.x)(()=>this.common.loading=!1),(0,k.K)(_=>(0,b.of)(_))).subscribe(_=>{if(!(_ instanceof R.UA))return this.flashMessageService.setFlashMessage(_.message,"success",15e3),this.errorHasOccurred?(this.commonForm.markAsDirty(),this.memberForm.markAsDirty(),void this.clientForm.markAsDirty()):void this.router.navigateByUrl(this.detailPagePath);this.handleError(_.status,this.errorModalTitle,_.message,this.detailPagePath)}))}updateRentalItem(t){const i={rental_slip_id:this.selectedId,late_return_reported:0,collection_division_id:t.collection_division_id,delinquency_flag:t.delinquency_flag,delivery_division_id:t.delivery_division_id,remarks_1:t.remarks_1,remarks_2:t.remarks_2,rental_date:t.rental_date?t.rental_date:"",rental_fee:t.rental_fee,rental_item_count:t.rental_item_count,rental_product_id:t.rental_product_id,rental_product_name:t.rental_product_name,scheduled_rental_date:t.scheduled_rental_date,scheduled_return_date:t.scheduled_return_date,selling_price:t.selling_price,settle_status_division_id:t.settle_status_division_id};this.subscription.add("id"in t?this.rentalService.update(t.id,i).pipe((0,L.x)(()=>this.common.loading=!1),(0,k.K)(r=>(0,b.of)(r))).subscribe(r=>{r instanceof R.UA&&this.handleError(r.status,this.errorModalTitle,`${r.message}\n\n${r.error.message}`,this.detailPagePath)}):this.rentalService.add(i).pipe((0,L.x)(()=>this.common.loading=!1),(0,k.K)(r=>(0,b.of)(r))).subscribe(r=>{r instanceof R.UA&&this.handleError(r.status,this.errorModalTitle,`${r.error.message}\n\n${r.message}`)}))}handleError(t,i,r,o){this.errorHasOccurred=!0,this.errorService.setError({status:t,title:i,message:r,redirectPath:o})}toggleProcessingUnits(){this.selectedprocessingUnits===this.ONEBYONE?(this.showOnebyoneSuggest=!this.showOnebyoneSuggest,this.showBulkSuggest=!1,this.showOnebyoneSuggest=!0,this.processingUnitsPostValue=1):(this.showBulkSuggest=!this.showBulkSuggest,this.showBulkSuggest=!0,this.showOnebyoneSuggest=!1,this.processingUnitsPostValue=0)}onProcessingUnitsRadioChange(t){if(this.selectedprocessingUnits=t.target.value,this.toggleProcessingUnits(),!1===this.showOnebyoneSuggest){this.rentalDateFormsControls.bulkScheduledDateGroup.value.bulk_scheduled_rental_date=new Date(String(this.initialDate.bulkScheduledDateGroup?.bulk_scheduled_rental_date)).toLocaleString(),this.rentalDateFormsControls.bulkScheduledDateGroup.value.bulk_scheduled_return_date=new Date(String(this.initialDate.bulkScheduledDateGroup?.bulk_scheduled_return_date)).toLocaleString();let r=this.getBulkScheduledRentalDateControl(),o=this.getBulkScheduledReturnDateControl();for(let s in this.rentalAddFormArray.controls)this.rentalAddFormArray.controls[s].value.scheduledDateGroup.scheduled_rental_date=new Date(String(r.value)).toISOString(),this.rentalAddFormArray.controls[s].get("scheduledDateGroup")?.get("scheduled_rental_date")?.setValue(new Date(String(r.value)).toISOString()),this.rentalAddFormArray.controls[s].value.scheduledDateGroup.scheduled_return_date=new Date(String(o.value)).toISOString(),this.rentalAddFormArray.controls[s].get("scheduledDateGroup")?.get("scheduled_return_date")?.setValue(new Date(String(o.value)).toISOString())}}setRentalAddForm(t){let i={scheduled_rental_date:new Date(t.scheduled_rental_date).toISOString(),scheduled_return_date:new Date(t.scheduled_return_date).toISOString()};if(!1===this.showOnebyoneSuggest){let c=this.getBulkScheduledRentalDateControl(),h=this.getBulkScheduledReturnDateControl();i={scheduled_rental_date:new Date(String(c.value)).toISOString(),scheduled_return_date:new Date(String(h.value)).toISOString()}}const r={id:t.id,rental_product_id:t.rental_product_id,rental_product_name:t.rental_product_name,selling_price:t.rental_product.selling_price,division_status_value:`${t.division_status_value}`,delivery_division_id:this.DELIVERY_REQUEST_DIVISION_ID_NO_DELIVERY,collection_division_id:this.COLLECTION_REQUEST_DIVISION_ID_NO_COLLECTION,rental_item_count:1,delinquency_flag:0,rental_fee:t.rental_fee,rental_date:(new Date).toISOString(),scheduledDateGroup:i,division_sales_tax_code:t.rental_product.division_sales_tax_code,division_sales_tax_name:t.rental_product.division_sales_tax_name,division_sales_tax_value:t.rental_product.division_sales_tax_value,division_sales_fraction_code:t.rental_product.division_sales_fraction_code,delivery_charge_flag:t.rental_product.delivery_charge_flag},o=this.formService.createRentalEditAddForm(this.fb),s=o.get("scheduledDateGroup.scheduled_rental_date")?.valueChanges,_=o.get("scheduledDateGroup.scheduled_return_date")?.valueChanges;s&&_&&this.subscription.add((0,Ie.a)([s,_]).subscribe(([c,h])=>{o.patchValue({rental_fee:this.calculateRentalFee(t,c,h)})}));const d=(new Date).toISOString(),p=(new Date).toISOString(),m=this.calculateRentalFee(t,d,p);m instanceof Error?alert(m.message):(r.rental_fee=m,o.patchValue(r),this.rentalAddFormArray.push(o))}addRentalAddForm(t){let i={scheduled_rental_date:(new Date).toISOString(),scheduled_return_date:(new Date).toISOString()};if(!1===this.showOnebyoneSuggest){let c=this.getBulkScheduledRentalDateControl(),h=this.getBulkScheduledReturnDateControl();i={scheduled_rental_date:new Date(String(c.value)).toISOString(),scheduled_return_date:new Date(String(h.value)).toISOString()}}const r={rental_product_id:t.id,rental_product_name:t.name,selling_price:t.selling_price,division_status_value:`${t.division_status_value}`,delivery_division_id:this.DELIVERY_REQUEST_DIVISION_ID_NO_DELIVERY,collection_division_id:this.COLLECTION_REQUEST_DIVISION_ID_NO_COLLECTION,rental_item_count:1,delinquency_flag:0,rental_fee:t.selling_price,rental_date:(new Date).toISOString(),scheduledDateGroup:i},o=this.formService.createRentalAddForm(this.fb),s=o.get("scheduledDateGroup.scheduled_rental_date")?.valueChanges,_=o.get("scheduledDateGroup.scheduled_return_date")?.valueChanges;s&&_&&this.subscription.add((0,Ie.a)([s,_]).subscribe(([c,h])=>{o.patchValue({rental_fee:this.calculateRentalFee(t,c,h)})}));const d=(new Date).toISOString(),p=(new Date).toISOString(),m=this.calculateRentalFee(t,d,p);m instanceof Error?alert(m.message):(r.rental_fee=m,o.patchValue(r),this.rentalAddFormArray.push(o))}calculateRentalFee(t,i,r){const o=t.selling_price;if(t.delivery_charge_flag)return o;const _=Number(t.division_sales_tax_code),d=(0,I.zn)(_),p=Number(t.division_sales_fraction_code),m=(0,I.fy)(p),c=(0,I.e_)(o,d.taxRate,d.isTaxIncluded,m);if(c instanceof Error)throw c;const h=new Date(String(i)).setHours(0,0,0,0),f=new Date(h),T=new Date(String(r)).setHours(0,0,0,0),y=new Date(T),O=(0,I.Sz)(f,y);let M=0;return M=d.isTaxIncluded?o:c.priceWithoutTax+c.taxAmount,(0,I._k)(0===O?M:M+.7*M*O)}onProductSuggestIdChange(t){}onProductSuggestDataSelected(t){this.reservationStatusBody=[],this.subscription.add(this.getSelectedRentalProductsAndReservationStatus(t).subscribe(i=>{i&&this.createReservationStatusList(i.rentalProducts,i.rentals)}))}getSelectedRentalProductsAndReservationStatus(t){const i=new Date(String(this.displayStartDateFc.display_start_date.value)),r=new Date(String(this.displayStartDateFc.display_start_date.value));r.setDate(i.getDate()+this.RESERVATION_STATUS_PERIOD),this.common.loading=!0;const o={product_barcode:t.product_barcode,data_permission_division_id:this.RENTAL_PRODUCT_DATA_PERMISSION_DIVISION_ID_PUBLIC};this.selectedRentalProductAcquisitionType===this.RENTAL_PRODUCT_ACQUISITION_RESERVABLE&&(o.status_division_id=this.RENTAL_PRODUCT_STATUS_DIVISION_ID_RENTABLE);let s=i.toLocaleDateString()+" 00:00:00",_=r.toLocaleDateString()+" 00:00:00";const d={rental_product_id:t.id,schedulfrom_created_ated_rental_date:s,to_created_at:_};return(0,te.D)([this.rentalProductService.getAll({...o}),this.rentalService.getAll({...d})]).pipe((0,k.K)(p=>(p instanceof R.UA&&this.handleError(p.status,p.error?p.error.title:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",p.error?p.error.message:p.message),(0,b.of)(null))),(0,ze.U)(p=>(this.common.loading=!1,p?{rentalProducts:p[0].data,rentals:p[1].data}:null)),(0,L.x)(()=>this.common.loading=!1))}createReservationStatusList(t,i){const r=new Date(String(this.displayStartDateFc.display_start_date.value)),o=We(t,i);this.reservationStatusHeader=$e(r,this.RESERVATION_STATUS_PERIOD),Xe(o,t,r,this.RESERVATION_STATUS_PERIOD).forEach(_=>{this.reservationStatusBody.push(_)})}getRentalProductsByCategory(t){let i;this.common.loading=!0,i=this.rentalProductService.getAll("large"===this.currentCategoryLevel?{large_category_id:t,data_permission_division_id:this.RENTAL_PRODUCT_DATA_PERMISSION_DIVISION_ID_PUBLIC}:"medium"===this.currentCategoryLevel?{medium_category_id:t,data_permission_division_id:this.RENTAL_PRODUCT_DATA_PERMISSION_DIVISION_ID_PUBLIC}:{small_category_id:t,data_permission_division_id:this.RENTAL_PRODUCT_DATA_PERMISSION_DIVISION_ID_PUBLIC}),this.subscription.add(i.pipe((0,k.K)(r=>(0,b.of)(r instanceof R.UA?r:null)),(0,L.x)(()=>this.common.loading=!1)).subscribe(r=>{if(r instanceof R.UA)return this.handleError(r.status,r.error?r.error.title:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",r.error?r.error.message:r.message),void(this.common.loading=!1);null!==r?r.totalItems>0?r.data.forEach(s=>{this.onProductSuggestDataSelected(s)}):alert("\u5546\u54c1\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f"):alert("\u5546\u54c1\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}))}drillDownMenu(t,i){if("large"===this.currentCategoryLevel){if(!i)return void this.getRentalProductsByCategory(t);this.isLargeCategory=!1,this.currentCategoryLevel="medium",this.currentCategoryData=this.mediumCategories.filter(r=>r.large_category_id===t)}else{if("medium"!==this.currentCategoryLevel)return void this.getRentalProductsByCategory(t);if(!i)return void this.getRentalProductsByCategory(t);this.isLargeCategory=!1,this.currentCategoryLevel="small",this.currentCategoryData=this.smallCategories.filter(r=>r.medium_category_id===t)}}drillUpMenu(){"large"!==this.currentCategoryLevel&&("medium"===this.currentCategoryLevel?(this.isLargeCategory=!0,this.currentCategoryLevel="large",this.currentCategoryData=this.largeCategories):"small"===this.currentCategoryLevel&&(this.isLargeCategory=!1,this.currentCategoryLevel="medium",this.currentCategoryData=this.mediumCategories))}setHasChildren(){const t=this.largeCategories.map(o=>(o.has_children=this.mediumCategories.filter(_=>_.large_category_id===o.id).length>0,o));this.largeCategories=t;const i=this.mediumCategories.map(o=>(o.has_children=this.smallCategories.filter(_=>_.medium_category_id===o.id).length>0,o));this.mediumCategories=i;const r=this.smallCategories.map(o=>(o.has_children=!1,o));this.smallCategories=r}getProductIdFormSuggests(){const t={id:this.productFc.id.value,data_permission_division_id:this.RENTAL_PRODUCT_DATA_PERMISSION_DIVISION_ID_PUBLIC};return this.selectedRentalProductAcquisitionType===this.RENTAL_PRODUCT_ACQUISITION_RESERVABLE&&(t.status_division_id=this.RENTAL_PRODUCT_STATUS_DIVISION_ID_RENTABLE),{observable:this.rentalProductService.getAll({...t}),valueTargetColumn:"id",textTargetColumn:"id",textAttachColumn:"name"}}onCheckboxChange(t,i){const o=t.target.checked;if(o&&"string"!=typeof i)this.addRentalAddForm(i);else if(!o&&"string"!=typeof i){let _,s=this.rentalAddFormArray.value;for(let d=0;d<s.length;d++)i.id===s[d].rental_product_id&&(_=d);(null!=_||null!=_)&&this.deleteSelectedRentalProduct(_)}}getDivisions(t,i){const r=t[i];return r.length<1&&this.handleError(400,this.errorModalTitle,C.yR.BODY.HAS_ERROR),[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...r]}_setDivisions(t){this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_MEMBER=this.dIService.getDivisionid(t,D.z.CUSTOMER_TYPE,A.CUSTOMER_TYPE_DIVISION.CODE.MEMBER),this.RENTAL_SLIP_INITIAL_CUSTOMER_TYPE_DIVISION_CLIENT=this.dIService.getDivisionid(t,D.z.CUSTOMER_TYPE,A.CUSTOMER_TYPE_DIVISION.CODE.CLIENT),this.RENTAL_PRODUCT_STATUS_DIVISION_ID_RENTABLE=this.dIService.getDivisionid(t,D.z.RENTAL_PRODUCT_STATUS,Y.q.STATUS_CODE.RENTABLE),this.RENTAL_PRODUCT_DATA_PERMISSION_DIVISION_ID_PUBLIC=this.dIService.getDivisionid(t,D.z.DATA_PERMISSION,_e.s.DATA_PERMISSION.CODE.PUBLIC),this.DELIVERY_REQUEST_DIVISION_ID_NO_DELIVERY=this.dIService.getDivisionid(t,D.z.DELIVERY_REQUEST,oe.L.DELIVERY_REQUEST.CODE.NO_DELIVERY),this.COLLECTION_REQUEST_DIVISION_ID_NO_COLLECTION=this.dIService.getDivisionid(t,D.z.COLLECTION_REQUEST,oe.L.COLLECTION_REQUEST.CODE.NO_COLLECTION),this.settleStatusDivisionOptions=this.getDivisions(t,D.z.SETTLE_STATUS),this.incidentDivisionOptions=this.getDivisions(t,D.z.INCIDENT),this.statusDivisionOptions=this.getDivisions(t,D.z.RENTAL_SLIP_STATUS),this.customerTypes=this.getDivisionSelectOption(t,D.z.CUSTOMER_TYPE),this.customerTypes_=this.getDivisions(t,D.z.CUSTOMER_TYPE)}getDivisionSelectOption(t,i){const r=t[i];return r.length<1&&this.handleError(400,this.errorModalTitle,C.yR.BODY.HAS_ERROR),[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...r]}simpleFormControlStateManager(t){return(t.touched||t.dirty)&&t.invalid}_setHiddenValue(){this._setStatusDivisionId(this.commonFc),this._setIncidentDivisionId(this.commonFc),this._setSettleStatusDivisionId(this.commonFc)}_setStatusDivisionId(t){const i=this.statusDivisionOptions.find(r=>r.text===this.rsConst.STATUS.ACCEPTED);t.status_division_id.patchValue(i?.value)}_setIncidentDivisionId(t){const i=this.incidentDivisionOptions.find(r=>r.text===this.rsConst.INCIDENT_DIVISION.VALUE.NO_INCIDENTS);t.incident_division_id.patchValue(i?.value)}_setSettleStatusDivisionId(t){const i=this.settleStatusDivisionOptions.find(r=>r.text===this.rsConst.SETTLE_STATUS_DIVISION.VALUE.UNSETTLED);t.settle_status_division_id.patchValue(i?.value)}generateStatusDivisions(t){return null==t||0===t[D.z.DELIVERY_REQUEST].length||0===t[D.z.COLLECTION_REQUEST].length?(this.handleError(400,this.errorModalTitle,C.yR.BODY.HAS_ERROR),!1):(this.deliveryDivisionOptions=t[D.z.DELIVERY_REQUEST],this.collectionDivisionOptions=t[D.z.COLLECTION_REQUEST],!0)}confirmedIdentityVerificationDocuments(){if(!confirm("\u672c\u4eba\u78ba\u8a8d\u66f8\u985e\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u304b\uff1f\n\u66f4\u65b0\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3053\u306e\u51e6\u7406\u306f\u53d6\u308a\u6d88\u305b\u307e\u305b\u3093\u3002"))return;let i;if(this.selectedCustomer.customer_type_code===this.DIVISION_CUSTOMER_CODE_MEMBER){{if(null==this.selectedMember||0===Object.keys(this.selectedMember).length)return void alert("\u304a\u5ba2\u69d8\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f");const r=(new Date).toLocaleString(),o={member_cd:this.selectedMember.member_cd,last_name:this.selectedMember.last_name,first_name:this.selectedMember.first_name,last_name_kana:this.selectedMember.last_name_kana,first_name_kana:this.selectedMember.first_name_kana,postal_code:this.selectedMember.postal_code,province:this.selectedMember.province,locality:this.selectedMember.locality,street_address:this.selectedMember.street_address,other_address:this.selectedMember.other_address,tel:this.selectedMember.tel,mail:this.selectedMember.mail,point:this.selectedMember.point,status_division_id:this.selectedMember.status_division_id,remarks_1:this.selectedMember.remarks_1,remarks_2:this.selectedMember.remarks_2,identification_document_confirmation_date:r};this.selectedMember.identification_document_confirmation_date=r,i=this.memberService.update(this.selectedMember.id,o)}this.updateCustomerData(i)}else alert("\u304a\u5ba2\u69d8\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f")}updateCustomerData(t){this.common.loading=!0,this.subscription.add(t.pipe((0,k.K)(i=>(0,b.of)(i)),(0,L.x)(()=>{this.common.loading=!1})).subscribe(i=>{if(i instanceof R.UA)return this.handleError(i.status,i.error?i.error.title:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",i.error?i.error.message:i.message),void(this.common.loading=!1);this.selectedCustomer.customer_type_code===this.DIVISION_CUSTOMER_CODE_MEMBER?this.onMemberNameSuggestDataSelected(this.selectedMember):this.selectedCustomer.customer_type_code===this.DIVISION_CUSTOMER_CODE_CLIENT&&this.onClientNameSuggestDataSelected(this.selectedClient),this.flashMessageService.setFlashMessage(i.message,"success",15e3)}))}onCheckId(t){const i=(new Date).toLocaleString();t.target.checked?(this.identificationIsChecked=!0,this.idCheckedDateTime=1,this.generalFc.identification_document_confirmation_date.setValue(i)):(this.identificationIsChecked=!1,this.idCheckedDateTime=0,this.generalFc.identification_document_confirmation_date.setValue(""))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(Fe),e.Y36(et.Y),e.Y36(S.Z),e.Y36(V.F0),e.Y36(tt.d),e.Y36(xe.y),e.Y36(Se.n),e.Y36(Ce.G),e.Y36(Te.E),e.Y36(N.T),e.Y36(ue.m),e.Y36(be.P),e.Y36(V.gz),e.Y36(P.v),e.Y36(nt.T),e.Y36(it.G),e.Y36(rt.i),e.Y36(Oe.h),e.Y36(de.b),e.Y36(at.J))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit"]],decls:161,vars:146,consts:[[3,"breadcrumbList"],[1,"mb-8"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"cursor-pointer",3,"click"],[1,"width-limit-break","border-t","border-gray-400"],[3,"formGroup","ngSubmit"],[1,"mt-8","pt-8","pb-8","px-6","bg-white","border","border-gray-300"],[1,"px-6","pb-1","flex","justify-between","items-end"],[1,"items-end"],[1,"flex","gap-6","mt-6"],[1,"w-1/3"],["nameAttrValue","reception_employee_id","idAttrValue","reception-employee-id","placeholder","\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",3,"formCtrl","suggests","invalid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["message","",4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-1/6"],["nameAttrValue","reception_date","idAttrValue","reception-date",3,"formCtrl","invalid"],["nameAttrValue","store_id","idAttrValue","store-id","placeholder","\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",3,"formCtrl","suggests","invalid"],[4,"ngTemplateOutlet"],[1,"flex","gap-6","mt-6","flex","justify-between"],["nameAttrValue","customer_type_division_id","idAttrValue","customer-type-division-id",3,"options","formCtrl","invalid","change"],[1,"flex","w-1/5","pt-9"],[1,"block","relative","pl-6","cursor-pointer"],["type","checkbox","nameAttrValue","send_sms_flg","idAttrValue","send-sms-flg","name","send_sms_flg",1,"w-4","h-4","cursor-pointer","absolute","top-0","bottom-0","left-0","m-auto",3,"checked","change"],[1,"mt-4","px-6","flex","pt-5","w-1/3"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"w-1/2"],["nameAttrValue","remarks_1","idAttrValue","remarks-1",3,"formCtrl","invalid"],["nameAttrValue","remarks_2","idAttrValue","remarks-2",3,"formCtrl","invalid"],[1,"mt-4","mx-4","flex","gap-6"],[1,"w-full","flex",3,"formGroup"],[1,"bg-rose-200","mb-24","shadow","border","border-gray-300","border-t-0"],[1,"px-6","pt-8","text-rose-700"],[1,"flex","gap-6","pt-4","pb-8","px-6"],["nameAttrValue","settle_status_division_id","idAttrValue","settle-status-division-id",3,"formCtrl","options","invalid"],["nameAttrValue","incident_division_id","idAttrValue","incident-division-id",3,"formCtrl","options","invalid"],[1,"mt-3","py-6","bg-white","shadow","border","border-gray-300","rounded-b-md"],[1,"mt-6","px-6"],[1,"px-6","flex","justify-between","items-end"],["nameAttrValue","display_start_date","idAttrValue","display-start-date",3,"formCtrl","invalid"],[1,"mt-2"],[1,"mt-6","px-6","flex","justify-between"],[1,"flex","gap-2"],[3,"buttonDisabled","click"],[1,"flex","justify-end","gap-8","items-end"],[1,"flex","gap-6"],[1,"flex","gap-1"],[1,"mt-2","px-6"],[1,"my-4","px-6","flex","transition-all","duration-500","ease-linear",3,"ngClass"],[1,"w-2/3"],["nameAttrValue","product_name","idAttrValue","product-name","targetOptionData","text",3,"fc","apiInput","invalid","buttonDisabled","idValueChanges","selectedData"],[1,"flex","items-center","gap-2"],[1,"text-sm"],["nameAttrValue","product_id","idAttrValue","product-id","targetOptionData","text",3,"fc","apiInput","invalid","buttonDisabled","idValueChanges","selectedData"],[1,"mt-2","mx-6","pb-3","flex","relative","overflow-x-hidden"],[1,"absolute","top-0","w-[300px]","min-w-[300px]","transition-transform","duration-500","ease-in-out","transform","border","border-gray-200","shadow-md","rounded-b-md",3,"ngClass"],[1,"sticky","top-0","w-[300px]","min-w-[300px]","flex","justify-between","bg-iron-blue-400","px-4","py-2","items-center"],["icon","arrow-left-s-line",1,"w-6","h-6x",3,"ngClass","click"],["icon","arrow-left-s-line",1,"w-6","h-6x","opacity-0","cursor-none"],[1,"absolute","top-[40px]","max-h-[453px]","w-[300px]","min-w-[300px]","overflow-y-auto","border","border-gray-200","shadow-md","rounded-b-md"],[1,"transition-all","duration-500","ease-in-out",3,"ngClass"],[1,"overflow-x-auto","transition-all","duration-500","ease-in-out","mx-1","shadow-md","rounded-b-md","border-t","border-slate-100","relative"],[1,"rental-reservation-table"],["client",""],["member",""],["general",""],["common",""],["labels",""],["errors",""],["fullWidthKatakana",""],["eitherRequiredErrors",""],["telAndMobileNumber",""],["dateErrors",""],["message",""],["type","radio",1,"w-4","h-4","cursor-pointer","absolute","top-0","bottom-0","left-1","m-auto",3,"checked","id","name","value","change"],[4,"ngIf","ngIfThen"],[1,"mt-6","flex","gap-4"],[1,"w-[59%]"],[4,"ngIf","ngIfElse"],["noCustomerInfoSelected",""],[1,"mt-1","p-2","text-gray-800","border","border-gray-300","rounded-md","bg-blue-100"],["idConfirmed",""],[1,"text-danger","font-semibold"],[1,"mt-1","p-2","text-gray-500","border","border-gray-300","rounded-md","bg-blue-100"],["class","1/4 mt-7",4,"ngIf"],[1,"1/4","mt-7"],[3,"click"],[1,"flex","gap-4"],[1,"w-3/6"],["nameAttrValue","shipping_address","idAttrValue","shipping-address",3,"formCtrl","invalid"],[1,"w-1/4"],["nameAttrValue","identification_document_confirmation_date","idAttrValue","identification-document-confirmation-date",3,"formCtrl","invalid"],[1,"flex","gap-4","mt-6"],[1,"w-4/6"],[1,"w-2/6"],["nameAttrValue","mobile_number","idAttrValue","mobile-number",3,"formCtrl","invalid"],[1,"text-primary-light","text-sm"],[3,"formGroup"],["formGroupName","bulkScheduledDateGroup",1,"mr-2","ml-2"],["nameAttrValue","bulk_scheduled_rental_date","idAttrValue","bulk-scheduled-rental-date",3,"formCtrl","invalid"],["nameAttrValue","bulk_scheduled_return_date","idAttrValue","bulk-scheduled-return-date",3,"formCtrl","invalid"],[1,"w-1/4","mr-2","ml-2"],["nameAttrValue","rental_employee_id","idAttrValue","rental-employee-id",3,"formCtrl","options","invalid"],["nameAttrValue","get_rental_employee_id","idAttrValue","get-rental-employee-id",3,"formCtrl","invalid"],["nameAttrValue","return_employee_id","idAttrValue","return-employee-id",3,"formCtrl","options","invalid"],["nameAttrValue","get_return_employee_id","idAttrValue","get-return-employee-id",3,"formCtrl","invalid"],[1,"width-limit-break","bg-primary-light","flex","flex-row","justify-center","bottom-[40px]","left-0","right-0","p-2","fixed","gap-8","edit_save_buttom"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",3,"buttonDisabled"],[1,"w-full","border-collapse"],[1,"border","border-slate-200","text-sm","font-normal","px-2","py-1"],[1,"border","border-slate-200","text-left","text-sm","font-normal","px-2","py-1","w-[300px]"],[1,"border","border-slate-200","text-sm","font-normal","px-2","py-1","w-[140px]",3,"hidden"],[1,"border","border-slate-200","text-sm","font-normal","px-2","py-1","w-[140px]"],["formArrayName","forms"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],[1,"border","border-slate-200","text-sm","text-center","px-2","py-1"],[1,"border","border-slate-200","text-sm","px-2","py-1"],[1,"border","border-slate-200","text-sm","text-center","px-2","py-1",3,"hidden"],["formGroupName","scheduledDateGroup"],["nameAttrValue","scheduled_rental_date","idAttrValue","scheduled-rental-date",3,"formCtrl","invalid"],["nameAttrValue","delivery_division_id","idAttrValue","delivery-division-id",3,"formCtrl","options","invalid"],["nameAttrValue","collection_division_id","idAttrValue","collection-division-id",3,"formCtrl","options","invalid"],[1,"flex","justify-center"],["icon","delete-bin-line","appendClassForIcon","cursor-pointer fill-danger group-hover:fill-danger-hover",1,"h-6","w-6",3,"click"],["nameAttrValue","scheduled_return_date","idAttrValue","scheduled-return-date",3,"formCtrl","invalid"],[1,"block","relative","pl-6","cursor-pointer",3,"ngClass"],["type","radio",1,"w-4","h-4","absolute","top-0","bottom-0","left-0","m-auto","cursor-pointer",3,"checked","id","name","value","disabled","ngClass","change"],[1,"flex","justify-between","px-4","py-2","border-t","border-iron-blue-300","cursor-pointer","bg-white","even:bg-iron-blue-100","hover:bg-iron-blue-200","hover:transition-all","duration-300",3,"ngClass","click"],["icon","arrow-right-s-line","class","w-6 h-6",4,"ngIf"],["icon","arrow-right-s-line",1,"w-6","h-6"],[1,"rental-reservation-table-header"],[3,"ngClass"],[1,"flex"],[1,"rental-reservation-table-body"],["normalColumn",""],["type","checkbox",1,"w-4","h-4","absolute","top-0","bottom-0","left-0","right-0","m-auto","cursor-pointer",3,"change"],[1,"w-2/3","mt-6"],["nameAttrValue","client_id","idAttrValue","client-id","placeholder","\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",3,"formCtrl","suggests","invalid"],["nameAttrValue","member_id","idAttrValue","member-id","placeholder","\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",3,"formCtrl","suggests","invalid"],["nameAttrValue","last_name","idAttrValue","last-name",3,"formCtrl","invalid"],["nameAttrValue","first_name","idAttrValue","first-name",3,"formCtrl","invalid"],["nameAttrValue","tel","idAttrValue","tel",3,"formCtrl","invalid"],["nameAttrValue","last_name_kana","idAttrValue","last-name-kana",3,"formCtrl","invalid"],["nameAttrValue","first_name_kana","idAttrValue","first-name-kana",3,"formCtrl","invalid"],[1,""],["nameAttrValue","status_division_id","idAttrValue","status-division-id",3,"formCtrl","options","invalid"],["class","px-3 py-0.5 text-xs text-white bg-warning-dark rounded-full",4,"ngIf"],[1,"px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],["class","mt-1 pl-1 text-sm text-red",4,"ngIf"],[1,"mt-1","pl-1","text-sm","text-red"]],template:function(t,i){if(1&t&&(e._UZ(0,"app-breadcrumb-org",0),e.TgZ(1,"main",1)(2,"h1",2),e._uU(3,"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u7de8\u96c6"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4),e.NdJ("click",function(){return i.handleClickCancel()}),e._UZ(6,"app-cancel-link-org"),e.qZA(),e.TgZ(7,"div")(8,"app-last-updater-org"),e._uU(9),e.qZA()()(),e._UZ(10,"hr",5),e.TgZ(11,"form",6),e.NdJ("ngSubmit",function(){return i.handleClickSaveButton()}),e.TgZ(12,"div",7)(13,"div",8)(14,"h2",9),e._uU(15,"\u30ec\u30f3\u30bf\u30eb\u53d7\u4ed8\u7968\u60c5\u5831\u5165\u529b"),e.qZA()(),e.TgZ(16,"div",10)(17,"div",11)(18,"app-select-suggest-container",12),e.YNc(19,Pl,1,0,"ng-container",13),e.YNc(20,wl,1,0,"ng-container",14),e.qZA()(),e.TgZ(21,"div",15)(22,"app-date-term",16),e.YNc(23,Gl,1,0,"ng-container",13),e.YNc(24,Jl,1,0,"ng-container",14),e.qZA()(),e.TgZ(25,"div",11)(26,"app-select-suggest-container",17),e.YNc(27,Yl,1,0,"ng-container",13),e.YNc(28,Kl,1,0,"ng-container",14),e.qZA()(),e.TgZ(29,"div",11),e.YNc(30,Hl,1,0,"ng-container",18),e.qZA()(),e.TgZ(31,"div",19)(32,"div",11)(33,"app-select-container",20),e.NdJ("change",function(){return i.resetCustomerInfo()}),e.YNc(34,jl,1,0,"ng-container",13),e.YNc(35,zl,1,0,"ng-container",14),e.qZA()(),e.TgZ(36,"div",21),e.ynx(37),e.TgZ(38,"div")(39,"label",22)(40,"input",23),e.NdJ("change",function(o){return i.onCheckSmsSend(o)}),e.qZA(),e._uU(41," SMS\u9001\u4fe1\u3059\u308b "),e.qZA()(),e.BQk(),e.qZA(),e.TgZ(42,"div",24),e.YNc(43,Wl,5,5,"ng-container",25),e.qZA()(),e.YNc(44,t_,4,6,"ng-container",26),e.YNc(45,T_,4,2,"ng-container",26),e.TgZ(46,"div",10)(47,"div",27)(48,"app-textarea-container",28),e.YNc(49,v_,1,0,"ng-container",13),e.YNc(50,E_,1,0,"ng-container",14),e.qZA()(),e.TgZ(51,"div",27)(52,"app-textarea-container",29),e.YNc(53,D_,1,0,"ng-container",13),e.YNc(54,x_,1,0,"ng-container",14),e.qZA()()(),e.YNc(55,R_,12,11,"ng-container",26),e.TgZ(56,"div",30)(57,"div",27),e.YNc(58,k_,17,5,"ng-container",26),e.qZA()(),e.TgZ(59,"div",30)(60,"form",31),e.YNc(61,B_,9,19,"ng-container",26),e.YNc(62,H_,17,38,"ng-container",26),e.qZA()()(),e.TgZ(63,"div",32)(64,"div",33)(65,"p"),e._uU(66," \u30fb\u7cbe\u7b97\u30b9\u30c6\u30fc\u30bf\u30b9\u306fPOS\u304b\u3089\u9023\u643a\u3055\u308c\u308b\u30c7\u30fc\u30bf\u306e\u305f\u3081\u3001\u901a\u5e38\u306f\u64cd\u4f5c\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002 "),e.qZA(),e.TgZ(67,"p"),e._uU(68," \u30fb\u30a4\u30f3\u30b7\u30c7\u30f3\u30c8\u30b9\u30c6\u30fc\u30bf\u30b9\u306f\u91cd\u5927\u306a\u30c8\u30e9\u30d6\u30eb\u304c\u767a\u751f\u3057\u305f\u6642\u306e\u307f\u5229\u7528\u3059\u308b\u9805\u76ee\u306e\u305f\u3081\u3001\u901a\u5e38\u306f\u64cd\u4f5c\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002 "),e.qZA()(),e.TgZ(69,"div",34)(70,"div",27)(71,"app-select-container",35),e.YNc(72,j_,1,0,"ng-container",13),e.YNc(73,z_,1,0,"ng-container",14),e.qZA()(),e.TgZ(74,"div",27)(75,"app-select-container",36),e.YNc(76,W_,1,0,"ng-container",13),e.YNc(77,$_,1,0,"ng-container",14),e.qZA()()()(),e.YNc(78,nu,4,3,"ng-container",26),e.qZA(),e.TgZ(79,"div",37)(80,"div",38)(81,"span"),e._uU(82,"\u9078\u629e\u4e2d\u5546\u54c1\u60c5\u5831"),e.qZA(),e.YNc(83,iu,4,0,"ng-container",26),e.YNc(84,ou,30,4,"ng-container",26),e.qZA(),e.TgZ(85,"div",39)(86,"h2"),e._uU(87,"\u5546\u54c1\u4e88\u7d04\u72b6\u6cc1"),e.qZA(),e.TgZ(88,"div")(89,"app-date-term",40),e.YNc(90,su,1,0,"ng-container",13),e.YNc(91,lu,1,0,"ng-container",14),e.qZA()()(),e._UZ(92,"hr",41),e.TgZ(93,"div",42)(94,"div",43)(95,"app-button",44),e.NdJ("click",function(){return i.toggleCategoryMenu()}),e._uU(96,"\u5206\u985e\u3067\u7d5e\u308a\u8fbc\u307f"),e.qZA(),e.TgZ(97,"app-button",44),e.NdJ("click",function(){return i.toggleProductNameSuggest()}),e._uU(98,"\u5546\u54c1\u540d\u3067\u691c\u7d22"),e.qZA(),e.TgZ(99,"app-button",44),e.NdJ("click",function(){return i.toggleProductIdSuggest()}),e._uU(100,"\u5546\u54c1ID\u3067\u691c\u7d22"),e.qZA()(),e.TgZ(101,"div",45)(102,"div",46),e.YNc(103,_u,5,14,"ng-container",25),e.qZA(),e.TgZ(104,"div",47)(105,"p"),e._uU(106,"\u25cb\uff1a\u4e88\u7d04\u53ef\u80fd\u3001"),e.qZA(),e.TgZ(107,"p"),e._uU(108,"\u25b3\uff1a\u4e88\u7d04\u4e2d\u3001"),e.qZA(),e.TgZ(109,"p"),e._uU(110,"\xd7\uff1a\u8cb8\u51fa\u4e2d"),e.qZA()()()(),e.TgZ(111,"div",48),e._UZ(112,"hr"),e.qZA(),e.TgZ(113,"div",49)(114,"div",50)(115,"app-search-suggest-container",51),e.NdJ("idValueChanges",function(o){return i.onProductSuggestIdChange(o)})("selectedData",function(o){return i.onProductSuggestDataSelected(o)}),e.TgZ(116,"div",52)(117,"span",53),e._uU(118,"\u5546\u54c1\u540d"),e.qZA()()()()(),e.TgZ(119,"div",49)(120,"div",50)(121,"app-search-suggest-container",54),e.NdJ("idValueChanges",function(o){return i.onProductSuggestIdChange(o)})("selectedData",function(o){return i.onProductSuggestDataSelected(o)}),e.TgZ(122,"div",52)(123,"span",53),e._uU(124,"\u5546\u54c1ID"),e.qZA()()()()(),e.TgZ(125,"div",55)(126,"div",56)(127,"div",57)(128,"div")(129,"app-icon",58),e.NdJ("click",function(){return i.drillUpMenu()}),e.qZA()(),e.TgZ(130,"div"),e._uU(131),e.qZA(),e.TgZ(132,"div"),e._UZ(133,"app-icon",59),e.qZA()(),e.TgZ(134,"div",60),e.YNc(135,cu,5,5,"ng-container",25),e.qZA()(),e.TgZ(136,"div",61)(137,"div",62)(138,"div",63),e.YNc(139,hu,3,1,"ng-container",26),e.YNc(140,xu,2,1,"ng-container",26),e.qZA()()()()()(),e.YNc(141,Fu,5,10,"ng-template",null,64,e.W1O),e.YNc(143,Nu,5,10,"ng-template",null,65,e.W1O),e.YNc(145,Ku,26,54,"ng-template",null,66,e.W1O),e.YNc(147,Wu,5,10,"ng-template",null,67,e.W1O),e.YNc(149,Xu,4,2,"ng-template",null,68,e.W1O),e.YNc(151,nd,1,1,"ng-template",null,69,e.W1O),e.YNc(153,ad,1,1,"ng-template",null,70,e.W1O),e.YNc(155,ld,1,1,"ng-template",null,71,e.W1O),e.YNc(157,md,1,1,"ng-template",null,72,e.W1O),e.YNc(159,hd,1,1,"ng-template",null,73,e.W1O)),2&t){const r=e.MAs(148),o=e.MAs(150),s=e.MAs(152);e.Q6J("breadcrumbList",e.WLB(99,Td,e.VKq(96,fd,i.listPagePath),e.DdM(98,Cd))),e.xp6(9),e.hij(" \u6700\u7d42\u66f4\u65b0\u8005\uff1a",i.lastUpdater?i.lastUpdater:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),e.xp6(2),e.Q6J("formGroup",i.commonForm),e.xp6(7),e.Q6J("formCtrl",i.commonFc.reception_employee_id)("suggests",i.employeeSuggests)("invalid",i.formControlStateManager(i.commonFc.reception_employee_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.DdM(102,vd)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(103,w,i.commonFc.reception_employee_id)),e.xp6(2),e.Q6J("formCtrl",i.commonFc.reception_date)("invalid",i.formControlStateManager(i.commonFc.reception_date)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.DdM(105,Ed)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(106,w,i.commonFc.reception_date)),e.xp6(2),e.Q6J("formCtrl",i.commonFc.store_id)("suggests",i.storeSuggests)("invalid",i.formControlStateManager(i.commonFc.store_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.DdM(108,Dd)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(109,w,i.commonFc.store_id)),e.xp6(2),e.Q6J("ngTemplateOutlet",r),e.xp6(3),e.Q6J("options",i.customerTypes)("formCtrl",i.commonFc.customer_type_division_id)("invalid",i.simpleFormControlStateManager(i.commonFc.customer_type_division_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.DdM(111,xd)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(112,w,i.commonFc.customer_type_division_id)),e.xp6(5),e.Q6J("checked",i.smsIsChecked),e.xp6(3),e.Q6J("ngForOf",i.processingUnits),e.xp6(1),e.Q6J("ngIf",i.selectedCustomerType),e.xp6(1),e.Q6J("ngIf",i.selectedCustomerCode),e.xp6(3),e.Q6J("formCtrl",i.commonFc.remarks_1)("invalid",i.formControlStateManager(i.commonFc.remarks_1)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.DdM(114,Sd)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(115,w,i.commonFc.remarks_1)),e.xp6(2),e.Q6J("formCtrl",i.commonFc.remarks_2)("invalid",i.formControlStateManager(i.commonFc.remarks_2)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.DdM(117,Ad)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(118,w,i.commonFc.remarks_2)),e.xp6(1),e.Q6J("ngIf",i.selectedCustomerCode===i.DIVISION_CUSTOMER_CODE_MEMBER||i.selectedCustomerCode===i.DIVISION_CUSTOMER_CODE_CLIENT),e.xp6(3),e.Q6J("ngIf",i.showBulkSuggest),e.xp6(2),e.Q6J("formGroup",i.rentalEmployeeForms),e.xp6(1),e.Q6J("ngIf",!i.rentalItemStatus),e.xp6(1),e.Q6J("ngIf",i.rentalItemStatus),e.xp6(9),e.Q6J("formCtrl",i.commonFc.settle_status_division_id)("options",i.settleDivisions)("invalid",i.formControlStateManager(i.commonFc.settle_status_division_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(120,Id,i.divisionConst.SETTLE_STATUS)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(122,w,i.commonFc.settle_status_division_id)),e.xp6(2),e.Q6J("formCtrl",i.commonFc.incident_division_id)("options",i.incidentDivisions)("invalid",i.formControlStateManager(i.commonFc.incident_division_id)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(124,Fd,i.divisionConst.INCIDENT)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(126,w,i.commonFc.incident_division_id)),e.xp6(1),e.Q6J("ngIf",i.selectedCustomerType),e.xp6(5),e.Q6J("ngIf",!i.rentalAddFormArrayControls),e.xp6(1),e.Q6J("ngIf",i.rentalAddFormArrayControls&&i.rentalAddFormArrayControls.length>0),e.xp6(5),e.Q6J("formCtrl",i.displayStartDateFc.display_start_date)("invalid",i.formControlStateManager(i.displayStartDateFc.display_start_date)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.DdM(128,bd)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(129,re,i.displayStartDateFc.display_start_date)),e.xp6(4),e.Q6J("buttonDisabled",i.showProductNameSuggest||i.showProductIdSuggest),e.xp6(2),e.Q6J("buttonDisabled",i.showProductIdSuggest||i.isCategoryMenuOpen),e.xp6(2),e.Q6J("buttonDisabled",i.showProductNameSuggest||i.isCategoryMenuOpen),e.xp6(4),e.Q6J("ngForOf",i.rentalProductAcquisitionTypes),e.xp6(10),e.Q6J("ngClass",e.WLB(131,Dt,!i.showProductNameSuggest,i.showProductNameSuggest)),e.xp6(2),e.Q6J("fc",i.productFc.product_name)("apiInput",i.getProductNameFormSuggests())("invalid",i.formControlStateManager(i.productFc.product_name))("buttonDisabled",!i.showProductNameSuggest),e.xp6(4),e.Q6J("ngClass",e.WLB(134,Dt,!i.showProductIdSuggest,i.showProductIdSuggest)),e.xp6(2),e.Q6J("fc",i.productFc.id)("apiInput",i.getProductIdFormSuggests())("invalid",i.formControlStateManager(i.productFc.product_name))("buttonDisabled",!i.showProductIdSuggest),e.xp6(5),e.Q6J("ngClass",e.WLB(137,Od,!i.isCategoryMenuOpen,i.isCategoryMenuOpen)),e.xp6(3),e.Q6J("ngClass",e.WLB(140,yd,i.isLargeCategory,!i.isLargeCategory)),e.xp6(2),e.Oqu(i.categoryTitle[i.currentCategoryLevel]),e.xp6(4),e.Q6J("ngForOf",i.currentCategoryData),e.xp6(1),e.Q6J("ngClass",e.WLB(143,Nd,!i.isCategoryMenuOpen,i.isCategoryMenuOpen)),e.xp6(3),e.Q6J("ngIf",i.reservationStatusHeader.length>0),e.xp6(1),e.Q6J("ngIf",i.reservationStatusBody.length>0)}},dependencies:[x.mk,x.sg,x.O5,x.tP,l._Y,l.JL,l.sg,l.x0,l.CE,fe.Z,ot.K,ye.R,He.X,Ne.a,Re.O,ke.t,ce.d,pe.r,Ze.J,Me,Ae.o,st.Q,lt.H,x.JJ,x.Nd],styles:[".search-panel-height[_ngcontent-%COMP%]{max-height:88px}.rental-reservation-table[_ngcontent-%COMP%]{height:500px;min-height:500px;max-height:500px;position:relative}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-header[_ngcontent-%COMP%]{display:inline-flex;position:sticky;top:0;left:0;z-index:20}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-top:1px solid #d1d5db;border-bottom:1px solid #d1d5db;border-right:1px solid #d1d5db;background-color:#fff}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{border-left:1px solid #d1d5db!important}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-body[_ngcontent-%COMP%]{display:inline-flex}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-bottom:1px solid #d1d5db;border-right:1px solid #d1d5db}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{border-left:1px solid #d1d5db!important}.rental-reservation-table[_ngcontent-%COMP%]   .rental-reservation-table-body[_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%]{background-color:#f1f5f9}.edit_save_buttom[_ngcontent-%COMP%]{z-index:9999}"]}),n})()}]}];let kd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[V.Bz.forChild(Rd),V.Bz]}),n})();var Zd=u(9307),xt=u(5366),Je=u(7090),Ye=u(9434),St=u(9104),ge=u(3894),Ke=u(8511),Md=u(855),At=u(4854);let Ud=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[x.ez,l.UX,xt.U,Je.G,Ye.H,St.u,ge.h,Ke.Q,Md.W,At.C]}),n})();var Ld=u(4560);let Bd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[x.ez,Ld.Z,ge.h,l.UX,xt.U,Je.G,Ye.H,ge.h,Ke.Q,l.UX]}),n})();var qd=u(4933),Vd=u(3560),Qd=u(4470),Pd=u(3415),wd=u(5274),Gd=u(1819),Jd=u(3042),Yd=u(3962),Kd=u(4015),Hd=u(1326),It=u(3183),jd=u(6320);let zd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[x.ez,l.UX,It.F,jd.r,ge.h]}),n})();var Wd=u(1924),$d=u(8460),Xd=u(8593);let ec=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[P.v],imports:[x.ez,kd,l.UX,Zd.u,Ud,Bd,qd.M,St.u,Vd.r,Qd.x,Je.G,Pd.x,wd.s,Gd.l,Ye.H,ge.h,Jd.C,Yd.J,Kd.e,Hd.z,It.F,At.C,zd,Ke.Q,Wd.Z,$d.A,Xd.n]}),n})()},67:(ae,H,u)=>{u.d(H,{s:()=>V});const V={NO_IMAGE_PATH:"/assets/images/no_image.png",PLEASE_SELECT:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",IMAGE_MAX_FILE_SIZE:3145728,IMAGE_MAX_FILE_SIZE_FOR_DISPLAY:Math.floor(3.145728),ROUTE_DATA_BREADCRUMB:"breadcrumb",DATA_PERMISSION:{CODE:{PUBLIC:1,PROVISIONAL:2,PRIVATE:3},VALUE:{PUBLIC:"\u516c\u958b\u4e2d",PROVISIONAL:"\u4eee\u4fdd\u5b58",PRIVATE:"\u975e\u516c\u958b"}}}},6626:(ae,H,u)=>{u.d(H,{T:()=>G});var x=u(262),V=u(4004),q=u(2340),z=u(1751),B=u(1571);let G=(()=>{class C extends z.O{constructor(){super(...arguments),this.endpoint=q.pU.largeCategoryApi.endpoint}getAll(S={}){return this.httpOptions.params=S,this.http.get(this.endpoint,this.httpOptions).pipe((0,x.K)(this.setErrorMessage("\u5927\u5206\u985e\u4e00\u89a7\u306e\u53d6\u5f97")))}find(S){return this.http.get(`${this.endpoint}/${S}`).pipe((0,x.K)(this.setErrorMessage("\u5927\u5206\u985e\u60c5\u5831\u306e\u53d6\u5f97")))}add(S){const N=this.generateFormData(S);return this.http.post(this.endpoint,N).pipe((0,x.K)(this.setErrorMessage("\u5927\u5206\u985e\u60c5\u5831\u306e\u767b\u9332")))}update(S,N){const P=this.generateFormData(N);return this.http.patch(`${this.endpoint}/${S}`,P).pipe((0,x.K)(this.setErrorMessage("\u5927\u5206\u985e\u60c5\u5831\u306e\u66f4\u65b0")))}remove(S){return this.http.delete(`${this.endpoint}/${S}`).pipe((0,x.K)(this.setErrorMessage("\u5927\u5206\u985e\u60c5\u5831\u306e\u524a\u9664")))}getAsSelectOptions(S){return this.getAll(S).pipe((0,V.U)(N=>N.data.map(P=>({value:P.id,text:P.name}))))}}return C.\u0275fac=function(){let e;return function(N){return(e||(e=B.n5z(C)))(N||C)}}(),C.\u0275prov=B.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},476:(ae,H,u)=>{u.d(H,{G:()=>G});var x=u(262),V=u(4004),q=u(2340),z=u(1751),B=u(1571);let G=(()=>{class C extends z.O{constructor(){super(...arguments),this.endpoint=q.pU.mediumCategoryApi.endpoint}getAll(S={}){return this.httpOptions.params=S,this.http.get(this.endpoint,this.httpOptions).pipe((0,x.K)(this.setErrorMessage("\u4e2d\u5206\u985e\u4e00\u89a7\u306e\u53d6\u5f97")))}find(S){return this.http.get(`${this.endpoint}/${S}`).pipe((0,x.K)(this.setErrorMessage("\u4e2d\u5206\u985e\u60c5\u5831\u306e\u53d6\u5f97")))}add(S){const N=this.generateFormData(S);return this.http.post(this.endpoint,N).pipe((0,x.K)(this.setErrorMessage("\u4e2d\u5206\u985e\u60c5\u5831\u306e\u767b\u9332")))}update(S,N){const P=this.generateFormData(N);return this.http.patch(`${this.endpoint}/${S}`,P).pipe((0,x.K)(this.setErrorMessage("\u4e2d\u5206\u985e\u60c5\u5831\u306e\u66f4\u65b0")))}remove(S){return this.http.delete(`${this.endpoint}/${S}`).pipe((0,x.K)(this.setErrorMessage("\u4e2d\u5206\u985e\u60c5\u5831\u306e\u524a\u9664")))}getAsSelectOptions(S){return this.getAll(S).pipe((0,V.U)(N=>N.data.map(P=>({value:P.id,text:P.name}))))}getSibling(S){return this.getAll({large_category_id:S})}}return C.\u0275fac=function(){let e;return function(N){return(e||(e=B.n5z(C)))(N||C)}}(),C.\u0275prov=B.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},9744:(ae,H,u)=>{u.d(H,{J:()=>V});var x=u(1571);let V=(()=>{class q{getDivisions(B,G){return B[G]}getDivisionid(B,G,C){const e=this.getDivisions(B,G);let S;for(let N in e)if(e[N].code===C){S=e[N].value;break}return S}}return q.\u0275fac=function(B){return new(B||q)},q.\u0275prov=x.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"}),q})()},4151:(ae,H,u)=>{u.d(H,{i:()=>G});var x=u(262),V=u(4004),q=u(2340),z=u(1751),B=u(1571);let G=(()=>{class C extends z.O{constructor(){super(...arguments),this.endpoint=q.pU.smallCategoryApi.endpoint}getAll(S={}){return this.httpOptions.params=S,this.http.get(this.endpoint,this.httpOptions).pipe((0,x.K)(this.setErrorMessage("\u5c0f\u5206\u985e\u4e00\u89a7\u306e\u53d6\u5f97")))}find(S){return this.http.get(`${this.endpoint}/${S}`).pipe((0,x.K)(this.setErrorMessage("\u5c0f\u5206\u985e\u60c5\u5831\u306e\u53d6\u5f97")))}add(S){const N=this.generateFormData(S);return this.http.post(this.endpoint,N).pipe((0,x.K)(this.setErrorMessage("\u5c0f\u5206\u985e\u60c5\u5831\u306e\u767b\u9332")))}update(S,N){const P=this.generateFormData(N);return this.http.patch(`${this.endpoint}/${S}`,P).pipe((0,x.K)(this.setErrorMessage("\u5c0f\u5206\u985e\u60c5\u5831\u306e\u66f4\u65b0")))}remove(S){return this.http.delete(`${this.endpoint}/${S}`).pipe((0,x.K)(this.setErrorMessage("\u5c0f\u5206\u985e\u60c5\u5831\u306e\u524a\u9664")))}getAsSelectOptions(S){return this.getAll(S).pipe((0,V.U)(N=>N.data.map(P=>({value:P.id,text:P.name}))))}getSibling(S){return this.getAll({medium_category_id:S})}}return C.\u0275fac=function(){let e;return function(N){return(e||(e=B.n5z(C)))(N||C)}}(),C.\u0275prov=B.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()}}]);