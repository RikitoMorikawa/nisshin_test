"use strict";(self.webpackChunknisshin=self.webpackChunknisshin||[]).push([[614],{5614:(ze,w,s)=>{s.r(w),s.d(w,{PbSecondCategoryModule:()=>Ke});var g=s(6895),c=s(4006),_=s(1690),A=s(727),J=s(5698),E=s(9300),p=s(8037),u=s(6585),t=s(1571),T=s(2334),y=s(1609),x=s(8832),$=s(2125);let W=(()=>{class n{constructor(e,o,i,a){this.errorService=e,this.modalService=o,this.router=i,this.common=a,this.subscription=new A.w0,this.isLoading=!1}ngOnInit(){this.subscription.add(this.errorService.getError().subscribe(e=>{this.handleError(e)})),this.subscription.add(this.common.loading$.subscribe(e=>{setTimeout(()=>this.isLoading=e)}))}ngOnDestroy(){this.subscription.unsubscribe()}handleError(e){e.redirectPath&&(this.redirectPath=e.redirectPath),this.modalService.setModal(e.title,0===e.status?e.message+p.c.GUIDANCE_OF_SUPPORT:`\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9: ${e.status} \n\u30e1\u30c3\u30bb\u30fc\u30b8: `+e.message+p.c.GUIDANCE_OF_SUPPORT,"danger",u.yR.BUTTON_TITLE.CLOSE,""),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,J.q)(1),(0,E.h)(i=>this.modalService.getModalProperties().title===e.title)).subscribe(i=>{this.redirectPath&&this.router.navigateByUrl(this.redirectPath)}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.T),t.Y36(y.Z),t.Y36(_.F0),t.Y36(x.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-pb-second-category"]],decls:2,vars:1,consts:[[3,"isLoading"]],template:function(e,o){1&e&&t._UZ(0,"router-outlet")(1,"app-loading-container",0),2&e&&(t.xp6(1),t.Q6J("isLoading",o.isLoading))},dependencies:[_.lC,$.o]}),n})();var Y=s(4128),h=s(262),f=s(9646),v=s(529),F=s(1267),C=s(67),P=s(349),Q=s(9563),Z=s(765),q=s(2e3),I=s(8782),V=s(1269),j=s(1481),S=s(7030),B=s(1805),D=s(3761),K=s(387),L=s(2195),U=s(5146),z=s(1451),O=s(5108);function tt(n,r){if(1&n&&t.GkF(0,38),2&n){const e=t.oxw(3),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.exceededFileSizeLimit)}}function et(n,r){if(1&n&&(t.TgZ(0,"div",36),t.YNc(1,tt,1,2,"ng-container",37),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.scAddForm.controls.image.errors?null:e.scAddForm.controls.image.errors.limitFileSize)}}function ot(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",40),t._UZ(1,"img",41),t.TgZ(2,"div",42)(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"app-icon",43),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.handleClickDeleteIcon())}),t.qZA()()()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("src",e.imageUrl,t.LSH),t.xp6(3),t.Oqu(e.imageFileName)}}function nt(n,r){if(1&n&&t.YNc(0,ot,6,2,"div",39),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.imageUrl)}}function rt(n,r){if(1&n&&t.GkF(0,38),2&n){const e=t.oxw(3),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.requiredItem)}}function it(n,r){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,rt,1,2,"ng-container",37),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.scAddForm.controls.product_book_first_category_id.errors?null:e.scAddForm.controls.product_book_first_category_id.errors.required)}}function st(n,r){if(1&n&&t.GkF(0,38),2&n){const e=t.oxw(3),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.requiredItem)}}function at(n,r){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,st,1,2,"ng-container",37),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.scAddForm.controls.store_id.errors?null:e.scAddForm.controls.store_id.errors.required)}}function ut(n,r){if(1&n&&t.GkF(0,38),2&n){const e=t.oxw(3),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.requiredItem)}}function ct(n,r){if(1&n&&t.GkF(0,38),2&n){const e=t.oxw(3),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.exceededCharacterMaxLimit)}}function lt(n,r){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,ut,1,2,"ng-container",37),t.YNc(2,ct,1,2,"ng-container",37),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.scAddForm.controls.name.errors?null:e.scAddForm.controls.name.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.scAddForm.controls.name.errors?null:e.scAddForm.controls.name.errors.maxlength)}}function dt(n,r){if(1&n&&t.GkF(0,38),2&n){const e=t.oxw(3),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.exceededCharacterMaxLimit)}}function mt(n,r){if(1&n&&t.GkF(0,38),2&n){const e=t.oxw(3),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.fullWidthKatakanaRestrictionViolation)}}function pt(n,r){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,dt,1,2,"ng-container",37),t.YNc(2,mt,1,2,"ng-container",37),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.scAddForm.controls.furi.errors?null:e.scAddForm.controls.furi.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==e.scAddForm.controls.furi.errors?null:e.scAddForm.controls.furi.errors.pattern)}}function gt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",9),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleClickSaveButton())}),t.TgZ(2,"div",10)(3,"h2",11),t._uU(4,"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u540d\u79f0\u5165\u529b"),t.qZA(),t._UZ(5,"hr",12),t.TgZ(6,"div",13)(7,"div",14)(8,"div",15)(9,"div",16)(10,"div",17)(11,"div",18)(12,"p",19),t._uU(13),t.qZA(),t._UZ(14,"app-file",20),t.YNc(15,et,2,1,"div",21),t.YNc(16,nt,1,1,"ng-template",null,22,t.W1O),t.qZA()(),t.TgZ(18,"div",23)(19,"div",16)(20,"app-select-container",24)(21,"div",25)(22,"span",26),t._uU(23,"\u7b2c1\u5206\u985e\u9078\u629e"),t.qZA(),t.TgZ(24,"span",27),t._uU(25,"\u5fc5\u9808"),t.qZA()(),t.YNc(26,it,2,1,"div",28),t.qZA(),t.TgZ(27,"app-select-container",29)(28,"div",25)(29,"span",26),t._uU(30,"\u5e97\u8217\u9078\u629e"),t.qZA(),t.TgZ(31,"span",27),t._uU(32,"\u5fc5\u9808"),t.qZA()(),t.YNc(33,at,2,1,"div",28),t.qZA()(),t.TgZ(34,"div",30)(35,"app-text-container",31)(36,"div",25)(37,"span",26),t._uU(38,"\u7b2c2\u5206\u985e\u540d\uff0820\u6587\u5b57\u4ee5\u5185\uff09"),t.qZA(),t.TgZ(39,"span",27),t._uU(40,"\u5fc5\u9808"),t.qZA()(),t.YNc(41,lt,3,2,"div",28),t.qZA(),t.TgZ(42,"app-text-container",32)(43,"div",25)(44,"span",26),t._uU(45,"\u7b2c2\u5206\u985e\u540d\u30ab\u30ca\uff08\u5168\u89d2\u30ab\u30ca20\u6587\u5b57\u4ee5\u5185\uff09"),t.qZA()(),t.YNc(46,pt,3,2,"div",28),t.qZA()()()()()()()(),t.TgZ(47,"div",33)(48,"app-button",34),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onClickReset())}),t._uU(49,"\u30af\u30ea\u30a2"),t.qZA(),t.TgZ(50,"app-button",35),t._uU(51," \u4fdd\u5b58"),t.qZA()()(),t.BQk()}if(2&n){const e=t.MAs(17),o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.scAddForm),t.xp6(12),t.hij(" \u203b \u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u306f\u6700\u5927",o.maxFileSizeForDisplay,"M\u30d0\u30a4\u30c8 "),t.xp6(1),t.Q6J("formCtrl",o.scAddForm.controls.image),t.xp6(1),t.Q6J("ngIf",o.scAddForm.controls.image.invalid)("ngIfElse",e),t.xp6(5),t.Q6J("formCtrl",o.scAddForm.controls.product_book_first_category_id)("options",o.fcOptions)("invalid",o.formControlStateManager(o.scAddForm.controls.product_book_first_category_id)),t.xp6(6),t.Q6J("ngIf",o.formControlStateManager(o.scAddForm.controls.product_book_first_category_id)),t.xp6(1),t.Q6J("formCtrl",o.scAddForm.controls.store_id)("options",o.storeOptions)("invalid",o.formControlStateManager(o.scAddForm.controls.store_id)),t.xp6(6),t.Q6J("ngIf",o.formControlStateManager(o.scAddForm.controls.store_id)),t.xp6(2),t.Q6J("formCtrl",o.scAddForm.controls.name)("invalid",o.formControlStateManager(o.scAddForm.controls.name)),t.xp6(6),t.Q6J("ngIf",o.formControlStateManager(o.scAddForm.controls.name)),t.xp6(1),t.Q6J("formCtrl",o.scAddForm.controls.furi)("invalid",o.formControlStateManager(o.scAddForm.controls.furi)),t.xp6(4),t.Q6J("ngIf",o.formControlStateManager(o.scAddForm.controls.furi)),t.xp6(4),t.Q6J("buttonDisabled",o.scAddForm.invalid||o.scAddForm.pristine)}}function _t(n,r){if(1&n&&(t.TgZ(0,"p",45),t._uU(1),t.qZA()),2&n){const e=r.message;t.xp6(1),t.hij(" ",e," ")}}const ht=function(){return{path:"/setting",text:"\u8a2d\u5b9a\u4e00\u89a7"}},ft=function(){return{path:"/setting/product-book-second-category",text:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u4e00\u89a7"}},Ct=function(){return{text:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u7de8\u96c6"}},bt=function(n,r,e){return[n,r,e]};let vt=(()=>{class n{constructor(e,o,i,a,l,d,m,b,k,N,R){this.formBuilder=e,this.modalService=o,this.router=i,this.pbFirstCategoryService=a,this.pbSecondCategoryService=l,this.storeService=d,this.errorService=m,this.flashMessageService=b,this.authorService=k,this.sanitizer=N,this.common=R,this.exceededCharacterMaxLimit={message:p.c.FORM_ERROR.EXCEEDED_CHARACTER_MAX_LIMIT},this.requiredItem={message:p.c.FORM_ERROR.REQUIRED_ITEM},this.exceededFileSizeLimit={message:p.c.FORM_ERROR.EXCEEDED_FILE_SIZE_LIMIT},this.fullWidthKatakanaRestrictionViolation={message:p.c.FORM_ERROR.FULL_WIDTH_KATAKANA_RESTRICTION_VIOLATION},this.subscription=new A.w0,this.fcOptions=[{value:"",text:C.s.PLEASE_SELECT}],this.storeOptions=[{value:"",text:C.s.PLEASE_SELECT}],this.scRootPath="/setting/product-book-second-category",this.maxFileSizeForDisplay=C.s.IMAGE_MAX_FILE_SIZE_FOR_DISPLAY,this.cancelModalTitle="\u7b2c2\u5206\u985e\u767b\u9332\u30ad\u30e3\u30f3\u30bb\u30eb\uff1a"+u.yR.TITLE.CANCEL,this.scAddForm=this.formBuilder.group({image:null,product_book_first_category_id:["",[c.kI.required]],store_id:["",[c.kI.required]],name:["",[c.kI.required,c.kI.maxLength(20)]],furi:["",[c.kI.maxLength(20),c.kI.pattern(P.m.FULL_WIDTH_KATAKANA_REG_EX)]]})}ngOnInit(){this.subscription.add(this.modalService.closeEventObservable$.pipe((0,E.h)(e=>this.modalService.getModalProperties().title===this.cancelModalTitle)).subscribe(e=>{e===u.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl(this.scRootPath)})),this.subscription.add(this.scAddForm.controls.image.valueChanges.subscribe(e=>{this.updatePreviewElements(e)})),this.authorService.author?this.author=this.authorService.author:this.subscription.add(this.authorService.author$.subscribe(e=>{this.author=e})),this.getSelectOptions()}getSelectOptions(){this.common.loading=!0,this.subscription.add((0,Y.D)([this.pbFirstCategoryService.getAll(),this.storeService.getAll()]).pipe((0,h.K)(e=>(0,f.of)(e))).subscribe(e=>{if(this.common.loading=!1,e instanceof v.UA)this.handleError(e.status,e.error.message);else if(Array.isArray(e)&&2===e.length){const o=(0,F.bz)(e[0]),i=(0,F.bz)(e[1]);if(o||i)return void this.handleError(400,p.c.COULD_NOT_GET_DATA);e[0].data.map(d=>{this.fcOptions.push({value:d.id,text:d.name})}),e[1].data.map(d=>{this.storeOptions.push({value:d.id,text:d.name})})}else this.handleError(400,p.c.COULD_NOT_GET_DATA)}))}limitFileSizeValidator(){return e=>{const o=e.value;return o?.size&&o?.size>C.s.IMAGE_MAX_FILE_SIZE?(this.scAddForm.controls.image.setValue(null),{limitFileSize:{errorMessage:this.exceededFileSizeLimit}}):null}}updatePreviewElements(e){if(e){const o=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(e));this.imageUrl=o,this.imageFileName=e.name}else this.imageUrl=void 0,this.imageFileName=void 0}handleClickDeleteIcon(){this.scAddForm.controls.image.setValue(null)}formControlStateManager(e){return(e.touched||e.dirty)&&e.invalid}onClickReset(){window.location.reload()}handleClickCancel(){"VALID"===this.scAddForm.status?this.modalService.setModal(this.cancelModalTitle,u.yR.BODY.CANCEL,"warning",u.yR.BUTTON_TITLE.EXECUTION,u.yR.BUTTON_TITLE.CANCEL):this.router.navigateByUrl(this.scRootPath)}handleClickSaveButton(){this.scAddForm.markAsPristine(),this.common.loading=!0,this.subscription.add(this.pbSecondCategoryService.add(this.scAddForm.value).pipe((0,h.K)(o=>(0,f.of)(o))).subscribe(o=>{this.common.loading=!1,o instanceof v.UA?this.handleError(o.status,o.error.message):(this.flashMessageService.setFlashMessage(o.message,"success",15e3),this.router.navigateByUrl(this.scRootPath))}))}handleError(e,o){this.errorService.setError({status:e,title:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u767b\u9332\u30a8\u30e9\u30fc\uff1a"+u.yR.TITLE.HAS_ERROR,message:o})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.qu),t.Y36(y.Z),t.Y36(_.F0),t.Y36(Q.R),t.Y36(Z.X),t.Y36(q.d),t.Y36(T.T),t.Y36(I.P),t.Y36(V.Y),t.Y36(j.H7),t.Y36(x.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add"]],decls:14,vars:11,consts:[[3,"breadcrumbList"],[1,"mb-20"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"cursor-pointer",3,"click"],[3,"roleTypeName"],[1,"width-limit-break","border-t","border-gray-400"],[4,"ngIf"],["em",""],[3,"formGroup","ngSubmit"],[1,"mt-8","mb-24","pt-8","pb-20","px-6","bg-white","shadow","border","border-gray-300"],[1,"text-lg"],[1,"border-t-primary-light-hover","border-t-4"],[1,"mt-6","flex","flex-row","gap-10"],[1,"grow"],[1,"p-6","border-t","border-r","border-l","border-t-gray-200","border-r-gray-200","border-l-gray-200","shadow"],[1,"flex","flex-row","gap-4"],[1,"max-w-[300px]","w-[300px]"],[1,"px-2","pb-2"],[1,"text-sm"],["text","\u30ed\u30b4\u753b\u50cf\u9078\u629e","accept","image/png, image/jpeg",3,"formCtrl"],["class","mt-2 text-sm text-danger",4,"ngIf","ngIfElse"],["correctImage",""],[1,"flex","flex-col","w-2/3"],["nameAttrValue","product_book_first_category_id","idAttrValue","product-book-first-category-id",1,"w-1/2",3,"formCtrl","options","invalid"],[1,"flex","flex-row","items-center"],[1,"inline-block","mr-2"],[1,"px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],["class","mt-1 pl-1 text-sm","message","",4,"ngIf"],["nameAttrValue","store_id","idAttrValue","store-id",1,"w-1/2",3,"formCtrl","options","invalid"],[1,"flex","flex-row","mt-6","gap-4"],["inputType","text","nameAttrValue","name","idAttrValue","name",1,"w-1/2",3,"formCtrl","invalid"],["inputType","text","nameAttrValue","furi","idAttrValue","furi",1,"w-1/2",3,"formCtrl","invalid"],[1,"width-limit-break","bg-primary-light","flex","flex-row","justify-center","bottom-[40px]","left-0","right-0","p-2","fixed","gap-8"],[3,"click"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success",3,"buttonDisabled"],[1,"mt-2","text-sm","text-danger"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["alt","\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u753b\u50cf",1,"border","border-gray-200","shadow","rounded-md",3,"src"],[1,"flex","flex-row","items-center","mt-2"],["icon","delete-bin-line",1,"w-6","cursor-pointer","ml-2","fill-red-500",3,"click"],["message","",1,"mt-1","pl-1","text-sm"],[1,"text-sm","text-red"]],template:function(e,o){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main",1)(2,"h1",2),t._uU(3,"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u65b0\u898f\u767b\u9332"),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t.NdJ("click",function(){return o.handleClickCancel()}),t._UZ(6,"app-cancel-link-org"),t.qZA(),t.TgZ(7,"div")(8,"app-last-updater-org",5),t._uU(9),t.qZA()()(),t._UZ(10,"hr",6),t.YNc(11,gt,52,20,"ng-container",7),t.qZA(),t.YNc(12,_t,2,1,"ng-template",null,8,t.W1O)),2&e&&(t.Q6J("breadcrumbList",t.kEZ(7,bt,t.DdM(4,ht),t.DdM(5,ft),t.DdM(6,Ct))),t.xp6(8),t.Q6J("roleTypeName",o.author&&o.author.role_name?o.author.role_name:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."),t.xp6(1),t.hij(" \u767b\u9332\u8005\uff1a",o.author?o.author.last_name+" "+o.author.first_name:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),t.xp6(2),t.Q6J("ngIf",!o.common.loading))},dependencies:[g.O5,g.tP,c._Y,c.JL,c.sg,S.Z,B.R,D.o,K.K,L.O,U.r,z.d,O.P]}),n})();var G=s(9586),At=s(4720),Et=s(956);const xt=function(n,r){return{id:n,name:r}};function Tt(n,r){if(1&n&&(t.TgZ(0,"a",22)(1,"div",23)(2,"p",24),t._uU(3," \u95a2\u9023\u3059\u308b\u30e1\u30a4\u30f3\u5546\u54c1\u30d6\u30c3\u30af\u4e00\u89a7\u3078 "),t.qZA(),t._UZ(4,"app-icon",25),t.qZA()()),2&n){const e=t.oxw(2);t.Q6J("routerLink",e.mainProductBookPath)("queryParams",t.WLB(2,xt,e.selectedId,e.pbSecondCategory.name))}}function Ft(n,r){if(1&n&&(t.TgZ(0,"div",10)(1,"div",11)(2,"h2",12),t._uU(3),t.qZA(),t.YNc(4,Tt,5,5,"a",13),t.qZA(),t._UZ(5,"hr",14),t.TgZ(6,"div",15),t._UZ(7,"img",16),t.TgZ(8,"div",17)(9,"ul",18)(10,"li",19)(11,"div",20),t._uU(12,"\u7b2c1\u5206\u985e\u540d"),t.qZA(),t.TgZ(13,"div",21),t._uU(14),t.qZA()(),t.TgZ(15,"li",19)(16,"div",20),t._uU(17,"\u7b2c2\u5206\u985e\u540d"),t.qZA(),t.TgZ(18,"div",21),t._uU(19),t.qZA()(),t.TgZ(20,"li",19)(21,"div",20),t._uU(22," \u7b2c2\u5206\u985e\u540d\u30ab\u30ca "),t.qZA(),t.TgZ(23,"div",21),t._uU(24),t.qZA()(),t.TgZ(25,"li",19)(26,"div",20),t._uU(27," \u5546\u54c1\u30d6\u30c3\u30af\u30b3\u30fc\u30c9 "),t.qZA(),t.TgZ(28,"div",21),t._uU(29),t.qZA()(),t.TgZ(30,"li",19)(31,"div",20),t._uU(32,"\u5e97\u8217\u540d"),t.qZA(),t.TgZ(33,"div",21),t._uU(34),t.qZA()(),t.TgZ(35,"li",19)(36,"div",20),t._uU(37,"\u767b\u9332\u65e5\u6642"),t.qZA(),t.TgZ(38,"div",21),t._uU(39),t.qZA()(),t.TgZ(40,"li",19)(41,"div",20),t._uU(42,"\u767b\u9332\u8005"),t.qZA(),t.TgZ(43,"div",21),t._uU(44),t.qZA()(),t.TgZ(45,"li",19)(46,"div",20),t._uU(47,"\u66f4\u65b0\u65e5\u6642"),t.qZA(),t.TgZ(48,"div",21),t._uU(49),t.qZA()(),t.TgZ(50,"li",19)(51,"div",20),t._uU(52,"\u66f4\u65b0\u8005"),t.qZA(),t.TgZ(53,"div",21),t._uU(54),t.qZA()()()()()()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",e.pbSecondCategory?e.pbSecondCategory.name:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),t.xp6(1),t.Q6J("ngIf",e.pbSecondCategory),t.xp6(3),t.Q6J("src",e.logo,t.LSH),t.xp6(7),t.hij(" ",e.pbSecondCategory?e.pbSecondCategory.product_book_first_category_name:" "," "),t.xp6(5),t.hij(" ",e.pbSecondCategory?e.pbSecondCategory.name:" "," "),t.xp6(5),t.hij(" ",e.pbSecondCategory?e.pbSecondCategory.furi:" "," "),t.xp6(5),t.hij(" ",e.pbSecondCategory?e.pbSecondCategory.book_cd:" "," "),t.xp6(5),t.hij(" ",e.pbSecondCategory?e.pbSecondCategory.store_name:" "," "),t.xp6(5),t.hij(" ",e.pbSecondCategory?e.pbSecondCategory.created_at:" "," "),t.xp6(5),t.hij(" ",e.add_user?e.add_user:" "," "),t.xp6(5),t.hij(" ",e.pbSecondCategory?e.pbSecondCategory.updated_at:" "," "),t.xp6(5),t.hij(" ",e.updater?e.updater:" "," ")}}const yt=function(){return{path:"/setting",text:"\u8a2d\u5b9a\u4e00\u89a7"}},Zt=function(){return{path:"/setting/product-book-second-category",text:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u4e00\u89a7"}},St=function(){return{text:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u8a73\u7d30"}},It=function(n,r,e){return[n,r,e]};let Bt=(()=>{class n{constructor(e,o,i,a,l,d,m){this.pbSecondCategoryService=e,this.modalService=o,this.router=i,this.route=a,this.errorService=l,this.flashMessageService=d,this.common=m,this.subscription=new A.w0,this.errorModalTitle="\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u8a73\u7d30\uff1a"+u.yR.TITLE.HAS_ERROR,this.pbSecondCategoryListPath="/setting/product-book-second-category",this.mainProductBookPath="/setting/main-product-book",this.logo="assets/images/no_image.png"}ngOnInit(){this.subscription.add(this.modalService.closeEventObservable$.pipe((0,E.h)(o=>this.modalService.getModalProperties().title===this.errorModalTitle)).subscribe(o=>{o===u.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl(this.pbSecondCategoryListPath)}));const e=this.route.snapshot.paramMap.get("id");null!==e?isNaN(Number(e))?this.modalService.setModal(this.errorModalTitle,u.yR.BODY.CANCEL,"danger",u.yR.BUTTON_TITLE.CLOSE):(this.selectedId=Number(e),this.editPath="/setting/product-book-second-category/edit/"+this.selectedId,this.getDisplayData()):this.modalService.setModal(this.errorModalTitle,u.yR.BODY.CANCEL,"danger",u.yR.BUTTON_TITLE.CLOSE)}getDisplayData(){this.common.loading=!0,this.subscription.add(this.pbSecondCategoryService.find(this.selectedId).pipe((0,h.K)(e=>(0,f.of)(e))).subscribe(e=>{if(e instanceof v.UA)return void this.handleError(e.status,e.error.message);if((0,F.bz)(e))return void this.handleError(400,p.c.COULD_NOT_GET_DATA);const i=e.data[0];i.created_at=new Date(i.created_at).toLocaleString(),i.updated_at=i.updated_at?new Date(i.updated_at).toLocaleString():"\u672a\u767b\u9332",this.updater=i.employee_updated_last_name&&i.employee_updated_first_name?i.employee_updated_last_name+" "+i.employee_updated_first_name:"\u672a\u767b\u9332",this.pbSecondCategory=i,i.image_path&&(this.logo=i.image_path),this.add_user=i.employee_created_last_name+" "+i.employee_created_first_name,this.common.loading=!1}))}handleClickDelete(){const e="\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\uff1a"+u.yR.TITLE.DELETE;this.modalService.setModal(e,u.yR.BODY.DELETE,"danger",u.yR.BUTTON_TITLE.DELETE,u.yR.BUTTON_TITLE.CANCEL),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,J.q)(1),(0,E.h)(i=>this.modalService.getModalProperties().title===e)).subscribe(i=>{i===u.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&(this.common.loading=!0,this.pbSecondCategoryService.remove(this.selectedId).pipe((0,h.K)(a=>(0,f.of)(a))).subscribe(a=>{this.common.loading=!1,a instanceof v.UA?this.errorService.setError({status:a.status,title:e,message:a.error.message,redirectPath:this.pbSecondCategoryListPath}):(this.flashMessageService.setFlashMessage(a.message,"success",15e3),this.router.navigateByUrl(this.pbSecondCategoryListPath))}))}))}handleError(e,o){this.errorService.setError({status:e,title:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u8a73\u7d30\uff1a"+u.yR.TITLE.HAS_ERROR,message:o,redirectPath:this.pbSecondCategoryListPath})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.X),t.Y36(y.Z),t.Y36(_.F0),t.Y36(_.gz),t.Y36(T.T),t.Y36(I.P),t.Y36(x.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-detail"]],decls:16,vars:11,consts:[[3,"breadcrumbList"],[1,"mb-20"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"flex","flex-row","items-center","gap-6"],["path","/setting/product-book-second-category"],[3,"path"],[1,"cursor-pointer",3,"click"],[1,"width-limit-break","border-t","border-gray-400"],["class","mt-8 py-8 px-6 bg-white shadow border border-gray-300",4,"ngIf"],[1,"mt-8","py-8","px-6","bg-white","shadow","border","border-gray-300"],[1,"flex","flex-row","justify-between"],[1,"text-lg"],["class","cursor-pointer",3,"routerLink","queryParams",4,"ngIf"],[1,"border-t-primary-light-hover","border-t-4"],[1,"mt-6","flex","flex-row","gap-10"],["alt","\u30ed\u30b4\u753b\u50cf",1,"w-[240px]","self-start",3,"src"],[1,"grow"],[1,"border-t","border-r","border-l","border-t-gray-200","border-r-gray-200","border-l-gray-200","shadow"],[1,"flex","flex-row","items-center","border-b","border-b-gray-200"],[1,"px-2","py-3","bg-slate-100","min-w-[200px]"],[1,"px-2","py-3","border-l","border-l-gray-200","grow"],[1,"cursor-pointer",3,"routerLink","queryParams"],[1,"flex","flex-row","gap-2","group"],[1,"group-hover:text-primary-hover"],["icon","arrow-right-line",1,"w-6","fill-primary-light","group-hover:fill-primary-light-hover"]],template:function(e,o){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main",1)(2,"h1",2),t._uU(3,"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u8a73\u7d30"),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"app-back-to-link-org",5),t._uU(7,"\u4e00\u89a7\u3078\u623b\u308b"),t.qZA(),t._UZ(8,"app-edit-link-org",6),t.TgZ(9,"div",7),t.NdJ("click",function(){return o.handleClickDelete()}),t._UZ(10,"app-delete-link-org"),t.qZA()(),t.TgZ(11,"div")(12,"app-last-updater-org"),t._uU(13),t.qZA()()(),t._UZ(14,"hr",8),t.YNc(15,Ft,55,12,"div",9),t.qZA()),2&e&&(t.Q6J("breadcrumbList",t.kEZ(7,It,t.DdM(4,yt),t.DdM(5,Zt),t.DdM(6,St))),t.xp6(8),t.Q6J("path",o.editPath),t.xp6(5),t.hij(" \u6700\u7d42\u66f4\u65b0\u8005\uff1a",o.common.loading?"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d...":o.updater," "),t.xp6(2),t.Q6J("ngIf",!o.common.loading))},dependencies:[g.O5,_.yS,S.Z,G.i,At._,Et.$,B.R,D.o]}),n})();function Dt(n,r){if(1&n&&(t.ynx(0),t._UZ(1,"img",36),t.TgZ(2,"div",37)(3,"p"),t._uU(4,"\u8a2d\u5b9a\u4e2d\u306e\u753b\u50cf"),t.qZA()(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("src",e.sc.image_path,t.LSH)}}function Ut(n,r){if(1&n&&(t.TgZ(0,"div",35),t.YNc(1,Dt,5,1,"ng-container",6),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.common.loading)}}function Lt(n,r){if(1&n&&t.GkF(0,42),2&n){const e=t.oxw(4),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.exceededFileSizeLimit)}}function Ot(n,r){if(1&n&&(t.TgZ(0,"div",40),t.YNc(1,Lt,1,2,"ng-container",41),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.scEditForm.controls.image.errors?null:e.scEditForm.controls.image.errors.limitFileSize)}}function Mt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",35),t._UZ(1,"img",44),t.TgZ(2,"div",45)(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"app-icon",46),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(4);return t.KtG(i.handleClickDeleteIcon())}),t.qZA()()()}if(2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("src",e.imageUrl,t.LSH),t.xp6(3),t.Oqu(e.imageFileName)}}function kt(n,r){if(1&n&&t.YNc(0,Mt,6,2,"div",43),2&n){const e=t.oxw(3);t.Q6J("ngIf",e.imageUrl)}}function Nt(n,r){if(1&n&&(t.YNc(0,Ot,2,1,"div",38),t.YNc(1,kt,1,1,"ng-template",null,39,t.W1O)),2&n){const e=t.MAs(2),o=t.oxw(2);t.Q6J("ngIf",o.scEditForm.controls.image.invalid)("ngIfElse",e)}}function Rt(n,r){if(1&n&&t.GkF(0,42),2&n){const e=t.oxw(3),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.requiredItem)}}function wt(n,r){if(1&n&&(t.TgZ(0,"div",47),t.YNc(1,Rt,1,2,"ng-container",41),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.scEditForm.controls.product_book_first_category_id.errors?null:e.scEditForm.controls.product_book_first_category_id.errors.required)}}function Jt(n,r){if(1&n&&t.GkF(0,42),2&n){const e=t.oxw(3),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.requiredItem)}}function Yt(n,r){if(1&n&&(t.TgZ(0,"div",47),t.YNc(1,Jt,1,2,"ng-container",41),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.scEditForm.controls.store_id.errors?null:e.scEditForm.controls.store_id.errors.required)}}function Pt(n,r){if(1&n&&t.GkF(0,42),2&n){const e=t.oxw(3),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.requiredItem)}}function Qt(n,r){if(1&n&&t.GkF(0,42),2&n){const e=t.oxw(3),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.exceededCharacterMaxLimit)}}function qt(n,r){if(1&n&&(t.TgZ(0,"div",47),t.YNc(1,Pt,1,2,"ng-container",41),t.YNc(2,Qt,1,2,"ng-container",41),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.scEditForm.controls.name.errors?null:e.scEditForm.controls.name.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.scEditForm.controls.name.errors?null:e.scEditForm.controls.name.errors.maxlength)}}function Vt(n,r){if(1&n&&t.GkF(0,42),2&n){const e=t.oxw(3),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.exceededCharacterMaxLimit)}}function jt(n,r){if(1&n&&t.GkF(0,42),2&n){const e=t.oxw(3),o=t.MAs(13);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.fullWidthKatakanaRestrictionViolation)}}function Kt(n,r){if(1&n&&(t.TgZ(0,"div",47),t.YNc(1,Vt,1,2,"ng-container",41),t.YNc(2,jt,1,2,"ng-container",41),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.scEditForm.controls.furi.errors?null:e.scEditForm.controls.furi.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==e.scEditForm.controls.furi.errors?null:e.scEditForm.controls.furi.errors.pattern)}}function zt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",8),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleClickSaveButton())}),t.TgZ(2,"div",9)(3,"h2",10),t._uU(4,"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u540d\u79f0\u5165\u529b"),t.qZA(),t._UZ(5,"hr",11),t.TgZ(6,"div",12)(7,"div",13)(8,"div",14)(9,"div",15)(10,"div",16)(11,"div",17)(12,"p",18),t._uU(13),t.qZA(),t._UZ(14,"app-file",19),t.YNc(15,Ut,2,1,"div",20),t.YNc(16,Nt,3,2,"ng-template",null,21,t.W1O),t.qZA()(),t.TgZ(18,"div",22)(19,"div",15)(20,"app-select-container",23)(21,"div",24)(22,"span",25),t._uU(23,"\u7b2c1\u5206\u985e\u9078\u629e"),t.qZA(),t.TgZ(24,"span",26),t._uU(25,"\u5fc5\u9808"),t.qZA()(),t.YNc(26,wt,2,1,"div",27),t.qZA(),t.TgZ(27,"app-select-container",28)(28,"div",24)(29,"span",25),t._uU(30,"\u5e97\u8217\u9078\u629e"),t.qZA(),t.TgZ(31,"span",26),t._uU(32,"\u5fc5\u9808"),t.qZA()(),t.YNc(33,Yt,2,1,"div",27),t.qZA()(),t.TgZ(34,"div",29)(35,"app-text-container",30)(36,"div",24)(37,"span",25),t._uU(38,"\u7b2c2\u5206\u985e\u540d\uff0820\u6587\u5b57\u4ee5\u5185\uff09"),t.qZA(),t.TgZ(39,"span",26),t._uU(40,"\u5fc5\u9808"),t.qZA()(),t.YNc(41,qt,3,2,"div",27),t.qZA(),t.TgZ(42,"app-text-container",31)(43,"div",24)(44,"span",25),t._uU(45,"\u7b2c2\u5206\u985e\u540d\u30ab\u30ca\uff08\u5168\u89d2\u30ab\u30ca20\u6587\u5b57\u4ee5\u5185\uff09"),t.qZA()(),t.YNc(46,Kt,3,2,"div",27),t.qZA()()()()()()()(),t.TgZ(47,"div",32)(48,"app-button",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleClickClearButton())}),t._uU(49,"\u30af\u30ea\u30a2"),t.qZA(),t.TgZ(50,"app-button",34),t._uU(51," \u4fdd\u5b58"),t.qZA()()(),t.BQk()}if(2&n){const e=t.MAs(17),o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.scEditForm),t.xp6(12),t.hij(" \u203b \u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u306f\u6700\u5927",o.maxFileSizeForDisplay,"M\u30d0\u30a4\u30c8 "),t.xp6(1),t.Q6J("formCtrl",o.scEditForm.controls.image),t.xp6(1),t.Q6J("ngIf",void 0!==o.sc.image_path&&""!==o.sc.image_path&&void 0===o.imageUrl)("ngIfElse",e),t.xp6(5),t.Q6J("formCtrl",o.scEditForm.controls.product_book_first_category_id)("options",o.fcOptions)("invalid",o.formControlStateManager(o.scEditForm.controls.product_book_first_category_id)),t.xp6(6),t.Q6J("ngIf",o.formControlStateManager(o.scEditForm.controls.product_book_first_category_id)),t.xp6(1),t.Q6J("formCtrl",o.scEditForm.controls.store_id)("options",o.storeOptions)("invalid",o.formControlStateManager(o.scEditForm.controls.store_id)),t.xp6(6),t.Q6J("ngIf",o.formControlStateManager(o.scEditForm.controls.store_id)),t.xp6(2),t.Q6J("formCtrl",o.scEditForm.controls.name)("invalid",o.formControlStateManager(o.scEditForm.controls.name)),t.xp6(6),t.Q6J("ngIf",o.formControlStateManager(o.scEditForm.controls.name)),t.xp6(1),t.Q6J("formCtrl",o.scEditForm.controls.furi)("invalid",o.formControlStateManager(o.scEditForm.controls.furi)),t.xp6(4),t.Q6J("ngIf",o.formControlStateManager(o.scEditForm.controls.furi)),t.xp6(4),t.Q6J("buttonDisabled",o.scEditForm.invalid||o.formInvalid||o.scEditForm.pristine)}}function Gt(n,r){if(1&n&&(t.TgZ(0,"p",48),t._uU(1),t.qZA()),2&n){const e=r.message;t.xp6(1),t.hij(" ",e," ")}}const Ht=function(){return{path:"/setting",text:"\u8a2d\u5b9a\u4e00\u89a7"}},Xt=function(){return{path:"/setting/product-book-second-category",text:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u4e00\u89a7"}},$t=function(n){return{path:n,text:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u8a73\u7d30"}},Wt=function(){return{text:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u7de8\u96c6"}},te=function(n,r,e,o){return[n,r,e,o]};let ee=(()=>{class n{constructor(e,o,i,a,l,d,m,b,k,N,R){this.formBuilder=e,this.modalService=o,this.router=i,this.route=a,this.pbFirstCategoryService=l,this.pbSecondCategoryService=d,this.storeService=m,this.errorService=b,this.flashMessageService=k,this.sanitizer=N,this.common=R,this.exceededCharacterMaxLimit={message:p.c.FORM_ERROR.EXCEEDED_CHARACTER_MAX_LIMIT},this.requiredItem={message:p.c.FORM_ERROR.REQUIRED_ITEM},this.exceededFileSizeLimit={message:p.c.FORM_ERROR.EXCEEDED_FILE_SIZE_LIMIT},this.fullWidthKatakanaRestrictionViolation={message:p.c.FORM_ERROR.FULL_WIDTH_KATAKANA_RESTRICTION_VIOLATION},this.subscription=new A.w0,this.fcOptions=[],this.storeOptions=[],this.formInvalid=!0,this.cancelModalTitle="\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u7de8\u96c6\u30ad\u30e3\u30f3\u30bb\u30eb\uff1a"+u.yR.TITLE.CANCEL,this.getPathErrorModalTitle="\u30d1\u30e9\u30e1\u30fc\u30bf\u53d6\u5f97\u30a8\u30e9\u30fc\uff1a"+u.yR.TITLE.HAS_ERROR,this.maxFileSizeForDisplay=C.s.IMAGE_MAX_FILE_SIZE_FOR_DISPLAY,this.sc={image_path:"",id:0,product_book_first_category_id:0,book_cd:"",store_id:0,name:"",furi:"",created_at:"",created_id:0,employee_updated_last_name:"",employee_updated_first_name:""},this.scEditForm=this.formBuilder.group({image:null,product_book_first_category_id:[this.sc.product_book_first_category_id,[c.kI.required]],store_id:[this.sc.store_id,[c.kI.required]],name:[this.sc.name,[c.kI.required,c.kI.maxLength(20)]],furi:[this.sc.furi,[c.kI.maxLength(20),c.kI.pattern(P.m.FULL_WIDTH_KATAKANA_REG_EX)]]})}ngOnInit(){this.subscription.add(this.modalService.closeEventObservable$.pipe((0,E.h)(o=>this.modalService.getModalProperties().title===this.getPathErrorModalTitle)).subscribe(o=>{o===u.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl("/setting/product-book-second-category")}));const e=this.route.snapshot.paramMap.get("id");null!==e?isNaN(Number(e))?this.modalService.setModal(this.getPathErrorModalTitle,u.yR.BODY.HAS_ERROR,"danger",u.yR.BUTTON_TITLE.CLOSE):(this.selectedId=Number(e),this.detailPath="/setting/product-book-second-category/detail/"+this.selectedId,this.subscription.add(this.modalService.closeEventObservable$.pipe((0,E.h)(o=>this.modalService.getModalProperties().title===this.cancelModalTitle)).subscribe(o=>{o===u.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl(this.detailPath)})),this.subscription.add(this.scEditForm.controls.image.valueChanges.subscribe(o=>{this.updatePreviewElements(o)})),this.subscription.add(this.scEditForm.valueChanges.subscribe(o=>{this.checkFormDefaultValueChanged(o)})),this.getDisplayData()):this.modalService.setModal(this.getPathErrorModalTitle,u.yR.BODY.HAS_ERROR,"danger",u.yR.BUTTON_TITLE.CLOSE)}getDisplayData(){this.common.loading=!0,this.subscription.add((0,Y.D)([this.pbSecondCategoryService.find(this.selectedId),this.pbFirstCategoryService.getAll(),this.storeService.getAll()]).pipe((0,h.K)(e=>(0,f.of)(e))).subscribe(e=>{if(this.common.loading=!1,e instanceof v.UA)this.handleError(e.status,e.error.message);else if(Array.isArray(e)&&3===e.length){const o=(0,F.bz)(e[0]),i=(0,F.bz)(e[1]),a=(0,F.bz)(e[2]);if(o||i||a)return void this.handleError(400,p.c.COULD_NOT_GET_DATA);e[1].data.map(m=>{this.fcOptions.push({value:m.id,text:m.name})}),e[2].data.map(m=>{this.storeOptions.push({value:m.id,text:m.name})}),this.sc=e[0].data[0],this.beforeUpdateData=e[0].data[0],this.scEditForm.patchValue(this.sc)}else this.handleError(400,p.c.COULD_NOT_GET_DATA)}))}checkFormDefaultValueChanged(e){const o={product_book_first_category_id:this.beforeUpdateData.product_book_first_category_id,store_id:this.beforeUpdateData.store_id,name:this.beforeUpdateData.name,furi:this.beforeUpdateData.furi},i=JSON.stringify(e),a=JSON.stringify(o);this.formInvalid=i===a}limitFileSizeValidator(){return e=>{const o=e.value;return o?.size&&o?.size>C.s.IMAGE_MAX_FILE_SIZE?(this.scEditForm.controls.image.setValue(null),{limitFileSize:{errorMessage:this.exceededFileSizeLimit}}):null}}updatePreviewElements(e){if(e){const o=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(e));this.imageUrl=o,this.imageFileName=e.name,this.formInvalid=!1}else this.imageUrl=void 0,this.imageFileName=void 0,this.formInvalid=!0}formControlStateManager(e){return(e.touched||e.dirty)&&e.invalid}handleClickDeleteIcon(){this.scEditForm.controls.image.setValue(null)}handleClickClearButton(){this.scEditForm.reset(this.beforeUpdateData),this.formInvalid=!0}handleClickCancel(){this.formInvalid&&this.scEditForm.pristine?this.router.navigateByUrl(this.detailPath):this.modalService.setModal(this.cancelModalTitle,u.yR.BODY.CANCEL,"warning",u.yR.BUTTON_TITLE.EXECUTION,u.yR.BUTTON_TITLE.CANCEL)}handleClickSaveButton(){this.formInvalid=!0,this.common.loading=!0;const e=this.scEditForm.value;return this.fcOptions.some(a=>Number(a.value)===Number(e.product_book_first_category_id))?this.storeOptions.some(a=>Number(a.value)===Number(e.store_id))?void this.subscription.add(this.pbSecondCategoryService.update(this.selectedId,e).pipe((0,h.K)(a=>(0,f.of)(a))).subscribe(a=>{this.common.loading=!1,a instanceof v.UA?this.handleError(a.status,a.error.message):(this.flashMessageService.setFlashMessage(a.message,"success",15e3),this.router.navigateByUrl(this.detailPath))})):(this.scEditForm.controls.store_id.setValue(null),this.formInvalid=!0,void(this.common.loading=!1)):(this.scEditForm.controls.product_book_first_category_id.setValue(null),this.formInvalid=!0,void(this.common.loading=!1))}handleError(e,o){this.errorService.setError({status:e,title:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u7de8\u96c6\u30a8\u30e9\u30fc\uff1a"+u.yR.TITLE.HAS_ERROR,message:o})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.qu),t.Y36(y.Z),t.Y36(_.F0),t.Y36(_.gz),t.Y36(Q.R),t.Y36(Z.X),t.Y36(q.d),t.Y36(T.T),t.Y36(I.P),t.Y36(j.H7),t.Y36(x.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit"]],decls:14,vars:13,consts:[[3,"breadcrumbList"],[1,"mb-20"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"cursor-pointer",3,"click"],[1,"width-limit-break","border-t","border-gray-400"],[4,"ngIf"],["em",""],[3,"formGroup","ngSubmit"],[1,"mt-8","mb-24","pt-8","pb-20","px-6","bg-white","shadow","border","border-gray-300"],[1,"text-lg"],[1,"border-t-primary-light-hover","border-t-4"],[1,"mt-6","flex","flex-row","gap-10"],[1,"grow"],[1,"p-6","border-t","border-r","border-l","border-t-gray-200","border-r-gray-200","border-l-gray-200","shadow"],[1,"flex","flex-row","gap-4"],[1,"max-w-[300px]","w-[300px]"],[1,"px-2","pb-2"],[1,"text-sm"],["text","\u30ed\u30b4\u753b\u50cf\u9078\u629e","accept","image/png, image/jpeg",3,"formCtrl"],["class","mt-4",4,"ngIf","ngIfElse"],["selectedLogoImage",""],[1,"flex","flex-col","w-2/3"],["nameAttrValue","product_book_first_category_id","idAttrValue","product-book-first-category-id",1,"w-1/2",3,"formCtrl","options","invalid"],[1,"flex","flex-row","items-center"],[1,"inline-block","mr-2"],[1,"px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],["class","mt-1 pl-1 text-sm","message","",4,"ngIf"],["nameAttrValue","store_id","idAttrValue","store-id",1,"w-1/2",3,"formCtrl","options","invalid"],[1,"flex","flex-row","mt-6","gap-4"],["inputType","text","nameAttrValue","name","idAttrValue","name",1,"w-1/2",3,"formCtrl","invalid"],["inputType","text","nameAttrValue","furi","idAttrValue","furi",1,"w-1/2",3,"formCtrl","invalid"],[1,"width-limit-break","bg-primary-light","flex","flex-row","justify-center","bottom-[40px]","left-0","right-0","p-2","fixed","gap-8"],["btnType","button",3,"click"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success",3,"buttonDisabled"],[1,"mt-4"],[1,"border","border-gray-200","shadow","rounded-md",3,"src"],[1,"mt-2","text-center"],["class","mt-2 text-sm text-danger",4,"ngIf","ngIfElse"],["correctImage",""],[1,"mt-2","text-sm","text-danger"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","mt-4",4,"ngIf"],["alt","\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u30ed\u30b4\u753b\u50cf",1,"border","border-gray-200","shadow","rounded-md",3,"src"],[1,"flex","flex-row","items-center","mt-2"],["icon","delete-bin-line",1,"w-6","cursor-pointer","ml-2","fill-red-500",3,"click"],["message","",1,"mt-1","pl-1","text-sm"],[1,"text-sm","text-red"]],template:function(e,o){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main",1)(2,"h1",2),t._uU(3,"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u7de8\u96c6"),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t.NdJ("click",function(){return o.handleClickCancel()}),t._UZ(6,"app-cancel-link-org"),t.qZA(),t.TgZ(7,"div")(8,"app-last-updater-org"),t._uU(9),t.qZA()()(),t._UZ(10,"hr",5),t.YNc(11,zt,52,20,"ng-container",6),t.qZA(),t.YNc(12,Gt,2,1,"ng-template",null,7,t.W1O)),2&e&&(t.Q6J("breadcrumbList",t.l5B(8,te,t.DdM(3,Ht),t.DdM(4,Xt),t.VKq(5,$t,o.detailPath),t.DdM(7,Wt))),t.xp6(9),t.hij(" \u6700\u7d42\u66f4\u65b0\u8005\uff1a",o.common.loading?"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d...":o.sc.employee_updated_last_name+" "+o.sc.employee_updated_first_name," "),t.xp6(2),t.Q6J("ngIf",!o.common.loading))},dependencies:[g.O5,g.tP,c._Y,c.JL,c.sg,S.Z,B.R,D.o,K.K,L.O,U.r,z.d,O.P]}),n})();var M=s(7579);const oe=["*"];let ne=(()=>{class n{constructor(e){this.formBuilder=e,this.searchEvent=new t.vpe,this.errorEvent=new t.vpe,this.searchForm=this.formBuilder.group({name:""})}handleClickClearButton(){Object.values(this.searchForm.controls).map(e=>e.patchValue(""))}handleClickSubmitButton(){this.searchEvent.emit(this.searchForm.value)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-search"]],outputs:{searchEvent:"searchEvent",errorEvent:"errorEvent"},ngContentSelectors:oe,decls:12,vars:3,consts:[[3,"formGroup","ngSubmit"],[1,"flex"],[1,"w-1/3",3,"formCtrl"],[1,"mt-2"],[1,"mr-4",3,"click"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success",3,"buttonDisabled"],[1,"mt-2","text-sm","text-red"]],template:function(e,o){1&e&&(t.F$t(),t.TgZ(0,"div")(1,"form",0),t.NdJ("ngSubmit",function(){return o.handleClickSubmitButton()}),t.TgZ(2,"div",1)(3,"app-text-container",2),t.Hsn(4),t.qZA()(),t.TgZ(5,"div",3)(6,"app-button",4),t.NdJ("click",function(){return o.handleClickClearButton()}),t._uU(7," \u5165\u529b\u5185\u5bb9\u30af\u30ea\u30a2 "),t.qZA(),t.TgZ(8,"app-button",5),t._uU(9," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),t.qZA()(),t.TgZ(10,"p",6),t._uU(11," \u203b \u5165\u529b\u5185\u5bb9\u3092\u30af\u30ea\u30a2\u3057\u305f\u5f8c\u306b\u7d5e\u308a\u8fbc\u307f\u5b9f\u884c\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u5168\u3066\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002 "),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.searchForm),t.xp6(2),t.Q6J("formCtrl",o.searchForm.controls.name),t.xp6(5),t.Q6J("buttonDisabled",o.searchForm.invalid||o.searchForm.pristine))},dependencies:[c._Y,c.JL,c.sg,L.O,U.r]}),n})();var re=s(8505),ie=s(3900),se=s(2640);function ae(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.selectedLcName+"\u306b\u5c5e\u3059\u308b")}}let ue=(()=>{class n{constructor(e,o){this.pbSecondCategoryService=e,this.common=o,this.subscription=new A.w0,this.errorEvent=new t.vpe,this.filter={},this.pages={page:1,itemsPerPage:10,sort:{column:"ID",order:"desc"}},this.tableParams=new M.x,this.tableNameMapping=[{name:"id",name_jp:"ID"},{name:"product_book_first_category_name",name_jp:"\u7b2c1\u5206\u985e\u540d"},{name:"name",name_jp:"\u7b2c2\u5206\u985e\u540d"},{name:"furi",name_jp:"\u30d5\u30ea\u30ac\u30ca"},{name:"book_cd",name_jp:"\u30d6\u30c3\u30af\u30b3\u30fc\u30c9"},{name:"updated_at",name_jp:"\u6700\u7d42\u66f4\u65b0\u65e5\u6642"}]}ngOnInit(){this.getTableData(),this.tableEvent.next(this.pages)}getTableData(){this.subscription.add(this.tableEvent.pipe((0,re.b)(e=>this.common.loading=!0),(0,ie.w)(e=>this.pbSecondCategoryService.getAll(this.createApiParams(e))),(0,h.K)(e=>(0,f.of)(e))).subscribe({next:e=>{this.common.loading=!1,e instanceof v.UA?this.handleError(e.status,e.error.message):this.tableParams.next(this.createTableParams(e))},complete:()=>this.getTableData()}))}createApiParams(e){this.isTableWithPaginationEvent(e)?this.pages=e:(this.filter=e,this.pages.page=1);const i=this.tableNameMapping.find(a=>a.name_jp===this.pages.sort.column)?.name;return{...this.filter,limit:this.pages.itemsPerPage,offset:(this.pages.page-1)*this.pages.itemsPerPage,sort:i?`${i}:${this.pages.sort.order}`:"",product_book_first_category_id:this.selectedLcId?this.selectedLcId:""}}isTableWithPaginationEvent(e){const{page:o,itemsPerPage:i,sort:a}=e;return"number"==typeof o&&"number"==typeof i&&"object"==typeof a}createTableParams(e){const o=this.tableNameMapping.map(a=>a.name_jp),i=e.data.map(a=>this.tableNameMapping.map(l=>a[l.name]));return i.forEach(a=>{let l=-1;l=o.indexOf("ID"),a[l]={href:`/setting/product-book-second-category/detail/${a[l]}`,text:a[l]+""},l=o.indexOf("\u6700\u7d42\u66f4\u65b0\u65e5\u6642"),a[l]=a[l]?new Date(a[l]).toLocaleString():"\u672a\u767b\u9332"}),{total:e.totalItems,header:o,body:i}}handleError(e,o){this.errorEvent.emit({status:e,title:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u4e00\u89a7\uff1a"+u.yR.TITLE.HAS_ERROR,message:o})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.X),t.Y36(x.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-table"]],inputs:{tableEvent:"tableEvent",selectedLcId:"selectedLcId",selectedLcName:"selectedLcName"},outputs:{errorEvent:"errorEvent"},decls:3,vars:3,consts:[[3,"params","loading","pageChange"],[4,"ngIf"]],template:function(e,o){1&e&&(t.TgZ(0,"app-table-with-pagination",0),t.NdJ("pageChange",function(a){return o.tableEvent.next(a)}),t.YNc(1,ae,2,1,"span",1),t._uU(2," \u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u4e00\u89a7\n"),t.qZA()),2&e&&(t.Q6J("params",o.tableParams)("loading",o.common.loading),t.xp6(1),t.Q6J("ngIf",o.selectedLcName))},dependencies:[g.O5,se.i]}),n})();var ce=s(3360),le=s(2167);function de(n,r){if(1&n&&(t.TgZ(0,"div",10)(1,"app-back-to-link-org",11),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.MGl("path","/setting/product-book-first-category/detail/",e.selectedLcId,""),t.xp6(1),t.hij("",e.selectedLcName," \u306e\u8a73\u7d30\u3078\u623b\u308b")}}const me=function(){return{path:"/setting",text:"\u8a2d\u5b9a\u4e00\u89a7"}},pe=function(){return{text:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u4e00\u89a7"}},ge=function(n,r){return[n,r]},_e=function(n,r){return{"justify-between":n,"justify-end":r}};let he=(()=>{class n{constructor(e,o){this.errorService=e,this.route=o,this.subscription=new A.w0,this.parentSearchEvent=new M.x,this.parentTableEvent=new M.x}ngOnInit(){this.subscription.add(this.parentSearchEvent.subscribe(o=>{this.parentTableEvent.next(o)}));const e=this.route.snapshot.queryParams;e.id&&e.name&&(this.selectedLcId=e.id,this.selectedLcName=e.name)}ngOnDestroy(){this.subscription.unsubscribe()}handleError(e){this.errorService.setError({status:e.status,title:e.title,message:e.message})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.T),t.Y36(_.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],decls:14,vars:14,consts:[[3,"breadcrumbList"],[1,"mt-8","mb-20"],[3,"searchEvent","errorEvent"],[1,"flex","items-center","mt-8","mb-2","justify-between",3,"ngClass"],["class","ml-4",4,"ngIf"],[1,"flex","flex-row"],[1,"mr-4"],["path","/setting/product-book-second-category/add"],["path","/setting/product-book-second-category/bulk-add"],[3,"tableEvent","selectedLcId","selectedLcName","errorEvent"],[1,"ml-4"],[3,"path"]],template:function(e,o){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main",1)(2,"div")(3,"app-search",2),t.NdJ("searchEvent",function(a){return o.parentSearchEvent.next(a)})("errorEvent",function(a){return o.handleError(a)}),t._uU(4," \u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u540d\u3067\u7d5e\u308a\u8fbc\u307f"),t.qZA()(),t.TgZ(5,"div",3),t.YNc(6,de,3,2,"div",4),t.TgZ(7,"div",5)(8,"div",6),t._UZ(9,"app-new-registration-link-org",7),t.qZA(),t.TgZ(10,"div"),t._UZ(11,"app-bulk-registration-link-org",8),t.qZA()()(),t.TgZ(12,"div")(13,"app-table",9),t.NdJ("errorEvent",function(a){return o.handleError(a)}),t.qZA()()()),2&e&&(t.Q6J("breadcrumbList",t.WLB(8,ge,t.DdM(6,me),t.DdM(7,pe))),t.xp6(5),t.Q6J("ngClass",t.WLB(11,_e,o.selectedLcId,!o.selectedLcId)),t.xp6(1),t.Q6J("ngIf",o.selectedLcId),t.xp6(7),t.Q6J("tableEvent",o.parentTableEvent)("selectedLcId",o.selectedLcId)("selectedLcName",o.selectedLcName))},dependencies:[g.mk,g.O5,S.Z,ne,ue,ce.S,G.i,le.p]}),n})();var fe=s(8746),Ce=s(1914),be=s(2482);function ve(n,r){1&n&&(t.TgZ(0,"span",24),t._uU(1," \u5fc5\u9808 "),t.qZA())}function Ae(n,r){if(1&n&&(t.TgZ(0,"li",20)(1,"div",21),t._uU(2),t.YNc(3,ve,2,0,"span",22),t.qZA(),t.TgZ(4,"div",23),t._uU(5),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf",e.required),t.xp6(2),t.Oqu(e.description)}}function Ee(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",25)(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"app-icon",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleClickDeleteIcon())}),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.fileName)}}const xe=function(){return{path:"/setting",text:"\u8a2d\u5b9a\u4e00\u89a7"}},Te=function(){return{path:"/setting/product-book-second-category",text:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u4e00\u89a7"}},Fe=function(){return{text:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u4e00\u62ec\u767b\u9332"}},ye=function(n,r,e){return[n,r,e]},Ze=[{path:"",component:W,children:[{path:"",component:he},{path:"detail/:id",component:Bt},{path:"edit/:id",component:ee},{path:"add",component:vt},{path:"bulk-add",component:(()=>{class n{constructor(e,o,i,a,l,d,m,b){this.formBuilder=e,this.authorService=o,this.modalService=i,this.router=a,this.pbSecondCategoryService=l,this.flashMessageService=d,this.errorService=m,this.common=b,this.subscription=new A.w0,this.fileNamePrefix="\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e",this.cancelModalTitle="\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u4e00\u62ec\u767b\u9332\u30ad\u30e3\u30f3\u30bb\u30eb\uff1a"+u.yR.TITLE.CANCEL,this.exceededFileSizeLimit=C.s.IMAGE_MAX_FILE_SIZE,this.maxFileSizeForDisplay=C.s.IMAGE_MAX_FILE_SIZE_FOR_DISPLAY,this.isUploadable=!1,this.scBulkAddForm=this.formBuilder.group({file:[null,[this.limitFileSizeValidator()]]}),this.descriptions=[{title:"id",description:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985eID\uff08\u534a\u89d2\u6570\u5b57\uff09\u203b\u7a7a\u6b04\u306b\u3059\u308b\u3068\u65b0\u898f\u767b\u9332\u306b\u306a\u308a\u307e\u3059\u3002"},{title:"name",description:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u540d\uff0820\u6587\u5b57\u4ee5\u5185\uff09",required:!0},{title:"furi",description:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u540d\u30ab\u30ca\uff0820\u6587\u5b57\u4ee5\u5185\uff09"},{title:"product_book_first_category_id",description:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c1\u5206\u985eID\uff08\u534a\u89d2\u6570\u5b57\uff09",required:!0},{title:"store_id",description:"\u5e97\u8217ID\uff08\u534a\u89d2\u6570\u5b57\uff09",required:!1}]}ngOnInit(){this.template$=this.pbSecondCategoryService.getCsv("template").pipe((0,h.K)(this.handleCatchError("")),(0,fe.x)(()=>this.common.loading=!1)),this.subscription.add(this.scBulkAddForm.controls.file.valueChanges.subscribe(e=>{this.updatePreviewElements(e)})),this.authorService.author?this.author=this.authorService.author:this.subscription.add(this.authorService.author$.subscribe(e=>{this.author=e})),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,E.h)(e=>this.modalService.getModalProperties().title===this.cancelModalTitle)).subscribe(e=>{e===u.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl("/setting/product-book-second-category")}))}limitFileSizeValidator(){return e=>{const o=e.value;return o?.size&&o?.size>C.s.IMAGE_MAX_FILE_SIZE?(this.scBulkAddForm.controls.file.setValue(null),{limitFileSize:{errorMessage:this.exceededFileSizeLimit}}):null}}handleCatchError(e){return o=>(console.error(o),(0,f.of)(e))}handleError(e,o){this.errorService.setError({status:e,title:"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u4e00\u62ec\u767b\u9332\u30a8\u30e9\u30fc\uff1a"+u.yR.TITLE.HAS_ERROR,message:o})}handleClickCancel(){this.isUploadable?this.modalService.setModal(this.cancelModalTitle,u.yR.BODY.CANCEL,"warning",u.yR.BUTTON_TITLE.EXECUTION,u.yR.BUTTON_TITLE.CANCEL):this.router.navigateByUrl("/setting/product-book-second-category")}handleClickUploadButton(){this.isUploadable=!1,this.common.loading=!0,this.subscription.add(this.pbSecondCategoryService.bulkAdd(this.scBulkAddForm.controls.file.value).pipe((0,h.K)(e=>(0,f.of)(e))).subscribe(e=>{this.common.loading=!1,e instanceof v.UA?this.handleError(e.status,e.error.message):(this.flashMessageService.setFlashMessage(e.message,"success",15e3),this.router.navigateByUrl("/setting/product-book-second-category"))}))}handleClickDeleteIcon(){this.scBulkAddForm.controls.file.setValue(null)}updatePreviewElements(e){e?(this.fileName=e.name,this.isUploadable=!0):(this.fileName=void 0,this.isUploadable=!1)}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.qu),t.Y36(V.Y),t.Y36(y.Z),t.Y36(_.F0),t.Y36(Z.X),t.Y36(I.P),t.Y36(T.T),t.Y36(x.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bulk-add"]],decls:27,vars:17,consts:[[3,"breadcrumbList"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"cursor-pointer",3,"click"],["icon","close-line","appendClassForIcon","fill-danger group-hover:fill-danger-hover"],[1,"text-gray-900","group-hover:text-danger-hover"],[3,"roleTypeName"],[1,"width-limit-break","border-t","border-gray-400"],[1,"flex","justify-end"],[1,"flex","justify-end","mt-8",3,"api$","fileNamePrefix","statusChange"],[1,"mt-2","mb-28","py-8","px-6","bg-white","shadow","border","border-gray-300"],[1,"text-lg","mb-4"],[1,"mb-8"],["class","flex border border-b-0 last:border-b border-slate-400",4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],[1,"flex","justify-between","mb-2"],[1,"flex","items-center"],["text","\u30d5\u30a1\u30a4\u30eb\u9078\u629e","accept","text/csv",3,"formCtrl"],[4,"ngIf"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success",3,"buttonDisabled"],[1,"flex","border","border-b-0","last:border-b","border-slate-400"],[1,"flex","items-center","w-[400px]","bg-slate-100","p-4"],["class","px-3 py-0.5 ml-2 text-xs text-white bg-warning-dark rounded-full",4,"ngIf"],[1,"grow","p-4"],[1,"px-3","py-0.5","ml-2","text-xs","text-white","bg-warning-dark","rounded-full"],[1,"flex","flex-row","items-center"],["icon","delete-bin-line",1,"w-6","cursor-pointer","ml-2","fill-red-500",3,"click"]],template:function(e,o){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main")(2,"h1",1),t._uU(3,"\u5546\u54c1\u30d6\u30c3\u30af\u7b2c2\u5206\u985e\u4e00\u62ec\u767b\u9332"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3),t.NdJ("click",function(){return o.handleClickCancel()}),t.TgZ(6,"app-icon-container",4)(7,"p",5),t._uU(8,"\u30ad\u30e3\u30f3\u30bb\u30eb"),t.qZA()()(),t.TgZ(9,"div")(10,"app-last-updater-org",6),t._uU(11),t.qZA()()(),t._UZ(12,"hr",7),t.TgZ(13,"div",8)(14,"app-template-download-link-org",9),t.NdJ("statusChange",function(a){return o.common.loading=!!a}),t.qZA()(),t.TgZ(15,"div",10)(16,"p",11),t._uU(17,"CSV\u30d5\u30a1\u30a4\u30eb\u306e\u30d8\u30c3\u30c0\u30fc\u3068\u5024"),t.qZA(),t.TgZ(18,"ul",12),t.YNc(19,Ae,6,3,"li",13),t.qZA(),t.TgZ(20,"form",14),t.NdJ("ngSubmit",function(){return o.handleClickUploadButton()}),t.TgZ(21,"div",15)(22,"div",16),t._UZ(23,"app-file",17),t.YNc(24,Ee,5,1,"ng-container",18),t.qZA(),t.TgZ(25,"app-button",19),t._uU(26," \u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u5b9f\u884c "),t.qZA()()()()()),2&e&&(t.Q6J("breadcrumbList",t.kEZ(13,ye,t.DdM(10,xe),t.DdM(11,Te),t.DdM(12,Fe))),t.xp6(10),t.Q6J("roleTypeName",o.author&&o.author.role_name?o.author.role_name:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."),t.xp6(1),t.hij(" \u767b\u9332\u8005\uff1a",o.author?o.author.last_name+" "+o.author.first_name:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),t.xp6(3),t.Q6J("api$",o.template$)("fileNamePrefix",o.fileNamePrefix),t.xp6(5),t.Q6J("ngForOf",o.descriptions),t.xp6(1),t.Q6J("formGroup",o.scBulkAddForm),t.xp6(3),t.Q6J("formCtrl",o.scBulkAddForm.controls.file),t.xp6(1),t.Q6J("ngIf",o.fileName),t.xp6(1),t.Q6J("buttonDisabled",o.scBulkAddForm.invalid||!o.isUploadable))},dependencies:[g.sg,g.O5,c._Y,c.JL,c.sg,S.Z,B.R,D.o,U.r,Ce.J,be.V,O.P]}),n})()}]}];let Se=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.Bz.forChild(Ze),_.Bz]}),n})();var Ie=s(9307),H=s(5274),X=s(3894);let Be=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,c.UX,H.s,X.h]}),n})();var De=s(4560);let Ue=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,De.Z]}),n})();var Le=s(4933),Oe=s(9104),Me=s(3042),ke=s(3962),Ne=s(2923),Re=s(4470),we=s(8511),Je=s(3560),Ye=s(6968),Pe=s(9434),Qe=s(1326),qe=s(6321),Ve=s(4663),je=s(7766);let Ke=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[x.v],imports:[g.ez,Se,c.UX,Ie.u,Be,Ue,Le.M,Oe.u,Me.C,ke.J,Ne.D,Re.x,we.Q,Je.r,H.s,X.h,Ye.V,Pe.H,Qe.z,qe.T,Ve.Q,je.X]}),n})()}}]);