"use strict";(self.webpackChunknisshin=self.webpackChunknisshin||[]).push([[425],{1451:(Z,O,o)=>{o.d(O,{d:()=>g});var u=o(1571),m=o(6303),C=o(1043);const A=["*",[["","message",""]]],T=["*","[message]"];let g=(()=>{class p{constructor(){this.invalid=!1}}return p.\u0275fac=function(E){return new(E||p)},p.\u0275cmp=u.Xpm({type:p,selectors:[["app-select-container"]],inputs:{nameAttrValue:"nameAttrValue",idAttrValue:"idAttrValue",formCtrl:"formCtrl",invalid:"invalid",labelSize:"labelSize",options:"options"},ngContentSelectors:T,decls:6,vars:7,consts:[[1,"flex","flex-col"],[1,"ml-1","mb-1",3,"labelSize","forAttrValue"],[3,"nameAttrValue","idAttrValue","formCtrl","options","invalid"]],template:function(E,_){1&E&&(u.F$t(A),u.TgZ(0,"div",0)(1,"app-label",1),u.Hsn(2),u.qZA(),u.TgZ(3,"div"),u._UZ(4,"app-select",2),u.Hsn(5,1),u.qZA()()),2&E&&(u.xp6(1),u.Q6J("labelSize",_.labelSize)("forAttrValue",_.idAttrValue),u.xp6(3),u.Q6J("nameAttrValue",_.nameAttrValue)("idAttrValue",_.idAttrValue)("formCtrl",_.formCtrl)("options",_.options)("invalid",_.invalid))},dependencies:[m._,C.H]}),p})()},9434:(Z,O,o)=>{o.d(O,{H:()=>T});var u=o(6895),m=o(6320),C=o(8460),A=o(1571);let T=(()=>{class g{}return g.\u0275fac=function(t){return new(t||g)},g.\u0275mod=A.oAB({type:g}),g.\u0275inj=A.cJS({imports:[u.ez,m.r,C.A]}),g})()},956:(Z,O,o)=>{o.d(O,{$:()=>C});var u=o(1571),m=o(1914);let C=(()=>{class A{constructor(){}}return A.\u0275fac=function(g){return new(g||A)},A.\u0275cmp=u.Xpm({type:A,selectors:[["app-delete-link-org"]],decls:4,vars:0,consts:[[1,"cursor-pointer"],["icon","delete-bin-line","appendClassForIcon","fill-danger group-hover:fill-danger-hover"],[1,"text-gray-900","group-hover:text-danger-hover"]],template:function(g,p){1&g&&(u.TgZ(0,"div",0)(1,"app-icon-container",1)(2,"p",2),u._uU(3,"\u524a\u9664"),u.qZA()()())},dependencies:[m.J]}),A})()},2923:(Z,O,o)=>{o.d(O,{D:()=>A});var u=o(6895),m=o(1326),C=o(1571);let A=(()=>{class T{}return T.\u0275fac=function(p){return new(p||T)},T.\u0275mod=C.oAB({type:T}),T.\u0275inj=C.cJS({imports:[u.ez,m.z]}),T})()},9425:(Z,O,o)=>{o.r(O),o.d(O,{PriceRankingModule:()=>oi});var u=o(6895),m=o(1690),C=o(727),A=o(5698),T=o(9300),g=o(8037),p=o(6585),t=o(1571),E=o(1609),_=o(2334),x=o(8832),F=o(2125);let I=(()=>{class i{constructor(e,n,r,a){this.modalService=e,this.router=n,this.errorService=r,this.common=a,this.isLoading=!1,this.subscription=new C.w0}ngOnInit(){this.subscription.add(this.errorService.getError().subscribe(e=>{this.handleError(e)})),this.subscription.add(this.common.loading$.subscribe(e=>{setTimeout(()=>this.isLoading=e)}))}handleError(e){e.redirectPath&&(this.redirectPath=e.redirectPath),this.modalService.setModal(e.title,0===e.status?e.message+g.c.GUIDANCE_OF_SUPPORT:`\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9: ${e.status} \n\u30e1\u30c3\u30bb\u30fc\u30b8: `+e.message+g.c.GUIDANCE_OF_SUPPORT,"danger",p.yR.BUTTON_TITLE.CLOSE,""),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,A.q)(1),(0,T.h)(r=>this.modalService.getModalProperties().title===e.title)).subscribe(r=>{this.redirectPath&&this.router.navigateByUrl(this.redirectPath)}))}ngOnDestroy(){this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(E.Z),t.Y36(m.F0),t.Y36(_.T),t.Y36(x.v))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-price-ranking"]],decls:2,vars:1,consts:[[3,"isLoading"]],template:function(e,n){1&e&&t._UZ(0,"router-outlet")(1,"app-loading-container",0),2&e&&(t.xp6(1),t.Q6J("isLoading",n.isLoading))},dependencies:[m.lC,F.o]}),i})();var d=o(7579),f=o(7030),v=o(529),M=o(4128),b=o(262),N=o(9646),tt=o(5450),Y=o(9042),S=o(1267),q=o(6232),G=o(2e3),h=o(4006),et=o(6082),J=o(5146),nt=o(3761),$=o(1451),it=o(9612),gt=o(3148);function mt(i,s){1&i&&t.GkF(0)}function ht(i,s){1&i&&t.GkF(0)}function ft(i,s){1&i&&t.GkF(0)}function vt(i,s){1&i&&t.GkF(0)}function Ct(i,s){1&i&&t.GkF(0,25)}function Tt(i,s){1&i&&t.GkF(0)}function xt(i,s){1&i&&t.GkF(0,25)}function Et(i,s){1&i&&(t.TgZ(0,"app-button",26),t._uU(1," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),t.qZA())}function At(i,s){1&i&&(t.TgZ(0,"app-button",27),t._uU(1," \u7d5e\u308a\u8fbc\u307f\u5b9f\u884c "),t.qZA())}function bt(i,s){1&i&&(t.TgZ(0,"span",30),t._uU(1,"\u5fc5\u9808"),t.qZA())}function Ot(i,s){if(1&i&&(t.TgZ(0,"div",28)(1,"span"),t._uU(2),t.qZA(),t.YNc(3,bt,2,0,"span",29),t.qZA()),2&i){const e=s.label,n=s.required;t.xp6(2),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",n)}}function St(i,s){if(1&i&&(t.TgZ(0,"p",31),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorConst.FORM_ERROR.DATE_TERM_TO_BEFORE_FROM," ")}}const Ft=function(){return{label:"\u5546\u54c1",required:!1}},Rt=function(){return{label:"\u5e97\u8217",required:!1}},Pt=function(){return{label:"\u30e9\u30f3\u30af",required:!1}},It=function(){return{label:"\u767b\u9332\u65e5",required:!1}},Dt=function(){return{label:"\u66f4\u65b0\u65e5",required:!1}};let Mt=(()=>{class i{constructor(e,n,r,a){this.divisionService=e,this.storeService=n,this.fb=r,this.productService=a,this.subscription=new C.w0,this.searchEvent=new t.vpe,this.isOpen=!1,this.rotateAnimation="",this.errorConst=g.c,this.searchForm=this.fb.group({product_id:"",product_name:"",store_id:"",rank_division_id:"",created_at:this.fb.group({from:"",to:""},{validators:[tt.d.beforeFromDate()]}),update_at:this.fb.group({from:"",to:""},{validators:[tt.d.beforeFromDate()]})})}get sfc(){return this.searchForm.controls}ngOnInit(){this.initOptions()}formControlStateManager(e){return(e.touched||e.dirty)&&e.invalid}initOptions(){this.subscription.add((0,M.D)([this.divisionService.getAsSelectOptions({name:Y.z.PRICE_RANKING}),this.storeService.getAsSelectOptions()]).pipe((0,b.K)(e=>(0,N.of)(e))).subscribe(e=>{e instanceof v.UA||(this.priceRankingDivisionOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...e[0][Y.z.PRICE_RANKING]],this.storeOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...e[1]])}))}getProductSuggests(){return{observable:this.productService.getAll({name:this.sfc.product_name.value}),idField:"id",nameField:"name"}}toggleSearchPanel(){this.isOpen=!this.isOpen,this.rotateAnimation=this.isOpen?"rotate-animation-180":"rotate-animation-0"}handleClickSearchClearButton(){this.searchForm.reset({product_id:"",product_name:"",store_id:"",rank_division_id:"",created_at:{from:"",to:""},update_at:{from:"",to:""}})}handleClickSearchSubmitButton(){const e=this.searchForm.value,r=(0,S.vP)({product_id:e.product_id,store_id:e.store_id,rank_division_id:e.rank_division_id,created_at:e.created_at,updated_at:e.update_at});this.searchEvent.emit((0,S.g3)(r))}ngOnDestroy(){this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.E),t.Y36(G.d),t.Y36(h.qu),t.Y36(et.M))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-search"]],outputs:{searchEvent:"searchEvent"},decls:39,vars:42,consts:[[1,"mt-8","mb-4"],[3,"click"],["icon","filter-2-line",1,"w-6"],[1,"inline-block","ml-1","mr-2"],["icon","arrow-down-s-fill",1,"w-6"],[1,"price-ranking-search","width-limit-break","bg-white",3,"ngClass"],[1,"w-[1280px]","mx-auto","px-4",3,"formGroup","submit"],[1,"flex","gap-6"],[1,"w-1/3"],["nameAttrValue","product_name","idAttrValue","product-name",3,"idCtrl","nameCtrl","apiInput","invalid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["nameAttrValue","store_id","idAttrValue","store-id",3,"formCtrl","options","invalid"],["nameAttrValue","rank_division_id","idAttrValue","rank-division-id",3,"formCtrl","options","invalid"],[1,"flex","gap-4","mt-6"],[1,"w-1/2"],["nameAttrValue","created_at","idAttrValue","created-at","toNameAttrValue","created_at_to","toIdAttrValue","created-at-to",3,"dateFromFormCtrl","dateToFormCtrl","invalid"],["message","",4,"ngIf","ngIfThen"],["nameAttrValue","update_at","idAttrValue","update-at","toNameAttrValue","update_at_to","toIdAttrValue","update-at-to",3,"dateFromFormCtrl","dateToFormCtrl","invalid"],[1,"flex","gap-8","mt-10"],["btnType","button",3,"click"],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover",4,"ngIf","ngIfElse"],[1,"mt-2","text-sm","text-red"],["disable",""],["labels",""],["beforeFromDate",""],["message",""],["btnType","submit","btnFillColor","bg-success","btnHoverColor","hover:bg-success-hover","btnTextColor","text-white","btnLineColor","border-success","btnLineHoverColor","hover:border-success-hover"],["btnFillColor","text-white bg-slate-300 hover:bg-slate-300"],[1,"flex","items-center","gap-2"],["class","px-3 py-0.5 text-xs text-white bg-warning-dark rounded-full",4,"ngIf"],[1,"px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],[1,"mt-1","pl-1","text-sm","text-red"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"app-button",1),t.NdJ("click",function(){return n.toggleSearchPanel()}),t._UZ(2,"app-icon",2),t.TgZ(3,"span",3),t._uU(4),t.qZA(),t._UZ(5,"app-icon",4),t.qZA()(),t.TgZ(6,"div",5)(7,"form",6),t.NdJ("submit",function(){return n.handleClickSearchSubmitButton()}),t.TgZ(8,"div",7)(9,"div",8)(10,"app-real-time-suggest-container",9),t.YNc(11,mt,1,0,"ng-container",10),t.qZA()(),t.TgZ(12,"div",8)(13,"app-select-container",11),t.YNc(14,ht,1,0,"ng-container",10),t.qZA()(),t.TgZ(15,"div",8)(16,"app-select-container",12),t.YNc(17,ft,1,0,"ng-container",10),t.qZA()()(),t.TgZ(18,"div",13)(19,"div",14)(20,"app-date-term-clear-container",15),t.YNc(21,vt,1,0,"ng-container",10),t.YNc(22,Ct,1,0,"ng-container",16),t.qZA()(),t.TgZ(23,"div",14)(24,"app-date-term-clear-container",17),t.YNc(25,Tt,1,0,"ng-container",10),t.YNc(26,xt,1,0,"ng-container",16),t.qZA()()(),t.TgZ(27,"div",18)(28,"app-button",19),t.NdJ("click",function(){return n.handleClickSearchClearButton()}),t._uU(29," \u5165\u529b\u5185\u5bb9\u30af\u30ea\u30a2 "),t.qZA(),t.YNc(30,Et,2,0,"app-button",20),t.qZA(),t.TgZ(31,"p",21),t._uU(32," \u203b \u5165\u529b\u5185\u5bb9\u3092\u30af\u30ea\u30a2\u3057\u305f\u5f8c\u306b\u7d5e\u308a\u8fbc\u307f\u5b9f\u884c\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u5168\u3066\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002 "),t.qZA()()(),t.YNc(33,At,2,0,"ng-template",null,22,t.W1O),t.YNc(35,Ot,4,2,"ng-template",null,23,t.W1O),t.YNc(37,St,2,1,"ng-template",null,24,t.W1O)),2&e){const r=t.MAs(34),a=t.MAs(36),c=t.MAs(38);t.xp6(4),t.hij(" ",n.isOpen?"\u7d5e\u308a\u8fbc\u307f\u30d5\u30a9\u30fc\u30e0\u975e\u8868\u793a":"\u7d5e\u308a\u8fbc\u307f\u30d5\u30a9\u30fc\u30e0\u8868\u793a"," "),t.xp6(1),t.Tol(n.rotateAnimation),t.xp6(1),t.Q6J("ngClass",n.isOpen?"is-open shadow":""),t.xp6(1),t.Q6J("formGroup",n.searchForm),t.xp6(3),t.Q6J("idCtrl",n.sfc.product_id)("nameCtrl",n.sfc.product_name)("apiInput",n.getProductSuggests())("invalid",n.formControlStateManager(n.sfc.product_id)),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(37,Ft)),t.xp6(2),t.Q6J("formCtrl",n.sfc.store_id)("options",n.storeOptions)("invalid",n.formControlStateManager(n.sfc.store_id)),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(38,Rt)),t.xp6(2),t.Q6J("formCtrl",n.sfc.rank_division_id)("options",n.priceRankingDivisionOptions)("invalid",n.formControlStateManager(n.sfc.rank_division_id)),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(39,Pt)),t.xp6(3),t.Q6J("dateFromFormCtrl",n.sfc.created_at.controls.from)("dateToFormCtrl",n.sfc.created_at.controls.to)("invalid",!!n.sfc.created_at.errors),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(40,It)),t.xp6(1),t.Q6J("ngIf",null==n.sfc.created_at.errors?null:n.sfc.created_at.errors.beforeFromDate)("ngIfThen",c),t.xp6(2),t.Q6J("dateFromFormCtrl",n.sfc.update_at.controls.from)("dateToFormCtrl",n.sfc.update_at.controls.to)("invalid",!!n.sfc.update_at.errors),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.DdM(41,Dt)),t.xp6(1),t.Q6J("ngIf",null==n.sfc.update_at.errors?null:n.sfc.update_at.errors.beforeFromDate)("ngIfThen",c),t.xp6(4),t.Q6J("ngIf",n.searchForm.valid)("ngIfElse",r)}},dependencies:[u.mk,u.O5,u.tP,h._Y,h.JL,h.sg,J.r,nt.o,$.d,it.Y,gt.w],styles:[".price-ranking-search[_ngcontent-%COMP%]{max-height:0;padding:0 2.5rem;margin:0;transition:max-height .8s,padding .8s,margin .8s ease-in;overflow:hidden}.price-ranking-search.is-open[_ngcontent-%COMP%]{max-height:100vh;padding:2.5rem;margin:2rem 0;overflow:visible}"]}),i})();var Nt=o(3360),Zt=o(2167),kt=o(8505),Ut=o(3900),yt=o(2340),Vt=o(4004),Lt=o(1751);let L=(()=>{class i extends Lt.O{constructor(){super(...arguments),this.endpoint=yt.pU.priceRankingApi.endpoint}getAll(e={}){return this.httpOptions.params=e,this.http.get(this.endpoint,this.httpOptions).pipe((0,b.K)(this.setErrorMessage("\u30e9\u30f3\u30af\u4fa1\u683c\u4e00\u89a7\u306e\u53d6\u5f97")))}find(e){return this.http.get(`${this.endpoint}/${e}`).pipe((0,b.K)(this.setErrorMessage("\u30e9\u30f3\u30af\u4fa1\u683c\u60c5\u5831\u306e\u53d6\u5f97")))}getCsv(e){const n={responseType:"text",headers:new v.WM({"X-Download":e})};return this.http.get(this.endpoint,n).pipe((0,b.K)(this.setErrorMessage("\u4e00\u62ec\u767b\u9332\u7528\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u53d6\u5f97")))}add(e){const n=this.generateFormData(e);return this.http.post(this.endpoint,n).pipe((0,b.K)(this.setErrorMessage("\u30e9\u30f3\u30af\u4fa1\u683c\u306e\u767b\u9332")))}bulkAdd(e){const n=this.generateFormData({file:e});return this.http.put(this.endpoint,n).pipe((0,b.K)(this.setErrorMessage("\u30e9\u30f3\u30af\u4fa1\u683c\u60c5\u5831\u306e\u4e00\u62ec\u767b\u9332")))}update(e,n){const r=this.generateFormData(n);return this.http.patch(`${this.endpoint}/${e}`,r).pipe((0,b.K)(this.setErrorMessage("\u30e9\u30f3\u30af\u4fa1\u683c\u60c5\u5831\u306e\u66f4\u65b0")))}remove(e){return this.http.delete(`${this.endpoint}/${e}`).pipe((0,b.K)(this.setErrorMessage("\u4fa1\u683c\u30e9\u30f3\u30af\u60c5\u5831\u306e\u524a\u9664")))}geAsSelectOptions(){return this.getAll().pipe((0,Vt.U)(e=>{let r,a=new Array;return r=e.data,r.map(({id:c,rank_division_id:l})=>({value:c,text:String(l)})).map(c=>a.push(c)),{\u30e9\u30f3\u30af\u4fa1\u683c:a}}))}}return i.\u0275fac=function(){let s;return function(n){return(s||(s=t.n5z(i)))(n||i)}}(),i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Bt=o(2640);let Yt=(()=>{class i{constructor(e,n){this.priceRankingService=e,this.common=n,this.subscription=new C.w0,this.errorEvent=new t.vpe,this.filter={},this.defaultSort={column:"ID",order:"desc"},this.pages={page:1,itemsPerPage:10,sort:this.defaultSort},this.tableParams=new d.x,this.tableNameMapping=[{name:"id",name_jp:"ID"},{name:"rank_division_id",name_jp:"\u30e9\u30f3\u30af\u540d"},{name:"product_id",name_jp:"\u5546\u54c1\u540d"},{name:"store_id",name_jp:"\u5e97\u8217\u540d"},{name:"selling_price",name_jp:"\u30d0\u30e9\u58f2\u4fa1"},{name:"b_selling_price",name_jp:"\u5c0f\u5206\u3051\u58f2\u4fa1"},{name:"c_selling_price",name_jp:"\u30b1\u30fc\u30b9\u58f2\u4fa1"}]}ngOnInit(){this.getTableData(),this.tableEvent.next(this.pages)}getTableData(){this.subscription.add(this.tableEvent.pipe((0,kt.b)(e=>this.common.loading=!0),(0,Ut.w)(e=>this.priceRankingService.getAll(this.createApiParams(e))),(0,b.K)(e=>(0,N.of)(e))).subscribe({next:e=>{this.common.loading=!1,e instanceof v.UA?this.handleError(e.status,e.error.message):this.tableParams.next(this.createTableParams(e))},complete:()=>this.getTableData()}))}createApiParams(e){this.isTableWithPaginationEvent(e)?this.pages=e:(this.filter=e,this.pages.page=1),0===Object.keys(this.pages.sort).length&&(this.pages.sort=this.defaultSort);const r=this.tableNameMapping.find(c=>c.name_jp===this.pages.sort.column)?.name;let a;return a="product_id"===r?"product_name_kana":r,{...this.filter,limit:this.pages.itemsPerPage,offset:(this.pages.page-1)*this.pages.itemsPerPage,sort:a?`${a}:${this.pages.sort.order}`:""}}isTableWithPaginationEvent(e){const{page:n,itemsPerPage:r,sort:a}=e;return"number"==typeof n&&"number"==typeof r&&"object"==typeof a}createTableParams(e){const n=this.tableNameMapping.map(a=>a.name_jp),r=e.data.map(a=>this.tableNameMapping.map(c=>a[c.name]));return r.forEach((a,c)=>{let l=-1;l=n.indexOf("ID"),a[l]={href:`./detail/${a[l]}`,text:a[l]+""},l=n.indexOf("\u30e9\u30f3\u30af\u540d"),a[l]=e.data[c].division_rank_value,l=n.indexOf("\u5546\u54c1\u540d"),a[l]={href:`/master/product/detail/${a[l]}`,text:e.data[c].product_name},l=n.indexOf("\u5e97\u8217\u540d"),a[l]={href:`/setting/store/detail/${a[l]}`,text:e.data[c].store_name+""},l=n.indexOf("\u30d0\u30e9\u58f2\u4fa1"),a[l]=null==a[l]||""===a[l]||0===a[l]?"\u8a2d\u5b9a\u306a\u3057":{unit:!1,align:"right",text:Number(a[l])},l=n.indexOf("\u5c0f\u5206\u3051\u58f2\u4fa1"),a[l]=null==a[l]||""===a[l]||0===a[l]?"\u8a2d\u5b9a\u306a\u3057":{unit:!1,align:"right",text:Number(a[l])},l=n.indexOf("\u30b1\u30fc\u30b9\u58f2\u4fa1"),a[l]=null==a[l]||""===a[l]||0===a[l]?"\u8a2d\u5b9a\u306a\u3057":{unit:!1,align:"right",text:Number(a[l])}}),{total:e.totalItems,header:n,body:r}}handleError(e,n){this.errorEvent.emit({status:e,title:"\u4fa1\u683c\u5909\u66f4\u4e00\u89a7\uff1a"+p.yR.TITLE.HAS_ERROR,message:n})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(L),t.Y36(x.v))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-table"]],inputs:{tableEvent:"tableEvent"},outputs:{errorEvent:"errorEvent"},decls:2,vars:2,consts:[[3,"params","loading","pageChange"]],template:function(e,n){1&e&&(t.TgZ(0,"app-table-with-pagination",0),t.NdJ("pageChange",function(a){return n.tableEvent.next(a)}),t._uU(1," \u30e9\u30f3\u30af\u4fa1\u683c\u4e00\u89a7\n"),t.qZA()),2&e&&t.Q6J("params",n.tableParams)("loading",n.common.loading)},dependencies:[Bt.i]}),i})();const Jt=function(i){return{path:i,text:"\u8a2d\u5b9a\u4e00\u89a7"}},Qt=function(){return{text:"\u30e9\u30f3\u30af\u4fa1\u683c\u4e00\u89a7"}},Kt=function(i,s){return[i,s]};let qt=(()=>{class i{constructor(e){this.errorService=e,this.subscription=new C.w0,this.settingMenuPath="/setting",this.searchEvent=new d.x,this.tableEvent=new d.x,this.isDuringAcquisition=!1}ngOnInit(){this.subscription.add(this.searchEvent.subscribe(e=>{this.tableEvent.next(e)}))}handleError(e,n){this.errorService.setError({status:e.status,title:e.title?e.title:"\u30a8\u30e9\u30fc",message:e.message?e.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002",redirectPath:n||void 0})}ngOnDestroy(){this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.T))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-list"]],decls:9,vars:8,consts:[[3,"breadcrumbList"],[3,"searchEvent"],[1,"flex","justify-end","gap-8","mt-6"],["path","./add"],["path","./bulk-add"],[1,"mt-2"],[3,"tableEvent","errorEvent"]],template:function(e,n){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main")(2,"div")(3,"app-search",1),t.NdJ("searchEvent",function(a){return n.searchEvent.next(a)}),t.qZA()(),t.TgZ(4,"div",2),t._UZ(5,"app-new-registration-link-org",3)(6,"app-bulk-registration-link-org",4),t.qZA(),t.TgZ(7,"div",5)(8,"app-table",6),t.NdJ("errorEvent",function(a){return n.handleError(a)}),t.qZA()()()),2&e&&(t.Q6J("breadcrumbList",t.WLB(5,Kt,t.VKq(2,Jt,n.settingMenuPath),t.DdM(4,Qt))),t.xp6(8),t.Q6J("tableEvent",n.tableEvent))},dependencies:[f.Z,Mt,Nt.S,Zt.p,Yt]}),i})();var Q=o(8782),K=o(1805),Gt=o(9586),$t=o(4720),jt=o(956);function Wt(i,s){if(1&i&&(t.TgZ(0,"li",12)(1,"p",13),t._uU(2),t.qZA(),t.TgZ(3,"p",14),t._uU(4),t.qZA()()),2&i){const e=s.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.value)}}const wt=function(i){return{path:i,text:"\u8a2d\u5b9a\u4e00\u89a7"}},zt=function(i){return{path:i,text:"\u30e9\u30f3\u30af\u4fa1\u683c\u4e00\u89a7"}},Xt=function(){return{text:"\u30e9\u30f3\u30af\u4fa1\u683c\u8a73\u7d30"}},Ht=function(i,s,e){return[i,s,e]};let te=(()=>{class i{constructor(e,n,r,a,c,l,R){this.route=e,this.priceRankingService=n,this.modalService=r,this.router=a,this.flashMessageService=c,this.errorService=l,this.common=R,this.subscription=new C.w0,this.listPagePath="/setting/price-ranking",this.settingMenuPath="/setting",this.priceRanking={},this.listItems=[{name:"\u30e9\u30f3\u30af\u4fa1\u683cID",prop_name:"id"},{name:"\u30e9\u30f3\u30af\u533a\u5206ID",prop_name:"rank_division_id"},{name:"\u5e97\u8217\u540d",prop_name:"store_name"},{name:"\u5546\u54c1\u540d",prop_name:"product_name"},{name:"\u30d0\u30e9\u4ed5\u5165\u5358\u4fa1",prop_name:"supplier_cost_price"},{name:"\u5c0f\u5206\u3051\u4ed5\u5165\u5358\u4fa1",prop_name:"b_supplier_cost_price"},{name:"\u30b1\u30fc\u30b9\u4ed5\u5165\u5358\u4fa1",prop_name:"c_supplier_cost_price"},{name:"\u30d0\u30e9\u8352\u5229\u7387",prop_name:"gross_profit_rate"},{name:"\u5c0f\u5206\u3051\u8352\u5229\u7387",prop_name:"b_gross_profit_rate"},{name:"\u30b1\u30fc\u30b9\u8352\u5229\u7387",prop_name:"c_gross_profit_rate"},{name:"\u30d0\u30e9\u58f2\u4fa1",prop_name:"selling_price"},{name:"\u5c0f\u5206\u3051\u58f2\u4fa1",prop_name:"b_selling_price"},{name:"\u30b1\u30fc\u30b9\u58f2\u4fa1",prop_name:"c_selling_price"},{name:"\u5546\u54c1\u6d88\u8cbb\u7a0e\u533a\u5206",prop_name:"division_sales_tax_value"},{name:"\u5546\u54c1\u6d88\u8cbb\u7a0e\u7aef\u6570\u533a\u5206",prop_name:"division_sales_fraction_value"},{name:"\u4ed5\u5165\u5148\u6d88\u8cbb\u7a0e\u533a\u5206",prop_name:"division_supplier_sales_tax_value"},{name:"\u4ed5\u5165\u5148\u6d88\u8cbb\u7a0e\u7aef\u6570\u533a\u5206",prop_name:"division_supplier_sales_fraction_value"},{name:"\u767b\u9332\u65e5\u6642",prop_name:"created_at"},{name:"\u767b\u9332\u8005",prop_name:"employee_created_last_name"},{name:"\u66f4\u65b0\u65e5\u6642",prop_name:"updated_at"},{name:"\u66f4\u65b0\u8005",prop_name:"employee_updated_last_name"}]}ngOnInit(){const e=this.route.snapshot.params.id;(0,S.oG)(e)?this.handleError(400,"\u30d1\u30e9\u30e1\u30fc\u30bf\u53d6\u5f97\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath):(this.selectedId=Number(e),this.editPagePath=this.listPagePath+"/edit/"+this.selectedId,this.getPriceRanking(this.selectedId))}getPriceRanking(e){this.common.loading=!0,this.subscription.add(this.priceRankingService.find(e).pipe((0,b.K)(n=>(this.common.loading=!1,(0,N.of)(n)))).subscribe(n=>{n instanceof v.UA?this.handleError(n.status,n.error?n.error.title:"\u30a8\u30e9\u30fc",n.error?n.error.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002",this.listPagePath):(this.priceRanking=n.data[0],this.setListItemValue(this.priceRanking),this.title=`\u30e9\u30f3\u30af\uff1a${this.priceRanking.division_rank_value}`,this.priceRanking.employee_updated_last_name&&(this.updater=`${this.priceRanking.employee_updated_last_name} ${this.priceRanking.employee_updated_first_name}`),this.common.loading=!1)}))}setListItemValue(e){this.listItems.filter(n=>n.prop_name).forEach(n=>{n.value=(e[n.prop_name]??"")+""}),this.listItems.forEach(n=>{!n.value||(/^.*[\u58f2\u4fa1 | \u5358\u4fa1]$/.test(n.name)&&(n.value=`${Number(n.value).toLocaleString()}`),/^.*\u8352\u5229\u7387$/.test(n.name)&&(n.value=`${Number(n.value).toLocaleString()} %`),["\u767b\u9332\u65e5\u6642","\u66f4\u65b0\u65e5\u6642"].includes(n.name)&&(n.value=new Date(n.value).toLocaleString()),"\u767b\u9332\u8005"===n.name&&(n.value=`${e.employee_created_last_name} ${e.employee_created_first_name}`),"\u66f4\u65b0\u8005"===n.name&&(n.value=`${e.employee_updated_last_name} ${e.employee_updated_first_name}`))})}handleDeleteLinkClick(){const e="\u30e9\u30f3\u30af\u4fa1\u683c"+p.yR.TITLE.DELETE;this.modalService.setModal(e,p.yR.BODY.DELETE,"danger",p.yR.BUTTON_TITLE.DELETE,p.yR.BUTTON_TITLE.CANCEL),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,A.q)(1),(0,T.h)(r=>this.modalService.getModalProperties().title===e)).subscribe(r=>{r===p.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&(this.common.loading=!0,this.priceRankingService.remove(this.selectedId).pipe((0,b.K)(a=>(0,N.of)(a))).subscribe(a=>{this.common.loading=!1,a instanceof v.UA?this.errorService.setError({status:a.status,title:e,message:a.error?a.error.message:a.message,redirectPath:this.listPagePath}):(this.flashMessageService.setFlashMessage(a.message,"success",15e3),this.router.navigateByUrl(this.listPagePath))}))}))}handleError(e,n,r,a){this.errorService.setError({status:e,title:n?"\u30e9\u30f3\u30af\u4fa1\u683c\u8a73\u7d30\uff1a"+n+p.yR.TITLE.HAS_ERROR:"\u30e9\u30f3\u30af\u4fa1\u683c\u8a73\u7d30\uff1a"+p.yR.TITLE.HAS_ERROR,message:r,redirectPath:a})}ngOnDestroy(){this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.gz),t.Y36(L),t.Y36(E.Z),t.Y36(m.F0),t.Y36(Q.P),t.Y36(_.T),t.Y36(x.v))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-detail"]],decls:21,vars:15,consts:[[3,"breadcrumbList"],[1,"mt-8","text-xl"],[1,"mt-6","mb-2","flex","flex-row","items-center","justify-between"],[1,"flex","flex-row","items-center","gap-6"],[3,"path"],[3,"click"],[1,"width-limit-break","border-t","border-gray-400"],[1,"mt-8","bg-white","border-t","border-y","border-gray-200","shadow"],[1,"border-t-primary-light-hover","border-t-4"],[1,"px-4","py-4"],[1,"text-lg"],["class","flex items-center border border-t-0 first:border-t border-slate-200",4,"ngFor","ngForOf"],[1,"flex","items-center","border","border-t-0","first:border-t","border-slate-200"],[1,"p-4","w-1/5","bg-slate-100","border-r"],[1,"p-4","grow"]],template:function(e,n){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"main")(2,"h1",1),t._uU(3,"\u30e9\u30f3\u30af\u4fa1\u683c\u8a73\u7d30"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"app-back-to-link-org",4),t._uU(7,"\u4e00\u89a7\u3078\u623b\u308b"),t.qZA(),t.TgZ(8,"app-edit-link-org",4),t._uU(9,"\u7de8\u96c6"),t.qZA(),t.TgZ(10,"app-delete-link-org",5),t.NdJ("click",function(){return n.handleDeleteLinkClick()}),t.qZA()(),t.TgZ(11,"app-last-updater-org"),t._uU(12),t.qZA()(),t._UZ(13,"hr",6),t.TgZ(14,"div",7),t._UZ(15,"hr",8),t.TgZ(16,"div",9)(17,"p",10),t._uU(18),t.qZA()(),t.TgZ(19,"ul"),t.YNc(20,Wt,5,2,"li",11),t.qZA()()()),2&e&&(t.Q6J("breadcrumbList",t.kEZ(11,Ht,t.VKq(6,wt,n.settingMenuPath),t.VKq(8,zt,n.listPagePath),t.DdM(10,Xt))),t.xp6(6),t.Q6J("path",n.listPagePath),t.xp6(2),t.Q6J("path",n.editPagePath),t.xp6(4),t.hij(" \u6700\u7d42\u66f4\u65b0\u8005\uff1a",n.updater," "),t.xp6(6),t.Oqu(n.title),t.xp6(2),t.Q6J("ngForOf",n.listItems))},dependencies:[u.sg,f.Z,K.R,Gt.i,$t._,jt.$]}),i})();var y=o(1884),V=o(349),j=o(1269),rt=o(2519),st=o(2195),W=o(387);function ee(i,s){1&i&&t.GkF(0)}function ne(i,s){1&i&&t.GkF(0,37)}function ie(i,s){1&i&&t.GkF(0)}function re(i,s){1&i&&t.GkF(0,37)}function se(i,s){1&i&&t.GkF(0)}function oe(i,s){1&i&&t.GkF(0,37)}function ae(i,s){1&i&&t.GkF(0)}function le(i,s){1&i&&t.GkF(0,37)}function ce(i,s){1&i&&t.GkF(0)}function ue(i,s){1&i&&t.GkF(0,37)}function pe(i,s){1&i&&t.GkF(0)}function _e(i,s){1&i&&t.GkF(0,37)}function de(i,s){1&i&&t.GkF(0)}function ge(i,s){1&i&&t.GkF(0,37)}function me(i,s){1&i&&t.GkF(0)}function he(i,s){1&i&&t.GkF(0,37)}function fe(i,s){1&i&&t.GkF(0)}function ve(i,s){1&i&&t.GkF(0,37)}function Ce(i,s){1&i&&t.GkF(0)}function Te(i,s){1&i&&t.GkF(0,37)}function xe(i,s){1&i&&t.GkF(0)}function Ee(i,s){1&i&&t.GkF(0,37)}const Ae=function(){return{label:"\u30e9\u30f3\u30af\u4fa1\u683c",required:!0}},D=function(i){return{ctrl:i}},be=function(){return{label:"\u5e97\u8217",required:!0}},Oe=function(){return{label:"\u4ed5\u5165\u5148\u5546\u54c1\u5358\u4fa1",required:!0}},w=function(){return{label:"\u8352\u5229\u7387",required:!1}},Se=function(){return{label:"\u58f2\u4fa1",required:!0}},ot=function(){return{label:"\u4ed5\u5165\u5148\u5546\u54c1\u5358\u4fa1",required:!1}},at=function(){return{label:"\u58f2\u4fa1",required:!1}};function Fe(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",9)(2,"h2",10),t._uU(3),t.qZA(),t._UZ(4,"hr",11),t.TgZ(5,"form",12),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.handleClickSaveButton())}),t.TgZ(6,"div",13)(7,"div",14)(8,"app-select-container",15),t.YNc(9,ee,1,0,"ng-container",16),t.YNc(10,ne,1,0,"ng-container",17),t.qZA()(),t.TgZ(11,"div",14)(12,"app-select-container",18),t.YNc(13,ie,1,0,"ng-container",16),t.YNc(14,re,1,0,"ng-container",17),t.qZA()(),t._UZ(15,"div",14)(16,"div",14),t.qZA(),t.TgZ(17,"p",19),t._uU(18,"\u4fa1\u683c\u60c5\u5831"),t.qZA(),t._UZ(19,"hr",20),t.TgZ(20,"div",21)(21,"div",22)(22,"div",23)(23,"span"),t._uU(24,"\u30d0\u30e9"),t.qZA()()(),t.TgZ(25,"div",24)(26,"app-text-container",25),t.YNc(27,se,1,0,"ng-container",16),t.YNc(28,oe,1,0,"ng-container",17),t.qZA()(),t.TgZ(29,"div",24)(30,"app-text-container",26),t.YNc(31,ae,1,0,"ng-container",16),t.YNc(32,le,1,0,"ng-container",17),t.qZA()(),t.TgZ(33,"div",24)(34,"app-text-container",27),t.YNc(35,ce,1,0,"ng-container",16),t.YNc(36,ue,1,0,"ng-container",17),t.qZA()()(),t._UZ(37,"hr",28),t.TgZ(38,"div",21)(39,"div",22)(40,"div")(41,"span"),t._uU(42,"\u5c0f\u5206\u3051"),t.qZA()()(),t.TgZ(43,"div",24)(44,"app-text-container",29),t.YNc(45,pe,1,0,"ng-container",16),t.YNc(46,_e,1,0,"ng-container",17),t.qZA()(),t.TgZ(47,"div",24)(48,"app-text-container",30),t.YNc(49,de,1,0,"ng-container",16),t.YNc(50,ge,1,0,"ng-container",17),t.qZA()(),t.TgZ(51,"div",24)(52,"app-text-container",31),t.YNc(53,me,1,0,"ng-container",16),t.YNc(54,he,1,0,"ng-container",17),t.qZA()()(),t._UZ(55,"hr",28),t.TgZ(56,"div",21)(57,"div",22)(58,"div")(59,"span"),t._uU(60,"\u30b1\u30fc\u30b9"),t.qZA()()(),t.TgZ(61,"div",24)(62,"app-text-container",32),t.YNc(63,fe,1,0,"ng-container",16),t.YNc(64,ve,1,0,"ng-container",17),t.qZA()(),t.TgZ(65,"div",24)(66,"app-text-container",33),t.YNc(67,Ce,1,0,"ng-container",16),t.YNc(68,Te,1,0,"ng-container",17),t.qZA()(),t.TgZ(69,"div",24)(70,"app-text-container",34),t.YNc(71,xe,1,0,"ng-container",16),t.YNc(72,Ee,1,0,"ng-container",17),t.qZA()()(),t.TgZ(73,"div",35)(74,"app-button",3),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.handleClickResetButton())}),t._uU(75,"\u30ea\u30bb\u30c3\u30c8"),t.qZA(),t.TgZ(76,"app-button",36),t._uU(77," \u4fdd\u5b58 "),t.qZA()()()(),t.BQk()}if(2&i){const e=t.oxw(),n=t.MAs(12),r=t.MAs(14);t.xp6(3),t.AsE(" ",e.priceRanking.product_name," ",e.priceRanking.division_rank_value," \u7de8\u96c6 "),t.xp6(2),t.Q6J("formGroup",e.form),t.xp6(3),t.Q6J("formCtrl",e.fc.rank_division_id)("options",e.priceRankingDivisionOptions)("invalid",e.formControlStateManager(e.fc.rank_division_id)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(81,Ae)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(82,D,e.fc.rank_division_id)),t.xp6(2),t.Q6J("formCtrl",e.fc.store_id)("options",e.storeOptions)("invalid",e.formControlStateManager(e.fc.store_id)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(84,be)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(85,D,e.fc.store_id)),t.xp6(12),t.Q6J("formCtrl",e.fc.supplier_cost_price)("textRight",!0)("invalid",e.formControlStateManager(e.fc.supplier_cost_price)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(87,Oe)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(88,D,e.fc.supplier_cost_price)),t.xp6(2),t.Q6J("formCtrl",e.fc.gross_profit_rate)("textRight",!0)("invalid",e.formControlStateManager(e.fc.gross_profit_rate)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(90,w)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(91,D,e.fc.gross_profit_rate)),t.xp6(2),t.Q6J("formCtrl",e.fc.selling_price)("textRight",!0)("invalid",e.formControlStateManager(e.fc.selling_price)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(93,Se)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(94,D,e.fc.selling_price)),t.xp6(8),t.Q6J("formCtrl",e.fc.b_supplier_cost_price)("textRight",!0)("invalid",e.formControlStateManager(e.fc.b_supplier_cost_price)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(96,ot)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(97,D,e.fc.b_supplier_cost_price)),t.xp6(2),t.Q6J("formCtrl",e.fc.b_gross_profit_rate)("textRight",!0)("invalid",e.formControlStateManager(e.fc.b_gross_profit_rate)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(99,w)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(100,D,e.fc.b_gross_profit_rate)),t.xp6(2),t.Q6J("formCtrl",e.fc.b_selling_price)("textRight",!0)("invalid",e.formControlStateManager(e.fc.b_selling_price)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(102,at)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(103,D,e.fc.b_selling_price)),t.xp6(8),t.Q6J("formCtrl",e.fc.c_supplier_cost_price)("textRight",!0)("invalid",e.formControlStateManager(e.fc.c_supplier_cost_price)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(105,ot)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(106,D,e.fc.c_supplier_cost_price)),t.xp6(2),t.Q6J("formCtrl",e.fc.c_gross_profit_rate)("textRight",!0)("invalid",e.formControlStateManager(e.fc.c_gross_profit_rate)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(108,w)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(109,D,e.fc.c_gross_profit_rate)),t.xp6(2),t.Q6J("formCtrl",e.fc.c_selling_price)("textRight",!0)("invalid",e.formControlStateManager(e.fc.c_selling_price)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(111,at)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(112,D,e.fc.c_selling_price)),t.xp6(4),t.Q6J("buttonDisabled",e.form.invalid||e.form.pristine)}}function Re(i,s){1&i&&(t.TgZ(0,"p",38),t._uU(1,"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."),t.qZA())}function Pe(i,s){1&i&&(t.TgZ(0,"span",41),t._uU(1," \u5fc5\u9808 "),t.qZA())}function Ie(i,s){if(1&i&&(t.TgZ(0,"div",39)(1,"span"),t._uU(2),t.qZA(),t.YNc(3,Pe,2,0,"span",40),t.qZA()),2&i){const e=s.label,n=s.required;t.xp6(2),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",n)}}function De(i,s){if(1&i&&(t.TgZ(0,"p",44),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.errorConst.FORM_ERROR.REQUIRED_ITEM," ")}}function Me(i,s){if(1&i&&(t.TgZ(0,"p",44),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.errorConst.FORM_ERROR.EXCEEDED_CHARACTER_MAX_LIMIT," ")}}function Ne(i,s){if(1&i&&(t.TgZ(0,"p",44),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.errorConst.FORM_ERROR.NUMERIC_LIMIT_VIOLATION," ")}}function Ze(i,s){if(1&i&&(t.ynx(0),t.YNc(1,De,2,1,"p",43),t.YNc(2,Me,2,1,"p",43),t.YNc(3,Ne,2,1,"p",43),t.BQk()),2&i){const e=t.oxw().ctrl,n=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.maxlength),t.xp6(1),t.Q6J("ngIf",(null==e.errors||null==e.errors.pattern?null:e.errors.pattern.requiredPattern)===n.regExConst.NUMERIC_REG_EX+"")}}function ke(i,s){if(1&i&&t.YNc(0,Ze,4,3,"ng-container",42),2&i){const e=s.ctrl,n=t.oxw();t.Q6J("ngIf",n.formControlStateManager(e))}}const Ue=function(i){return{path:i,text:"\u8a2d\u5b9a\u4e00\u89a7"}},ye=function(i){return{path:i,text:"\u30e9\u30f3\u30af\u4fa1\u683c\u4e00\u89a7"}},Ve=function(i){return{path:i,text:"\u30e9\u30f3\u30af\u4fa1\u683c\u8a73\u7d30"}},Le=function(){return{text:"\u30e9\u30f3\u30af\u4fa1\u683c\u7de8\u96c6"}},Be=function(i,s,e,n){return[i,s,e,n]};let Ye=(()=>{class i{constructor(e,n,r,a,c,l,R,k,U,B,X,H){this.priceRankingService=e,this.storeService=n,this.divisionService=r,this.fb=a,this.router=c,this.route=l,this.authorService=R,this.modalService=k,this.flashMessageService=U,this.errorService=B,this.common=X,this.priceService=H,this.subscription=new C.w0,this.listPagePath="/setting/price-ranking",this.settingMenuPath="/setting",this.cancelModalTitle="\u30e9\u30f3\u30af\u4fa1\u683c\u7de8\u96c6\u30ad\u30e3\u30f3\u30bb\u30eb\uff1a"+p.yR.TITLE.CANCEL,this.errorConst=g.c,this.regExConst=V.m,this.isProductSelected=!1,this.form=this.fb.group({rank_division_id:["",[h.kI.required]],store_id:["",h.kI.required],supplier_cost_price:["",[h.kI.required,h.kI.pattern(V.m.NUMERIC_REG_EX)]],b_supplier_cost_price:[""],c_supplier_cost_price:[""],gross_profit_rate:[""],b_gross_profit_rate:[""],c_gross_profit_rate:[""],selling_price:["",[h.kI.required,h.kI.pattern(V.m.NUMERIC_REG_EX)]],b_selling_price:[""],c_selling_price:[""]})}get fc(){return this.form.controls}ngOnInit(){this.authorService.author?(this.author=this.authorService.author,this.updater=this.author.last_name+" "+this.author.first_name):this.subscription.add(this.authorService.author$.subscribe(r=>{this.author=r,this.updater=this.author.last_name+" "+this.author.first_name})),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,T.h)(r=>this.modalService.getModalProperties().title===this.cancelModalTitle)).subscribe(r=>{r===p.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl(this.listPagePath)}));const e=this.route.snapshot.params.id;(0,S.oG)(e)?this.handleError(400,"\u30d1\u30e9\u30e1\u30fc\u30bf\u53d6\u5f97\u30a8\u30e9\u30fc","\u30d1\u30b9\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u4e00\u89a7\u753b\u9762\u3078\u623b\u308a\u307e\u3059\u3002",this.listPagePath):(this.selectedId=Number(e),this.detailPagePath=this.listPagePath+"/detail/"+this.selectedId,this.initialization(this.selectedId),this.handleChangePriceData())}formControlStateManager(e){return(e.touched||e.dirty)&&e.invalid}initialization(e){this.common.loading=!0,this.subscription.add((0,M.D)([this.storeService.getAsSelectOptions(),this.divisionService.getAsSelectOptions(),this.priceRankingService.find(e)]).pipe((0,b.K)(n=>(this.common.loading=!1,(0,N.of)(n)))).subscribe(n=>{n instanceof v.UA?this.handleError(n.status,n.error?n.error.title:"\u30a8\u30e9\u30fc",n.error?n.error.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002",this.detailPagePath):(this.storeOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...n[0]],this.salesTaxDivisionOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...n[1].\u5546\u54c1\u6d88\u8cbb\u7a0e\u533a\u5206],this.salesFractionDivisionOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...n[1].\u6d88\u8cbb\u7a0e\u7aef\u6570\u533a\u5206],this.supplierSalesTaxDivisionOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...n[1].\u4ed5\u5165\u5148\u6d88\u8cbb\u7a0e\u533a\u5206],this.supplierSalesFractionDivisionOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...n[1].\u8ca9\u58f2\u7aef\u6570\u533a\u5206],this.priceRankingDivisionOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...n[1][Y.z.PRICE_RANKING]],this.priceRanking=n[2].data[0],this.salesTaxDivisionId=this.priceRanking.sales_tax_division_id,this.salesFractionDivisionId=this.priceRanking.sales_fraction_division_id,this.supplierSalesTaxDivisionId=this.priceRanking.supplier_sales_tax_division_id,this.supplierSalesTaxFractionDivisionId=this.priceRanking.supplier_sales_fraction_division_id,this.supplierTaxFractionMethod=(0,S.fy)(Number(this.priceRanking.division_supplier_sales_fraction_code)),this.taxFractionMethod=(0,S.fy)(Number(this.priceRanking.division_sales_fraction_code)),this.supplierTaxRateAndTaxIncludedFlag=(0,S.zn)(Number(this.priceRanking.division_supplier_sales_tax_code)),this.taxRateAndTaxIncludedFlag=(0,S.zn)(Number(this.priceRanking.division_sales_tax_code)),this.form.reset(this.priceRanking,{emitEvent:!1}),this.common.loading=!1)}))}getPriceData(){return[{price:this.fc.selling_price,cost:this.fc.supplier_cost_price,rate:this.fc.gross_profit_rate},{price:this.fc.b_selling_price,cost:this.fc.b_supplier_cost_price,rate:this.fc.b_gross_profit_rate},{price:this.fc.c_selling_price,cost:this.fc.c_supplier_cost_price,rate:this.fc.c_gross_profit_rate}]}isNullOrUndefinedOrEmpty(e){return null==e||""===e||"0"===e}getCostPrices(e){return(0,S.e_)(Number(e),this.supplierTaxRateAndTaxIncludedFlag.taxRate,this.supplierTaxRateAndTaxIncludedFlag.isTaxIncluded,this.supplierTaxFractionMethod)}getSellingPrices(e,n){return(0,S.e_)(e,this.taxRateAndTaxIncludedFlag.taxRate,n,this.taxFractionMethod)}subscribeCostChanges(e){const n=e.cost.valueChanges.pipe((0,y.x)()).subscribe(r=>{this.handleCostChanges(r,e)});this.subscription.add(n)}handleCostChanges(e,n){if(this.isNullOrUndefinedOrEmpty(e))return n.rate.patchValue("",{emitEvent:!1}),n.price.patchValue("",{emitEvent:!1}),void(n.price===this.fc.selling_price&&(n.price.setErrors({required:!0}),this.fc.selling_price.markAsTouched()));if(!this.isNullOrUndefinedOrEmpty(n.rate.value)){const r=Number(n.cost.value),a=Number(n.rate.value),c=Number(this.priceRanking.division_sales_tax_code),l=this.priceService.getSalesPrice(r,a,c);n.price.patchValue(String(l),{emitEvent:!1})}}subscribeRateChanges(e){const n=e.rate.valueChanges.pipe((0,y.x)()).subscribe(r=>{this.handleRateChanges(r,e)});this.subscription.add(n)}handleRateChanges(e,n){if(this.isNullOrUndefinedOrEmpty(e))return n.price.patchValue("",{emitEvent:!1}),void(n.price===this.fc.selling_price&&(n.price.setErrors({required:!0}),this.fc.selling_price.markAsTouched()));if(Number(e)>99||Number(e)<0)return n.rate.patchValue("",{emitEvent:!1}),void n.rate.setErrors(["required"]);if(!this.isNullOrUndefinedOrEmpty(n.cost.value)){const r=Number(n.cost.value),a=Number(n.rate.value),c=Number(this.priceRanking.division_sales_tax_code),l=this.priceService.getSalesPrice(r,a,c);n.price.patchValue(String(l),{emitEvent:!1})}}subscribePriceChanges(e){const n=e.price.valueChanges.pipe((0,y.x)()).subscribe(r=>{this.handlePriceChanges(r,e)});this.subscription.add(n)}handlePriceChanges(e,n){if(this.isNullOrUndefinedOrEmpty(e))return void n.rate.patchValue("",{emitEvent:!1});const r=(0,S._k)(Number(e));if(n.price.patchValue(String(r),{emitEvent:!1}),!this.isNullOrUndefinedOrEmpty(n.cost.value)){const a=Number(n.cost.value),c=Number(n.price.value),l=Number(this.priceRanking.division_sales_tax_code),R=this.priceService.getGrossProfitRate(a,c,l);n.rate.patchValue(String(Math.round(R)),{emitEvent:!1})}}handleChangePriceData(){this.getPriceData().forEach(n=>{this.subscribeCostChanges(n),this.subscribeRateChanges(n),this.subscribePriceChanges(n)})}handleClickCancelLink(){this.form.pristine?this.router.navigateByUrl(this.detailPagePath):this.modalService.setModal(this.cancelModalTitle,p.yR.BODY.CANCEL,"warning",p.yR.BUTTON_TITLE.EXECUTION,p.yR.BUTTON_TITLE.CANCEL)}handleClickResetButton(){this.form.reset(this.priceRanking,{emitEvent:!1})}handleClickSaveButton(){const n={...this.form.value,product_id:this.priceRanking.product_id,sales_tax_division_id:this.salesTaxDivisionId?this.salesTaxDivisionId:this.salesTaxDivisionOptions[1].value,sales_fraction_division_id:this.salesFractionDivisionId?this.salesFractionDivisionId:this.salesFractionDivisionOptions[1].value,supplier_sales_tax_division_id:this.supplierSalesTaxDivisionId?this.supplierSalesTaxDivisionId:this.supplierSalesTaxDivisionOptions[1].value,supplier_sales_fraction_division_id:this.supplierSalesTaxFractionDivisionId?this.supplierSalesTaxFractionDivisionId:this.supplierSalesFractionDivisionOptions[1].value};this.common.loading=!0,this.subscription.add(this.priceRankingService.update(this.selectedId,n).pipe((0,b.K)(r=>(this.common.loading=!1,(0,N.of)(r)))).subscribe(r=>{r instanceof v.UA?this.handleError(r.status,r.error?r.error.title:"\u30a8\u30e9\u30fc",r.error?r.error.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002",this.detailPagePath):(this.common.loading=!1,this.flashMessageService.setFlashMessage(r.message,"success",15e3),this.router.navigateByUrl(this.detailPagePath))}))}handleError(e,n,r,a){this.errorService.setError({status:e,title:n?"\u30e9\u30f3\u30af\u4fa1\u683c\u30a8\u30e9\u30fc\uff1a"+n+" "+p.yR.TITLE.HAS_ERROR:"\u30e9\u30f3\u30af\u4fa1\u683c\u30a8\u30e9\u30fc\uff1a"+p.yR.TITLE.HAS_ERROR,message:r,redirectPath:a})}ngOnDestroy(){this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(L),t.Y36(G.d),t.Y36(q.E),t.Y36(h.qu),t.Y36(m.F0),t.Y36(m.gz),t.Y36(j.Y),t.Y36(E.Z),t.Y36(Q.P),t.Y36(_.T),t.Y36(x.v),t.Y36(rt.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit"]],decls:15,vars:16,consts:[[3,"breadcrumbList"],[1,"mt-8","text-xl"],[1,"flex","items-center","justify-between","mt-6","mb-2"],[3,"click"],[1,"width-limit-break","border-t","border-gray-400"],[4,"ngIf","ngIfElse"],["initializing",""],["labels",""],["errors",""],[1,"mt-8","mb-24","pt-8","pb-20","px-6","bg-white","shadow","border","border-gray-300"],[1,"text-lg"],[1,"border-t-primary-light-hover","border-t-4"],["autocomplete","off",1,"p-6","mt-6","border","border-b-0","border-gray-200","shadow",3,"formGroup","ngSubmit"],[1,"flex","gap-4"],[1,"w-1/4"],["nameAttrValue","rank_division_id","idAttrValue","rank-division-id",3,"formCtrl","options","invalid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["message","",4,"ngTemplateOutlet","ngTemplateOutletContext"],["nameAttrValue","store_id","idAttrValue","store-id",3,"formCtrl","options","invalid"],[1,"mt-6","pl-2"],[1,"border-t-warning-hover","border-t-4","mt-1"],[1,"flex","gap-4","mt-4"],[1,"w-[10%]","flex","items-center","justify-center"],[1,"mt-[24px]"],[1,"w-[30%]"],["inputType","number","nameAttrValue","supplier_cost_price","idAttrValue","supplier-cost-price",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","gross_profit_rate","idAttrValue","gross-profit-rate",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","selling_price","idAttrValue","selling-price",3,"formCtrl","textRight","invalid"],[1,"mt-4"],["inputType","number","nameAttrValue","b_supplier_cost_price","idAttrValue","b-supplier-cost-price",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","b_gross_profit_rate","idAttrValue","b-gross-profit-rate",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","b_selling_price","idAttrValue","b-selling-price",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","c_supplier_cost_price","idAttrValue","c-supplier-cost-price",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","c_gross_profit_rate","idAttrValue","c-gross-profit-rate",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","c_selling_price","idAttrValue","c-selling-price",3,"formCtrl","textRight","invalid"],[1,"width-limit-break","bg-primary-light","flex","flex-row","justify-center","bottom-[40px]","fixed","left-0","right-0","p-2","gap-8"],["btnType","submit","btnFillColor","bg-success hover:bg-success-hover text-white border-success","btnTextColor","text-white","btnLineColor","border-success hover:border-success-hover",3,"buttonDisabled"],["message",""],[1,"text-3xl","text-center","text-slate-500","mt-6"],[1,"flex","items-center","gap-2"],["class","px-3 py-0.5 text-xs text-white bg-warning-dark rounded-full",4,"ngIf"],[1,"px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],[4,"ngIf"],["class","text-sm text-red",4,"ngIf"],[1,"text-sm","text-red"]],template:function(e,n){if(1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"h2",1),t._uU(2,"\u30e9\u30f3\u30af\u4fa1\u683c\u7de8\u96c6"),t.qZA(),t.TgZ(3,"div",2)(4,"app-cancel-link-org",3),t.NdJ("click",function(){return n.handleClickCancelLink()}),t.qZA(),t.TgZ(5,"app-last-updater-org"),t._uU(6),t.qZA()(),t._UZ(7,"hr",4),t.YNc(8,Fe,78,114,"ng-container",5),t.YNc(9,Re,2,0,"ng-template",null,6,t.W1O),t.YNc(11,Ie,4,2,"ng-template",null,7,t.W1O),t.YNc(13,ke,1,1,"ng-template",null,8,t.W1O)),2&e){const r=t.MAs(10);t.Q6J("breadcrumbList",t.l5B(11,Be,t.VKq(4,Ue,n.settingMenuPath),t.VKq(6,ye,n.listPagePath),t.VKq(8,Ve,n.detailPagePath),t.DdM(10,Le))),t.xp6(6),t.hij(" \u767b\u9332\u8005\uff1a",n.updater?n.updater:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),t.xp6(2),t.Q6J("ngIf",n.priceRanking)("ngIfElse",r)}},dependencies:[u.O5,u.tP,h._Y,h.JL,h.sg,f.Z,K.R,$.d,st.O,J.r,W.K]}),i})();function Je(i,s){1&i&&t.GkF(0)}function Qe(i,s){1&i&&t.GkF(0,22)}function Ke(i,s){1&i&&t.GkF(0)}function qe(i,s){1&i&&t.GkF(0,22)}function Ge(i,s){1&i&&t.GkF(0)}function $e(i,s){1&i&&t.GkF(0,22)}function je(i,s){1&i&&(t.ynx(0),t.TgZ(1,"p",23),t._uU(2," \u203b \u5546\u54c1\u9078\u629e\u5f8c\u306b\u4fa1\u683c\u60c5\u5831\u5165\u529b\u30d5\u30a9\u30fc\u30e0\u304c\u8868\u793a\u3055\u308c\u307e\u3059 "),t.qZA(),t.BQk())}function We(i,s){1&i&&t.GkF(0)}function we(i,s){1&i&&t.GkF(0,22)}function ze(i,s){1&i&&t.GkF(0)}function Xe(i,s){1&i&&t.GkF(0,22)}function He(i,s){1&i&&t.GkF(0)}function tn(i,s){1&i&&t.GkF(0,22)}function en(i,s){1&i&&t.GkF(0)}function nn(i,s){1&i&&t.GkF(0,22)}function rn(i,s){1&i&&t.GkF(0)}function sn(i,s){1&i&&t.GkF(0,22)}function on(i,s){1&i&&t.GkF(0)}function an(i,s){1&i&&t.GkF(0,22)}function ln(i,s){1&i&&t.GkF(0)}function cn(i,s){1&i&&t.GkF(0,22)}function un(i,s){1&i&&t.GkF(0)}function pn(i,s){1&i&&t.GkF(0,22)}function _n(i,s){1&i&&t.GkF(0)}function dn(i,s){1&i&&t.GkF(0,22)}const gn=function(){return{label:"\u4ed5\u5165\u5148\u5546\u54c1\u5358\u4fa1",required:!0}},P=function(i){return{ctrl:i}},z=function(){return{label:"\u8352\u5229\u7387",required:!1}},mn=function(){return{label:"\u58f2\u4fa1",required:!0}},lt=function(){return{label:"\u4ed5\u5165\u5148\u5546\u54c1\u5358\u4fa1",required:!1}},ct=function(){return{label:"\u58f2\u4fa1",required:!1}};function hn(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"p",24),t._uU(2,"\u4fa1\u683c\u60c5\u5831"),t.qZA(),t._UZ(3,"hr",25),t.TgZ(4,"div",26)(5,"div",27)(6,"div",28)(7,"span"),t._uU(8,"\u30d0\u30e9"),t.qZA()()(),t.TgZ(9,"div",29)(10,"app-text-container",30),t.YNc(11,We,1,0,"ng-container",12),t.YNc(12,we,1,0,"ng-container",13),t.qZA()(),t.TgZ(13,"div",29)(14,"app-text-container",31),t.YNc(15,ze,1,0,"ng-container",12),t.YNc(16,Xe,1,0,"ng-container",13),t.qZA()(),t.TgZ(17,"div",29)(18,"app-text-container",32),t.YNc(19,He,1,0,"ng-container",12),t.YNc(20,tn,1,0,"ng-container",13),t.qZA()()(),t._UZ(21,"hr",33),t.TgZ(22,"div",26)(23,"div",27)(24,"div")(25,"span"),t._uU(26,"\u5c0f\u5206\u3051"),t.qZA()()(),t.TgZ(27,"div",29)(28,"app-text-container",34),t.YNc(29,en,1,0,"ng-container",12),t.YNc(30,nn,1,0,"ng-container",13),t.qZA()(),t.TgZ(31,"div",29)(32,"app-text-container",35),t.YNc(33,rn,1,0,"ng-container",12),t.YNc(34,sn,1,0,"ng-container",13),t.qZA()(),t.TgZ(35,"div",29)(36,"app-text-container",36),t.YNc(37,on,1,0,"ng-container",12),t.YNc(38,an,1,0,"ng-container",13),t.qZA()()(),t._UZ(39,"hr",33),t.TgZ(40,"div",26)(41,"div",27)(42,"div")(43,"span"),t._uU(44,"\u30b1\u30fc\u30b9"),t.qZA()()(),t.TgZ(45,"div",29)(46,"app-text-container",37),t.YNc(47,ln,1,0,"ng-container",12),t.YNc(48,cn,1,0,"ng-container",13),t.qZA()(),t.TgZ(49,"div",29)(50,"app-text-container",38),t.YNc(51,un,1,0,"ng-container",12),t.YNc(52,pn,1,0,"ng-container",13),t.qZA()(),t.TgZ(53,"div",29)(54,"app-text-container",39),t.YNc(55,_n,1,0,"ng-container",12),t.YNc(56,dn,1,0,"ng-container",13),t.qZA()()(),t.BQk()),2&i){const e=t.oxw(),n=t.MAs(34),r=t.MAs(36);t.xp6(10),t.Q6J("formCtrl",e.fc.supplier_cost_price)("textRight",!0)("invalid",e.formControlStateManager(e.fc.supplier_cost_price)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(63,gn)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(64,P,e.fc.supplier_cost_price)),t.xp6(2),t.Q6J("formCtrl",e.fc.gross_profit_rate)("textRight",!0)("invalid",e.formControlStateManager(e.fc.gross_profit_rate)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(66,z)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(67,P,e.fc.gross_profit_rate)),t.xp6(2),t.Q6J("formCtrl",e.fc.selling_price)("textRight",!0)("invalid",e.formControlStateManager(e.fc.selling_price)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(69,mn)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(70,P,e.fc.selling_price)),t.xp6(8),t.Q6J("formCtrl",e.fc.b_supplier_cost_price)("textRight",!0)("invalid",e.formControlStateManager(e.fc.b_supplier_cost_price)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(72,lt)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(73,P,e.fc.b_supplier_cost_price)),t.xp6(2),t.Q6J("formCtrl",e.fc.b_gross_profit_rate)("textRight",!0)("invalid",e.formControlStateManager(e.fc.b_gross_profit_rate)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(75,z)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(76,P,e.fc.b_gross_profit_rate)),t.xp6(2),t.Q6J("formCtrl",e.fc.b_selling_price)("textRight",!0)("invalid",e.formControlStateManager(e.fc.b_selling_price)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(78,ct)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(79,P,e.fc.b_selling_price)),t.xp6(8),t.Q6J("formCtrl",e.fc.c_supplier_cost_price)("textRight",!0)("invalid",e.formControlStateManager(e.fc.c_supplier_cost_price)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(81,lt)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(82,P,e.fc.c_supplier_cost_price)),t.xp6(2),t.Q6J("formCtrl",e.fc.c_gross_profit_rate)("textRight",!0)("invalid",e.formControlStateManager(e.fc.c_gross_profit_rate)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(84,z)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(85,P,e.fc.c_gross_profit_rate)),t.xp6(2),t.Q6J("formCtrl",e.fc.c_selling_price)("textRight",!0)("invalid",e.formControlStateManager(e.fc.c_selling_price)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.DdM(87,ct)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(88,P,e.fc.c_selling_price))}}function fn(i,s){1&i&&(t.TgZ(0,"span",42),t._uU(1," \u5fc5\u9808 "),t.qZA())}function vn(i,s){if(1&i&&(t.TgZ(0,"div",40)(1,"span"),t._uU(2),t.qZA(),t.YNc(3,fn,2,0,"span",41),t.qZA()),2&i){const e=s.label,n=s.required;t.xp6(2),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",n)}}function Cn(i,s){if(1&i&&(t.TgZ(0,"p",44),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.errorConst.FORM_ERROR.REQUIRED_ITEM," ")}}function Tn(i,s){if(1&i&&(t.TgZ(0,"p",44),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.errorConst.FORM_ERROR.EXCEEDED_CHARACTER_MAX_LIMIT," ")}}function xn(i,s){if(1&i&&(t.TgZ(0,"p",44),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.errorConst.FORM_ERROR.NUMERIC_LIMIT_VIOLATION," ")}}function En(i,s){if(1&i&&(t.ynx(0),t.YNc(1,Cn,2,1,"p",43),t.YNc(2,Tn,2,1,"p",43),t.YNc(3,xn,2,1,"p",43),t.BQk()),2&i){const e=t.oxw().ctrl,n=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.maxlength),t.xp6(1),t.Q6J("ngIf",(null==e.errors||null==e.errors.pattern?null:e.errors.pattern.requiredPattern)===n.regExConst.NUMERIC_REG_EX+"")}}function An(i,s){if(1&i&&t.YNc(0,En,4,3,"ng-container",17),2&i){const e=s.ctrl,n=t.oxw();t.Q6J("ngIf",n.formControlStateManager(e))}}const bn=function(i){return{path:i,text:"\u8a2d\u5b9a\u4e00\u89a7"}},On=function(i){return{path:i,text:"\u30e9\u30f3\u30af\u4fa1\u683c\u4e00\u89a7"}},Sn=function(){return{text:"\u30e9\u30f3\u30af\u4fa1\u683c\u65b0\u898f\u767b\u9332"}},Fn=function(i,s,e){return[i,s,e]},Rn=function(){return{label:"\u5546\u54c1\u540d",required:!0}},Pn=function(){return{label:"\u30e9\u30f3\u30af\u4fa1\u683c",required:!0}},In=function(){return{label:"\u5e97\u8217",required:!0}};let Dn=(()=>{class i{constructor(e,n,r,a,c,l,R,k,U,B,X,H){this.priceRankingService=e,this.fb=n,this.authorService=r,this.modalService=a,this.router=c,this.storeService=l,this.divisionService=R,this.productService=k,this.flashMessageService=U,this.errorService=B,this.common=X,this.priceService=H,this.subscription=new C.w0,this.listPagePath="/setting/price-ranking",this.settingMenuPath="/setting",this.cancelModalTitle="\u30e9\u30f3\u30af\u4fa1\u683c\u767b\u9332\u30ad\u30e3\u30f3\u30bb\u30eb\uff1a"+p.yR.TITLE.CANCEL,this.errorConst=g.c,this.regExConst=V.m,this.isProductSelected=!1,this.form=this.fb.group({rank_division_id:["",[h.kI.required]],store_id:["",h.kI.required],product_id:["",h.kI.required],product_name:["",h.kI.required],supplier_cost_price:["",[h.kI.required,h.kI.pattern(V.m.NUMERIC_REG_EX)]],b_supplier_cost_price:[""],c_supplier_cost_price:[""],gross_profit_rate:[""],b_gross_profit_rate:[""],c_gross_profit_rate:[""],selling_price:["",[h.kI.required,h.kI.pattern(V.m.NUMERIC_REG_EX)]],b_selling_price:[""],c_selling_price:[""]})}get fc(){return this.form.controls}ngOnInit(){this.authorService.author?(this.author=this.authorService.author,this.updater=this.author.last_name+" "+this.author.first_name):this.subscription.add(this.authorService.author$.subscribe(e=>{this.author=e,this.updater=this.author.last_name+" "+this.author.first_name})),this.subscription.add(this.modalService.closeEventObservable$.pipe((0,T.h)(e=>this.modalService.getModalProperties().title===this.cancelModalTitle)).subscribe(e=>{e===p.yR.BUTTON_CLICK_VALUE.OK_BUTTON_CLICK_VALUE&&this.router.navigateByUrl(this.listPagePath)})),this.initOptions(),this.handleChangePriceData()}initOptions(){this.common.loading=!0,this.subscription.add((0,M.D)([this.storeService.getAsSelectOptions(),this.divisionService.getAsSelectOptions()]).pipe((0,b.K)(e=>(this.common.loading=!1,(0,N.of)(e)))).subscribe(e=>{e instanceof v.UA?this.handleError(e.status,e.error?e.error.title:"\u30a8\u30e9\u30fc",e.error?e.error.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002",this.listPagePath):(this.storeOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...e[0]],this.salesTaxDivisionOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...e[1].\u5546\u54c1\u6d88\u8cbb\u7a0e\u533a\u5206],this.salesFractionDivisionOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...e[1].\u6d88\u8cbb\u7a0e\u7aef\u6570\u533a\u5206],this.supplierSalesTaxDivisionOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...e[1].\u4ed5\u5165\u5148\u6d88\u8cbb\u7a0e\u533a\u5206],this.supplierSalesFractionDivisionOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...e[1].\u8ca9\u58f2\u7aef\u6570\u533a\u5206],this.priceRankingDivisionOptions=[{value:"",text:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"},...e[1][Y.z.PRICE_RANKING]],this.common.loading=!1)}))}formControlStateManager(e){return(e.touched||e.dirty)&&e.invalid}getProductSuggests(){return{observable:this.productService.getAll({name:this.fc.product_name.value}),idField:"id",nameField:"name"}}handleProductIdValueChanges(e){if(""===e)return this.isProductSelected=!1,this.fc.product_name.setValue("",{emitEvent:!1}),this.fc.supplier_cost_price.setValue("",{emitEvent:!1}),this.fc.b_supplier_cost_price.setValue("",{emitEvent:!1}),this.fc.c_supplier_cost_price.setValue("",{emitEvent:!1}),this.fc.gross_profit_rate.setValue("",{emitEvent:!1}),this.fc.b_gross_profit_rate.setValue("",{emitEvent:!1}),this.fc.c_gross_profit_rate.setValue("",{emitEvent:!1}),this.fc.selling_price.setValue("",{emitEvent:!1}),this.fc.b_selling_price.setValue("",{emitEvent:!1}),void this.fc.c_selling_price.setValue("",{emitEvent:!1})}handleSelectedProductData(e){!e||(this.fc.supplier_cost_price.setValue(String(e.supplier_cost_price),{emitEvent:!1}),this.fc.b_supplier_cost_price.setValue(String(e.b_supplier_cost_price),{emitEvent:!1}),this.fc.c_supplier_cost_price.setValue(String(e.c_supplier_cost_price),{emitEvent:!1}),this.fc.gross_profit_rate.setValue(String(e.gross_profit_rate),{emitEvent:!1}),this.fc.b_gross_profit_rate.setValue(String(e.b_gross_profit_rate),{emitEvent:!1}),this.fc.c_gross_profit_rate.setValue(String(e.c_gross_profit_rate),{emitEvent:!1}),this.fc.selling_price.setValue(String(e.selling_price),{emitEvent:!1}),this.fc.b_selling_price.setValue(String(e.b_selling_price),{emitEvent:!1}),this.fc.c_selling_price.setValue(String(e.c_selling_price),{emitEvent:!1}),this.salesTaxDivisionId=e.sales_tax_division_id,this.salesFractionDivisionId=e.sales_fraction_division_id,this.supplierSalesTaxDivisionId=e.supplier_sales_tax_division_id,this.supplierSalesTaxFractionDivisionId=e.supplier_sales_fraction_division_id,this.supplierTaxFractionMethod=(0,S.fy)(e.division_supplier_sales_fraction_code),this.taxFractionMethod=(0,S.fy)(e.division_sales_fraction_code),this.supplierTaxRateAndTaxIncludedFlag=(0,S.zn)(e.division_supplier_sales_tax_code),this.division_sales_tax_code=e.division_sales_tax_code,this.taxRateAndTaxIncludedFlag=(0,S.zn)(this.division_sales_tax_code),this.isProductSelected=!0)}getPriceData(){return[{price:this.fc.selling_price,cost:this.fc.supplier_cost_price,rate:this.fc.gross_profit_rate},{price:this.fc.b_selling_price,cost:this.fc.b_supplier_cost_price,rate:this.fc.b_gross_profit_rate},{price:this.fc.c_selling_price,cost:this.fc.c_supplier_cost_price,rate:this.fc.c_gross_profit_rate}]}isNullOrUndefinedOrEmpty(e){return null==e||""===e||"0"===e}getCostPrices(e){return(0,S.e_)(Number(e),this.supplierTaxRateAndTaxIncludedFlag.taxRate,this.supplierTaxRateAndTaxIncludedFlag.isTaxIncluded,this.supplierTaxFractionMethod)}getSellingPrices(e,n){return(0,S.e_)(e,this.taxRateAndTaxIncludedFlag.taxRate,n,this.taxFractionMethod)}subscribeCostChanges(e){const n=e.cost.valueChanges.pipe((0,y.x)()).subscribe(r=>{this.handleCostChanges(r,e)});this.subscription.add(n)}handleCostChanges(e,n){if(this.isNullOrUndefinedOrEmpty(e))return n.rate.patchValue("",{emitEvent:!1}),n.price.patchValue("",{emitEvent:!1}),void(n.price===this.fc.selling_price&&(n.price.setErrors({required:!0}),this.fc.selling_price.markAsTouched()));if(!this.isNullOrUndefinedOrEmpty(n.rate.value)){const r=Number(n.cost.value),a=Number(n.rate.value),c=Number(this.division_sales_tax_code),l=this.priceService.getSalesPrice(r,a,c);n.price.patchValue(String(l),{emitEvent:!1})}}subscribeRateChanges(e){const n=e.rate.valueChanges.pipe((0,y.x)()).subscribe(r=>{this.handleRateChanges(r,e)});this.subscription.add(n)}handleRateChanges(e,n){if(this.isNullOrUndefinedOrEmpty(e))return n.price.patchValue("",{emitEvent:!1}),void(n.price===this.fc.selling_price&&(n.price.setErrors({required:!0}),this.fc.selling_price.markAsTouched()));if(Number(e)>99||Number(e)<0)return n.rate.patchValue("",{emitEvent:!1}),void n.rate.setErrors(["required"]);if(!this.isNullOrUndefinedOrEmpty(n.cost.value)){const r=Number(n.cost.value),a=Number(n.rate.value),c=Number(this.division_sales_tax_code),l=this.priceService.getSalesPrice(r,a,c);n.price.patchValue(String(l),{emitEvent:!1})}}subscribePriceChanges(e){const n=e.price.valueChanges.pipe((0,y.x)()).subscribe(r=>{this.handlePriceChanges(r,e)});this.subscription.add(n)}handlePriceChanges(e,n){if(this.isNullOrUndefinedOrEmpty(e))return void n.rate.patchValue("",{emitEvent:!1});const r=(0,S._k)(Number(e));if(n.price.patchValue(String(r),{emitEvent:!1}),!this.isNullOrUndefinedOrEmpty(n.cost.value)){const a=Number(n.cost.value),c=Number(n.price.value),l=Number(this.division_sales_tax_code),R=this.priceService.getGrossProfitRate(a,c,l);n.rate.patchValue(String(Math.round(R)),{emitEvent:!1})}}handleChangePriceData(){this.getPriceData().forEach(n=>{this.subscribeCostChanges(n),this.subscribeRateChanges(n),this.subscribePriceChanges(n)})}onClickReset(){window.location.reload()}handleClickCancelLink(){this.form.pristine?this.router.navigateByUrl(this.listPagePath):this.modalService.setModal(this.cancelModalTitle,p.yR.BODY.CANCEL,"warning",p.yR.BUTTON_TITLE.EXECUTION,p.yR.BUTTON_TITLE.CANCEL)}handleClickSaveButton(){this.common.loading=!0;const n={...this.form.value,sales_tax_division_id:this.salesTaxDivisionId?this.salesTaxDivisionId:this.salesTaxDivisionOptions[1].value,sales_fraction_division_id:this.salesFractionDivisionId?this.salesFractionDivisionId:this.salesFractionDivisionOptions[1].value,supplier_sales_tax_division_id:this.supplierSalesTaxDivisionId?this.supplierSalesTaxDivisionId:this.supplierSalesTaxDivisionOptions[1].value,supplier_sales_fraction_division_id:this.supplierSalesTaxFractionDivisionId?this.supplierSalesTaxFractionDivisionId:this.supplierSalesFractionDivisionOptions[1].value};this.priceRankingService.add(n).pipe((0,b.K)(r=>(this.common.loading=!1,(0,N.of)(r)))).subscribe(r=>{r instanceof v.UA?this.handleError(r.status,r.error?r.error.title:"\u30a8\u30e9\u30fc",r.error?r.error.message:"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002",this.listPagePath):(this.common.loading=!1,this.flashMessageService.setFlashMessage(r.message,"success",15e3),this.router.navigateByUrl(this.listPagePath))})}handleError(e,n,r,a){this.errorService.setError({status:e,title:n?"\u30e9\u30f3\u30af\u4fa1\u683c\u30a8\u30e9\u30fc\uff1a"+n+" "+p.yR.TITLE.HAS_ERROR:"\u30e9\u30f3\u30af\u4fa1\u683c\u30a8\u30e9\u30fc\uff1a"+p.yR.TITLE.HAS_ERROR,message:r,redirectPath:a})}ngOnDestroy(){this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(L),t.Y36(h.qu),t.Y36(j.Y),t.Y36(E.Z),t.Y36(m.F0),t.Y36(G.d),t.Y36(q.E),t.Y36(et.M),t.Y36(Q.P),t.Y36(_.T),t.Y36(x.v),t.Y36(rt.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add"]],decls:37,vars:45,consts:[[3,"breadcrumbList"],[1,"mt-8","text-xl"],[1,"flex","items-center","justify-between","mt-6","mb-2"],[3,"click"],[1,"width-limit-break","border-t","border-gray-400"],[1,"mt-8","mb-24","pt-8","pb-20","px-6","bg-white","shadow","border","border-gray-300"],[1,"text-lg"],[1,"border-t-primary-light-hover","border-t-4"],["autocomplete","off",1,"p-6","mt-6","border","border-b-0","border-gray-200","shadow",3,"formGroup","ngSubmit"],[1,"flex","gap-4"],[1,"w-2/4"],["nameAttrValue","product_name","idAttrValue","product-name",3,"idCtrl","nameCtrl","apiInput","idValueChanges","selectedData"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["message","",4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-1/4"],["nameAttrValue","rank_division_id","idAttrValue","rank-division-id",3,"formCtrl","options","invalid"],["nameAttrValue","store_id","idAttrValue","store-id",3,"formCtrl","options","invalid"],[4,"ngIf"],[1,"width-limit-break","bg-primary-light","flex","flex-row","justify-center","bottom-[40px]","fixed","left-0","right-0","p-2","gap-8"],["btnType","submit","btnFillColor","bg-success hover:bg-success-hover text-white border-success","btnTextColor","text-white","btnLineColor","border-success hover:border-success-hover",3,"buttonDisabled"],["labels",""],["errors",""],["message",""],[1,"mt-4","text-rose-400"],[1,"mt-6","pl-2"],[1,"border-t-warning-hover","border-t-4","mt-1"],[1,"flex","gap-4","mt-4"],[1,"w-[10%]","flex","items-center","justify-center"],[1,"mt-[24px]"],[1,"w-[30%]"],["inputType","number","nameAttrValue","supplier_cost_price","idAttrValue","supplier-cost-price",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","gross_profit_rate","idAttrValue","gross-profit-rate",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","selling_price","idAttrValue","selling-price",3,"formCtrl","textRight","invalid"],[1,"mt-4"],["inputType","number","nameAttrValue","b_supplier_cost_price","idAttrValue","b-supplier-cost-price",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","b_gross_profit_rate","idAttrValue","b-gross-profit-rate",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","b_selling_price","idAttrValue","b-selling-price",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","c_supplier_cost_price","idAttrValue","c-supplier-cost-price",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","c_gross_profit_rate","idAttrValue","c-gross-profit-rate",3,"formCtrl","textRight","invalid"],["inputType","number","nameAttrValue","c_selling_price","idAttrValue","c-selling-price",3,"formCtrl","textRight","invalid"],[1,"flex","items-center","gap-2"],["class","px-3 py-0.5 text-xs text-white bg-warning-dark rounded-full",4,"ngIf"],[1,"px-3","py-0.5","text-xs","text-white","bg-warning-dark","rounded-full"],["class","text-sm text-red",4,"ngIf"],[1,"text-sm","text-red"]],template:function(e,n){if(1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"h2",1),t._uU(2,"\u30e9\u30f3\u30af\u4fa1\u683c\u65b0\u898f\u767b\u9332"),t.qZA(),t.TgZ(3,"div",2)(4,"app-cancel-link-org",3),t.NdJ("click",function(){return n.handleClickCancelLink()}),t.qZA(),t.TgZ(5,"app-last-updater-org"),t._uU(6),t.qZA()(),t._UZ(7,"hr",4),t.TgZ(8,"div",5)(9,"h2",6),t._uU(10,"\u30e9\u30f3\u30af\u4fa1\u683c\u60c5\u5831\u5165\u529b"),t.qZA(),t._UZ(11,"hr",7),t.TgZ(12,"form",8),t.NdJ("ngSubmit",function(){return n.handleClickSaveButton()}),t.TgZ(13,"div",9)(14,"div",10)(15,"app-real-time-suggest-container",11),t.NdJ("idValueChanges",function(a){return n.handleProductIdValueChanges(a)})("selectedData",function(a){return n.handleSelectedProductData(a)}),t.YNc(16,Je,1,0,"ng-container",12),t.YNc(17,Qe,1,0,"ng-container",13),t.qZA()(),t.TgZ(18,"div",14)(19,"app-select-container",15),t.YNc(20,Ke,1,0,"ng-container",12),t.YNc(21,qe,1,0,"ng-container",13),t.qZA()(),t.TgZ(22,"div",14)(23,"app-select-container",16),t.YNc(24,Ge,1,0,"ng-container",12),t.YNc(25,$e,1,0,"ng-container",13),t.qZA()()(),t.YNc(26,je,3,0,"ng-container",17),t.YNc(27,hn,57,90,"ng-container",17),t.TgZ(28,"div",18)(29,"app-button",3),t.NdJ("click",function(){return n.onClickReset()}),t._uU(30,"\u30af\u30ea\u30a2"),t.qZA(),t.TgZ(31,"app-button",19),t._uU(32," \u4fdd\u5b58 "),t.qZA()()()(),t.YNc(33,vn,4,2,"ng-template",null,20,t.W1O),t.YNc(35,An,1,1,"ng-template",null,21,t.W1O)),2&e){const r=t.MAs(34),a=t.MAs(36);t.Q6J("breadcrumbList",t.kEZ(32,Fn,t.VKq(27,bn,n.settingMenuPath),t.VKq(29,On,n.listPagePath),t.DdM(31,Sn))),t.xp6(6),t.hij(" \u767b\u9332\u8005\uff1a",n.updater?n.updater:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),t.xp6(6),t.Q6J("formGroup",n.form),t.xp6(3),t.Q6J("idCtrl",n.fc.product_id)("nameCtrl",n.fc.product_name)("apiInput",n.getProductSuggests()),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.DdM(36,Rn)),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.VKq(37,P,n.fc.product_name)),t.xp6(2),t.Q6J("formCtrl",n.fc.rank_division_id)("options",n.priceRankingDivisionOptions)("invalid",n.formControlStateManager(n.fc.rank_division_id)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.DdM(39,Pn)),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.VKq(40,P,n.fc.rank_division_id)),t.xp6(2),t.Q6J("formCtrl",n.fc.store_id)("options",n.storeOptions)("invalid",n.formControlStateManager(n.fc.store_id)),t.xp6(1),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.DdM(42,In)),t.xp6(1),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.VKq(43,P,n.fc.store_id)),t.xp6(1),t.Q6J("ngIf",!n.isProductSelected),t.xp6(1),t.Q6J("ngIf",n.isProductSelected),t.xp6(4),t.Q6J("buttonDisabled",n.form.invalid)}},dependencies:[u.O5,u.tP,h._Y,h.JL,h.sg,f.Z,K.R,it.Y,$.d,st.O,J.r,W.K]}),i})();var Mn=o(8746),Nn=o(2482),Zn=o(5108);function kn(i,s){1&i&&(t.TgZ(0,"span",19),t._uU(1," \u5fc5\u9808 "),t.qZA())}function Un(i,s){if(1&i&&(t.TgZ(0,"li",15)(1,"div",16),t._uU(2),t.YNc(3,kn,2,0,"span",17),t.qZA(),t.TgZ(4,"div",18),t._uU(5),t.qZA()()),2&i){const e=s.$implicit;t.xp6(2),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf",e.required),t.xp6(2),t.Oqu(e.description)}}function yn(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",20),t._uU(2),t.qZA(),t.TgZ(3,"app-icon",21),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.ctrl.reset())}),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(2),t.Oqu(e.filename)}}const Vn=function(i){return{path:i,text:"\u8a2d\u5b9a\u4e00\u89a7"}},Ln=function(i){return{path:i,text:"\u30e9\u30f3\u30af\u4fa1\u683c\u4e00\u89a7"}},Bn=function(){return{text:"\u30e9\u30f3\u30af\u4fa1\u683c\u4e00\u62ec\u767b\u9332"}},Yn=function(i,s,e){return[i,s,e]},Jn=[{path:"",component:I,children:[{path:"",component:qt},{path:"detail/:id",component:te},{path:"edit/:id",component:Ye},{path:"add",component:Dn},{path:"bulk-add",component:(()=>{class i{constructor(e,n,r,a,c,l){this.authorService=e,this.priceRankingService=n,this.modal=r,this.flash=a,this.router=c,this.common=l,this.subscription=new C.w0,this.listPagePath="/setting/price-ranking",this.settingMenuPath="/setting",this.fileNamePrefix="\u30e9\u30f3\u30af\u4fa1\u683c",this.ctrl=new h.NI(null,h.kI.required),this.descriptions=[{title:"rank_division_id",description:"\u30e9\u30f3\u30af\u533a\u5206ID\uff08\u534a\u89d2\u6570\u5b57\uff09",required:!0},{title:"store_id",description:"\u5e97\u8217ID\uff08\u534a\u89d2\u6570\u5b57\uff09",required:!0},{title:"product_id",description:"\u5546\u54c1ID\uff08\u534a\u89d2\u6570\u5b57\uff09",required:!0},{title:"supplier_cost_price",description:"\u30d0\u30e9\u4ed5\u5165\u5358\u4fa1\uff08\u534a\u89d2\u6570\u5b57\uff09",required:!0},{title:"b_supplier_cost_price",description:"\u5c0f\u5206\u3051\u4ed5\u5165\u5358\u4fa1\uff08\u534a\u89d2\u6570\u5b57\uff09"},{title:"c_supplier_cost_price",description:"\u30b1\u30fc\u30b9\u4ed5\u5165\u5358\u4fa1\uff08\u534a\u89d2\u6570\u5b57\uff09"},{title:"gross_profit_rate",description:"\u30d0\u30e9\u8352\u5229\u7387\uff08\u534a\u89d2\u6570\u5b57\uff09"},{title:"b_gross_profit_rate",description:"\u5c0f\u5206\u3051\u8352\u5229\u7387\uff08\u534a\u89d2\u6570\u5b57\uff09"},{title:"c_gross_profit_rate",description:"\u30b1\u30fc\u30b9\u8352\u5229\u7387\uff08\u534a\u89d2\u6570\u5b57\uff09"},{title:"selling_price",description:"\u30d0\u30e9\u58f2\u4fa1\uff08\u534a\u89d2\u6570\u5b57\uff09",required:!0},{title:"b_selling_price",description:"\u5c0f\u5206\u3051\u58f2\u4fa1\uff08\u534a\u89d2\u6570\u5b57\uff09"},{title:"c_selling_price",description:"\u30b1\u30fc\u30b9\u58f2\u4fa1\uff08\u534a\u89d2\u6570\u5b57\uff09"},{title:"sales_tax_division_id",description:"\u5546\u54c1\u6d88\u8cbb\u7a0e\u533a\u5206ID\uff08\u5916\u7a0e10%\uff1a28\u3001\u5185\u7a0e10%\uff1a29\u3001\u975e\u8ab2\u7a0e\uff1a30\u3001\u5916\u7a0e8%\uff1a31\u3001\u5185\u7a0e8%\uff1a32\uff09",required:!0},{title:"sales_fraction_division_id",description:"\u5546\u54c1\u6d88\u8cbb\u7a0e\u7aef\u6570\u533a\u5206ID\uff08\u5207\u308a\u6368\u3066\uff1a4\u3001\u5207\u308a\u4e0a\u3052\uff1a5\u3001\u56db\u6368\u4e94\u5165\uff1a6\uff09",required:!0},{title:"supplier_sales_tax_division_id",description:"\u4ed5\u5165\u5148\u6d88\u8cbb\u7a0e\u533a\u5206ID\uff08\u5916\u7a0e\uff1a33\u3001\u5185\u7a0e\uff1a34\u3001\u975e\u8ab2\u7a0e\uff1a35\uff09",required:!0},{title:"supplier_sales_fraction_division_id",description:"\u4ed5\u5165\u5148\u6d88\u8cbb\u7a0e\u7aef\u6570\u533a\u5206ID\uff08\u5207\u308a\u6368\u3066\uff1a4\u3001\u5207\u308a\u4e0a\u3052\uff1a5\u3001\u56db\u6368\u4e94\u5165\uff1a6\uff09",required:!0}]}ngOnInit(){this.authorService.author?(this.author=this.authorService.author,this.updater=this.author.last_name+" "+this.author.first_name):this.subscription.add(this.authorService.author$.subscribe(e=>{this.author=e,this.updater=this.author.last_name+" "+this.author.first_name})),this.subscription.add(this.ctrl.valueChanges.subscribe(e=>this.filename=e?.name)),this.template$=this.priceRankingService.getCsv("template").pipe((0,b.K)(this.handleError("")))}handleClickCancelLink(){this.router.navigateByUrl(this.listPagePath)}onClickUpload(){!this.ctrl.value||(this.common.loading=!0,this.subscription.add(this.priceRankingService.bulkAdd(this.ctrl.value).pipe((0,b.K)(this.handleError({})),(0,Mn.x)(()=>this.common.loading=!1)).subscribe(e=>{"\u767b\u9332\u3057\u307e\u3057\u305f"===e.message&&(this.flash.setFlashMessage("\u30e9\u30f3\u30af\u4fa1\u683c\u60c5\u5831\u304c\u6b63\u5e38\u306b\u767b\u9332\u3055\u308c\u307e\u3057\u305f\u3002","success",15e3),this.router.navigateByUrl(this.listPagePath)),"\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u51e6\u7406\u3092\u767b\u9332\u3057\u307e\u3057\u305f"===e.message&&(this.flash.setFlashMessage("\u30e9\u30f3\u30af\u4fa1\u683c\u60c5\u5831\u66f4\u65b0\u304c\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3067\u306e\u51e6\u7406\u306b\u767b\u9332\u3055\u308c\u307e\u3057\u305f\u3002","success",15e3),this.router.navigateByUrl(this.listPagePath))})))}handleError(e){return n=>(console.error(n),this.modal.setModal(p.yR.TITLE.HAS_ERROR,`${n.message}\n\n${n.error.message}`,"danger","\u9589\u3058\u308b",""),(0,N.of)(e))}ngOnDestroy(){this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(j.Y),t.Y36(L),t.Y36(E.Z),t.Y36(Q.P),t.Y36(m.F0),t.Y36(x.v))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-bulk-add"]],decls:20,vars:17,consts:[[3,"breadcrumbList"],[1,"mt-8","text-xl"],[1,"flex","items-center","justify-between","mt-6","mb-2"],[3,"click"],[1,"width-limit-break","border-t","border-gray-400"],[1,"flex","justify-end","mt-8",3,"api$","fileNamePrefix","statusChange"],[1,"mt-2","mb-28","py-8","px-6","bg-white","shadow","border","border-gray-300"],[1,"text-lg","mb-4"],[1,"mb-8"],["class","flex border border-b-0 last:border-b border-slate-400",4,"ngFor","ngForOf"],[1,"flex","justify-between","mb-2"],[1,"flex","items-center"],["accept","text/csv",3,"formCtrl"],[4,"ngIf"],["btnFillColor","bg-success hover:bg-success-hover border-success text-white",3,"buttonDisabled","click"],[1,"flex","border","border-b-0","last:border-b","border-slate-400"],[1,"flex","items-center","w-[400px]","bg-slate-100","p-4"],["class","px-3 py-0.5 ml-2 text-xs text-white bg-warning-dark rounded-full",4,"ngIf"],[1,"grow","p-4"],[1,"px-3","py-0.5","ml-2","text-xs","text-white","bg-warning-dark","rounded-full"],[1,"ml-4"],["icon","delete-bin-line",1,"w-6","cursor-pointer","ml-2","fill-red-500",3,"click"]],template:function(e,n){1&e&&(t._UZ(0,"app-breadcrumb-org",0),t.TgZ(1,"h2",1),t._uU(2,"\u30e9\u30f3\u30af\u4fa1\u683c\u65b0\u898f\u767b\u9332"),t.qZA(),t.TgZ(3,"div",2)(4,"app-cancel-link-org",3),t.NdJ("click",function(){return n.handleClickCancelLink()}),t.qZA(),t.TgZ(5,"app-last-updater-org"),t._uU(6),t.qZA()(),t._UZ(7,"hr",4),t.TgZ(8,"app-template-download-link-org",5),t.NdJ("statusChange",function(a){return n.common.loading=!!a}),t.qZA(),t.TgZ(9,"div",6)(10,"p",7),t._uU(11,"CSV\u30d5\u30a1\u30a4\u30eb\u306e\u30d8\u30c3\u30c0\u30fc\u3068\u5024"),t.qZA(),t.TgZ(12,"ul",8),t.YNc(13,Un,6,3,"li",9),t.qZA(),t.TgZ(14,"div",10)(15,"div",11),t._UZ(16,"app-file",12),t.YNc(17,yn,4,1,"ng-container",13),t.qZA(),t.TgZ(18,"app-button",14),t.NdJ("click",function(){return n.onClickUpload()}),t._uU(19," \u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u5b9f\u884c "),t.qZA()()()),2&e&&(t.Q6J("breadcrumbList",t.kEZ(13,Yn,t.VKq(8,Vn,n.settingMenuPath),t.VKq(10,Ln,n.listPagePath),t.DdM(12,Bn))),t.xp6(6),t.hij(" \u767b\u9332\u8005\uff1a",n.updater?n.updater:"\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d..."," "),t.xp6(2),t.Q6J("api$",n.template$)("fileNamePrefix",n.fileNamePrefix),t.xp6(5),t.Q6J("ngForOf",n.descriptions),t.xp6(3),t.Q6J("formCtrl",n.ctrl),t.xp6(1),t.Q6J("ngIf",n.ctrl.value),t.xp6(1),t.Q6J("buttonDisabled",n.ctrl.invalid))},dependencies:[u.sg,u.O5,f.Z,K.R,J.r,W.K,Nn.V,Zn.P,nt.o]}),i})()}]}];let Qn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[m.Bz.forChild(Jn),m.Bz]}),i})();var Kn=o(9307),qn=o(9104),ut=o(3894),pt=o(8511),_t=o(9434),dt=o(4854),Gn=o(855);let $n=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.ez,h.UX,ut.h,pt.Q,_t.H,dt.C,Gn.W]}),i})();var jn=o(4933),Wn=o(6968),wn=o(4560);let zn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.ez,wn.Z]}),i})();var Xn=o(4470),Hn=o(5274),ti=o(3560),ei=o(3042),ni=o(3962),ii=o(2923),ri=o(6321),si=o(4663);let oi=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[x.v],imports:[u.ez,Qn,h.UX,Kn.u,qn.u,$n,jn.M,Wn.V,zn,Xn.x,dt.C,_t.H,Hn.s,ut.h,ti.r,ei.C,ni.J,ii.D,ri.T,si.Q,pt.Q]}),i})()},9042:(Z,O,o)=>{o.d(O,{z:()=>u});const u={SALES_FRACTION:"\u8ca9\u58f2\u7aef\u6570\u533a\u5206",SALES_TAX:"\u5546\u54c1\u6d88\u8cbb\u7a0e\u533a\u5206",SALES_TAX_FRACTION:"\u8ca9\u58f2\u7aef\u6570\u533a\u5206",DISCOUNT:"\u5024\u5f15\u304d\u533a\u5206",UNIT:"\u5358\u4f4d\u533a\u5206",PRODUCT:"\u5546\u54c1\u533a\u5206",POINT:"\u30dd\u30a4\u30f3\u30c8\u533a\u5206",ISSUANCE_WARRANTY:"\u4fdd\u8a3c\u66f8\u767a\u884c\u533a\u5206",SEAL_PRINT:"\u30e9\u30d9\u30eb\u30b7\u30fc\u30eb\u5370\u5237\u533a\u5206",PRICE_TAG:"\u30dd\u30c3\u30d7\u30b7\u30fc\u30eb\u533a\u5206",SHELF:"\u9673\u5217\u68da\u533a\u5206",SHELF_COL:"\u9673\u5217\u68da\u5217\u533a\u5206",DATA_PERMISSION:"\u30c7\u30fc\u30bf\u516c\u958b\u533a\u5206",SUPPLIER_SALES_TAX:"\u4ed5\u5165\u5148\u6d88\u8cbb\u7a0e\u533a\u5206",SUPPLIER_SALES_FRACTION:"\u8ca9\u58f2\u7aef\u6570\u533a\u5206",REPAIR_TYPE:"\u4fee\u7406\u30bf\u30a4\u30d7\u533a\u5206",REPAIR_STATUS:"\u4fee\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",REPAIR_SLIP_STATUS:"\u4fee\u7406\u53d7\u4ed8\u7968\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",REPAIR_SETTLE_STATUS:"\u4fee\u7406\u7cbe\u7b97\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",CONTACT:"\u9023\u7d61\u533a\u5206",MEMBER_STATUS:"\u4f1a\u54e1\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",PURCHASE_ORDER_STATUS:"\u767a\u6ce8\u66f8\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",ORDER_STATUS:"\u767a\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",DELIVERY_REQUEST:"\u914d\u9001\u4f9d\u983c\u533a\u5206",COLLECTION_REQUEST:"\u56de\u53ce\u4f9d\u983c\u533a\u5206",DELIVERY:"\u914d\u9001\u533a\u5206",CUSTOMER_ORDER_RECEPTION_SLIP_STATUS:"\u5ba2\u6ce8\u53d7\u4ed8\u7968\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",CUSTOMER_ORDER_STATUS:"\u5ba2\u6ce8\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",SETTLE_STATUS:"\u7cbe\u7b97\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",INCIDENT:"\u30a4\u30f3\u30b7\u30c7\u30f3\u30c8\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",CUSTOMER_TYPE:"\u304a\u5ba2\u69d8\u30bf\u30a4\u30d7\u533a\u5206",RENTAL_SLIP_STATUS:"\u30ec\u30f3\u30bf\u30eb\u4e88\u7d04\u53d7\u4ed8\u7968\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",RENTAL_PRODUCT_STATUS:"\u30ec\u30f3\u30bf\u30eb\u5546\u54c1\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",RENTAL_PRODUCT_DIVISION:"\u30ec\u30f3\u30bf\u30eb\u5546\u54c1\u516c\u958b\u533a\u5206",ACCOUNTS_RECEIVABLE_DATA_STATUS_CATEGORY:"\u58f2\u639b\u91d1\u96c6\u8a08\u30c7\u30fc\u30bf\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",ACCOUNTS_PAYABLE_DATA_STATUS_CATEGORY:"\u8cb7\u639b\u91d1\u96c6\u8a08\u30c7\u30fc\u30bf\u30b9\u30c6\u30fc\u30bf\u30b9\u533a\u5206",PRICE_RANKING:"\u30e9\u30f3\u30af\u4fa1\u683c\u533a\u5206",DIVISION_UNIT_CATEGORY:"\u6700\u5c0f\u767a\u6ce8\u5358\u4f4d\u533a\u5206",CLIENT_PAYMENT_TYPE:"\u5f97\u610f\u5148\u652f\u6255\u533a\u5206",CLIENT_PRINT_TYPE:"\u5f97\u610f\u5148\u5370\u5237\u533a\u5206",CLIENT_SALES_TAX:"\u5f97\u610f\u5148\u6d88\u8cbb\u7a0e\u533a\u5206",CLIENT_SALES_TAX_CALC_TYPE:"\u5f97\u610f\u5148\u6d88\u8cbb\u7a0e\u8a08\u7b97\u533a\u5206",CLIENT_TITLE:"\u5f97\u610f\u5148\u656c\u79f0\u533a\u5206",MAIN_SALES_TAX_FRACTION:"\u6d88\u8cbb\u7a0e\u7aef\u6570\u533a\u5206",TERM_OF_PAYMENT:"\u652f\u6255\u3044\u30b5\u30a4\u30c8",DEPOSIT_CLASSIFICATION:"\u5165\u91d1\u533a\u5206"}},6232:(Z,O,o)=>{o.d(O,{E:()=>p});var u=o(2340),m=o(262),C=o(4004),A=o(1751),T=o(529),g=o(1571);let p=(()=>{class t extends A.O{constructor(){super(...arguments),this.endpoint=u.pU.divisionApi.endpoint}getAll(_={}){return this.httpOptions.params=_,this.http.get(this.endpoint,this.httpOptions)}find(_){return this.http.get(`${this.endpoint}/${_}`)}getCsv(_){const x={responseType:"text",headers:new T.WM({"X-Download":_})};return this.http.get(this.endpoint,x).pipe((0,m.K)(this.setErrorMessage("\u4e00\u62ec\u767b\u9332\u7528\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u53d6\u5f97")))}add(_){const x=this.generateFormData(_);return this.http.post(this.endpoint,x)}bulkAdd(_){const x=this.generateFormData({file:_});return this.http.put(this.endpoint,x)}update(_,x){const F=this.generateFormData(x);return this.http.patch(`${this.endpoint}/${_}`,F)}remove(_){return this.http.delete(`${this.endpoint}/${_}`)}getAsSelectOptions(_){return this.getAll(_).pipe((0,C.U)(x=>{const F={},I=new Set(x.data.map(d=>d.name));for(const d of I)F[d]=this.generateSelectOptions(x.data,d);return F}))}generateSelectOptions(_,x){return _.filter(I=>I.name===x).map(({id:I,value:d,division_code:f})=>({value:I,text:d,code:f}))}}return t.\u0275fac=function(){let E;return function(x){return(E||(E=g.n5z(t)))(x||t)}}(),t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},6082:(Z,O,o)=>{o.d(O,{M:()=>x});var u=o(2340),m=o(262),C=o(4004),A=o(8372),T=o(1884),g=o(3900),p=o(9646),t=o(1751),E=o(529),_=o(1571);let x=(()=>{class F extends t.O{constructor(){super(...arguments),this.endpoint=u.pU.productApi.endpoint}getAll(d={}){return this.httpOptions.params=d,this.http.get(this.endpoint,this.httpOptions).pipe((0,m.K)(this.setErrorMessage("\u5546\u54c1\u4e00\u89a7\u306e\u53d6\u5f97")))}get(d,f={}){return this.getAll({...f,supplier_id:d})}getCsv(d,f){const v={params:f,responseType:"text",headers:new E.WM({"X-Download":d})};return this.http.get(this.endpoint,v).pipe((0,m.K)(this.setErrorMessage("\u4e00\u62ec\u767b\u9332\u7528\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u53d6\u5f97")))}find(d){return this.http.get(`${this.endpoint}/${d}`).pipe((0,m.K)(this.setErrorMessage("\u5546\u54c1\u60c5\u5831\u306e\u53d6\u5f97")))}add(d){const f=this.generateFormData(d);return this.http.post(this.endpoint,f).pipe((0,m.K)(this.setErrorMessage("\u5546\u54c1\u60c5\u5831\u306e\u767b\u9332")))}bulkAdd(d){const f=this.generateFormData({file:d});return this.http.put(this.endpoint,f).pipe((0,m.K)(this.setErrorMessage("\u5546\u54c1\u60c5\u5831\u306e\u4e00\u62ec\u767b\u9332")))}update(d,f){const v=this.generateFormData(f);return this.http.patch(`${this.endpoint}/${d}`,v).pipe((0,m.K)(this.setErrorMessage("\u5546\u54c1\u60c5\u5831\u306e\u66f4\u65b0")))}remove(d){return this.http.delete(`${this.endpoint}/${d}`).pipe((0,m.K)(this.setErrorMessage("\u5546\u54c1\u60c5\u5831\u306e\u524a\u9664")))}getAsSelectOptions(d){return this.getAll(d).pipe((0,C.U)(f=>f.data.map(v=>({text:v.name+"",value:v.id}))))}getAsSelectOptionsForNameSearch(d){return this.getAll(d).pipe((0,C.U)(f=>f.data.map(v=>({text:v.name+"",value:v.name}))))}observableProductId(d,f,v){v.loading=!1,d.valueChanges.pipe((0,A.b)(500),(0,T.x)(),(0,g.w)(M=>this.observableSetProductName(String(M),f,v))).subscribe()}observableSetProductName(d,f,v){return null==d||""===d?(f.setValue("",{emitEvent:!1}),(0,p.of)()):(v.loading=!0,this.find(Number(d)).pipe((0,C.U)(M=>{const b=M.data[0];v.loading=!1,f.setValue(b?.name,{emitEvent:!1})}),(0,m.K)(M=>(v.loading=!1,this.handleErrorModal()(M)))))}}return F.\u0275fac=function(){let I;return function(f){return(I||(I=_.n5z(F)))(f||F)}}(),F.\u0275prov=_.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})()},2e3:(Z,O,o)=>{o.d(O,{d:()=>T});var u=o(2340),m=o(4004),C=o(1751),A=o(1571);let T=(()=>{class g extends C.O{constructor(){super(...arguments),this.storeEndpoint=u.pU.storeApi.endpoint}getAll(t={}){return this.httpOptions.params=t,this.http.get(this.storeEndpoint,this.httpOptions)}find(t){return this.http.get(`${this.storeEndpoint}/${t}`)}add(t){const E=this.generateFormData(t);return this.http.post(this.storeEndpoint,E)}update(t,E){const _=this.generateFormData(E);return this.http.patch(`${this.storeEndpoint}/${t}`,_)}remove(t){return this.http.delete(`${this.storeEndpoint}/${t}`)}getAsSelectOptions(){return this.getAll().pipe((0,m.U)(t=>t.data.map(_=>({value:_.id,text:_.name}))))}}return g.\u0275fac=function(){let p;return function(E){return(p||(p=A.n5z(g)))(E||g)}}(),g.\u0275prov=A.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);