"use strict";(self.webpackChunknisshin=self.webpackChunknisshin||[]).push([[856],{7540:(x,m,o)=>{o.d(m,{X:()=>D});var u=o(4006),C=o(121),v=o(727),w=o(7579),t=o(1571),_=o(6895),E=o(6303),l=o(3761);function g(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.selectedValue.text)}}function r(n,c){if(1&n&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.placeholder)}}function a(n,c){1&n&&(t.ynx(0),t._UZ(1,"app-icon",10),t.BQk())}function p(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"app-icon",11),t.NdJ("mousedown",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.deleteValue())}),t.qZA()}}function h(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"li",18),t.NdJ("click",function(){const f=t.CHM(e).$implicit,b=t.oxw(3);return t.KtG(b.onClick(f))}),t._uU(1),t.qZA()}if(2&n){const e=c.$implicit;t.xp6(1),t.hij(" ",e.text," ")}}function d(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"ul",15),t.NdJ("mouseover",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onMouseover())})("mouseout",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onMouseout())}),t._UZ(1,"li",16),t.YNc(2,h,2,1,"li",17),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.results)}}const O=function(n,c){return{"top-[44px]":n,"bottom-0":c}};function S(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"input",13),t.NdJ("focus",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onFocus())})("blur",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onBlur())}),t.qZA(),t.YNc(2,d,3,1,"ul",14),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("ngClass",t.WLB(5,O,!e.isAtBottom,e.isAtBottom)),t.xp6(1),t.Q6J("name",e.nameAttrValue)("id",e.idAttrValue)("formControl",e.suggestCtrl),t.xp6(1),t.Q6J("ngIf",e.results)}}const M=["*",[["","message",""]]],A=["*","[message]"];let D=(()=>{class n{constructor(e){this.fb=e,this.invalid=!1,this.labelSize="base",this.isAtBottom=!1,this.placeholder="\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",this.isHover=!1,this.isOpen=!1,this.suggestInputId=this.idAttrValue+"-suggest",this.SUGGESTION_MAX_LENGTH=5,this.subscription=new v.w0,this.idValueChanges=new w.x,this.suggestForm=this.fb.group({suggest:""})}set suggests(e){if(this.formCtrl.value&&e){const s=this.formCtrl.value,i=e.filter(f=>String(f.value)===s);this.selectedValue=i[0]}this.selectOptions=e}get suggestCtrl(){return this.suggestForm.controls.suggest}ngOnInit(){this.formCtrl.value&&this.formCtrl.markAsDirty(),this.subscription.add(this.formCtrl.valueChanges.subscribe(e=>{""===e||null==e?(this.selectedValue=void 0,this.suggestCtrl.patchValue(""),this.idValueChanges.next("")):((e.text||e.value)&&null==this.selectedValue&&(this.selectedValue=e,this.suggestCtrl.patchValue(e.text),this.formCtrl.patchValue(e.value)),this.formCtrl.markAsDirty())}))}ngOnDestroy(){this.subscription.unsubscribe()}openSuggestPanel(){this.isOpen||(this.isOpen=!0,setTimeout(()=>{const e=document.querySelector(`input[name="${this.nameAttrValue}"]`);e&&e.focus()},0))}onFocus(){this.results=this.selectedValue?[this.selectedValue]:this.selectOptions;const s=new C.Z(this.selectOptions,{shouldSort:!0,keys:["text","data"]});this.subscription.add(this.suggestForm.controls.suggest.valueChanges.subscribe(i=>{null!==i&&(this.results=s.search(i).map(f=>f.item))}))}onBlur(){this.isHover||(this.formCtrl.markAsTouched({onlySelf:!0}),this.isOpen=!1)}onMouseover(){this.isHover=!0}onMouseout(){this.isHover=!1}onClick(e){this.selectedValue=e,this.suggestCtrl.patchValue(e.text),this.formCtrl.patchValue(e.value),this.destroySuggests(),this.idValueChanges.next(String(e.value))}deleteValue(){this.selectedValue=void 0,this.suggestCtrl.patchValue(""),this.formCtrl.patchValue(""),this.destroySuggests()}destroySuggests(){this.results=void 0,this.isHover=!1,this.isOpen=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-select-suggest-container"]],inputs:{nameAttrValue:"nameAttrValue",idAttrValue:"idAttrValue",formCtrl:"formCtrl",invalid:"invalid",labelSize:"labelSize",isAtBottom:"isAtBottom",placeholder:"placeholder",suggests:"suggests"},outputs:{idValueChanges:"idValueChanges"},features:[t._Bn([{provide:u.ve,useValue:!1}])],ngContentSelectors:A,decls:17,vars:13,consts:[[1,"block","ml-1","mb-1",3,"labelSize","forAttrValue"],[1,"relative"],["tabindex","0",1,"flex","justify-between","border","bg-white","border-iron-blue-400","rounded","p-2","w-full","h-[42px]","items-center","px-3","cursor-pointer","whitespace-nowrap","overflow-hidden","focus:placeholder-transparent","focus:outline-none","focus:border","focus:border-primary","focus:ring-1",3,"ngClass","mousedown"],[4,"ngIf","ngIfElse"],["selectValPlaceholder",""],["closeIcon",""],["hidden","",3,"name","id","formControl"],[3,"value"],["class","absolute w-full z-10 border border-slate-300 border-t-0 shadow-xl",3,"ngClass",4,"ngIf"],[1,"text-slate-500"],["icon","arrow-down-s-fill",1,"w-6","ml-1","fill-slate-500","cursor-pointer"],["icon","close-line",1,"w-6","ml-1","fill-slate-500","cursor-pointer",3,"mousedown"],[1,"absolute","w-full","z-10","border","border-slate-300","border-t-0","shadow-xl",3,"ngClass"],["type","text","placeholder","\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",1,"cursor-pointer",3,"name","id","formControl","focus","blur"],["class","max-h-[180px] overflow-auto",3,"mouseover","mouseout",4,"ngIf"],[1,"max-h-[180px]","overflow-auto",3,"mouseover","mouseout"],[1,"bg-white"],["class","bg-white hover:bg-slate-100 cursor-pointer p-2",3,"click",4,"ngFor","ngForOf"],[1,"bg-white","hover:bg-slate-100","cursor-pointer","p-2",3,"click"]],template:function(e,s){if(1&e&&(t.F$t(M),t.TgZ(0,"app-label",0),t.Hsn(1),t.qZA(),t.TgZ(2,"div",1)(3,"div",2),t.NdJ("mousedown",function(){return s.openSuggestPanel()}),t.TgZ(4,"div"),t.YNc(5,g,3,1,"ng-container",3),t.YNc(6,r,2,1,"ng-template",null,4,t.W1O),t.qZA(),t.TgZ(8,"div"),t.YNc(9,a,2,0,"ng-container",3),t.YNc(10,p,1,0,"ng-template",null,5,t.W1O),t.qZA()(),t.TgZ(12,"select",6)(13,"option",7),t._uU(14),t.qZA()(),t.YNc(15,S,3,8,"div",8),t.qZA(),t.Hsn(16,1)),2&e){const i=t.MAs(7),f=t.MAs(11);t.Q6J("labelSize",s.labelSize)("forAttrValue",s.idAttrValue),t.xp6(3),t.Q6J("ngClass",s.invalid?"outline-none ring-1 ring-warning":""),t.xp6(2),t.Q6J("ngIf",void 0!==s.selectedValue)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf",void 0===s.selectedValue)("ngIfElse",f),t.xp6(3),t.Q6J("name",s.nameAttrValue)("id",s.idAttrValue)("formControl",s.formCtrl),t.xp6(1),t.Q6J("value",null==s.selectedValue?null:s.selectedValue.value),t.xp6(1),t.Oqu(null==s.selectedValue?null:s.selectedValue.text),t.xp6(1),t.Q6J("ngIf",s.isOpen)}},dependencies:[_.mk,_.sg,_.O5,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.oH,E._,l.o],styles:["input[_ngcontent-%COMP%]{display:block;width:100%;border-radius:.25rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(203 213 225 / var(--tw-border-opacity));padding:.5rem}input[_ngcontent-%COMP%]:focus{border-width:1px;--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity))}input[_ngcontent-%COMP%]:focus::placeholder{color:transparent}input[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.invalid[_ngcontent-%COMP%]{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(234 179 8 / var(--tw-ring-opacity)) }"]}),n})()},7090:(x,m,o)=>{o.d(m,{G:()=>E});var u=o(4006),C=o(6895),v=o(6320),w=o(973),t=o(8511),_=o(1571);let E=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=_.oAB({type:l}),l.\u0275inj=_.cJS({imports:[C.ez,u.UX,v.r,w.Y,t.Q]}),l})()},6232:(x,m,o)=>{o.d(m,{E:()=>E});var u=o(2340),C=o(262),v=o(4004),w=o(1751),t=o(529),_=o(1571);let E=(()=>{class l extends w.O{constructor(){super(...arguments),this.endpoint=u.pU.divisionApi.endpoint}getAll(r={}){return this.httpOptions.params=r,this.http.get(this.endpoint,this.httpOptions)}find(r){return this.http.get(`${this.endpoint}/${r}`)}getCsv(r){const a={responseType:"text",headers:new t.WM({"X-Download":r})};return this.http.get(this.endpoint,a).pipe((0,C.K)(this.setErrorMessage("\u4e00\u62ec\u767b\u9332\u7528\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u53d6\u5f97")))}add(r){const a=this.generateFormData(r);return this.http.post(this.endpoint,a)}bulkAdd(r){const a=this.generateFormData({file:r});return this.http.put(this.endpoint,a)}update(r,a){const p=this.generateFormData(a);return this.http.patch(`${this.endpoint}/${r}`,p)}remove(r){return this.http.delete(`${this.endpoint}/${r}`)}getAsSelectOptions(r){return this.getAll(r).pipe((0,v.U)(a=>{const p={},h=new Set(a.data.map(d=>d.name));for(const d of h)p[d]=this.generateSelectOptions(a.data,d);return p}))}generateSelectOptions(r,a){return r.filter(h=>h.name===a).map(({id:h,value:d,division_code:O})=>({value:h,text:d,code:O}))}}return l.\u0275fac=function(){let g;return function(a){return(g||(g=_.n5z(l)))(a||l)}}(),l.\u0275prov=_.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);